<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Sweetwater&#39;s blog">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="Sweetwater&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Sweetwater">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Sweetwater's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Sweetwater's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/14/myblog/java/java%20junit%E4%B8%8Emock%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Sweetwater">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sweetwater's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/14/myblog/java/java%20junit%E4%B8%8Emock%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">javaçš„junitä¸mockæµ‹è¯•</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-14 22:22:37" itemprop="dateCreated datePublished" datetime="2022-04-14T22:22:37+08:00">2022-04-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-18 14:13:33" itemprop="dateModified" datetime="2023-02-18T14:13:33+08:00">2023-02-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å•å…ƒæµ‹è¯•(Unit test)ï¼š<br>å•å…ƒæµ‹è¯•å…³æ³¨å•ä¸€çš„ç±». å®ƒä»¬å­˜åœ¨çš„ç›®çš„æ˜¯æ£€æŸ¥è¿™ä¸ªç±»ä¸­çš„ä»£ç æ˜¯å¦æŒ‰ç…§æœŸæœ›æ­£ç¡®è¿è¡Œ.<br>ç‰¹å¾ï¼šå¿«é€Ÿã€ç‹¬ç«‹ã€å¯é‡å¤ã€è‡ªæ£€æŸ¥ï¼ˆä¸åŠ mainä¸æ‰“æ—¥å¿—ï¼‰<br>æ ¸å¿ƒä»·å€¼ï¼šç¼©çŸ­åé¦ˆå‘¨æœŸï¼Œé™ä½ç¼ºé™·ä¿®å¤æˆæœ¬ï¼Œç†è§£ä»£ç æ„å›¾</p>
<p>é›†æˆæµ‹è¯•(Integration test)<br>é¡¾åæ€ä¹‰, é›†æˆæµ‹è¯•æ˜¯æ£€æŸ¥å¼€å‘çš„æ¨¡å—å’Œå…¶ä»–æ¨¡å—æ•´åˆæ—¶æ˜¯å¦æ­£å¸¸å·¥ä½œ.<br>è™½ç„¶é›†æˆæµ‹è¯•çš„ä»£ç å½±å“èŒƒå›´æ¯”å•å…ƒæµ‹è¯•è¦å¹¿, ä½†æ˜¯é›†æˆæµ‹è¯•å’Œå•å…ƒæµ‹è¯•ä¸€æ ·, ä¹Ÿæ˜¯é’ˆå¯¹äºå¼€å‘è€…è€Œè¨€çš„.<br>é›†æˆæµ‹è¯•æ˜¯å¯¹å¤–éƒ¨ç³»ç»Ÿï¼ˆæ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰æœ‰ä¾èµ–çš„æµ‹è¯•ã€‚</p>
<p>ç«¯åˆ°ç«¯æµ‹è¯•(End-to-End test)<br>ç«¯åˆ°ç«¯æµ‹è¯•æ˜¯å°†æ•´ä¸ªç³»ç»Ÿä½œä¸ºä¸€ä¸ªæ•´ä½“, ç„¶åä»ç”¨æˆ·çš„è§’åº¦è¿›è¡Œæµ‹è¯•çš„.<br>ç«¯åˆ°ç«¯æµ‹è¯•çš„ç›®çš„æ˜¯æµ‹è¯•ç³»ç»Ÿåœ¨å®é™…ä½¿ç”¨çš„æ˜¯å¦æ­£å¸¸çš„, å› æ­¤é€šå¸¸æ¥è¯´æ˜¯ä¸éœ€è¦æµ‹è¯•æ›¿èº«çš„(Test Double)</p>
<h2 id="1-Junitå•å…ƒæµ‹è¯•"><a href="#1-Junitå•å…ƒæµ‹è¯•" class="headerlink" title="1.Junitå•å…ƒæµ‹è¯•"></a>1.Junitå•å…ƒæµ‹è¯•</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>å•å…ƒæµ‹è¯•çš„ç›®çš„: æµ‹è¯•å½“å‰æ‰€å†™çš„ä»£ç æ˜¯å¦æ˜¯æ­£ç¡®çš„, ä¾‹å¦‚è¾“å…¥ä¸€ç»„æ•°æ®, ä¼šè¾“å‡ºæœŸæœ›çš„æ•°æ®; è¾“å…¥é”™è¯¯æ•°æ®, ä¼šäº§ç”Ÿé”™è¯¯å¼‚å¸¸ç­‰.</p>
<p>åœ¨å•å…ƒæµ‹è¯•ä¸­, æˆ‘ä»¬éœ€è¦ä¿è¯è¢«æµ‹ç³»ç»Ÿæ˜¯ç‹¬ç«‹çš„(SUT æ²¡æœ‰ä»»ä½•çš„ DOC), å³å½“è¢«æµ‹ç³»ç»Ÿé€šè¿‡æµ‹è¯•æ—¶, é‚£ä¹ˆå®ƒåœ¨ä»»ä½•ç¯å¢ƒä¸‹éƒ½æ˜¯èƒ½å¤Ÿæ­£å¸¸å·¥ä½œçš„. ç¼–å†™å•å…ƒæµ‹è¯•æ—¶, ä»…ä»…éœ€è¦å…³æ³¨å•ä¸ªç±»å°±å¯ä»¥äº†. è€Œä¸éœ€è¦å…³æ³¨ä¾‹å¦‚æ•°æ®åº“æœåŠ¡, Web æœåŠ¡ç­‰ç»„ä»¶.</p>
<p>ã€SUTã€‘è¢«æµ‹ç³»ç»Ÿ(System under test, SUT) è¢«æµ‹ç³»ç»Ÿã€‚æ ¹æ®æµ‹è¯•ç±»å‹çš„ä¸åŒ, SUT æŒ‡ä»£çš„å†…å®¹ä¹Ÿä¸åŒ, ä¾‹å¦‚ SUT å¯ä»¥æ˜¯ä¸€ä¸ªç±»ç”šè‡³æ˜¯ä¸€æ•´ä¸ªç³»ç»Ÿ.</p>
<p>ã€DOCã€‘è¢«æµ‹ç³»ç»Ÿæ‰€ä¾èµ–çš„ç»„ä»¶, ä¾‹å¦‚è¿›ç¨‹ UserService çš„å•å…ƒæµ‹è¯•æ—¶, UserService ä¼šä¾èµ– UserDao, å› æ­¤ UserDao å°±æ˜¯ DOC</p>
<p>ã€Test Doubleã€‘æµ‹è¯•æ›¿èº«<br>ä¸€ä¸ªå®é™…çš„ç³»ç»Ÿä¼šä¾èµ–å¤šä¸ªå¤–éƒ¨å¯¹è±¡, ä½†æ˜¯åœ¨è¿›è¡Œå•å…ƒæµ‹è¯•æ—¶, æˆ‘ä»¬ä¼šç”¨ä¸€äº›åŠŸèƒ½è¾ƒä¸ºç®€å•çš„å¹¶ä¸”å…¶è¡Œä¸ºå’Œå®é™…å¯¹è±¡ç±»ä¼¼çš„å‡å¯¹è±¡æ¥ä½œä¸º SUT çš„ä¾èµ–å¯¹è±¡, ä»¥æ­¤æ¥é™ä½å•å…ƒæµ‹è¯•çš„å¤æ‚æ€§å’Œå¯å®ç°æ€§. åœ¨è¿™é‡Œ, è¿™äº›å‡å¯¹è±¡å°±è¢«ç§°ä¸º æµ‹è¯•æ›¿èº«(Test Double).</p>
<p>æµ‹è¯•æ›¿èº«æœ‰ä»¥ä¸‹äº”ç§ï¼š</p>
<p>1.Test stub, ä¸º SUT æä¾›æ•°æ®çš„å‡å¯¹è±¡ã€‚stub ç±»æœ‰æ—¶å€™è¿˜ä¼šè®°å½•è°ƒç”¨çš„ä¸€äº›ä¿¡æ¯ã€‚</p>
<p>2.Fake objectï¼Œå®ç°äº†ç®€å•åŠŸèƒ½çš„ä¸€ä¸ªå‡å¯¹è±¡. Fake object å’Œ Test stub çš„ä¸»è¦åŒºåˆ«å°±æ˜¯ Test stub ä¾§é‡äºç”¨äºæä¾›æ•°æ®çš„å‡å¯¹è±¡, è€Œ Fake object æ²¡æœ‰è¿™å±‚å«ä¹‰ï¼Œä½¿ç”¨ Fake object çš„æœ€ä¸»è¦çš„åŸå› å°±æ˜¯åœ¨æµ‹è¯•æ—¶æŸäº›ç»„ä»¶ä¸å¯ç”¨æˆ–è¿è¡Œé€Ÿåº¦å¤ªæ…¢, å› è€Œä½¿ç”¨ Fake object æ¥ä»£æ›¿å®ƒä»¬.<br>è­¬å¦‚è¯´ï¼Œå®ƒå­˜åœ¨å†…å­˜ä¸­è€Œä¸æ˜¯çœŸæ­£çš„æ•°æ®åº“ä¸­ã€‚</p>
<p>3.Mock object<br>æ˜¯æŒ‡ç±»æˆ–è€…æ¥å£çš„æ¨¡æ‹Ÿå®ç°ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªå¯¹è±¡ä¸­æŸä¸ªæ–¹æ³•çš„è¾“å‡ºç»“æœã€‚<br>å®é™…ä¸Š, Mock object æ˜¯ Test stub æˆ– Fake object ä¸€ç§, ä½†æ˜¯ Mock object æœ‰ Test stub&#x2F;Fake object æ²¡æœ‰çš„ç‰¹æ€§, Mock object å¯ä»¥å¾ˆçµæ´»åœ°é…ç½®æ‰€è°ƒç”¨çš„æ–¹æ³•æ‰€äº§ç”Ÿçš„è¡Œä¸º, å¹¶ä¸”å®ƒå¯ä»¥è¿½è¸ªæ–¹æ³•è°ƒç”¨, ä¾‹å¦‚ä¸€ä¸ª Mock Object æ–¹æ³•è°ƒç”¨æ—¶ä¼ é€’äº†å“ªäº›å‚æ•°, æ–¹æ³•è°ƒç”¨äº†å‡ æ¬¡ç­‰.</p>
<p>4.Dummy object: åœ¨æµ‹è¯•ä¸­å¹¶ä¸ä½¿ç”¨çš„, ä½†æ˜¯ä¸ºäº†æµ‹è¯•ä»£ç èƒ½å¤Ÿæ­£å¸¸ç¼–è¯‘&#x2F;è¿è¡Œè€Œæ·»åŠ çš„å¯¹è±¡. ä¾‹å¦‚æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ª Test Double å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•, è¿™ä¸ªæ–¹æ³•éœ€è¦ä¼ é€’å‡ ä¸ªå‚æ•°, ä½†æ˜¯å…¶ä¸­æŸä¸ªå‚æ•°æ— è®ºæ˜¯ä»€ä¹ˆå€¼éƒ½ä¸ä¼šå½±å“æµ‹è¯•çš„ç»“æœ, é‚£ä¹ˆè¿™ä¸ªå‚æ•°å°±æ˜¯ä¸€ä¸ª Dummy object.<br>Dummy object å¯ä»¥æ˜¯ä¸€ä¸ªç©ºå¼•ç”¨, ä¸€ä¸ªç©ºå¯¹è±¡æˆ–è€…æ˜¯ä¸€ä¸ªå¸¸é‡ç­‰.<br>ç®€å•çš„è¯´, Dummy object å°±æ˜¯é‚£äº›æ²¡æœ‰ä½¿ç”¨åˆ°çš„, ä»…ä»…æ˜¯ä¸ºäº†å¡«å……å‚æ•°åˆ—è¡¨çš„å¯¹è±¡.</p>
<p>5.Test Spy<br>å¯ä»¥åŒ…è£…ä¸€ä¸ªçœŸå®çš„ Java å¯¹è±¡, å¹¶è¿”å›ä¸€ä¸ªåŒ…è£…åçš„æ–°å¯¹è±¡. è‹¥æ²¡æœ‰ç‰¹åˆ«é…ç½®çš„è¯, å¯¹è¿™ä¸ªæ–°å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•è°ƒç”¨, éƒ½ä¼šå§”æ´¾ç»™å®é™…çš„ Java å¯¹è±¡.</p>
<p>mock å’Œ spy çš„åŒºåˆ«æ˜¯: mock æ˜¯æ— ä¸­ç”Ÿæœ‰åœ°ç”Ÿå‡ºä¸€ä¸ª<strong>å®Œå…¨è™šæ‹Ÿçš„å¯¹è±¡</strong>, å®ƒçš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯è™šæ‹Ÿçš„; è€Œ spy æ˜¯åœ¨ç°æœ‰ç±»çš„åŸºç¡€ä¸ŠåŒ…è£…äº†ä¸€ä¸ªå¯¹è±¡, å³å¦‚æœæˆ‘ä»¬æ²¡æœ‰é‡å†™ spy çš„æ–¹æ³•, é‚£ä¹ˆè¿™äº›æ–¹æ³•çš„å®ç°å…¶å®éƒ½æ˜¯è°ƒç”¨çš„è¢«åŒ…è£…çš„å¯¹è±¡çš„æ–¹æ³•.</p>
<p>ã€test fixtureã€‘æµ‹è¯•çš„å…ˆå†³æ¡ä»¶ï¼Œ<br>@Before åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•è¿è¡Œå‰éƒ½ä¼šè¢«è°ƒç”¨, @After åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•è¿è¡Œåéƒ½ä¼šè¢«è°ƒç”¨.<br>å› ä¸º @Before å’Œ @After ä¼šåœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•å‰åéƒ½ä¼šè¢«è°ƒç”¨, è€Œæœ‰æ—¶æˆ‘ä»¬ä»…ä»…éœ€è¦åœ¨æµ‹è¯•å‰è¿›è¡Œä¸€æ¬¡åˆå§‹åŒ–, è¿™æ ·çš„æƒ…å†µä¸‹, å¯ä»¥ä½¿ç”¨@BeforeClass å’Œ@AfterClass æ³¨è§£.</p>
<p>ã€test caseã€‘æµ‹è¯•ç”¨ä¾‹<br>åœ¨ JUnit 3ä¸­, æµ‹è¯•æ–¹æ³•éƒ½å¿…é¡»ä»¥ test ä¸ºå‰ç¼€, ä¸”å¿…é¡»æ˜¯ public void çš„, JUnit 4ä¹‹å, å°±æ²¡æœ‰è¿™ä¸ªé™åˆ¶äº†, åªè¦åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•æ ‡æ³¨ @Test æ³¨è§£, æ–¹æ³•ç­¾åå¯ä»¥æ˜¯ä»»æ„çš„.</p>
<p>ã€æµ‹è¯•å¥—ä»¶ã€‘é€šè¿‡ TestSuit å¯¹è±¡å°†å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ç»„è£…æˆä¸€ä¸ªæµ‹è¯•å¥—ä»¶, æµ‹è¯•å¥—ä»¶æ‰¹é‡è¿è¡Œ.<br>é€šè¿‡@RunWith å’Œ@SuteClass ä¸¤ä¸ªæ³¨è§£, æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæµ‹è¯•å¥—ä»¶. é€šè¿‡@RunWith æŒ‡å®šä¸€ä¸ªç‰¹æ®Šçš„è¿è¡Œå™¨, å¹¶é€šè¿‡@SuiteClasses æ³¨è§£, å°†éœ€è¦è¿›è¡Œæµ‹è¯•çš„ç±»åˆ—è¡¨ä½œä¸ºå‚æ•°ä¼ å…¥.</p>
<h3 id="Junit4æ³¨è§£"><a href="#Junit4æ³¨è§£" class="headerlink" title="Junit4æ³¨è§£"></a>Junit4æ³¨è§£</h3><p>@Test (expected &#x3D; Exception.class) è¡¨ç¤ºé¢„æœŸä¼šæŠ›å‡ºException.class çš„å¼‚å¸¸</p>
<p>@Ignore å«ä¹‰æ˜¯â€œæŸäº›æ–¹æ³•å°šæœªå®Œæˆï¼Œæš‚ä¸å‚ä¸æ­¤æ¬¡æµ‹è¯•â€ã€‚è¿™æ ·çš„è¯æµ‹è¯•ç»“æœå°±ä¼šæç¤ºä½ æœ‰å‡ ä¸ªæµ‹è¯•è¢«å¿½ç•¥ï¼Œè€Œä¸æ˜¯å¤±è´¥ã€‚ä¸€æ—¦ä½ å®Œæˆäº†ç›¸åº”å‡½æ•°ï¼Œåªéœ€è¦æŠŠ@Ignoreæ³¨è§£åˆ å»ï¼Œå°±å¯ä»¥è¿›è¡Œæ­£å¸¸çš„æµ‹è¯•ã€‚</p>
<p>@Test(timeout&#x3D;100) è¡¨ç¤ºé¢„æœŸæ–¹æ³•æ‰§è¡Œä¸ä¼šè¶…è¿‡ 100 æ¯«ç§’ï¼Œæ§åˆ¶æ­»å¾ªç¯</p>
<p>@Before è¡¨ç¤ºè¯¥æ–¹æ³•åœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹å‰è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ä¹‹ç±»çš„æ“ä½œ</p>
<p>@After è¡¨ç¤ºè¯¥æ–¹æ³•åœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹åè¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œé‡Šæ”¾èµ„æºï¼Œå›æ”¶å†…å­˜ä¹‹ç±»çš„æ“</p>
<p>@BeforeClass è¡¨ç¤ºè¯¥æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰æ–¹æ³•ä¹‹å‰æ‰§è¡Œã€‚ä¸€èˆ¬å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œæ•°æ®åº“è¿æ¥æ“ä½œï¼Œæ³¨æ„è¯¥æ³¨è§£è¿ç”¨åœ¨é™æ€æ–¹æ³•ã€‚</p>
<p>@AfterClass è¡¨ç¤ºè¯¥æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰æ–¹æ³•ä¹‹åæ‰§è¡Œã€‚ä¸€èˆ¬å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œæ•°æ®åº“è¿æ¥å…³é—­æ“ä½œï¼Œæ³¨æ„è¯¥æ³¨è§£è¿ç”¨åœ¨é™æ€æ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import org.junit.runner.RunWith;  </span><br><span class="line">import org.junit.runners.Suite;  </span><br><span class="line">import org.junit.runners.Suite.SuiteClasses;  </span><br><span class="line">  </span><br><span class="line">@RunWith( Suite.class )  </span><br><span class="line">@SuiteClasses( &#123; JUnitTest1.class, JUnitTest2.class &#125; )  </span><br><span class="line">public class AllTests &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæœ‰å¤šä¸ªæµ‹è¯•ç±», å¯ä»¥åˆå¹¶æˆä¸€ä¸ªæµ‹è¯•å¥—ä»¶è¿›è¡Œæµ‹è¯•, è¿è¡Œä¸€ä¸ª Test Suite, é‚£ä¹ˆå°±ä¼šè¿è¡Œåœ¨è¿™ä¸ª Test Suite ä¸­çš„æ‰€ç”¨çš„æµ‹è¯•.<br>åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª Test Suite, è¿™ä¸ª Test Suite åŒ…å«äº†ä¸¤ä¸ªæµ‹è¯•ç±»: JUnitTest1 å’Œ JUnitTest2, å› æ­¤è¿è¡Œ è¿™ä¸ª Test Suite æ—¶, å°±ä¼šè‡ªåŠ¨è¿è¡Œè¿™ä¸¤ä¸ªæµ‹è¯•ç±»äº†.</p>
<p>*åœ¨ç±»åä¸ŠæŒ‰ä¸‹command+shift+tï¼Œå°±å¯ä»¥ç”Ÿæˆå¯¹åº”æµ‹è¯•ç±»ã€‚</p>
<p>æ¥æºï¼š<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000006731125">https://segmentfault.com/a/1190000006731125</a></p>
<h2 id="2-Mockitoä¸­-Mockä¸-InjectMock"><a href="#2-Mockitoä¸­-Mockä¸-InjectMock" class="headerlink" title="2.Mockitoä¸­@Mockä¸@InjectMock"></a>2.Mockitoä¸­@Mockä¸@InjectMock</h2><p>Mockito æ˜¯ä¸€ä¸ªæµè¡Œ mock æ¡†æ¶ï¼Œå¯ä»¥å’ŒJUnitç»“åˆèµ·æ¥ä½¿ç”¨ã€‚Mockito å…è®¸ä½ åˆ›å»ºå’Œé…ç½® mock å¯¹è±¡ã€‚<br>Mockitoæ˜¯javaå•å…ƒæµ‹è¯•ä¸­ï¼Œæœ€å¸¸ç”¨çš„mckå·¥å…·ä¹‹ä¸€ï¼Œæä¾›äº†è¯¸å¤šæ‰“æ¡©æ–¹æ³•å’Œæ³¨è§£ã€‚å…¶ä¸­æœ‰ä¸¤ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ³¨è§£ï¼Œ@Mockå’Œ@InjectMockï¼Œåå­—å’Œåœ¨ä»£ç ä¸­ä½¿ç”¨ çš„ä½ç½®éƒ½å¾ˆåƒã€‚ä½†æ˜¯æ˜¯åœ¨åŠŸèƒ½ä¸Šæ— ä»»ä½•å¯ç±»æ¯”æ€§çš„å®Œå…¨ä¸åŒçš„ä¸œè¥¿ã€‚<br>ç¨‹åºå‘˜é€šå¸¸åˆ›é€ æ¨¡æ‹Ÿå¯¹è±¡æ¥æµ‹è¯•å…¶ä»–å¯¹è±¡çš„è¡Œä¸ºï¼Œå¾ˆç±»ä¼¼æ±½è½¦è®¾è®¡è€…ä½¿ç”¨ç¢°æ’æµ‹è¯•å‡äººæ¥æ¨¡æ‹Ÿè½¦è¾†ç¢°æ’ä¸­äººçš„åŠ¨æ€è¡Œä¸ºã€‚</p>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨mockï¼Ÿ<br>åœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œæ¨¡æ‹Ÿå¯¹è±¡å¯ä»¥æ¨¡æ‹Ÿå¤æ‚çš„ã€çœŸå®çš„ï¼ˆéæ¨¡æ‹Ÿï¼‰å¯¹è±¡çš„è¡Œä¸ºï¼Œ å¦‚æœçœŸå®çš„å¯¹è±¡æ— æ³•æ”¾å…¥å•å…ƒæµ‹è¯•ä¸­ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå¯¹è±¡å°±å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<p>å•å…ƒæµ‹è¯•çš„æ€è·¯æ˜¯åœ¨ä¸æ¶‰åŠä¾èµ–å…³ç³»çš„æƒ…å†µä¸‹æµ‹è¯•ä»£ç ï¼ˆéš”ç¦»æ€§ï¼‰ï¼Œæ‰€ä»¥æµ‹è¯•ä»£ç ä¸å…¶ä»–ç±»æˆ–è€…ç³»ç»Ÿçš„å…³ç³»åº”è¯¥å°½é‡è¢«æ¶ˆé™¤ã€‚ä¸€ä¸ªå¯è¡Œçš„æ¶ˆé™¤æ–¹æ³•æ˜¯æ›¿æ¢æ‰ä¾èµ–ç±»ï¼ˆæµ‹è¯•æ›¿æ¢ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›¿èº«æ¥æ›¿æ¢æ‰çœŸæ­£çš„ä¾èµ–å¯¹è±¡ã€‚</p>
<h3 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h3><p>@Mockï¼š<br>åœ¨Mockitoä¸­ç”¨äºåˆ›å»ºmockå¯¹è±¡ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š<br><code>@Mock</code><br><code>private ClassName mockedObjectï¼›</code></p>
<p>ä¸Šé¢ä»£ç åˆ›å»ºäº†ä¸€ä¸ªåä¸ºmockedObjectï¼Œç±»å‹ä¸ºClassNameçš„mockå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‰€æœ‰çš„æ–¹æ³•è¢«ç½®ç©ºï¼Œæ ¹æ®æµ‹è¯•ä»£ç é€»è¾‘çš„éœ€è¦ä½¿ç”¨.</p>
<hr>
<p>@InjectMockï¼š<br>åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œç®€å•çš„è¯´æ˜¯è¿™ä¸ªMockå¯ä»¥è°ƒç”¨çœŸå®ä»£ç çš„æ–¹æ³•ï¼Œå…¶ä½™ç”¨@Mockï¼ˆæˆ–@Spyï¼‰æ³¨è§£åˆ›å»ºçš„mockå°†è¢«æ³¨å…¥åˆ°ç”¨è¯¥å®ä¾‹ä¸­ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(MockitoJUnitRunner.class)  </span><br><span class="line">public class Test &#123;  </span><br><span class="line">  </span><br><span class="line">    @InjectMocks  </span><br><span class="line">    private SomeHandler someHandler;  </span><br><span class="line">  </span><br><span class="line">    @Mock  </span><br><span class="line">    private OneDependency oneDependency; // æ­¤mockå°†è¢«æ³¨å…¥åˆ°someHandler  </span><br><span class="line"></span><br><span class="line">    // ...   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç ä¸­ï¼Œ@InjectMockä¸‹é¢å£°æ˜äº†ä¸€ä¸ªå¾…æµ‹è¯•çš„å¯¹è±¡ï¼Œ@Mockå®šä¹‰çš„mockå¯¹è±¡å°†ä¼šè¢«æ³¨å…¥åˆ°è¿™ä¸ªå¾…æµ‹è¯•çš„å¯¹è±¡ä¸­ã€‚</p>
<hr>
<p>ğŸ¤” @Mockåˆ›å»ºåˆ›å»ºmockå¯¹è±¡ä¹‹åï¼Œåœ¨å¯¹å…·ä½“çš„æ–¹æ³•æ‰“æ¡©ä¹‹å‰ï¼Œmockå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•å…¨è¢«ç½®ç©ºï¼ˆ0æˆ–è€…nullï¼‰ï¼Œæ‰€ä»¥ï¼Œå¯¹åº”çš„æ–¹æ³•æ˜¯ä¸è¿è¡Œçš„ã€‚<br>*mockå¯¹è±¡åˆ›å»ºä¹‹åï¼Œè¢«æµ‹è¯•ç±»ä¸­çš„è¯¥å¯¹è±¡çš„æ–¹æ³•å°±éƒ½ä¸æ‰§è¡Œäº†ã€‚</p>
<p>ğŸ¤” @Spyå¯ä»¥åˆ›å»ºçš„å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜æ–¹æ³•éƒ½ä¼šæŒ‰ç…§åŸæ–¹æ³•çš„é€»è¾‘æ‰§è¡Œï¼Œç›´åˆ°è¢«æ‰“æ¡©è¿”å›æŸä¸ªå…·ä½“çš„å€¼ã€‚</p>
<p>æ¥æºï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/langren1992/p/9681600.html">https://www.cnblogs.com/langren1992/p/9681600.html</a></p>
<h3 id="mockä½¿ç”¨"><a href="#mockä½¿ç”¨" class="headerlink" title="mockä½¿ç”¨"></a>mockä½¿ç”¨</h3><p>mavenæ³¨å…¥ä¾èµ–ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨æ³¨è§£ï¼Œé‚£ä¹ˆå¿…é¡»è¦å®ä¾‹åŒ– mock å¯¹è±¡ã€‚Mockito åœ¨é‡åˆ°ä½¿ç”¨æ³¨è§£çš„å­—æ®µçš„æ—¶å€™å¿…é¡»ä½¿ç”¨@RunWith(MockitoJUnitRunner.class) æˆ– MockitoAnnotations.initMocks(this)è¿›è¡Œmocksçš„åˆå§‹åŒ–å’Œæ³¨å…¥ã€‚<br>(å¯ä»¥å†™ä¸€ä¸ªinitå‡½æ•°ï¼ŒåŠ @Beforeæ³¨è§£)</p>
<h4 id="é…ç½®mock"><a href="#é…ç½®mock" class="headerlink" title="é…ç½®mock"></a>é…ç½®mock</h4><p>when(â€¦â€‹.).thenReturn(â€¦â€‹.)å¯ä»¥è¢«ç”¨æ¥å®šä¹‰å½“æ¡ä»¶æ»¡è¶³æ—¶å‡½æ•°çš„è¿”å›å€¼ï¼Œå½“å¤šæ¬¡è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼ŒMockito ä¼šæ ¹æ®ä½ å®šä¹‰çš„å…ˆåé¡ºåºæ¥è¿”å›è¿”å›å€¼ï¼ˆå¤šæ¬¡è°ƒç”¨ï¼‰ã€‚Mocks è¿˜å¯ä»¥æ ¹æ®ä¼ å…¥å‚æ•°çš„ä¸åŒæ¥å®šä¹‰ä¸åŒçš„è¿”å›å€¼ã€‚è­¬å¦‚è¯´ä½ çš„å‡½æ•°å¯ä»¥å°†anyString æˆ–è€… anyIntä½œä¸ºè¾“å…¥å‚æ•°ï¼Œç„¶åå®šä¹‰å…¶ç‰¹å®šçš„æ”¾å›å€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line">import static org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void test1()  &#123;</span><br><span class="line">        //  åˆ›å»º mock</span><br><span class="line">        MyClass test = Mockito.mock(MyClass.class);</span><br><span class="line"></span><br><span class="line">        // è‡ªå®šä¹‰ getUniqueId() çš„è¿”å›å€¼</span><br><span class="line">        when(test.getUniqueId(Mockito.anyLong())).thenReturn(43);</span><br><span class="line"></span><br><span class="line">        // åœ¨æµ‹è¯•ä¸­ä½¿ç”¨mockå¯¹è±¡</span><br><span class="line">        assertEquals(test.getUniqueId(), 43);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è¿”å›å¤šä¸ªå€¼</span><br><span class="line">@Test</span><br><span class="line">public void testMoreThanOneReturnValue()  &#123;</span><br><span class="line">        Iterator i= mock(Iterator.class);</span><br><span class="line">        when(i.next()).thenReturn(&quot;Mockito&quot;).thenReturn(&quot;rocks&quot;);</span><br><span class="line">        String result=i.next()+&quot; &quot;+i.next();</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        assertEquals(&quot;Mockito rocks&quot;, result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¦‚ä½•æ ¹æ®è¾“å…¥æ¥è¿”å›å€¼</span><br><span class="line">@Test</span><br><span class="line">public void testReturnValueDependentOnMethodParameter()  &#123;</span><br><span class="line">        Comparable c= mock(Comparable.class);</span><br><span class="line">        when(c.compareTo(&quot;Mockito&quot;)).thenReturn(1);</span><br><span class="line">        when(c.compareTo(&quot;Eclipse&quot;)).thenReturn(2);</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        assertEquals(1,c.compareTo(&quot;Mockito&quot;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¦‚ä½•è®©è¿”å›å€¼ä¸ä¾èµ–äºè¾“å…¥</span><br><span class="line">@Test</span><br><span class="line">public void testReturnValueInDependentOnMethodParameter()  &#123;</span><br><span class="line">        Comparable c= mock(Comparable.class);</span><br><span class="line">        when(c.compareTo(anyInt())).thenReturn(-1);</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        assertEquals(-1 ,c.compareTo(9));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ ¹æ®å‚æ•°ç±»å‹æ¥è¿”å›å€¼</span><br><span class="line">@Test</span><br><span class="line">public void testReturnValueInDependentOnMethodParameter()  &#123;</span><br><span class="line">        Comparable c= mock(Comparable.class);</span><br><span class="line">        when(c.compareTo(isA(Todo.class))).thenReturn(0);</span><br><span class="line">        // æ–­è¨€</span><br><span class="line">        Todo todo = new Todo(5);</span><br><span class="line">        assertEquals(todo ,c.compareTo(new Todo(1)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="æ— è¿”å›å€¼çš„æ–¹æ³•"><a href="#æ— è¿”å›å€¼çš„æ–¹æ³•" class="headerlink" title="æ— è¿”å›å€¼çš„æ–¹æ³•"></a>æ— è¿”å›å€¼çš„æ–¹æ³•</h4><p>mokitoä¸­ï¼Œå¯¹æ— è¿”å›çš„å‡½æ•°ä»€ä¹ˆéƒ½ä¸åš<br>Mokito.doNothing().when(å¯¹è±¡).å‡½æ•°();</p>
<p>å¯¹äºæ— è¿”å›å€¼çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨doReturn(â€¦â€‹).when(â€¦â€‹).methodCallæ¥è·å¾—ç±»ä¼¼çš„æ•ˆæœã€‚ä¾‹å¦‚æˆ‘ä»¬æƒ³åœ¨è°ƒç”¨æŸäº›æ— è¿”å›å€¼å‡½æ•°çš„æ—¶å€™æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨doThrow æ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line">import static org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line">// ä¸‹é¢æµ‹è¯•ç”¨ä¾‹æè¿°äº†å¦‚ä½•ä½¿ç”¨doThrow()æ–¹æ³•</span><br><span class="line"></span><br><span class="line">@Test(expected=IOException.class)</span><br><span class="line">public void testForIOException() &#123;</span><br><span class="line">        // åˆ›å»ºå¹¶é…ç½® mock å¯¹è±¡</span><br><span class="line">        OutputStream mockStream = mock(OutputStream.class);</span><br><span class="line">        doThrow(new IOException()).when(mockStream).close();</span><br><span class="line"></span><br><span class="line">        // ä½¿ç”¨ mock</span><br><span class="line">        OutputStreamWriter streamWriter= new OutputStreamWriter(mockStream);</span><br><span class="line">        streamWriter.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="éªŒè¯æ˜¯å¦è°ƒç”¨"><a href="#éªŒè¯æ˜¯å¦è°ƒç”¨" class="headerlink" title="éªŒè¯æ˜¯å¦è°ƒç”¨"></a>éªŒè¯æ˜¯å¦è°ƒç”¨</h4><p>éªŒè¯ query æ–¹æ³•æ˜¯å¦è¢« MyDatabase çš„ mock å¯¹è±¡è°ƒç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line"></span><br><span class="line">public class MockitoTest  &#123;</span><br><span class="line"></span><br><span class="line">        @Mock</span><br><span class="line">        MyDatabase databaseMock; (1)</span><br><span class="line"></span><br><span class="line">        @Rule public MockitoRule mockitoRule = MockitoJUnit.rule(); (2)</span><br><span class="line"></span><br><span class="line">        @Test</span><br><span class="line">        public void testQuery()  &#123;</span><br><span class="line">                ClassToTest t  = new ClassToTest(databaseMock); (3)</span><br><span class="line">                boolean check = t.query(&quot;* from t&quot;); (4)</span><br><span class="line">                assertTrue(check); (5)</span><br><span class="line">                verify(databaseMock).query(&quot;* from t&quot;); (6)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Mockito ä¼šè·Ÿè¸ª mock å¯¹è±¡é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•å’Œå˜é‡ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨æ¥éªŒè¯å‡½æ•°åœ¨ä¼ å…¥ç‰¹å®šå‚æ•°çš„æ—¶å€™æ˜¯å¦è¢«è°ƒç”¨ã€‚è¿™ç§æ–¹å¼çš„æµ‹è¯•ç§°è¡Œä¸ºæµ‹è¯•ï¼Œè¡Œä¸ºæµ‹è¯•å¹¶ä¸ä¼šæ£€æŸ¥å‡½æ•°çš„è¿”å›å€¼ï¼Œè€Œæ˜¯æ£€æŸ¥åœ¨ä¼ å…¥æ­£ç¡®å‚æ•°æ—¶å€™å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void testVerify()  &#123;</span><br><span class="line">        // åˆ›å»ºå¹¶é…ç½® mock å¯¹è±¡</span><br><span class="line">        MyClass test = Mockito.mock(MyClass.class);</span><br><span class="line">        when(test.getUniqueId()).thenReturn(43);</span><br><span class="line"></span><br><span class="line">        // è°ƒç”¨mockå¯¹è±¡é‡Œé¢çš„æ–¹æ³•å¹¶ä¼ å…¥å‚æ•°ä¸º12</span><br><span class="line">        test.testing(12);</span><br><span class="line">        test.getUniqueId();</span><br><span class="line">        test.getUniqueId();</span><br><span class="line"></span><br><span class="line">        // æŸ¥çœ‹åœ¨ä¼ å…¥å‚æ•°ä¸º12çš„æ—¶å€™æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨</span><br><span class="line">        verify(test).testing(Matchers.eq(12));</span><br><span class="line"></span><br><span class="line">        // æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨ä¸¤æ¬¡</span><br><span class="line">        verify(test, times(2)).getUniqueId();</span><br><span class="line"></span><br><span class="line">        // å…¶ä»–ç”¨æ¥éªŒè¯å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨çš„æ–¹æ³•</span><br><span class="line">        verify(mock, never()).someMethod(&quot;never called&quot;);</span><br><span class="line">        verify(mock, atLeastOnce()).someMethod(&quot;called at least once&quot;);</span><br><span class="line">        verify(mock, atLeast(2)).someMethod(&quot;called at least twice&quot;);</span><br><span class="line">        verify(mock, times(5)).someMethod(&quot;called five times&quot;);</span><br><span class="line">        verify(mock, atMost(3)).someMethod(&quot;called at most 3 times&quot;);</span><br><span class="line">&#125;</span><br><span class="line">å‰é¢éƒ½åŠ ä¸ªMockito.</span><br></pre></td></tr></table></figure>

<h3 id="spyä½¿ç”¨"><a href="#spyä½¿ç”¨" class="headerlink" title="spyä½¿ç”¨"></a>spyä½¿ç”¨</h3><p>@Spyæˆ–è€…spy()æ–¹æ³•å¯ä»¥è¢«ç”¨æ¥å°è£… java å¯¹è±¡ã€‚è¢«å°è£…åï¼Œé™¤éç‰¹æ®Šå£°æ˜ï¼ˆæ‰“æ¡© stubï¼‰ï¼Œå¦åˆ™éƒ½ä¼šçœŸæ­£çš„è°ƒç”¨å¯¹è±¡é‡Œé¢çš„æ¯ä¸€ä¸ªæ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import static org.mockito.Mockito.*;</span><br><span class="line"></span><br><span class="line">// Lets mock a LinkedList</span><br><span class="line">List list = new LinkedList();</span><br><span class="line">List spy = spy(list);</span><br><span class="line"></span><br><span class="line">// å¯ç”¨ doReturn() æ¥æ‰“æ¡©</span><br><span class="line">doReturn(&quot;foo&quot;).when(spy).get(0);</span><br><span class="line"></span><br><span class="line">// ä¸‹é¢ä»£ç ä¸ç”Ÿæ•ˆ</span><br><span class="line">// çœŸæ­£çš„æ–¹æ³•ä¼šè¢«è°ƒç”¨</span><br><span class="line">// å°†ä¼šæŠ›å‡º IndexOutOfBoundsException çš„å¼‚å¸¸ï¼Œå› ä¸º List ä¸ºç©º</span><br><span class="line">when(spy.get(0)).thenReturn(&quot;foo&quot;);</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/f6e3ab9719b9">https://www.jianshu.com/p/f6e3ab9719b9</a><br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7b67806b74f6">https://www.jianshu.com/p/7b67806b74f6</a></p>
<h2 id="PowerMockRunner-å’Œ-MockitoJUnitRunner"><a href="#PowerMockRunner-å’Œ-MockitoJUnitRunner" class="headerlink" title="PowerMockRunner å’Œ MockitoJUnitRunner"></a>PowerMockRunner å’Œ MockitoJUnitRunner</h2><p>å…³äºæ‰“æ¡©ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/moshowgame/article/details/100983711">https://blog.csdn.net/moshowgame/article/details/100983711</a></p>
<h2 id="when-thenReturn-å’Œ-doReturn-when-åŒºåˆ«"><a href="#when-thenReturn-å’Œ-doReturn-when-åŒºåˆ«" class="headerlink" title="when().thenReturn() å’Œ doReturn().when() åŒºåˆ«"></a>when().thenReturn() å’Œ doReturn().when() åŒºåˆ«</h2><p>ä½¿ç”¨@Mockæ—¶å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œä½†æ˜¯@Spyæ—¶ï¼Œå®ƒä»¬çš„è°ƒç”¨ç»“æœä¸åŒã€‚<br>1.when().thenReturn() ä¼šè°ƒç”¨çœŸå®çš„æ–¹æ³•ï¼Œå®¹æ˜“æŠ›å‡ºå¼‚å¸¸<br>2.doReturn().when() ä¸ä¼šè°ƒç”¨çœŸå®æ–¹æ³•</p>
<h2 id="PowerMockito"><a href="#PowerMockito" class="headerlink" title="PowerMockito"></a>PowerMockito</h2><p>PowerMockæ‰©å±•äº†EasyMockå’ŒMockitoæ¡†æ¶ï¼Œå¢åŠ äº†å¯¹staticå’Œfinalæ–¹æ³•mockæ”¯æŒç­‰åŠŸèƒ½.<br>PowerMockæœ‰ä¸¤ä¸ªé‡è¦çš„æ³¨è§£ï¼š<br> @RunWith(PowerMockRunner.class)<br> @prepareForTest({MyObject.class})<br> @PrepareForTestæ³¨è§£å’Œ@RunWithæ³¨è§£æ˜¯ç»“åˆä½¿ç”¨çš„ï¼Œä¸è¦å•ç‹¬ä½¿ç”¨@PrepareForTestï¼Œå¦åˆ™ä¸èµ·ä½œç”¨ã€‚å½“ä½¿ç”¨PowerMockå»mocké™æ€ï¼Œfinalæˆ–è€…ç§æœ‰æ–¹æ³•æ—¶ï¼Œéœ€è¦åŠ ä¸Šè¿™ä¸¤ä¸ªæ³¨è§£ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/KeeYang108/article/details/79891588">https://blog.csdn.net/KeeYang108/article/details/79891588</a></p>
<h2 id="Mockæµ‹è¯•è¸©å‘"><a href="#Mockæµ‹è¯•è¸©å‘" class="headerlink" title="Mockæµ‹è¯•è¸©å‘"></a>Mockæµ‹è¯•è¸©å‘</h2><p>ä»Šå¤©å†™äº†ä¸€ä¸ªcontrolå±‚çš„mockå•å…ƒæµ‹è¯•ï¼Œå› ä¸ºè¦è°ƒserviceå±‚ï¼ˆå®ç°ç±»ï¼‰çš„æ–¹æ³•ï¼Œå°±æŠŠserviceæ¥å£åšäº†ä¸€ä¸ªmockï¼Œæµ‹è¯•æ—¶å€™ä¸€ç›´åŒ…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚<br>mock serviceå®ç°ç±»ä¹‹åï¼Œæ­£å¸¸ã€‚</p>
<p>æ›´æ–°ï¼šä»Šå¤©@Mockçš„æ¥å£ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¥‡æ€ªäº†ï¼š<br>mockæ¥å£å‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸çš„caseï¼šæ˜¯serviceï¼ˆ.ä¹‹å‰çš„ï¼‰æ˜¯å®ç°ç±»ï¼Œ@Autowiredçš„ä¹Ÿæ˜¯å®ç°ç±»ï¼Œæ‰€ä»¥mockæ¥å£æ²¡ç”¨ï¼Ÿ<br>è€Œä»Šå¤©mockæ¥å£ï¼Œè¢«æµ‹è¯•ç±»ä¸­.ä¹‹å‰çš„æ˜¯æ¥å£ï¼Œ@Autowiredçš„ä¹Ÿæ˜¯æ¥å£ï¼Œæ‰€ä»¥æ²¡æ¯›ç—…ã€‚</p>
<p>åŠ @RunWith(PowerMockRunner.class)<br>è¦æµ‹è¯•çš„ç±»åŠ @InjectMocks</p>
<p>1.serviceå®ç°ç±»ä¸åŠ mockï¼Œåˆ°æŒ‡å®šæ–¹æ³•ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œserviceå¯¹è±¡ä¸ºç©º<br>2.å¦‚æœserviceæ–¹æ³•æ— è¿”å›ï¼Œå¯ä»¥ä¸æ‰“æ¡©ï¼Œå¦‚æœæœ‰è¿”å›ï¼Œæœ€å¥½æ‰“ä¸ªæ¡©ã€‚<br>3.æœ‰è¿”å›çš„æ‰“äº†æ¡©ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„è¾“å…¥ï¼Œè¿”å›ä¸åŒçš„ç»“æœã€‚æœ‰è¿”å›å¦‚æœä¸æ‰“æ¡©ï¼Œç›¸å½“äºè¿”å›çš„æ˜¯nullï¼Œè¿”å›å¦‚æœè¢«åé¢ç”¨åˆ°ï¼Œå®¹æ˜“æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<h2 id="Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸"><a href="#Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸" class="headerlink" title="Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸"></a>Mockæµ‹è¯•è¸©å‘ç©ºæŒ‡é’ˆå¼‚å¸¸</h2><p>mockæµ‹è¯•çš„è¢«æµ‹è¯•ç±»ï¼ˆ@InjectMockï¼‰ä¸­çš„å±æ€§ä¸€èˆ¬ä¸ºnullï¼Œæ‰€ä»¥ä»€ä¹ˆéƒ½ä¸åŠ å°±åœ¨è¢«æµ‹è¯•ç±»ä¸­è°ƒç”¨å±æ€§å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼ŒæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå› ä¸ºå±æ€§å¯¹è±¡æ˜¯nullã€‚<br>å°†å±æ€§å¯¹è±¡åœ¨Testä¸­æ·»åŠ @Mockä¸ºmockå¯¹è±¡ï¼Œç›´æ¥å¿½ç•¥å±æ€§å¯¹è±¡æ–¹æ³•ï¼Œä¸è¿›å…¥æ‰§è¡Œã€‚<br>å°†å±æ€§å¯¹è±¡åœ¨Testä¸­æ·»åŠ @Spyä¸ºspyå¯¹è±¡ï¼Œä¼šè¿›å…¥è¯¥æ–¹æ³•ä¸­ï¼Œä½†æ˜¯åªé™äºä¸€å±‚ï¼Œå†è¿›å…¥å°±ä¸è¡Œäº†ï¼Œè¿˜æ˜¯ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<hr>
<h2 id="å•å…ƒæµ‹è¯•æ¡†æ¶å’Œæ­¥éª¤"><a href="#å•å…ƒæµ‹è¯•æ¡†æ¶å’Œæ­¥éª¤" class="headerlink" title="å•å…ƒæµ‹è¯•æ¡†æ¶å’Œæ­¥éª¤"></a>å•å…ƒæµ‹è¯•æ¡†æ¶å’Œæ­¥éª¤</h2><p>Jnitï¼šä¸€ä¸ªjavaè¯­è¨€çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œç¼–å†™å’Œè¿è¡Œå¯é‡å¤çš„è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p>
<p>Mockitoï¼šå•å…ƒæµ‹è¯•æ¨¡æ‹Ÿæ¡†æ¶ï¼Œé‡‡ç”¨æ¨¡æ‹ŸæŠ€æœ¯ï¼Œæ¨¡æ‹Ÿåº”ç”¨ä¸­ä¾èµ–çš„å¤æ‚å¯¹è±¡ï¼ŒæŠŠæµ‹è¯•å¯¹è±¡å’Œä¾èµ–å¯¹è±¡éš”ç¦»å¼€ã€‚</p>
<p>PowerMockï¼šåœ¨Mockitoçš„åŸºç¡€ä¸Šä½œå‡ºæ‰©å±•ã€‚</p>
<p>å•å…ƒæµ‹è¯•æ­¥éª¤ï¼šå®šä¹‰å¯¹è±¡ - æ¨¡æ‹Ÿæ–¹æ³• - è°ƒç”¨æ–¹æ³• - éªŒè¯æ–¹æ³• ï¼ˆç¬¬äºŒæ­¥å’Œç¬¬å››æ­¥æ˜¯æœ‰å¤–éƒ¨ä¾èµ–æ—¶éœ€è¦mockä½¿ç”¨çš„ï¼‰</p>
<p>1ã€å®šä¹‰æµ‹è¯•å¯¹è±¡ï¼ˆnew&#x2F;Mockito.spy&#x2F;@Spy&#x2F;@InjectMocksï¼‰<br>2ã€æ¨¡æ‹Ÿä¾èµ–å¯¹è±¡ï¼ˆç›´æ¥æ„å»ºå¯¹è±¡&#x2F;Jsonååºåˆ—åŒ–å¯¹è±¡&#x2F;@Mock&#x2F;@Spyï¼‰<br>3ã€æ³¨å…¥ä¾èµ–å¯¹è±¡ï¼ˆset&#x2F;Whitebox&#x2F;@Mockï¼‰<br>4ã€æ¨¡æ‹Ÿä¾èµ–æ–¹æ³•<br>5ã€è°ƒç”¨è¢«æµ‹æ–¹æ³•ï¼ˆåˆ†ä¸ºæ„é€ æ–¹æ³•ã€æ™®é€šæ–¹æ³•ã€é™æ€æ–¹æ³•ï¼‰ï¼ˆéƒ½åˆ†ä¸ºæœ‰æƒé™å’Œæ— æƒé™ï¼‰ï¼ˆæœ‰æƒé™ç›´æ¥è°ƒç”¨ï¼Œæ— æƒé™ç”¨ï¼š<code>Whitebox.invokeMethod(userService, &quot;isUser&quot;, uid)</code>ï¼‰<br>6ã€éªŒè¯ä¾èµ–æ–¹æ³•ï¼ˆMockito.verify(â€¦)ï¼‰ï¼ˆç”¨ArgumentCaptor&#x2F;@Captoræ•è·å‚æ•°ï¼‰<br>7ã€éªŒè¯æ•°æ®å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//éªŒè¯å¯¹è±¡ä¸ºç©º</span><br><span class="line">Assert.assertNull(&quot;å¿…é¡»ä¸ºç©ºï¼&quot;, uid);</span><br><span class="line">//éªŒè¯å¯¹è±¡éç©º</span><br><span class="line">Assert.assertNotNull(&quot;ä¸èƒ½ä¸ºç©ºï¼&quot;, uid);</span><br><span class="line">//éªŒè¯ä¸ºçœŸ</span><br><span class="line">Assert.assertTrue(&quot;è¿”å›å¿…é¡»ä¸ºçœŸ&quot;, isSuper);</span><br><span class="line">//éªŒè¯ä¸ºå‡</span><br><span class="line">Assert.assertFalse(&quot;è¿”å›å¿…é¡»ä¸ºå‡&quot;, isSuper);</span><br><span class="line">//éªŒè¯æ•°æ®å¯¹è±¡æ˜¯å¦ä¸€è‡´</span><br><span class="line">Assert.assertSame(&quot;ç”¨æˆ·å¿…é¡»ä¸€è‡´&quot;, exceptId, uid);</span><br><span class="line">//éªŒè¯æ•°æ®å¯¹è±¡æ˜¯å¦ä¸€è‡´</span><br><span class="line">Assert.assertNotSame(&quot;ç”¨æˆ·ä¸èƒ½ä¸€è‡´&quot;, exceptId, uid);</span><br><span class="line">//éªŒè¯ç®€å•æ•°æ®å¯¹è±¡</span><br><span class="line">Assert.assertNotEquals(&quot;ç”¨æˆ·åç§°ä¸ä¸€è‡´&quot;, &quot;admin&quot;, user)</span><br><span class="line">//éªŒè¯ç®€å•æ•°ç»„æˆ–é›†åˆå¯¹è±¡</span><br><span class="line">Assert.assertArrayEquals</span><br><span class="line">//å¯¹äºå¤æ‚æ•°æ®ï¼Œå¯ä»¥å…ˆåºåˆ—åŒ–ä¸ºjsonå­—ç¬¦ä¸²ï¼Œç„¶åAssert.assertEquals</span><br></pre></td></tr></table></figure>
<p>éªŒè¯è·‘å‡ºå¼‚å¸¸ï¼šå¯ä»¥ç”¨@Test(expected&#x3D;ExampleException.class)ï¼Œä½†æ˜¯ä¸€æ—¦å†…éƒ¨æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œæ•´ä¸ªæ–¹æ³•å°±è¿”å›ï¼Œåé¢çš„éªŒè¯æ²¡æ³•æ‰§è¡Œã€‚@Ruleæ³¨è§£å®ç°ã€‚æ¨èä½¿ç”¨Assert</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ExampleException e = Assert.assertThrows(&quot;å¼‚å¸¸ç±»å‹ä¸ä¸€è‡´&quot;, ExampleException.class, ()-&gt;userService.getUser(uid));</span><br><span class="line">Assert.assertEquals(&quot;å¼‚å¸¸æ¶ˆæ¯ä¸ä¸€è‡´&quot;, exceptString, e.getMessage());</span><br></pre></td></tr></table></figure>
<p>8ã€éªŒè¯ä¾èµ–å¯¹è±¡ï¼ˆä¸€èˆ¬ä¸ç”¨ï¼‰<br><code>Mockito.verifyNotInteractions</code></p>
<p>âœ…Mockitoçš„anyç›¸å…³çš„å‚æ•°åŒ¹é…æ–¹æ³•ä¸æ”¯æŒå¯ç©ºå‚æ•°å’Œç©ºå‚æ•°ï¼Œåº”è¯¥ç”¨nullableæ–¹æ³•ã€‚<br>âœ…é‡‡ç”¨Mockitoçš„å‚æ•°åŒ¹é…æ–¹æ³•æ—¶ï¼Œå…¶ä»–å‚æ•°ä¸èƒ½ç›´æ¥ç”¨å¸¸é‡æˆ–å˜é‡ï¼Œåº”è¯¥ç”¨Mockitoçš„eqæ–¹æ³•ã€‚</p>
<h2 id="Mocké™æ€æ–¹æ³•"><a href="#Mocké™æ€æ–¹æ³•" class="headerlink" title="Mocké™æ€æ–¹æ³•"></a>Mocké™æ€æ–¹æ³•</h2><p>é€šè¿‡PowerMockito.mockStatic() å¯¹é™æ€æ–¹æ³•è¿›è¡Œmockã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.powermock&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.powermock&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import org.apache.commons.lang3.StringUtils;</span><br><span class="line">import org.junit.jupiter.api.Assertions;</span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.powermock.api.mockito.PowerMockito;</span><br><span class="line">import org.powermock.core.classloader.annotations.PowerMockIgnore;</span><br><span class="line">import org.powermock.core.classloader.annotations.PrepareForTest;</span><br><span class="line">import org.powermock.modules.junit4.PowerMockRunner;</span><br><span class="line"> </span><br><span class="line">@RunWith(PowerMockRunner.class)</span><br><span class="line">@PrepareForTest(StringUtils.class)  //å¤šä¸ªé™æ€æ–¹æ³•çš„è¯&#123;1,2&#125;</span><br><span class="line">//@PowerMockIgnore(&quot;javax.crypto.*&quot;)</span><br><span class="line">public class MyTest &#123;</span><br><span class="line"> </span><br><span class="line">    @Test</span><br><span class="line">    public void test()&#123;</span><br><span class="line">        //æ¨¡æ‹Ÿä¾èµ–æ–¹æ³•</span><br><span class="line">        PowerMockito.mockStatic(StringUtils.class);</span><br><span class="line">        PowerMockito.when(StringUtils.isEmpty(&quot;empty&quot;)).thenReturn(true);</span><br><span class="line">        Assertions.assertTrue(StringUtils.isEmpty(&quot;empty&quot;));</span><br><span class="line">        //éªŒè¯ä¾èµ–æ–¹æ³•è¢«è°ƒç”¨</span><br><span class="line">        PowerMockito.verifyStatic(StringUtils.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/q2878948/article/details/124862699">https://blog.csdn.net/q2878948/article/details/124862699</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34497300/article/details/119774225">https://blog.csdn.net/qq_34497300/article/details/119774225</a></p>
<h2 id="Mockç§æœ‰æ–¹æ³•"><a href="#Mockç§æœ‰æ–¹æ³•" class="headerlink" title="Mockç§æœ‰æ–¹æ³•"></a>Mockç§æœ‰æ–¹æ³•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆ@RunWith(PowerMockRunner.class)</span><br><span class="line">æŠŠç§æœ‰æ–¹æ³•æ‰€åœ¨ç±»æ”¾åœ¨@PrepareForTest()ä¸­</span><br><span class="line">//æ¨¡æ‹Ÿç§æœ‰ä¾èµ–æ–¹æ³•</span><br><span class="line">PowerMockito.doReturn(true).when(MyService.class, &quot;myFunc&quot;, myParam);</span><br><span class="line">PowerMockito.when(MyService.class, &quot;myFunc&quot;, myParam).thenReturn(true);</span><br><span class="line">//éªŒè¯ç§æœ‰æ–¹æ³•è°ƒç”¨</span><br><span class="line">PowerMockito.verifyPrivate(myClass, times(1)).invoke(&quot;myfunc&quot;, any(List.class))</span><br></pre></td></tr></table></figure>

<p>âš ï¸æƒ³mockè¢«éªŒè¯ç±»(@InjectMock)çš„ç§æœ‰æ–¹æ³•æ˜¯ä¸è¡Œçš„ã€‚åªèƒ½mockæ³¨å…¥ç±»çš„ç§æœ‰æ–¹æ³•ã€‚</p>
<h2 id="Mockè¢«æµ‹è¯•ç±»çš„å…¶ä»–publicæ–¹æ³•"><a href="#Mockè¢«æµ‹è¯•ç±»çš„å…¶ä»–publicæ–¹æ³•" class="headerlink" title="Mockè¢«æµ‹è¯•ç±»çš„å…¶ä»–publicæ–¹æ³•"></a>Mockè¢«æµ‹è¯•ç±»çš„å…¶ä»–publicæ–¹æ³•</h2><p>ç›´æ¥ç”¨Mockito.whenæ˜¯ä¸è¡Œï¼Œä¼šæŠ¥ç©ºæŒ‡é’ˆã€‚</p>
<p>è¿˜æ²¡æå‡ºæ¥ã€‚</p>
<p>Javaä¸­ä½¿ç”¨PowerMockito mock staticæ–¹æ³•&#x2F;newå¯¹è±¡&#x2F;mockå¯¹è±¡çš„publicæˆ–privateæ–¹æ³•çš„ç®€å•ç¤ºä¾‹ï¼š<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/epic358/p/16559549.html">https://www.cnblogs.com/epic358/p/16559549.html</a></p>
<h2 id="Mockæµ‹è¯•ä¿®æ”¹æ–¹æ³•çš„å…¥å‚"><a href="#Mockæµ‹è¯•ä¿®æ”¹æ–¹æ³•çš„å…¥å‚" class="headerlink" title="Mockæµ‹è¯•ä¿®æ”¹æ–¹æ³•çš„å…¥å‚"></a>Mockæµ‹è¯•ä¿®æ”¹æ–¹æ³•çš„å…¥å‚</h2><p>å¦‚æœæ–¹æ³•æœ‰è¿”å›å€¼ï¼Œç›´æ¥ä½¿ç”¨Mockito.when().thenReturn()çš„æ–¹å¼Mockå³å¯ï¼Œä½†æ˜¯å¯¹äºæ²¡æœ‰è¿”å›å€¼çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨æ–¹æ³•å†…éƒ¨å´å¯¹æ–¹æ³•çš„å…¥å‚åšäº†ä¸€äº›é€»è¾‘çš„æ–¹æ³•ï¼Œå°±ä¸èƒ½å†ç”¨è¿™ç§æ–¹å¼ï¼Œåº”è¯¥ç”¨å¦å¤–ä¸€ä¸ªMockæ–¹æ³•ï¼Œå³doNothingã€‚</p>
<p>Mockçš„æ—¶å€™ï¼Œé¦–å…ˆåŒ¹é…å‚æ•°ï¼Œç„¶ååœ¨ArgumentMatcherä¸­ä¿®æ”¹å‚æ•°å³å¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// mockæ–¹å¼ä¿®æ”¹æ–¹æ³•å…¥å‚</span><br><span class="line">doNothing().when(userService).service(any(), argThat(new ArgumentMatcher&lt;UserResponse&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean matches(UserResponse response) &#123;</span><br><span class="line">        ImportInfo importInfo = new ImportInfo();</span><br><span class="line">        importInfo.setStatus(&quot;APPROVING&quot;);</span><br><span class="line">        // ä¿®æ”¹å…¥å‚çš„å±æ€§</span><br><span class="line">        response.setImportInfo(importInfo);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;));</span><br><span class="line">Request request = new Request();</span><br><span class="line">Response response = new Response();</span><br><span class="line">// è¿™ä¸ªæ˜¯æˆ‘ä»¬è¦éªŒè¯çš„ä¸»æ–¹æ³•</span><br><span class="line">handler.handle(request, response);</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.wxxblog.com/article/5">https://www.wxxblog.com/article/5</a></p>
<h2 id="å•å…ƒæµ‹è¯•é£æ ¼"><a href="#å•å…ƒæµ‹è¯•é£æ ¼" class="headerlink" title="å•å…ƒæµ‹è¯•é£æ ¼"></a>å•å…ƒæµ‹è¯•é£æ ¼</h2><p>å•å…ƒæµ‹è¯•çš„æ„ä¹‰åœ¨äºéªŒè¯ä¸šåŠ¡ä»£ç ï¼Œé«˜è¦†ç›–ç‡+å¯è¯»æ€§ &#x3D; é«˜ä»·å€¼ã€‚é«˜è¦†ç›–ç‡åŒ…æ‹¬å¯¹ä»£ç çš„è¦†ç›–ï¼Œä¹ŸåŒ…æ‹¬å¯¹æµ‹è¯•ç”¨ä¾‹çš„è¦†ç›–ã€‚</p>
<p>ä¸€ä¸ªæ–¹æ³•è¦æµ‹è¯•å¤šç§æµ‹è¯•åœºæ™¯çš„è¯ï¼Œå°±å†™å¤šä¸ªmockæ–¹æ³•ï¼Œä¸€ä¸ªå•ä¾§æ–¹æ³•åªé’ˆå¯¹ä¸€ä¸ªè¡Œä¸ºã€‚ä½†æ˜¯çœ‹ï¼Œæœ‰äº›å…¬å…±çš„mockæ‰“æ¡©å¯ä»¥æå–å‡ºæ¥ï¼Œå†™æˆä¸€ä¸ªå…¬å…±çš„ç§æœ‰æ–¹æ³•ï¼Œæˆ–è€…å†™ä¸€ä¸ªinitæ–¹æ³•ï¼Œç”¨@Beforeæ³¨è§£ä¿®é¥°ï¼Œåœ¨è¿è¡Œæµ‹è¯•æ–¹æ³•æ—¶å°±æå‰æ‰“æ¡©ã€‚</p>
<p>æ¨èçš„é£æ ¼ï¼š<br>1.ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä»…è°ƒç”¨ä¸€æ¬¡è¢«æµ‹æ–¹æ³•<br>2.è‡³å°‘ä¸€ä¸ªæ­£ä¾‹çš„æµ‹è¯•ç”¨ä¾‹<br>3ï¼Œæå–å…¬å…±çš„mockæ’æ¡©<br>4.å¼‚å¸¸æµçš„æµ‹è¯•ä¸­ï¼Œåªå¼•å…¥ä¸€ç§å¼‚å¸¸çš„mocké‡å†™<br>5.åŠ æ³¨é‡Šï¼šæµ‹è¯•ä»€ä¹ˆåœºæ™¯ï¼ŒæœŸæœ›ä»€ä¹ˆç»“æœ</p>
<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>1ã€Mockito.anyString ä»€ä¹ˆçš„ï¼Œä¸èƒ½å’Œå®é™…çš„å‚æ•°ä¸€èµ·ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„è¾“å…¥ã€‚<br>ä¼šæŠ¥é”™ï¼šInvalidUseOfMatchersExceptionã€‚</p>
<p>2ã€æ¥å£çš„å•å…ƒæµ‹è¯•ç±»ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªå®ç°ç±»å°±ä¸€ä¸ªå•å…ƒæµ‹è¯•ç±»ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/09/myblog/spring/spring-aop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Sweetwater">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sweetwater's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/09/myblog/spring/spring-aop/" class="post-title-link" itemprop="url">spring aopæ€»ç»“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-09 11:56:23" itemprop="dateCreated datePublished" datetime="2022-04-09T11:56:23+08:00">2022-04-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-05-31 21:49:35" itemprop="dateModified" datetime="2022-05-31T21:49:35+08:00">2022-05-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å·¥ä½œä¸­é‡åˆ°ä¸ªaopçš„é—®é¢˜ï¼Œjdkä»£ç†æ¢cglibä»£ç†è¿˜ä¸è¿‡æ¥ï¼Œä»¥åŠjdkä»£ç†å­˜åœ¨çš„ä¸€ä¸ªé—®é¢˜ã€‚æ€»ç»“å¹¶å®æˆ˜ä¸€ä¸‹ã€‚</p>
<h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><h4 id="aopç›¸å…³æœ¯è¯­"><a href="#aopç›¸å…³æœ¯è¯­" class="headerlink" title="aopç›¸å…³æœ¯è¯­"></a>aopç›¸å…³æœ¯è¯­</h4><ul>
<li>Targetï¼šä»£ç†çš„ç›®æ ‡å¯¹è±¡</li>
<li>Proxyï¼šä»£ç†å¯¹è±¡</li>
<li>Joinpointï¼šè¿æ¥ç‚¹ï¼ŒæŒ‡é‚£äº›è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨Springä¸­ï¼Œè¿™äº›ç‚¹æŒ‡æ–¹æ³•ï¼Œå› ä¸ºSpringåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ï¼ˆå¯ä»¥è¢«å¢å¼ºçš„æ–¹æ³•ï¼‰</li>
<li>Pointcutï¼šåˆ‡å…¥ç‚¹æ˜¯æŒ‡æˆ‘ä»¬è¦å¯¹å“ªäº›Joinpointè¿›è¡Œæ‹¦æˆªçš„å®šä¹‰</li>
<li>Adviceï¼šï¼ˆé€šçŸ¥&#x2F;å¢å¼ºï¼‰æ˜¯æŒ‡æ‹¦æˆªåˆ°Joinpointä¹‹åè¦åšçš„äº‹æƒ…å°±æ˜¯é€šçŸ¥</li>
<li>Aspectï¼šåˆ‡é¢æ˜¯åˆ‡å…¥ç‚¹å’Œé€šçŸ¥ï¼ˆå¢å¼ºï¼‰çš„ç»“åˆ</li>
<li>Weavingï¼šç»‡å…¥å®è´¨æŠŠå°†åˆ‡ç‚¹å’Œå¢å¼ºç»“åˆçš„è¿‡ç¨‹æ˜¯ç»‡å…¥è¿‡ç¨‹ï¼ŒSpringæ˜¯åŠ¨æ€ä»£ç†ç»‡å…¥ï¼ŒAspectJæ˜¯é‡‡ç”¨ç¼–è¯‘æœŸç»‡å…¥å’Œç±»è£…è½½æœŸç»‡å…¥</li>
</ul>
<p>*è¿æ¥ç‚¹æ˜¯å¯ä»¥è¢«å¢å¼ºçš„æ–¹æ³•ï¼Œåˆ‡ç‚¹æ˜¯å®é™…ä¸Šè¢«å¢å¼ºè¿‡çš„æ–¹æ³•ï¼Œè¿æ¥ç‚¹èŒƒå›´æ›´å¤§</p>
<h4 id="aopå¼€å‘è¿‡ç¨‹"><a href="#aopå¼€å‘è¿‡ç¨‹" class="headerlink" title="aopå¼€å‘è¿‡ç¨‹"></a>aopå¼€å‘è¿‡ç¨‹</h4><ol>
<li><p>ç¼–å†™æ ¸å¿ƒä¸šåŠ¡ä»£ç ï¼ˆTargetçš„ç›®æ ‡æ–¹æ³•-åˆ‡ç‚¹ï¼‰</p>
</li>
<li><p>ç¼–å†™åˆ‡é¢ç±»ï¼Œåˆ‡é¢ç±»ä¸­æœ‰é€šçŸ¥ï¼ˆå¢å¼ºåŠŸèƒ½æ–¹æ³•ï¼‰</p>
</li>
<li><p>åœ¨é…ç½®æ–‡ä»¶&#x2F;æ³¨è§£å½“ä¸­ï¼Œé…ç½®ç»‡å…¥å…³ç³»ï¼Œå³å°†é‚£äº›é€šçŸ¥ä¸å“ªäº›è¿æ¥ç‚¹è¿›è¡Œç»“åˆ</p>
</li>
</ol>
<p>AOPæŠ€æœ¯å®ç°çš„å†…å®¹ï¼š<br>Springæ¡†æ¶ä¼šç›‘æ§åˆ‡å…¥ç‚¹æ–¹æ³•çš„æ‰§è¡Œâ€“é€šè¿‡é…ç½®æ–‡ä»¶å†³å®šå“ªäº›æ–¹æ³•æ˜¯åˆ‡ç‚¹ï¼›ä¸€æ—¦ç›‘æ§åˆ°åˆ‡å…¥ç‚¹æ–¹æ³•è¢«è¿è¡Œï¼Œå³ä½¿ç”¨ä»£ç†æœºåˆ¶ï¼ŒåŠ¨æ€åˆ›å»ºç›®æ ‡å¯¹è±¡ï¼ˆåˆ‡ç‚¹ï¼‰çš„ä»£ç†å¯¹è±¡ã€‚ç„¶åæ ¹æ®é…ç½®æ–‡ä»¶é…ç½®çš„å¢å¼ºç±»å‹ï¼ˆé€šçŸ¥ï¼‰ï¼Œåœ¨ä»£ç†å¯¹è±¡ï¼ˆåˆ‡ç‚¹ï¼‰å¯¹åº”çš„ä½ç½®ï¼Œå°†é€šçŸ¥å¯¹åº”çš„åŠŸèƒ½ç»‡å…¥ï¼Œå®Œæˆå®Œæ•´çš„ä»£ç é€»è¾‘è¿è¡Œã€‚<br>é…ç½®æ–‡ä»¶-æ‰§è¡Œåˆ‡ç‚¹æ–¹æ³•-ç›‘æ§åˆ°å¹¶åŠ¨æ€åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œè°ƒç”¨ä»£ç†å¯¹è±¡åŒåæ–¹æ³•-å†…éƒ¨è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼Œè¿›è¡Œå¢å¼ºæ–¹æ³•çš„ä»‹å…¥ã€‚</p>
<p>AOPåº•å±‚ä½¿ç”¨å“ªç§ä»£ç†æ–¹å¼ï¼š<br>Springä¼šæ ¹æ®ç›®æ ‡ç±»æ˜¯å¦å®ç°äº†æ¥å£æ¥å†³å®šé‡‡ç”¨å“ªç§åŠ¨æ€ä»£ç†ã€‚</p>
<h3 id="å®è·µ-é…ç½®æ–‡ä»¶"><a href="#å®è·µ-é…ç½®æ–‡ä»¶" class="headerlink" title="å®è·µ-é…ç½®æ–‡ä»¶"></a>å®è·µ-é…ç½®æ–‡ä»¶</h3><p>æ–°å»ºä¸ªspringé¡¹ç›®</p>
<ol>
<li><p>å¯¼å…¥ç›¸å…³ä¾èµ–ï¼šspring-contextã€spring-coreã€spring-beansï¼Œè¿˜æœ‰åˆ‡é¢çš„åŒ… Aspectjweaver</p>
</li>
<li><p>æ–°å»ºserviceæ¥å£ï¼Œæ–°å»ºå®ç°ç±»Impl</p>
</li>
<li><p>æ–°å»ºåˆ‡é¢ç±»ï¼Œå®šä¹‰åˆ‡é¢æ–¹æ³•</p>
</li>
<li><p>ç¼–å†™é…ç½®æ–‡ä»¶</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¼€å¯æ³¨è§£æ‰«æ  --&gt;</span><br><span class="line">&lt;context:component-scan base-package=&quot;com.aop.demo&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;aop:config proxy-target-class=&quot;false&quot;&gt;</span><br><span class="line">    &lt;aop:pointcut id=&quot;userServiceImplPointcut&quot; expression=&quot;execution(* com.aop.demo.UserServiceImpl.addUser(..))&quot; /&gt;</span><br><span class="line">    &lt;aop:aspect id=&quot;aopClass&quot; ref=&quot;aopMethods&quot;&gt;</span><br><span class="line">        &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;userServiceImplPointcut&quot; /&gt;</span><br><span class="line">        &lt;aop:after method=&quot;after&quot; pointcut-ref=&quot;userServiceImplPointcut&quot; /&gt;</span><br><span class="line">    &lt;/aop:aspect&gt;</span><br><span class="line">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>æµ‹è¯•æ–¹æ³•</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class AopTest &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void testUserServiceAop()&#123;</span><br><span class="line">        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;spring-aop.xml&quot;);</span><br><span class="line">        // proxy-target-class=&quot;false&quot; æ—¶ï¼Œä½¿ç”¨jdkä»£ç†</span><br><span class="line">        // å¼ºåˆ¶è½¬æ¢å¿…é¡»ç”¨çˆ¶ç±»æ¥å£æ¥å®šä¹‰</span><br><span class="line">        UserService userService = (UserService)context.getBean(&quot;userServiceImpl&quot;);</span><br><span class="line">        userService.addUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âš ï¸ proxy-target-class&#x3D;â€falseâ€ æˆ–é»˜è®¤è¡¨ç¤ºä½¿ç”¨jdkä»£ç†ï¼Œè·å–å¯¹è±¡éœ€è¦ç”¨çˆ¶ç±»æ¥å£ï¼Œç”¨å®ç°ç±»ä¼šæŠ¥<code>java.lang.ClassCastException: com.sun.proxy.$Proxy* cannot be cast to***</code> çš„é”™è¯¯ã€‚</p>
<p>âš ï¸ proxy-target-class&#x3D;â€trueâ€æ—¶ï¼Œä½¿ç”¨cglibä»£ç†ï¼Œä½¿ç”¨çˆ¶ç±»æ¥å£ä¹Ÿå¯ä»¥ï¼Œä½¿ç”¨å®ç°ç±»å®šä¹‰å¯¹è±¡ä¹Ÿå¯ä»¥ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//UserService userService = (UserService)context.getBean(&quot;userServiceImpl&quot;);</span><br><span class="line">UserServiceImpl userService = (UserServiceImpl)context.getBean(&quot;userServiceImpl&quot;);</span><br><span class="line">userService.addUser();</span><br></pre></td></tr></table></figure>

<p>âš ï¸ å¦å¤–ï¼Œè¿˜æœ‰ä¸ªç°è±¡æ˜¯åœ¨jdkä»£ç†æ—¶å­˜åœ¨çš„bugï¼š<br>åŸæœ¬çš„ï¼š <code>UserService userService = (UserService)context.getBean(&quot;userServiceImpl&quot;);</code> å¯ä»¥è·å¾—beanï¼Œæ²¡é—®é¢˜ã€‚<br>ä½†æ˜¯ï¼š <code>UserService userService = (UserService)context.getBean(UserServiceImpl.class);</code>  é€šè¿‡ç±»çš„å…¨è·¯å¾„è·å¾—beanå°±ä¼šå‡ºç°<code>No qualifying bean of type</code> çš„é—®é¢˜ã€‚<br>æ€»ç»“ï¼šjdkä»£ç†æ–¹å¼ä¸ç”¨å®ç°ç±»ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šç”¨å®ç°ç±»çš„beanï¼Œå³ä½¿é…äº†å®ç°ç±»çš„beanï¼Œä¹Ÿä¸è¡Œã€‚</p>
<p>åŸå› ï¼šspring aopé»˜è®¤æ˜¯ä½¿ç”¨jdkåŠ¨æ€ä»£ç†çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘é€šè¿‡getBean(ServiceImpl.class)ï¼Œè¡¨è¾¾å‡ºçš„æ„æ€æ˜¯å¸Œæœ›ç¨‹åºé€šè¿‡jdkåŠ¨æ€ä»£ç†ç»™æˆ‘ä¸€ä¸ªServiceImplç±»ã€‚è€Œjdkçš„åŠ¨æ€ä»£ç†æ˜¯åŸºäºæ¥å£å®ç°çš„ï¼Œå› ä¸ºå®ƒæœ¬èº«è¦ç»§æ‰¿ä¸€ä¸ªProxyç±»ï¼Œè€Œjavaæ˜¯å•ç»§æ‰¿ï¼ˆæ¥å£å¯ä»¥å¤šç»§æ‰¿ï¼‰ï¼Œæ‰€ä»¥å®ƒé€šè¿‡å®ç°æ¥å£è¿›è¡Œä»£ç†ã€‚å®ƒé€šè¿‡å®ç°æˆ‘ä»¬ç»™å®ƒçš„æ¥å£å’Œç»§æ‰¿Proxyç±»å®ç°jdkåŠ¨æ€ä»£ç†ã€‚è€Œæˆ‘ä»¬ç»™å®ƒçš„æ˜¯ä¸€ä¸ªServiceImplç±»ï¼Œè¿™ä¸ªæ—¶å€™jdkåŠ¨æ€ä»£ç†å°±æ²¡æœ‰åŠæ³•äº†ã€‚<br>jdkåŠ¨æ€ä»£ç†äº§ç”Ÿçš„å¯¹è±¡å±äºProxyç±»å‹ï¼Œå±äºç»™å®šçš„æ¥å£ï¼ˆServiceï¼‰ç±»å‹ï¼Œä½†ä¸å±äºæˆ‘ä»¬è¦ä»£ç†çš„é‚£ä¸ªå¯¹è±¡çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯æœ¬ä»£ç ä¸­ServiceImplç±»å‹<br>å› æ­¤ï¼Œä½¿ç”¨æ¥å£çš„ç±»è·¯å¾„ï¼š<code>UserService userService = (UserService)context.getBean(UserService.class);</code> ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚è¿™ä¹Ÿè§£é‡Šäº†å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜ã€‚<br>ä½†æ˜¯ï¼Œæ¢æˆcglibï¼Œå®ç°ç±»&#x2F;çˆ¶ç±»æ¥å£ï¼Œè·å–beançš„æ–¹å¼ï¼šid&#x2F;ç±»è·¯å¾„ï¼Œéƒ½å¯ä»¥ï¼Œæ²¡è§£é‡Šå·¥ä½œä¸­ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥æ¢æˆcglibçš„é—®é¢˜ã€‚</p>
<p>æ€»ç»“ï¼š<br>jdkä»£ç†ï¼šå¿…é¡»çˆ¶ç±»æ¥å£è·å¾—beanï¼Œæ‹¬å·å†…å¯ä»¥æ˜¯å®ç°ç±»çš„bean idï¼Œä¹Ÿå¯ä»¥æ˜¯çˆ¶ç±»æ¥å£çš„å…¨è·¯å¾„ã€‚<br>cglibä»£ç†ï¼šæ€ä¹ˆéƒ½è¡Œã€‚</p>
<h3 id="å®è·µ-æ³¨è§£"><a href="#å®è·µ-æ³¨è§£" class="headerlink" title="å®è·µ-æ³¨è§£"></a>å®è·µ-æ³¨è§£</h3><ol>
<li><p>ä½¿ç”¨@Aspectæ³¨è§£ï¼Œå‡ºäº†aspectweaveråŒ…ä¹‹å¤–ï¼Œè¿˜éœ€è¦aspectjrtåŒ…</p>
</li>
<li><p>æ–°å»ºserviceæ¥å£ï¼Œæ–°å»ºå®ç°ç±»Impl</p>
</li>
<li><p>æ–°å»ºåˆ‡é¢ç±»ï¼Œå®šä¹‰åˆ‡é¢æ–¹æ³•</p>
</li>
<li><p>ç¼–å†™é…ç½®ç±»</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">@ComponentScan(basePackages = &#123;&quot;com.aop.demo.zhujie&quot;&#125;)</span><br><span class="line">@EnableAspectJAutoProxy(proxyTargetClass = false)</span><br><span class="line">public class SpringCfg &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext context = new AnnotationConfigApplicationContext(SpringCfg.class);  //åŠ è½½é…ç½®ç±»</span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå’Œé…ç½®æ–‡ä»¶ä¸€æ ·ã€‚</p>
<h3 id="githubåœ°å€"><a href="#githubåœ°å€" class="headerlink" title="githubåœ°å€"></a>githubåœ°å€</h3><p><a target="_blank" rel="noopener" href="https://github.com/jadeliuliu/aop-demo">https://github.com/jadeliuliu/aop-demo</a></p>
<p>å‚è€ƒï¼š<br>çŸ¥è¯†ç‚¹ï¼š<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Zhang-DevelopingPlatform/p/14723490.html">https://www.cnblogs.com/Zhang-DevelopingPlatform/p/14723490.html</a></p>
<p>jdkä»£ç†æ‰¾ä¸åˆ°beanï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_32080243/article/details/90261768">https://blog.csdn.net/qq_32080243/article/details/90261768</a></p>
<p>cglibå®ç°ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/shaoweijava/article/details/76474652">https://blog.csdn.net/shaoweijava/article/details/76474652</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/03/myblog/java/log%E6%97%A5%E5%BF%97%E4%B8%8Emaven%E6%89%93%E5%8C%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Sweetwater">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sweetwater's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/03/myblog/java/log%E6%97%A5%E5%BF%97%E4%B8%8Emaven%E6%89%93%E5%8C%85/" class="post-title-link" itemprop="url">logæ—¥å¿—ä¸mavenæ‰“åŒ…</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-03 11:02:33" itemprop="dateCreated datePublished" datetime="2022-04-03T11:02:33+08:00">2022-04-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-20 15:34:30" itemprop="dateModified" datetime="2023-08-20T15:34:30+08:00">2023-08-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å·¥ä½œä¸­éœ€è¦å°†åº”ç”¨éƒ¨ç½²åœ¨æœ¬åœ°ï¼Œæƒ³æ¥ä¹‹å‰ç”¨goçš„æ—¶å€™è²Œä¼¼æ˜¯ç›´æ¥ç¼–è¯‘è¿è¡Œå°±åœ¨æœ¬åœ°éƒ¨ç½²äº†ï¼Œä½†æ˜¯javaéœ€è¦ç”¨åˆ°mavenæ‰“åŒ…ï¼Œè¿˜æ²¡æ‰“åŒ…è¿‡ï¼Œå­¦ä¹ ä¸€ä¸‹ã€‚é¡ºä¾¿å·¥ä½œä¸­æŸ¥çœ‹æ—¥å¿—å¯¹log4jã€sjf4jã€logbackã€lombackè¿™å‡ ä¸ªä¸œè¥¿æœ‰ç‚¹è¿·ç³Šï¼Œæ‰€ä»¥å…ˆå­¦ä¸€ä¸‹æ—¥å¿—ç›¸å…³çš„ï¼Œç„¶åå»ºå·¥ç¨‹æ‰“åŒ…éƒ¨ç½²åœ¨æœ¬åœ°çœ‹ä¸‹æ•ˆæœã€‚</p>
<h3 id="1-lombok"><a href="#1-lombok" class="headerlink" title="1.lombok"></a>1.lombok</h3><p>è‡ªç„¶ä¸å¿…å¤šè¯´ï¼Œlombokå¯ä»¥é€šè¿‡ç®€å•çš„æ³¨è§£çš„å½¢å¼æ¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–å’Œæ¶ˆé™¤ä¸€äº›å¿…é¡»æœ‰ä½†æ˜¾å¾—å¾ˆè‡ƒè‚¿çš„Javaä»£ç ï¼Œæ¯”å¦‚å¸¸è§çš„Getter&amp;Setterã€toString()ã€æ„é€ å‡½æ•°ç­‰ç­‰ã€‚lombokä¸ä»…æ–¹ä¾¿ç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿè®©æˆ‘ä»¬çš„ä»£ç æ›´ç®€æ´ã€‚</p>
<p>lombokæä¾›äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„jaråŒ…ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¸æˆ‘ä»¬çš„é¡¹ç›®è¿›è¡Œé›†æˆã€‚</p>
<h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>ç¬¬ä¸€æ­¥ï¼šåŠ å…¥lombokä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>scop&#x3D;providedï¼Œè¡¨ç¤ºå®ƒåªåœ¨ç¼–è¯‘é˜¶æ®µç”Ÿæ•ˆï¼Œä¸éœ€è¦æ‰“å…¥åŒ…ä¸­ï¼Œlombokåœ¨ç¼–è¯‘æœŸå°†å¸¦lombokæ³¨è§£çš„javaæ–‡ä»¶æ­£ç¡®ç¼–è¯‘ä¸ºå®Œæ•´çš„classæ–‡ä»¶ã€‚</p>
<p>ç¬¬äºŒæ­¥ï¼šideaä¸­æ·»åŠ lombokæ’ä»¶</p>
<p>å¦åˆ™ä¼šæŠ¥ç¼ºå°‘æ–¹æ³•å’Œæ²¡æœ‰è®¾ç½®å±æ€§çš„å¼‚å¸¸ã€‚</p>
<p>ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®å¯ç”¨æ³¨é‡Šå¤„ç†</p>
<p>è®¾ç½®ä¸­ Annotation processorsï¼Œenable annotation processingã€‚</p>
<h4 id="lombokåŸç†"><a href="#lombokåŸç†" class="headerlink" title="lombokåŸç†"></a>lombokåŸç†</h4><ol>
<li>javacå¯¹æºä»£ç è¿›è¡Œåˆ†æï¼Œç”Ÿæˆäº†ä¸€æ£µæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰</li>
<li>ç¼–è¯‘è¿‡ç¨‹ä¸­è°ƒç”¨å®ç°äº†â€œJSR 269 APIâ€çš„Lombokç¨‹åº</li>
<li>æ­¤æ—¶Lombokå°±å¯¹ç¬¬ä¸€æ­¥éª¤å¾—åˆ°çš„ASTè¿›è¡Œå¤„ç†ï¼Œæ‰¾åˆ°@Dataæ³¨è§£æ‰€åœ¨ç±»å¯¹åº”çš„è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œç„¶åä¿®æ”¹è¯¥è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œå¢åŠ getterå’Œsetteræ–¹æ³•å®šä¹‰çš„ç›¸åº”æ ‘èŠ‚ç‚¹</li>
<li>javacä½¿ç”¨ä¿®æ”¹åçš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶ï¼Œå³ç»™classå¢åŠ æ–°çš„èŠ‚ç‚¹ï¼ˆä»£ç å—ï¼‰</li>
</ol>
<h3 id="2-SLF4J"><a href="#2-SLF4J" class="headerlink" title="2.SLF4J"></a>2.SLF4J</h3><h4 id="æ¥å£ä¸åŒ…å…³ç³»"><a href="#æ¥å£ä¸åŒ…å…³ç³»" class="headerlink" title="æ¥å£ä¸åŒ…å…³ç³»"></a>æ¥å£ä¸åŒ…å…³ç³»</h4><p>Simple logging Facade for Javaï¼Œæ„æ€ä¸ºç®€å•æ—¥å¿—é—¨é¢ï¼Œå®ƒæ˜¯æŠŠä¸åŒçš„æ—¥å¿—ç³»ç»Ÿçš„å®ç°è¿›è¡Œäº†å…·ä½“çš„æŠ½è±¡åŒ–ï¼Œåªæä¾›äº†ç»Ÿä¸€çš„æ—¥å¿—ä½¿ç”¨æ¥å£ï¼Œä½¿ç”¨æ—¶åªéœ€è¦æŒ‰ç…§å…¶æä¾›çš„æ¥å£æ–¹æ³•è¿›è¡Œè°ƒç”¨å³å¯ï¼Œç”±äº<strong>å®ƒåªæ˜¯ä¸€ä¸ªæ¥å£</strong>ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„å¯ä»¥ç›´æ¥å•ç‹¬ä½¿ç”¨çš„æ—¥å¿—æ¡†æ¶ï¼Œæ‰€ä»¥æœ€ç»ˆæ—¥å¿—çš„æ ¼å¼ã€è®°å½•çº§åˆ«ã€è¾“å‡ºæ–¹å¼ç­‰éƒ½è¦<strong>é€šè¿‡æ¥å£ç»‘å®šçš„å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿæ¥å®ç°</strong>ï¼Œè¿™äº›å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿå°±æœ‰log4jã€logbackã€java.util.loggingç­‰ï¼Œå®ƒä»¬æ‰å®ç°äº†å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿçš„åŠŸèƒ½ã€‚</p>
<p>SLF4Jåªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®é™…ä½¿ç”¨æ—¶å¿…é¡»è¦ç»“åˆå…·ä½“çš„æ—¥å¿—ç³»ç»Ÿæ¥ä½¿ç”¨ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹SLF4Jå’Œå„ä¸ªå…·ä½“çš„æ—¥å¿—ç³»ç»Ÿè¿›è¡Œç»‘å®šæ—¶çš„æ¡†æ¶åŸç†å›¾ï¼š</p>
<p><img src="/images/logback.png"></p>
<p>slf4jåŸç†å¾ˆç®€å•ï¼Œä»–åªæä¾›ä¸€ä¸ªæ ¸å¿ƒslf4j api(å°±æ˜¯slf4j-api.jaråŒ…)ï¼Œè¿™ä¸ªåŒ…åªæœ‰æ—¥å¿—çš„æ¥å£ï¼Œå¹¶æ²¡æœ‰å®ç°ï¼Œæ‰€ä»¥å¦‚æœè¦ä½¿ç”¨å°±å¾—<strong>å†ç»™å®ƒæä¾›ä¸€ä¸ªå®ç°äº†äº›æ¥å£çš„æ—¥å¿—åŒ…</strong>ï¼Œæ¯” å¦‚ï¼šlog4jã€common loggingã€jdk logæ—¥å¿—å®ç°åŒ…ç­‰ï¼Œä½†æ˜¯<strong>è¿™äº›æ—¥å¿—å®ç°åˆä¸èƒ½é€šè¿‡æ¥å£ç›´æ¥è°ƒç”¨</strong>ï¼Œå®ç°ä¸Šä»–ä»¬æ ¹æœ¬å°±å’Œslf4j-apiä¸ä¸€è‡´ï¼Œå› æ­¤slf4jåˆå¢åŠ äº†ä¸€å±‚æ¥<strong>è½¬æ¢å„æ—¥å¿—å®ç°åŒ…çš„ä½¿ç”¨</strong>ï¼Œå½“ç„¶slf4j-simpleé™¤å¤–ã€‚å…¶ç»“æ„å¦‚ä¸‹ï¼š </p>
<blockquote>
<p>slf4j-api(æ¥å£å±‚)<br> | |<br>å„æ—¥å¿—å®ç°åŒ…çš„è¿æ¥å±‚( slf4j-jdk14, slf4j-log4j)<br> | |<br>å„æ—¥å¿—å®ç°åŒ… 	</p>
</blockquote>
<p><strong>æ‰€ä»¥ï¼Œç»“åˆå„æ—¥å¿—å®ç°åŒ…ä½¿ç”¨æ—¶æä¾›çš„jaråŒ…æƒ…å†µä¸ºï¼š</strong></p>
<p>SLF4Jå’Œlogbackç»“åˆä½¿ç”¨æ—¶éœ€è¦æä¾›çš„jarï¼šslf4j-api.jarã€logback-classic.jarã€logback-core.jar</p>
<p>SLF4Jå’Œlog4jç»“åˆä½¿ç”¨æ—¶éœ€è¦æä¾›çš„jarï¼šslf4j-api.jarã€slf4j-log4j12.jarã€log4j.jar</p>
<p>å’Œlog4j2é…åˆéœ€è¦å¯¼å…¥log4j2çš„<strong>log4j-api.jar</strong>ã€<strong>log4j-core.jar</strong>å’Œæ¡¥æ¥åŒ…<strong>log4j-slf4j-impl.jar</strong>ã€‚</p>
<p>SLF4Jå’ŒJDKä¸­java.util.loggingç»“åˆä½¿ç”¨æ—¶éœ€è¦æä¾›çš„jarï¼šslf4j-api.jarã€slf4j-jdk14.jar</p>
<p>SLF4Jå’Œsimple(SLF4Jæœ¬èº«æä¾›çš„ä¸€ä¸ªæ¥å£çš„ç®€å•å®ç°)ç»“åˆä½¿ç”¨æ—¶éœ€è¦æä¾›çš„jarï¼šslf4j-api.jarã€slf4j-simple.jar</p>
<p>å½“ç„¶è¿˜æœ‰å…¶ä»–çš„æ—¥å¿—å®ç°åŒ…ï¼Œä»¥ä¸Šæ˜¯ç»å¸¸ä¼šä½¿ç”¨åˆ°çš„ä¸€äº›ã€‚</p>
<p>*<strong>æ³¨æ„ï¼Œä»¥ä¸Šslf4jå’Œå„æ—¥å¿—å®ç°åŒ…ç»“åˆä½¿ç”¨æ—¶æœ€å¥½åªä½¿ç”¨ä¸€ç§ç»“åˆï¼Œä¸ç„¶çš„è¯ä¼šæç¤ºé‡å¤ç»‘å®šæ—¥å¿—ï¼Œå¹¶ä¸”ä¼šå¯¼è‡´æ—¥å¿—æ— æ³•è¾“å‡ºã€‚*</strong></p>
<h4 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>*<strong>slf4j-api.jar:å¯¹å¤–æä¾›ç»Ÿä¸€çš„æ—¥å¿—è°ƒç”¨æ¥å£ï¼Œè¯¥æ¥å£å…·ä½“æä¾›çš„è°ƒç”¨æ–¹å¼å’Œæ–¹æ³•ä¸¾ä¾‹è¯´æ˜ï¼š*</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">ã€€ã€€<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(Tester.class);  </span><br><span class="line">ã€€ã€€<span class="comment">//é€šè¿‡LoggerFactoryè·å–Loggerå®ä¾‹</span></span><br><span class="line">ã€€ã€€<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="comment">//æ¥å£é‡Œçš„ç»Ÿä¸€çš„è°ƒç”¨æ–¹æ³•ï¼Œå„å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿéƒ½æœ‰å®ç°è¿™äº›æ–¹æ³•</span></span><br><span class="line">ã€€ã€€		logger.info(<span class="string">&quot;testlog: &#123;&#125;&quot;</span>, <span class="string">&quot;test&quot;</span>); </span><br><span class="line">       logger.debug(<span class="string">&quot;testlog: &#123;&#125;&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">       logger.error(<span class="string">&quot;testlog: &#123;&#125;&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">       logger.trace(<span class="string">&quot;testlog: &#123;&#125;&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">       logger.warn(<span class="string">&quot;testlog: &#123;&#125;&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨Lombokæä¾›çš„@Slf4jæ³¨è§£ï¼Œå¯ä»¥çœå»è·å–Loggerå¯¹è±¡çš„æ­¥éª¤ï¼Œç›´æ¥ä½¿ç”¨log.info()â€¦</p>
<p><strong>å¦‚æœç³»ç»Ÿä¸­ä¹‹å‰å·²ç»ä½¿ç”¨äº†log4jåšæ—¥å¿—è¾“å‡ºï¼Œæƒ³ä½¿ç”¨slf4jä½œä¸ºç»Ÿä¸€çš„æ—¥å¿—è¾“å‡ºï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</strong></p>
<p>å¦‚æœä¹‹å‰ç³»ç»Ÿä¸­æ˜¯å•ç‹¬ä½¿ç”¨log4jåšä¸ºæ—¥å¿—è¾“å‡ºçš„ï¼Œè¿™æ—¶å†æƒ³ä½¿ç”¨slf4jåšä¸ºæ—¥å¿—è¾“å‡ºæ—¶ï¼Œå¦‚æœç³»ç»Ÿä¸­æ—¥å¿—æ¯”è¾ƒå¤šï¼Œæ­¤æ—¶æ›´æ”¹æ—¥å¿—è¾“å‡ºæ–¹æ³•è‚¯å®šæ˜¯ä¸å¤ªç°å®çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨log4j-over-slf4j.jarå°†ä½¿ç”¨log4jæ—¥å¿—æ¡†æ¶è¾“å‡ºçš„æ—¥å¿—è·¯ç”±åˆ°slf4jä¸Šæ¥ç»Ÿä¸€é‡‡ç”¨slf4jæ¥è¾“å‡ºæ—¥å¿—ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆä½¿ç”¨ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨ï¼Ÿ</h4><p><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨SLF4J?</strong></p>
<ul>
<li>slf4jæ˜¯ä¸€ä¸ª<strong>æ—¥å¿—æ¥å£ï¼Œè‡ªå·±æ²¡æœ‰å…·ä½“å®ç°æ—¥å¿—ç³»ç»Ÿ</strong>ï¼Œåªæä¾›äº†ä¸€ç»„æ ‡å‡†çš„è°ƒç”¨api,è¿™æ ·<strong>å°†è°ƒç”¨å’Œå…·ä½“çš„æ—¥å¿—å®ç°åˆ†ç¦»</strong>ï¼Œ<strong>ä½¿ç”¨slf4jåæœ‰åˆ©äºæ ¹æ®è‡ªå·±å®é™…çš„éœ€æ±‚æ›´æ¢å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿ</strong>ï¼Œæ¯”å¦‚ï¼Œä¹‹å‰ä½¿ç”¨çš„å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿä¸ºlog4jï¼Œæƒ³æ›´æ¢ä¸ºlogbackæ—¶ï¼Œåªéœ€è¦åˆ é™¤log4jç›¸å…³çš„jarï¼Œç„¶ååŠ å…¥logbackç›¸å…³çš„jarå’Œæ—¥å¿—é…ç½®æ–‡ä»¶å³å¯ï¼Œè€Œä¸éœ€è¦æ”¹åŠ¨å…·ä½“çš„æ—¥å¿—è¾“å‡ºæ–¹æ³•ï¼Œè¯•æƒ³å¦‚æœæ²¡æœ‰é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œå½“ä½ çš„ç³»ç»Ÿä¸­æ—¥å¿—è¾“å‡ºæœ‰æˆåƒä¸Šä¸‡æ¡æ—¶ï¼Œä½ è¦æ›´æ¢æ—¥å¿—ç³»ç»Ÿå°†æ˜¯å¤šä¹ˆåºå¤§çš„ä¸€é¡¹å·¥ç¨‹ã€‚å¦‚æœä½ å¼€å‘çš„æ˜¯ä¸€ä¸ªé¢å‘å…¬ä¼—ä½¿ç”¨çš„ç»„ä»¶æˆ–å…¬å…±æœåŠ¡æ¨¡å—ï¼Œé‚£ä¹ˆä¸€å®šè¦ä½¿ç”¨slf4çš„è¿™ç§å½¢å¼ï¼Œè¿™æœ‰åˆ©äºåˆ«äººåœ¨è°ƒç”¨ä½ çš„æ¨¡å—æ—¶ä¿æŒå’Œä»–ç³»ç»Ÿä¸­ä½¿ç”¨ç»Ÿä¸€çš„æ—¥å¿—è¾“å‡ºã€‚</li>
<li><strong>slf4jæ—¥å¿—è¾“å‡ºæ—¶å¯ä»¥ä½¿ç”¨{}å ä½ç¬¦</strong>ï¼Œå¦‚ï¼Œlogger.info(â€œtestlog: {}â€, â€œtestâ€)ï¼Œè€Œå¦‚æœåªä½¿ç”¨log4jåšæ—¥å¿—è¾“å‡ºæ—¶ï¼Œåªèƒ½ä»¥logger.info(â€œtestlog:â€+â€testâ€)è¿™ç§å½¢å¼ï¼Œå‰è€…è¦æ¯”åè€…åœ¨æ€§èƒ½ä¸Šæ›´å¥½ï¼Œåè€…é‡‡ç”¨+è¿æ¥å­—ç¬¦ä¸²æ—¶å°±æ˜¯new ä¸€ä¸ªString å­—ç¬¦ä¸²ï¼Œåœ¨æ€§èƒ½ä¸Šå°±ä¸å¦‚å‰è€…ã€‚</li>
</ul>
<h3 id="3-log4j-log-for-java"><a href="#3-log4j-log-for-java" class="headerlink" title="3.log4j(log for java)"></a>3.<strong>log4j(log for java)</strong></h3><p>Log4jæ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥<strong>æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°</strong>æ˜¯æ§åˆ¶å°ã€æ–‡ä»¶ã€GUIç»„ä»¶ï¼Œç”šè‡³æ˜¯å¥—æ¥å£æœåŠ¡å™¨ã€NTçš„äº‹ä»¶è®°å½•å™¨ã€UNIX Syslogå®ˆæŠ¤è¿›ç¨‹ç­‰ï¼›æˆ‘ä»¬ä¹Ÿå¯ä»¥<strong>æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼</strong>ï¼›é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹ã€‚æœ€ä»¤äººæ„Ÿå…´è¶£çš„å°±æ˜¯ï¼Œè¿™äº›å¯ä»¥<strong>é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥çµæ´»åœ°è¿›è¡Œé…ç½®</strong>ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç ã€‚</p>
<p><strong>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</strong></p>
<ul>
<li>å¼•å…¥jar,ä½¿ç”¨log4jæ—¶éœ€è¦çš„jarä¸ºï¼šlog4j.jarã€‚</li>
<li>å®šä¹‰é…ç½®æ–‡ä»¶log4j.propertiesæˆ–log4j.xml</li>
<li>åœ¨å…·ä½“çš„ç±»ä¸­è¿›è¡Œä½¿ç”¨ï¼š<ul>
<li>åœ¨éœ€è¦æ—¥å¿—è¾“å‡ºçš„ç±»ä¸­åŠ å…¥ï¼šprivate static final Logger logger &#x3D; Logger.getLogger(Tester.class);  &#x2F;&#x2F;é€šè¿‡Loggerè·å–Loggerå®ä¾‹</li>
<li>åœ¨éœ€è¦è¾“å‡ºæ—¥å¿—çš„åœ°æ–¹è°ƒç”¨ç›¸åº”æ–¹æ³•å³å¯ï¼šlogger.debug(â€œSystem â€¦..â€)</li>
</ul>
</li>
</ul>
<h3 id="4-logback"><a href="#4-logback" class="headerlink" title="4.logback"></a>4.logback</h3><p>logbackåŒæ ·æ˜¯ç”±log4jçš„ä½œè€…è®¾è®¡å®Œæˆçš„ï¼Œæ‹¥æœ‰æ›´å¥½çš„ç‰¹æ€§ï¼Œç”¨æ¥å–ä»£log4jçš„ä¸€ä¸ªæ—¥å¿—æ¡†æ¶ï¼Œæ˜¯slf4jçš„åŸç”Ÿå®ç°(å³ç›´æ¥å®ç°äº†slf4jçš„æ¥å£ï¼Œè€Œlog4jå¹¶æ²¡æœ‰ç›´æ¥å®ç°ï¼Œæ‰€ä»¥å°±éœ€è¦ä¸€ä¸ªé€‚é…å™¨slf4j-log4j12.jar)ï¼Œlogbackä¸€å…±æœ‰ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š</p>
<ul>
<li>logback-coreï¼šå…¶å®ƒä¸¤ä¸ªæ¨¡å—çš„åŸºç¡€æ¨¡å—</li>
<li>logback-classicï¼šå®ƒæ˜¯log4jçš„ä¸€ä¸ªæ”¹è‰¯ç‰ˆæœ¬ï¼ŒåŒæ—¶å®ƒå®Œæ•´å®ç°äº†slf4j APIä½¿ä½ å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›´æ¢æˆå…¶å®ƒæ—¥å¿—ç³»ç»Ÿå¦‚log4jæˆ–JDK14 Logging</li>
<li>logback-accessï¼šè®¿é—®æ¨¡å—ä¸Servletå®¹å™¨é›†æˆæä¾›é€šè¿‡Httpæ¥è®¿é—®æ—¥å¿—çš„åŠŸèƒ½</li>
</ul>
<p>åŒæ ·ï¼Œå•ç‹¬ä½¿ç”¨å®ƒæ—¶ï¼Œéœ€è¦å¼•å…¥ä»¥ä¸Šjarï¼Œç„¶åè¿›è¡Œé…ç½®æ–‡ä»¶çš„é…ç½®ï¼Œæœ€åå°±æ˜¯åœ¨ç›¸å…³ç±»ä¸­è¿›è¡Œä½¿ç”¨ï¼Œä½¿ç”¨æ—¶åŠ å…¥ä»¥ä¸‹è¯­å¥:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(Test.class);</span><br><span class="line"> ã€€logger.info(<span class="string">&quot;æ‰“å°æ—¥å¿—&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦æ”¹ä»£ç çš„æ—¥å¿—çº§åˆ«ï¼šæ”¹logback-spring.xmlé‡Œçš„<code>&lt;root level=&quot;INFO&quot;&gt;</code></p>
<h3 id="5-logå‘å±•å²"><a href="#5-logå‘å±•å²" class="headerlink" title="5.logå‘å±•å²"></a>5.logå‘å±•å²</h3><p>ä»JDK1.4å¼€å§‹æä¾›java.until.loggingæ—¥å¿—æ¡†æ¶æ¥æ‰“å°æ—¥å¿—ï¼Œä½†æ˜¯å¤§ä½¬è§‰å¾—JULå¤ªéš¾ç”¨äº†ï¼Œå°±è‡ªå·±æ‰‹æ’¸äº†ä¸ªlog4jï¼Œåæ¥log4jå‘ç°å®‰å…¨æ¼æ´ï¼ŒåŠ ä¸Šä»£ç ç»“æ„é—®é¢˜éš¾ä»¥ç»´æŠ¤ï¼Œäºæ˜¯ä»1.2å°±åœæ­¢æ›´æ–°log4jï¼Œå¹¶åˆé‡æ–°æ‰‹æ’¸äº†ä¸ªlog4j2ï¼Œå†åæ¥ï¼Œè¿™ä¸ªå¤§ä½¬åˆåŒæ‰‹æ’¸äº†ä¸€ä¸ªæ€§èƒ½æ›´é«˜ã€åŠŸèƒ½æ›´å…¨çš„logbackã€‚</p>
<p>ä»æ­¤ï¼Œè¿™ä¸ªå¤§ä½¬æ„å»ºäº†logçš„ä¸–ç•Œï¼Œä¹Ÿåˆ›é€ äº†æœ€å¸¸è§çš„æ—¥å¿—æ¡†æ¶ï¼šlog4jã€log4j2ã€logbackã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨log4jï¼Œéœ€è¦log4j.jar</span></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"><span class="type">Logger</span> <span class="variable">logger_log4j</span> <span class="operator">=</span> Logger.getLogger(Test.class);</span><br><span class="line">logger_log4j.info(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨log4j2ï¼Œéœ€è¦log4j-api.jarã€log4j-core.jar</span></span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.LogManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.Logger;</span><br><span class="line"><span class="type">Logger</span> <span class="variable">logger_log4j2</span> <span class="operator">=</span> LogManager.getLogger(Test.class);</span><br><span class="line">logger_log4j2.info(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// logbackï¼Œéœ€è¦logback-classic.jarã€logback-core.jar</span></span><br><span class="line"><span class="keyword">import</span> ch.qos.logback.classic.Logger;</span><br><span class="line"><span class="keyword">import</span> ch.qos.logback.classic.LoggerContext;</span><br><span class="line"><span class="type">Logger</span> <span class="variable">logger_logback</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LoggerContext</span>().getLogger(Test.class);</span><br><span class="line">logger_logback.info(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// java.until.loggingï¼Œç®€ç§°jul</span></span><br><span class="line"><span class="keyword">import</span> java.util.logging.Logger;</span><br><span class="line"><span class="type">Logger</span> <span class="variable">logger_jul</span> <span class="operator">=</span> Logger.getLogger(<span class="string">&quot;java.Test&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢ä¸éš¾çœ‹å‡ºï¼Œä½¿ç”¨ä¸åŒçš„æ—¥å¿—æ¡†æ¶ï¼Œå°±è¦å¼•å…¥ä¸åŒçš„jaråŒ…ï¼Œä½¿ç”¨ä¸åŒçš„ä»£ç è·å–Loggerã€‚</p>
<p>äºæ˜¯Apache Commons Loggingå‡ºç°äº†ã€‚</p>
<p>Common-loggingæä¾›äº†ä¸€ä¸ªæ—¥å¿—å…¥å£ï¼Œç§°ä½œâ€é—¨é¢æ—¥å¿—â€ï¼Œå³å®ƒä¸è´Ÿè´£å†™æ—¥å¿—ï¼Œè€Œæ˜¯<strong>æä¾›ç”¨ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œé€šè¿‡jaræ¥å†³å®šä½¿ç”¨çš„æ—¥å¿—æ¡†æ¶</strong>ï¼Œè¿™æ ·å°±ä¸è¦å†æ›´æ¢æ¡†æ¶çš„æ—¶å€™å†ä¿®æ”¹ä»£ç äº†ã€‚åæ¥å¼€å‘äº†log4jçš„å¤§ä½¬åˆå› ä¸ºå«Œå¼ƒCommon-loggingéš¾ç”¨ï¼Œå¼€å‘äº†é—¨é¢æ—¥å¿—æ¡†æ¶<strong>slf4j</strong>ï¼Œä»Šå¤©å°±æ‹¿slf4jè®²è¿°é—¨é¢æ—¥å¿—ã€‚</p>
<p>é—¨é¢æ—¥å¿—å’Œè®¾è®¡æ¨¡å¼ä¸­çš„<strong>å¤–è§‚æ¨¡å¼</strong>å¦‚å‡ºä¸€è¾™ï¼Œæœ¬èº«ä¸æä¾›æœåŠ¡ï¼Œä¸ºå­ç³»ç»Ÿæä¾›ç»Ÿä¸€çš„å…¥å£ï¼Œå°è£…å­ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œä¾¿äºå®¢æˆ·ç«¯è°ƒç”¨ã€‚slf4jå°±åƒæ˜¯èœé¸Ÿé©¿ç«™ï¼Œæœ¬èº«æ²¡æœ‰å¿«é€’æœåŠ¡ï¼Œä½†æ˜¯æä¾›é¡ºä¸°ã€ä¸­é€šç­‰å¿«é€’æœåŠ¡ï¼Œè‡³äºä½ æƒ³ç”¨é¡ºä¸°è¿˜æ˜¯ç”¨ä¸­é€šï¼Œå®Œå…¨å–å†³äºä½ çš„æƒ³æ³•ã€‚</p>
<p>ä½¿ç”¨slf4jï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(Test.class);</span><br><span class="line">logger.info(<span class="string">&quot;Hello World!&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨slf4jéœ€è¦é¦–å…ˆå¯¼å…¥<strong>slf4j-api.jar</strong>ï¼Œå’Œlog4jé…åˆï¼Œéœ€è¦å¯¼å…¥<strong>log4j.jar</strong>ï¼Œä»¥åŠæ¡¥æ¥åŒ…<strong>slf4j-log412.jar</strong>ã€‚</p>
<p>logbackåªéœ€è¦å¯¼å…¥<strong>logback-classic.jar</strong>å’Œ<strong>logback-core.jar</strong>å³å¯ï¼Œä¸éœ€è¦æ¡¥æ¥åŒ…ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆä½¿ç”¨æ¡¥æ¥åŒ…ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨æ¡¥æ¥åŒ…ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨æ¡¥æ¥åŒ…ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨æ¡¥æ¥åŒ…ï¼Ÿ</h4><p>slf4jä»LoggerFactory.getLogger()å¼€å§‹ï¼ŒåŸç†å°±æ˜¯å°±æ˜¯è®©ClassLoaderä»classpath(ä¾èµ–çš„jar)ä¸­æ‰¾åˆ°<strong>StaticLoggerBinder</strong>è¿™ä¸ªç±»ï¼Œç„¶ååˆ©ç”¨ä»–æ¥è¿”å›log4jã€logbackä¸­çš„Loggerï¼Œç„¶åæ‰“å°æ—¥å¿—ã€‚</p>
<p>æ‰€è°“çš„æ¡¥æ¥åŒ…ï¼Œå°±æ˜¯å®ç°StaticLoggerBinderç±»ï¼Œç”¨æ¥è¿æ¥slf4jå’Œæ—¥å¿—æ¡†æ¶ã€‚å› ä¸ºlog4jå’Œlog4j2åˆšå¼€å§‹æ²¡æœ‰StaticLoggerBinderè¿™ä¸ªç±»ï¼Œä¸ºäº†ä¸æ”¹å˜ç¨‹åºç»“æ„ï¼Œåªèƒ½é‡æ–°å†™ä¸€ä¸ªæ–°çš„jaræ¥å®ç°StaticLoggerBinderã€‚è€Œlogbackå‡ºç°slf4jä¹‹åï¼Œäºæ˜¯åœ¨logbackæœ¬èº«çš„jarä¸­å®ç°äº†StaticLoggerBinderï¼Œæ‰€ä»¥å°±ä¸éœ€è¦æ¡¥æ¥åŒ…ã€‚</p>
<p>StaticLoggerBinderå®ç°äº†ä½¿ç”¨åº•å±‚æ—¥å¿—æ¡†æ¶åˆ›å»ºLoggerçš„åŠŸèƒ½ï¼Œå„è‡ªçš„StaticLoggerBinderä¸ºslf4jæä¾›çš„Loggerï¼Œå†æä¾›ç»™ç”¨æˆ·æ‰“å°æ—¥å¿—ã€‚</p>
<p>log4jå’Œlog4j2æ¡¥æ¥åŒ…åŠlogbackä¾èµ–é‡Œï¼Œéƒ½æœ‰StaticLoggerBinderç±»ã€‚</p>
<p>â€œClass path contains multiple SLF4J bindings.â€åœ¨ä½¿ç”¨slf4jçš„æ—¶å€™ä¼šé‡åˆ°ä»¥ä¸Šçš„æŠ¥å‘Šä¿¡æ¯ã€‚ç©¶å…¶æ ¹æœ¬æ˜¯å› ä¸ºlogback-classicã€log4j-slf4j-implã€slf4j-log412ã€slf4j-jdkè¿™äº›jarä¸èƒ½åŒæ—¶å­˜åœ¨ã€‚ä»–ä»¬éƒ½å®ç°äº†StaticLoggerBinderç±»è€Œå¯¼è‡´å†²çªï¼Œslf4jæ— æ³•ç¡®å®šåˆ°åº•ç”¨å“ªä¸ªæ—¥å¿—æ¡†æ¶ã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ol>
<li><p>lombokæ˜¯ä¸€ä¸ªå¯ä»¥ç®€åŒ–ä»£ç çš„jaråŒ…ï¼Œéœ€è¦å¯¼å…¥ä¾èµ–ï¼Œæ·»åŠ æ’ä»¶ï¼Œå¯ä»¥è¯´æ˜¯å¼€å‘å¿…å¤‡ã€‚è·Ÿæ—¥å¿—æ²¡å•¥å…³ç³»ï¼Œåªä¸è¿‡@Slf4jæ³¨è§£æ˜¯lombokæä¾›çš„ï¼Œç”¨æ¥åœ¨æ–¹æ³•ä¸­ç›´æ¥ä½¿ç”¨logã€‚</p>
</li>
<li><p>slf4jæ˜¯æ—¥å¿—é—¨é¢ï¼Œä¸€ä¸ªæ—¥å¿—æ¥å£ï¼Œè€Œä¸æä¾›æ—¥å¿—ç³»ç»Ÿå®ç°ï¼Œæ–¹ä¾¿æ—¥å¿—ç³»ç»Ÿä¸è°ƒç”¨çš„åˆ†ç¦»ï¼Œå¯ä»¥æ–¹ä¾¿æ›´æ¢æ—¥å¿—ç³»ç»Ÿã€‚ç›¸å½“äºæ˜¯æä¾›äº†ä¸€ç§æ—¥å¿—è¾“å‡ºçš„è§„èŒƒï¼Œä¸‹é¢çš„æ—¥å¿—ç³»ç»Ÿéƒ½éœ€è¦å®ç°è¿™äº›æ–¹æ³•ï¼Œç»Ÿä¸€äº†æ—¥å¿—è¾“å‡ºè§„èŒƒã€‚å®ƒå®ç°äº†æ—¥å¿—æ¡†æ¶ä¸€äº›é€šç”¨çš„apiï¼Œlog4jå’Œlogbackæ˜¯å…·ä½“çš„æ—¥å¿—æ¡†æ¶ã€‚</p>
</li>
<li><p>log4jå°±æ˜¯ä¸€ä¸ªæ—¥å¿—å®ç°ç³»ç»Ÿï¼Œå…·ä½“çš„é…ç½®æ–‡ä»¶log4j.propertiesæ€ä¹ˆå†™ï¼Œè¿˜å¾—å†çœ‹çœ‹ã€‚log4jåœ¨ç»“åˆslf4jæ—¶éœ€è¦ä½¿ç”¨ä¸€ä¸ªé€‚é…ç±»æ¡¥æ¥åŒ…ã€‚ä½¿ç”¨Logger.getLoggerã€‚</p>
</li>
<li><p>logbackæ—¶æ¯”log4jæ–°çš„æ—¥å¿—å®ç°ç³»ç»Ÿï¼Œç›´æ¥å®ç°äº†slf4jæ¥å£ï¼Œä½¿ç”¨LoggerFactory.getLoggerã€‚</p>
<p>ä»–ä»¬å¯ä»¥å•ç‹¬çš„ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç»‘å®šslf4jä¸€èµ·ä½¿ç”¨ã€‚</p>
<p>å•ç‹¬ä½¿ç”¨ï¼Œåˆ†åˆ«è°ƒç”¨æ¡†æ¶è‡ªå·±çš„æ–¹æ³•æ¥è¾“å‡ºæ—¥å¿—ä¿¡æ¯ã€‚ç»‘å®šslf4jä¸€èµ·ä½¿ç”¨ã€‚è°ƒç”¨slf4jçš„apiæ¥è¾“å…¥æ—¥å¿—ä¿¡æ¯ï¼Œå…·ä½“ä½¿ç”¨ä¸åº•å±‚æ—¥å¿—æ¡†æ¶æ— å…³ï¼ˆéœ€è¦åº•å±‚æ¡†æ¶çš„é…ç½®æ–‡ä»¶ï¼‰ã€‚æ˜¾ç„¶ä¸æ¨èå•ç‹¬ä½¿ç”¨æ—¥å¿—æ¡†æ¶ã€‚å‡è®¾é¡¹ç›®ä¸­å·²ç»ä½¿ç”¨äº†log4jï¼Œè€Œæˆ‘ä»¬æ­¤æ—¶åŠ è½½äº†ä¸€ä¸ªç±»åº“ï¼Œè€Œè¿™ä¸ªç±»åº“ä¾èµ–å¦ä¸€ä¸ªæ—¥å¿—æ¡†æ¶ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç»´æŠ¤ä¸¤ä¸ªæ—¥å¿—æ¡†æ¶ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸éº»çƒ¦çš„äº‹æƒ…ã€‚è€Œä½¿ç”¨äº†slf4jå°±ä¸åŒäº†ï¼Œç”±äºåº”ç”¨è°ƒç”¨çš„æŠ½è±¡å±‚çš„apiï¼Œä¸åº•å±‚æ—¥å¿—æ¡†æ¶æ˜¯æ— å…³çš„ï¼Œå› æ­¤å¯ä»¥ä»»æ„æ›´æ¢æ—¥å¿—æ¡†æ¶ã€‚</p>
</li>
</ol>
<h3 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h3><h4 id="1-mavené¡¹ç›®"><a href="#1-mavené¡¹ç›®" class="headerlink" title="1.mavené¡¹ç›®"></a>1.mavené¡¹ç›®</h4><p>å¾ˆä¹…æ²¡åœ¨è¿™ä¸ªç”µè„‘ä¸Šæ–°å»ºmavené¡¹ç›®ï¼Œç»“æœé—®é¢˜æ¥äº†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~/.m2 â¯ mvn -v      </span><br><span class="line">zsh: command not found: mvn</span><br></pre></td></tr></table></figure>

<p>ä¹‹å‰å‡ºç°çš„é—®é¢˜åˆå‡ºç°äº†ï¼Œä¹‹å‰é‡æ–°é…ç½®äº†ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œå¯æ˜¯brew info maven ä¹Ÿæ‰¾ä¸åˆ°ä¹‹å‰mavenå®‰è£…çš„è·¯å¾„ï¼Œéš¾é“ä¹‹å‰æˆ‘ä¸æ˜¯é€šè¿‡brewå®‰è£…çš„å—ï¼Ÿ</p>
<p>å¦å¤–åœ¨èµ„æºåº“ä¸­ä¹Ÿæ²¡æ‰¾åˆ°ï¼Œå¥½å§ï¼Œé‡æ–° brew install maven ğŸ˜…ã€‚å¯æ˜¯brewå®‰è£…æŠ¥é”™ã€‚</p>
<p>å®˜ç½‘<a target="_blank" rel="noopener" href="https://maven.apache.org/download.cgi%E4%B8%8B%E8%BD%BDapache-maven-3.8.5-bin.tar.gz%E3%80%82%E8%A7%A3%E5%8E%8B%E5%88%B0%E8%B5%84%E6%BA%90%E5%BA%93%E4%B8%AD%E3%80%82%E9%82%A3%E4%B9%88%E5%A6%82%E4%BD%95%E4%BD%BF%E5%BE%97%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD%E8%BE%93%E5%85%A5mvn%E8%83%BD%E5%A4%9F%E6%89%BE%E5%88%B0maven%E5%8C%85%EF%BC%9F%E5%B0%B1%E9%9C%80%E8%A6%81%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E4%BA%86%E3%80%82">https://maven.apache.org/download.cgiä¸‹è½½apache-maven-3.8.5-bin.tar.gzã€‚è§£å‹åˆ°èµ„æºåº“ä¸­ã€‚é‚£ä¹ˆå¦‚ä½•ä½¿å¾—åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥mvnèƒ½å¤Ÿæ‰¾åˆ°mavenåŒ…ï¼Ÿå°±éœ€è¦é…ç½®ç¯å¢ƒå˜é‡äº†ã€‚</a></p>
<p>ä¸‹è½½ä¹‹åï¼Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œä¸ç»æƒ³èµ·ä¹‹å‰çš„ç–‘é—®ï¼šjdkç¯å¢ƒå˜é‡åœ¨&#x2F;etc&#x2F;profileä¸­é…ç½®ï¼Œè€Œmavenä¸­çš„ç¯å¢ƒå˜é‡åœ¨~&#x2F;.bash_profileï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>æˆ‘ä»¬å¸¸è¯´çš„ç¯å¢ƒå˜é‡ä¿®æ”¹ä¸»è¦åŒ…å«ä¸¤ç±»æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ profile å’Œ bashrc æ–‡ä»¶ã€‚profile æ–‡ä»¶åˆåˆ†ä¸ºï¼šâ€&#x2F;etc&#x2F;profileâ€ï¼Œâ€<del>&#x2F;.bash_profileâ€ï¼›bashrc æ–‡ä»¶åˆ™åˆåˆ†ä¸º â€œ&#x2F;etc&#x2F;bashrcâ€ï¼Œå’Œ â€œ</del>&#x2F;.bashrcâ€ æ–‡ä»¶ã€‚</p>
<p>è¯´åˆ°è¿™å„¿ï¼Œå¯èƒ½è¿·æƒ‘äº†ï¼Œæˆ‘åœ¨æˆ‘ç”µè„‘é‡Œæ²¡çœ‹åˆ°.bash_profileå’Œ.bashrcå•Šï¼Œä½†æ˜¯çœ‹åˆ°.zshrcäº†ï¼Œè¿™æ˜¯ä¸ºå•¥ï¼Ÿ</p>
<blockquote>
<p>iterm2ä»¥åŠmacè‡ªå¸¦çš„terminaléƒ½æ˜¯ç»ˆç«¯æ¨¡æ‹Ÿå™¨ã€‚æœ€å¼€å§‹æ—¶å€™å°±ç”¨èµ·äº†iterm2.</p>
<p>bashï¼Œzshæ˜¯shellï¼Œzshå…¼å®¹bash</p>
<p>shellï¼šå£³ï¼Œç”¨å®ƒè¡¨ç¤ºâ€œä¸ºä½¿ç”¨è€…æä¾›çš„æ“ä½œç•Œé¢â€ï¼ŒShellæ³›æŒ‡æ‰€æœ‰ä¸ºç”¨æˆ·æä¾›æ“ä½œç•Œé¢çš„ç¨‹åºï¼Œåˆ†ä¸ºä¸¤ç±»ï¼šå‘½ä»¤è¡Œï¼ˆCLIï¼‰ä¸å›¾å½¢ç•Œé¢ï¼ˆGUIï¼‰ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨èŠshellçš„æ—¶å€™ï¼Œå…¶å®éƒ½æ˜¯èŠçš„Linuxçš„å‘½ä»¤è¡Œç•Œé¢ã€‚</p>
</blockquote>
<blockquote>
<p>shå’Œbashå’Œzsh :</p>
<p>shå…¨ç§°ä¸ºBourne Shellï¼Œæ¥è‡ªäº1977å¹´åº•çš„Unix v7ç‰ˆã€‚äºŒè¿›åˆ¶æ–‡ä»¶ä½ç½®ä¸º<code>/bin/sh</code>ã€‚ </p>
<p>bashå…¨ç§°ä¸ºBourne-Again Shellï¼Œæ˜¯åœ¨1989å¹´å¯¹shçš„é‡å†™ç‰ˆï¼Œæ›¿ä»£äº†shã€‚äºŒè¿›åˆ¶æ–‡ä»¶ä½ç½®ä¸º<code>/bin/bash</code>ã€‚ </p>
<p>ç°åœ¨çš„Linuxç³»ç»Ÿä»¥åŠmacOSç³»ç»Ÿçš„shelléƒ½é»˜è®¤ä½¿ç”¨bashã€‚</p>
<p>Zshå³Z shellï¼Œæ˜¯ä¸€æ¬¾å¯ç”¨ä½œäº¤äº’å¼ç™»å½•çš„shellåŠè„šæœ¬ç¼–å†™çš„å‘½ä»¤è§£é‡Šå™¨ã€‚Zshå¯¹Bourne shellåšå‡ºäº†å¤§é‡æ”¹è¿›ï¼ŒåŒæ—¶åŠ å…¥äº†Bashã€kshåŠtcshçš„æŸäº›åŠŸèƒ½ã€‚ </p>
<p>æ‰€ä»¥è¯´Zshä¹Ÿæ˜¯ä¸€ä¸ªShellï¼Œå°±æ˜¯ä¼šæ¯”bashèƒ½å¥½ç”¨å¾ˆå¤šã€‚æ‰€ä»¥è¿™ä¹Ÿæ˜¯2019å¹´èµ·ï¼ŒmacOSçš„é»˜è®¤Shellä»Bashæ”¹ä¸ºZshçš„åŸå› ï¼Ÿ</p>
<p>zshæ‹¥æœ‰å®Œå–„çš„æ’ä»¶æœºåˆ¶ä»¥åŠä¸°å¯Œçš„ç”Ÿæ€ï¼Œå’Œoh my zshä¸€èµ·é£Ÿç”¨æ›´ä½³</p>
</blockquote>
<h5 id="æŸ¥çœ‹æœ¬åœ°Shellçš„å‘½ä»¤"><a href="#æŸ¥çœ‹æœ¬åœ°Shellçš„å‘½ä»¤" class="headerlink" title="æŸ¥çœ‹æœ¬åœ°Shellçš„å‘½ä»¤"></a>æŸ¥çœ‹æœ¬åœ°Shellçš„å‘½ä»¤</h5><ul>
<li><p>æŸ¥çœ‹å½“å‰Linuxçš„å…¨éƒ¨Shellï¼š<code>cat /etc/shells</code></p>
</li>
<li><p>æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„Shellï¼š<code>echo $SHELL</code>æˆ–è€…<code>echo $0</code></p>
</li>
<li><p>åˆ‡æ¢é»˜è®¤çš„Shellï¼š<code>chsh -s [shellçš„äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„]</code>ï¼Œä¹‹åè¦é‡æ–°ç™»é™†Shellæ‰èƒ½ç”Ÿæ•ˆå“ˆã€‚ä¾‹å¦‚ï¼š</p>
</li>
<li><ul>
<li>åˆ‡æ¢ä¸ºBashï¼š <code>chsh -s /bin/bash</code></li>
<li>åˆ‡æ¢ä¸ºZshï¼š<code>chsh -s /bin/zsh</code></li>
</ul>
</li>
</ul>
<h5 id="Shellçš„å„ç§é…ç½®æ–‡ä»¶"><a href="#Shellçš„å„ç§é…ç½®æ–‡ä»¶" class="headerlink" title="Shellçš„å„ç§é…ç½®æ–‡ä»¶"></a>Shellçš„å„ç§é…ç½®æ–‡ä»¶</h5><p>æ— è®ºæ˜¯Bashè¿˜æ˜¯Zshï¼Œéƒ½æ˜¯æœ‰å„è‡ªçš„é…ç½®æ–‡ä»¶æ¥å®Œæˆè‡ªå·±çš„å·¥ä½œçš„ã€‚è¿™äº›é…ç½®æ–‡ä»¶éƒ½æ˜¯éšè—æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·ä¸éœ€è¦çŸ¥é“è¿™äº›é…ç½®ã€‚ä½†æ˜¯åœ¨è¿™é‡Œä¹Ÿè¦ç»™å¤§å®¶æ€»ç»“ä¸€ä¸‹éƒ½æœ‰å“ªäº›é…ç½®æ–‡ä»¶ï¼Œä¹Ÿè®¸ä»¥åç”¨çš„ä¸Šå‘¢ã€‚ </p>
<h5 id="Bashçš„é…ç½®æ–‡ä»¶"><a href="#Bashçš„é…ç½®æ–‡ä»¶" class="headerlink" title="Bashçš„é…ç½®æ–‡ä»¶"></a>Bashçš„é…ç½®æ–‡ä»¶</h5><ul>
<li>&#x2F;etc&#x2F;profileï¼šä¸ºç³»ç»Ÿçš„<strong>æ¯ä¸ªç”¨æˆ·</strong>è®¾ç½®ç¯å¢ƒä¿¡æ¯ï¼Œå½“ç”¨æˆ·ç¬¬ä¸€æ¬¡<strong>ç™»å½•</strong>æ—¶ä¼šæ‰§è¡Œè¯¥æ–‡ä»¶é‡Œçš„å‘½ä»¤ã€‚é»˜è®¤ä¼šç›´æ¥è°ƒç”¨&#x2F;etc&#x2F;bashrcã€‚è¯¥æ–‡ä»¶çš„æ”¹åŠ¨éœ€è¦é‡å¯æ‰èƒ½ç”Ÿæ•ˆã€‚ç”¨äºè®¾ç½®ç³»ç»Ÿçº§åˆ«çš„ç¯å¢ƒå˜é‡å’Œå¯åŠ¨ç¨‹åºï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸‹é…ç½®ä¼šå¯¹æ‰€æœ‰çš„ç”¨æˆ·ç”Ÿæ•ˆã€‚</li>
<li>&#x2F;etc&#x2F;bashrcï¼šä¸ºæ¯ä¸€ä¸ªè¿è¡Œbash shellçš„ç”¨æˆ·æ‰§è¡Œæ­¤æ–‡ä»¶ã€‚å½“bash shellè¢«æ‰“å¼€æ—¶ï¼Œä¼šè¯»å–å¹¶æ‰§è¡Œè¯¥æ–‡ä»¶ä¸­çš„å‘½ä»¤ã€‚æ‰€ä»¥ä¿®æ”¹è¯¥æ–‡ä»¶åï¼Œé‡æ–°æ‰“å¼€Shellå³å¯ç”Ÿæ•ˆã€‚</li>
<li>~&#x2F;.bash_profileï¼šå’Œ&#x2F;etc&#x2F;profileç±»ä¼¼ï¼Œä½†æ˜¯åªå¯¹å½“å‰ç”¨æˆ·ç”Ÿæ•ˆã€‚åªå¯¹å•ä¸€ç”¨æˆ·ç”Ÿæ•ˆï¼Œè¯¥æ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨æˆ·çº§åˆ«çš„è®¾ç½®ï¼Œå¯ä»¥ç†è§£ä¸ºæŸä¸€ç”¨æˆ·ä¸‹çš„profile</li>
<li>~&#x2F;.bashrcï¼šå’Œ&#x2F;etc&#x2F;bashrcç±»ä¼¼ï¼Œä½†æ˜¯åªå¯¹å½“å‰ç”¨æˆ·ç”Ÿæ•ˆã€‚</li>
<li>~&#x2F;.bash_logoutï¼šå½“æ¯æ¬¡é€€å‡ºbash shellæ—¶ï¼Œæ‰§è¡Œè¯¥æ–‡ä»¶ã€‚</li>
<li>~&#x2F;.bash_historyï¼šä¿å­˜äº†å†å²å‘½ä»¤ã€‚åœ¨Shellä¸ºBashæ—¶ï¼Œæ¯æ¬¡æ•²å‡»å‘½ä»¤æ—¶ï¼Œéƒ½ä¼šä¿å­˜åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œ</li>
</ul>
<h5 id="Zshçš„é…ç½®æ–‡ä»¶"><a href="#Zshçš„é…ç½®æ–‡ä»¶" class="headerlink" title="Zshçš„é…ç½®æ–‡ä»¶"></a>Zshçš„é…ç½®æ–‡ä»¶</h5><ul>
<li>&#x2F;etc&#x2F;bashrc å¯¹åº” &#x2F;etc&#x2F;zshrc</li>
<li>~&#x2F;.bash_profile å¯¹åº” ~&#x2F;.zprofile</li>
</ul>
<p>åŠ è½½é¡ºåºï¼šzshenvã€zprofileã€zshrcã€zlogin</p>
<hr>
<p>æ‰€ä»¥è¯´ï¼Œå„ç§æ•™ç¨‹é‡Œè¯´çš„é…ç½®éƒ½æ˜¯é»˜è®¤bashçš„ï¼Œbashçš„é…ç½®æ–‡ä»¶å¯¹æ ‡åˆ°zshä¸­å°±å¯ä»¥ã€‚</p>
<p><strong>&#x2F;etc&#x2F;profile å’Œ &#x2F;etc&#x2F;bashrc è¿™ç§åœ¨ &#x2F;etc ç›®å½•ä¸‹çš„é…ç½®åˆ™éƒ½å±äºå…¨å±€é…ç½®ï¼Œæ‰€æœ‰ç”¨æˆ·çš„shelléƒ½æœ‰æƒä½¿ç”¨è¿™äº›ç¯å¢ƒå˜é‡ï¼Œï½&#x2F; åˆ™å±äºç”¨æˆ·çº§åˆ«çš„</strong></p>
<h5 id="æ€»ç»“ä¸€ä¸‹ï¼šå„ç§é…ç½®æ–‡ä»¶å¯ä»¥æŒ‰ä¸¤ç§æ–¹å¼åˆ†ç±»ï¼š"><a href="#æ€»ç»“ä¸€ä¸‹ï¼šå„ç§é…ç½®æ–‡ä»¶å¯ä»¥æŒ‰ä¸¤ç§æ–¹å¼åˆ†ç±»ï¼š" class="headerlink" title="æ€»ç»“ä¸€ä¸‹ï¼šå„ç§é…ç½®æ–‡ä»¶å¯ä»¥æŒ‰ä¸¤ç§æ–¹å¼åˆ†ç±»ï¼š"></a>æ€»ç»“ä¸€ä¸‹ï¼šå„ç§é…ç½®æ–‡ä»¶å¯ä»¥æŒ‰ä¸¤ç§æ–¹å¼åˆ†ç±»ï¼š</h5><table>
<thead>
<tr>
<th></th>
<th>profile</th>
<th align="center">bashrc&#x2F;zshrc</th>
</tr>
</thead>
<tbody><tr>
<td>å…¨å±€</td>
<td>&#x2F;etc&#x2F;profileï¼ˆæ— å…³å“ªä¸ªshellï¼‰</td>
<td align="center">&#x2F;etc&#x2F;bashrc</td>
</tr>
<tr>
<td>ç”¨æˆ·</td>
<td>~&#x2F;.bash_profile ï¼ˆä¸“ç”¨äºå“ªä¸ªshellï¼‰</td>
<td align="center">~&#x2F;.bashrc</td>
</tr>
</tbody></table>
<p>profileçš„bashrcåŒºåˆ«?</p>
<p>è¦ææ¸…bashrcä¸profileçš„åŒºåˆ«ï¼Œé¦–å…ˆè¦å¼„æ˜ç™½ä»€ä¹ˆæ˜¯äº¤äº’å¼shellå’Œéäº¤äº’å¼shellï¼Œå³login shell å’Œnon-login shellã€‚</p>
<p>äº¤äº’å¼æ¨¡å¼å°±æ˜¯shellç­‰å¾…ä½ çš„è¾“å…¥ï¼Œå¹¶ä¸”æ‰§è¡Œä½ æäº¤çš„å‘½ä»¤ã€‚è¿™ç§æ¨¡å¼è¢«ç§°ä½œäº¤äº’å¼æ˜¯å› ä¸ºshellä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ã€‚è¿™ç§æ¨¡å¼ä¹Ÿæ˜¯å¤§å¤šæ•°ç”¨æˆ·éå¸¸ç†Ÿæ‚‰çš„ï¼šç™»å½•ã€æ‰§è¡Œä¸€äº›å‘½ä»¤ã€ç­¾é€€ã€‚å½“ä½ ç­¾é€€åï¼Œshellä¹Ÿç»ˆæ­¢äº†ã€‚ shellä¹Ÿå¯ä»¥è¿è¡Œåœ¨å¦å¤–ä¸€ç§æ¨¡å¼ï¼šéäº¤äº’å¼æ¨¡å¼ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œshellä¸ä¸ä½ è¿›è¡Œäº¤äº’ï¼Œè€Œæ˜¯è¯»å–å­˜æ”¾åœ¨æ–‡ä»¶ä¸­çš„å‘½ä»¤,å¹¶ä¸”æ‰§è¡Œå®ƒä»¬ã€‚å½“å®ƒè¯»åˆ°æ–‡ä»¶çš„ç»“å°¾ï¼Œshellä¹Ÿå°±ç»ˆæ­¢äº†ã€‚</p>
<p>bashrc ä¸ profile éƒ½ç”¨äºä¿å­˜ç”¨æˆ·çš„ç¯å¢ƒä¿¡æ¯ï¼Œbashrcç”¨äºäº¤äº’å¼non-loginshellï¼Œè€Œprofileç”¨äºäº¤äº’å¼login shellã€‚</p>
<ol>
<li><p>&#x2F;etc&#x2F;profile: æ­¤æ–‡ä»¶ä¸ºç³»ç»Ÿçš„æ¯ä¸ªç”¨æˆ·è®¾ç½®ç¯å¢ƒä¿¡æ¯,å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½•æ—¶,è¯¥æ–‡ä»¶è¢«æ‰§è¡Œ.å¹¶ä»&#x2F;etc&#x2F;profile.dç›®å½•çš„é…ç½®æ–‡ä»¶ä¸­æœé›†shellçš„è®¾ç½®.</p>
</li>
<li><p>&#x2F;etc&#x2F;bashrc: ä¸ºæ¯ä¸€ä¸ªè¿è¡Œbash shellçš„ç”¨æˆ·æ‰§è¡Œæ­¤æ–‡ä»¶.å½“bash shellè¢«æ‰“å¼€æ—¶,è¯¥æ–‡ä»¶è¢«è¯»å–.</p>
</li>
<li><p>~&#x2F;.bash_profile: æ¯ä¸ªç”¨æˆ·éƒ½å¯ä½¿ç”¨è¯¥æ–‡ä»¶è¾“å…¥ä¸“ç”¨äºè‡ªå·±ä½¿ç”¨çš„shellä¿¡æ¯,å½“ç”¨æˆ·ç™»å½•æ—¶,è¯¥æ–‡ä»¶ä»…ä»…æ‰§è¡Œä¸€æ¬¡!é»˜è®¤æƒ…å†µä¸‹,ä»–è®¾ç½®ä¸€äº›ç¯å¢ƒå˜é‡,æ‰§è¡Œç”¨æˆ·çš„.bashrcæ–‡ä»¶.</p>
</li>
<li><p>~&#x2F;.bashrc: è¯¥æ–‡ä»¶åŒ…å«ä¸“ç”¨äºä½ çš„bash shellçš„bashä¿¡æ¯,å½“ç™»å½•æ—¶ä»¥åŠæ¯æ¬¡æ‰“å¼€æ–°çš„shellæ—¶,è¯¥æ–‡ä»¶è¢«è¯»å–.</p>
</li>
<li><p>~&#x2F;.bash_logout: å½“æ¯æ¬¡é€€å‡ºç³»ç»Ÿ(é€€å‡ºbash shell)æ—¶,æ‰§è¡Œè¯¥æ–‡ä»¶.</p>
</li>
</ol>
<p>å¦å¤–,&#x2F;etc&#x2F;profileä¸­è®¾å®šçš„å˜é‡(å…¨å±€)çš„å¯ä»¥ä½œç”¨äºä»»ä½•ç”¨æˆ·,è€Œ~&#x2F;.bashrcç­‰ä¸­è®¾å®šçš„å˜é‡(å±€éƒ¨)åªèƒ½ç»§æ‰¿&#x2F;etc&#x2F;profileä¸­çš„å˜é‡,ä»–ä»¬æ˜¯â€çˆ¶å­â€å…³ç³».</p>
<hr>
<p>å½“ç™»å…¥ç³»ç»Ÿæ—¶å€™è·å¾—ä¸€ä¸ªshellè¿›ç¨‹æ—¶ï¼Œå…¶è¯»å–ç¯å¢ƒè®¾å®šæ¡£æœ‰ä¸‰æ­¥</p>
<p>1ã€é¦–å…ˆè¯»å…¥çš„æ˜¯å…¨å±€ç¯å¢ƒå˜é‡è®¾å®šæ¡£&#x2F;etc&#x2F;profileï¼Œç„¶åæ ¹æ®å…¶å†…å®¹è¯»å–é¢å¤–çš„è®¾å®šçš„æ–‡æ¡£ï¼Œå¦‚<br>&#x2F;etc&#x2F;profile.då’Œ&#x2F;etc&#x2F;inputrc</p>
<p>2ã€ç„¶åæ ¹æ®ä¸åŒä½¿ç”¨è€…å¸å·ï¼Œå»å…¶å®¶ç›®å½•è¯»å–<del>&#x2F;.bash_profileï¼Œå¦‚æœè¿™è¯»å–ä¸äº†å°±è¯»å–</del>&#x2F;.bash_loginï¼Œè¿™ä¸ªä¹Ÿè¯»å–ä¸äº†æ‰ä¼šè¯»å–<br>~&#x2F;.profileï¼Œè¿™ä¸‰ä¸ªæ–‡æ¡£è®¾å®šåŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œè¯»å–æœ‰ä¼˜å…ˆå…³ç³»</p>
<p>3ã€ç„¶ååœ¨æ ¹æ®ç”¨æˆ·å¸å·è¯»å–~&#x2F;.bashrc</p>
<hr>
<p>æ€»ç»“ï¼šé…ç½®æ–‡ä»¶å…¨å±€&#x2F;ç”¨æˆ·â€”äº¤äº’çš„&#x2F;éäº¤äº’çš„ï¼Œjdkçš„é…ç½®å°±æ˜¯åœ¨&#x2F;etc&#x2F;profileä¸­ï¼Œmavençš„é…ç½®åœ¨ï½&#x2F;.bash_profileæ—¢ç„¶ç”¨çš„æ˜¯zshï¼Œå°±åœ¨ ~&#x2F;.zprofileé‡Œé¢é…ç½®ã€‚</p>
<hr>
<p>åœ¨ï½&#x2F;.zprofileæ–‡ä»¶ä¸­ï¼Œæ·»åŠ é…ç½®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export M=&quot;/usr/local/ApacheMaven&quot;</span><br><span class="line">export PATH=&quot;$M/bin:$PATH&quot;</span><br></pre></td></tr></table></figure>

<p>source ï½&#x2F;.zprofile å³å¯ã€‚</p>
<p>ç„¶åé…ç½®ä¸€ä¸‹é˜¿é‡Œäº‘ä»“åº“ã€‚åœ¨setting.xmlæ–‡ä»¶ä¸­ï¼Œè¦å…³æ³¨ä¸¤ä¸ªåœ°æ–¹ï¼Œ<em><strong>localRepository</strong></em>å’Œ<em><strong>mirrors</strong></em>ã€‚ç¬¬ä¸€ä¸ªlocalRepositoryæ˜¯ä½ æœ¬åœ°ä»“åº“æ‰€åœ¨çš„ä½ç½®ï¼Œä½ çš„åŒ…éƒ½ä¼šä¸‹è½½åˆ°è¿™é‡Œï¼Œé»˜è®¤åœ¨ä½ ç”¨æˆ·ç›®å½•çš„.m2ç›®å½•ä¸‹ï¼Œè¿™é‡Œå¯ä»¥æ¢æˆä½ æƒ³å­˜æ”¾çš„åœ°å€ã€‚ç¬¬äºŒä¸ªmirroræ˜¯ä½ çš„åŒ…ä¸‹è½½åœ°å€ï¼Œå› ä¸ºæœ‰å¢™ï¼Œæ‰€ä»¥å»ºè®®å¢åŠ é˜¿é‡Œäº‘ä»“åº“é…ç½®ï¼Œæ¥åŠ é€Ÿä¸‹è½½ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyunmaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>é˜¿é‡Œäº‘å…¬å…±ä»“åº“<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-åˆ›å»ºmaven-webé¡¹ç›®"><a href="#2-åˆ›å»ºmaven-webé¡¹ç›®" class="headerlink" title="2.åˆ›å»ºmaven webé¡¹ç›®"></a>2.åˆ›å»ºmaven webé¡¹ç›®</h4><p>æ–°å»ºmavené¡¹ç›®æ—¶é€‰ä¸­create from archetypeï¼Œé€‰æ‹©org.apache.maven.archetypes:maven-archetype-webappã€‚</p>
<p>é€‰æ‹©è‡ªå·±mavençš„setting.xmlã€‚</p>
<p>é…ç½®tomcatæœåŠ¡å™¨ï¼Œé€‰æ‹©tomcat-localï¼Œç»™æœåŠ¡å™¨å–åå­—ï¼Œé€‰ç‰ˆæœ¬ç«¯å£å·ä¹‹ç±»çš„ã€‚</p>
<p>deploymentä¸­artifacté€‰æ‹©è¦éƒ¨ç½²çš„jaråŒ…ï¼Œé€‰explodedçš„ã€‚</p>
<p>é€‰æ‹©çƒ­éƒ¨ç½²ï¼Œåœ¨å®é™…å¼€å‘ä¸­æ˜¯å¾ˆç®¡ç”¨çš„webå¼€å‘ï¼Œä½ åå°ï¼Œæ”¹äº†å•¥ä»–å°±çƒ­éƒ¨ç½²ï¼Œä¸ç”¨ä½ é‡å¯tomcatï¼Œå‰å°çš„ä¹Ÿæ˜¯ï¼Œä½ ä¿®æ”¹jsp,css,jsä»€ä¹ˆçš„éƒ½å¯ä»¥ç›´æ¥è¿›è¡Œçƒ­éƒ¨ç½²ï¼Œä½ åªè¦è‡ªå·±åˆ·æ–°ä¸€ä¸‹ä½ çš„é¡µé¢å°±è¡Œäº†ã€‚</p>
<h4 id="3-ä½¿ç”¨log4jé›†åˆslf4j"><a href="#3-ä½¿ç”¨log4jé›†åˆslf4j" class="headerlink" title="3.ä½¿ç”¨log4jé›†åˆslf4j"></a>3.ä½¿ç”¨log4jé›†åˆslf4j</h4><p>Apache Log4jæ˜¯ä¸€ä¸ªåŸºäºJavaçš„æ—¥å¿—è®°å½•å·¥å…·ï¼Œå®ƒçš„æ—¥å¿—çº§åˆ«æŒ‰ä¸‹é¢é¡ºåºé€’å‡ï¼š</p>
<table>
<thead>
<tr>
<th>çº§åˆ«</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>OFF</td>
<td>æœ€é«˜çº§åˆ«ï¼Œç”¨äºå…³é—­æ—¥å¿—è®°å½•ã€‚</td>
</tr>
<tr>
<td>FATAL</td>
<td>å°†å¯¼è‡´åº”ç”¨ç¨‹åºæå‰ç»ˆæ­¢çš„ä¸¥é‡é”™è¯¯çš„ä¿¡æ¯å°†ç«‹å³å‘ˆç°åœ¨æ—¥å¿—ä¸Šã€‚</td>
</tr>
<tr>
<td>ERROR</td>
<td>å°†å…¶ä»–è¿è¡Œæ—¶é”™è¯¯æˆ–æ„å¤–æƒ…å†µçš„ä¿¡æ¯å‘ˆç°åœ¨æ—¥å¿—ä¸Šã€‚</td>
</tr>
<tr>
<td>WARN</td>
<td>ä½¿ç”¨å·²è¿‡æ—¶çš„APIï¼ŒAPIçš„æ»¥ç”¨ï¼Œæ½œåœ¨é”™è¯¯ï¼Œå…¶ä»–ä¸è‰¯çš„æˆ–æ„å¤–çš„è¿è¡Œæ—¶çš„çŠ¶å†µï¼ˆä½†ä¸ä¸€å®šæ˜¯é”™è¯¯çš„ï¼‰</td>
</tr>
<tr>
<td>INFO</td>
<td>ä¸€äº›æ„Ÿå…´è¶£çš„è¿è¡Œæ—¶äº‹ä»¶ï¼ˆå¯åŠ¨&#x2F;å…³é—­</td>
</tr>
<tr>
<td>DEBUG</td>
<td>ä¸€äº›è¯¦ç»†ä¿¡æ¯ï¼ŒæŸ¥çœ‹ç¨‹åºçš„è¿è¡ŒçŠ¶æ€</td>
</tr>
<tr>
<td>TRACE</td>
<td>æœ€è¯¦ç»†çš„ä¿¡æ¯ã€‚ä¸€èˆ¬è¿™äº›ä¿¡æ¯åªè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</td>
</tr>
</tbody></table>
<h5 id="ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–"><a href="#ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–"></a>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0-alpha7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="ç¬¬äºŒæ­¥ï¼šé…ç½®log4jçš„é…ç½®æ–‡ä»¶"><a href="#ç¬¬äºŒæ­¥ï¼šé…ç½®log4jçš„é…ç½®æ–‡ä»¶" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šé…ç½®log4jçš„é…ç½®æ–‡ä»¶"></a>ç¬¬äºŒæ­¥ï¼šé…ç½®log4jçš„é…ç½®æ–‡ä»¶</h5><p>å…¶é…ç½®æ–‡ä»¶åä¸ºlog4j.propertiesï¼Œ<strong>éœ€è¦æ‰‹åŠ¨åœ¨java&#x2F;resourcesä¸‹åˆ›å»º</strong>ï¼Œå¦‚æœå»ºåœ¨å…¶ä»–ä½ç½®ï¼Œideaè¿™ä¸ªå·¥å…·å°†æ— æ³•è¯†åˆ«ã€‚è¯¥é…ç½®æ–‡ä»¶ç”¨æ¥è®¾ç½®è®°å½•å™¨çš„çº§åˆ«ã€å­˜æ”¾å™¨å’Œå¸ƒå±€çš„ï¼Œå®ƒå¯æ¥key&#x3D;valueæ ¼å¼çš„è®¾ç½®æˆ–xmlæ ¼å¼çš„è®¾ç½®ä¿¡æ¯ã€‚é€šè¿‡é…ç½®ï¼Œå¯ä»¥åˆ›å»ºå‡ºLog4Jçš„è¿è¡Œç¯å¢ƒã€‚</p>
<p>Log4Jé…ç½®æ–‡ä»¶çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### set log levels é…ç½®æ ¹Logger###</span></span><br><span class="line"><span class="comment">### log4j.rootLogger  = [ level ] , appenderName1 , appenderName2 ,  â€¦ ###</span></span><br><span class="line"><span class="comment">###  level : æ˜¯æ—¥å¿—è®°å½•çš„ä¼˜å…ˆçº§ ä¼˜å…ˆçº§ä»é«˜åˆ°ä½åˆ†åˆ«æ˜¯ERRORã€WARNã€INFOã€DEBUG</span></span><br><span class="line"><span class="comment">###  æ¯”å¦‚åœ¨è¿™é‡Œå®šä¹‰äº†INFOçº§åˆ«ï¼Œåˆ™åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰DEBUGçº§åˆ«çš„æ—¥å¿—ä¿¡æ¯å°†ä¸è¢«æ‰“å°å‡ºæ¥</span></span><br><span class="line"><span class="comment">### Appender ä¸ºæ—¥å¿—è¾“å‡ºç›®çš„åœ° è¿™é‡Œ å°†debugå±‚çº§åŠä»¥ä¸Šçš„ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileï¼Œè‡ªå·±å®šä¹‰çš„åå­—  ###</span></span><br><span class="line"><span class="attr">log4j.rootLogger</span> = <span class="string">DEBUG,Console,File</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">###  è¾“å‡ºåˆ°æ§åˆ¶å°  ###</span></span><br><span class="line"><span class="attr">log4j.appender.Console</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="attr">log4j.appender.Console.Target</span>=<span class="string">System.out</span></span><br><span class="line"><span class="attr">log4j.appender.Console.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.Console.layout.ConversionPattern</span>=<span class="string">[%d&#123;yy/MM/dd HH:mm:ss:SSS&#125;]-%l:%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶ ###</span></span><br><span class="line"><span class="attr">log4j.appender.File</span>=<span class="string">org.apache.log4j.RollingFileAppender</span></span><br><span class="line"><span class="attr">log4j.appender.File.File</span>=<span class="string">$&#123;project&#125;src/main/resources/log/app.log</span></span><br><span class="line"><span class="attr">log4j.appender.File.MaxFileSize</span>=<span class="string">10MB</span></span><br><span class="line"><span class="attr">log4j.appender.File.Threshold</span>=<span class="string">ALL</span></span><br><span class="line"><span class="attr">log4j.appender.File.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.File.layout.ConversionPattern</span>=<span class="string">[%p][%d&#123;yyyy-MM-dd HH\:mm\:ss,SSS&#125;][%c]%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#   %m   è¾“å‡ºä»£ç ä¸­æŒ‡å®šçš„æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">#ã€€ã€€%p   è¾“å‡ºä¼˜å…ˆçº§ï¼Œå³DEBUGï¼ŒINFOï¼ŒWARNï¼ŒERRORï¼ŒFATAL</span></span><br><span class="line"><span class="comment">#ã€€ã€€%r   è¾“å‡ºè‡ªåº”ç”¨å¯åŠ¨åˆ°è¾“å‡ºè¯¥logä¿¡æ¯è€—è´¹çš„æ¯«ç§’æ•°</span></span><br><span class="line"><span class="comment">#ã€€ã€€%c   è¾“å‡ºæ‰€å±çš„ç±»ç›®ï¼Œé€šå¸¸å°±æ˜¯æ‰€åœ¨ç±»çš„å…¨å</span></span><br><span class="line"><span class="comment">#ã€€ã€€%t   è¾“å‡ºäº§ç”Ÿè¯¥æ—¥å¿—äº‹ä»¶çš„çº¿ç¨‹å</span></span><br><span class="line"><span class="comment">#ã€€ã€€%n   è¾“å‡ºä¸€ä¸ªå›è½¦æ¢è¡Œç¬¦ï¼ŒWindowså¹³å°ä¸ºâ€œ\r\nâ€ï¼ŒUnixå¹³å°ä¸ºâ€œ\nâ€</span></span><br><span class="line"><span class="comment">#ã€€ã€€%d   è¾“å‡ºæ—¥å¿—æ—¶é—´ç‚¹çš„æ—¥æœŸæˆ–æ—¶é—´ï¼Œé»˜è®¤æ ¼å¼ä¸ºISO8601ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶åæŒ‡å®šæ ¼å¼ï¼Œæ¯”å¦‚ï¼š%d&#123;yyy MMM dd HH:mm:ss , SSS&#125;ï¼Œè¾“å‡ºç±»ä¼¼ï¼š2002å¹´10æœˆ18æ—¥  22 ï¼š 10 ï¼š 28 ï¼Œ 921</span></span><br><span class="line"><span class="comment">#ã€€ã€€%l   è¾“å‡ºæ—¥å¿—äº‹ä»¶çš„å‘ç”Ÿä½ç½®ï¼ŒåŒ…æ‹¬ç±»ç›®åã€å‘ç”Ÿçš„çº¿ç¨‹ï¼Œä»¥åŠåœ¨ä»£ç ä¸­çš„è¡Œæ•°ã€‚ä¸¾ä¾‹ï¼šTestlog4.main(TestLog4.java: 10 )</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### Appender ä¸ºæ—¥å¿—è¾“å‡ºç›®çš„åœ°ï¼ŒLog4jæä¾›çš„appenderæœ‰ä»¥ä¸‹å‡ ç§ï¼š</span></span><br><span class="line"><span class="comment">#org.apache.log4j.ConsoleAppenderï¼ˆæ§åˆ¶å°ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.FileAppenderï¼ˆæ–‡ä»¶ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.DailyRollingFileAppenderï¼ˆæ¯å¤©äº§ç”Ÿä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.RollingFileAppenderï¼ˆæ–‡ä»¶å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.WriterAppenderï¼ˆå°†æ—¥å¿—ä¿¡æ¯ä»¥æµæ ¼å¼å‘é€åˆ°ä»»æ„æŒ‡å®šçš„åœ°æ–¹ï¼‰</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### Layoutï¼šæ—¥å¿—è¾“å‡ºæ ¼å¼ï¼ŒLog4jæä¾›çš„layoutæœ‰ä»¥ä¸‹å‡ ç§</span></span><br><span class="line"><span class="comment">#org.apache.log4j.HTMLLayoutï¼ˆä»¥HTMLè¡¨æ ¼å½¢å¼å¸ƒå±€ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.PatternLayoutï¼ˆå¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.SimpleLayoutï¼ˆåŒ…å«æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«å’Œä¿¡æ¯å­—ç¬¦ä¸²ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">#org.apache.log4j.TTCCLayoutï¼ˆåŒ…å«æ—¥å¿—äº§ç”Ÿçš„æ—¶é—´ã€çº¿ç¨‹ã€ç±»åˆ«ç­‰ç­‰ä¿¡æ¯ï¼‰</span></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼Œé€šè¿‡Thresholdè®¾ç½®ï¼Œå¯ä»¥æŠŠå¼‚å¸¸æ—¥å¿—å•ç‹¬è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### set log levels ###</span></span><br><span class="line"><span class="attr">log4j.rootLogger</span> = <span class="string">debug ,  stdout ,  D ,  E</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### è¾“å‡ºåˆ°æ§åˆ¶å° ###</span></span><br><span class="line"><span class="attr">log4j.appender.stdout</span> = <span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.Target</span> = <span class="string">System.out</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout.ConversionPattern</span> =  <span class="string">[%p][%d&#123;yyyy-MM-dd HH\:mm\:ss,SSS&#125;][%c]%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶ ###</span></span><br><span class="line"><span class="attr">log4j.appender.D</span> = <span class="string">org.apache.log4j.DailyRollingFileAppender</span></span><br><span class="line"><span class="attr">log4j.appender.D.File</span> = <span class="string">$&#123;project&#125;src/main/resources/log/app.log</span></span><br><span class="line"><span class="attr">log4j.appender.D.Append</span> = <span class="string">true</span></span><br><span class="line"><span class="attr">log4j.appender.D.Threshold</span> = <span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.appender.D.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.D.layout.ConversionPattern</span> = <span class="string">[%p][%d&#123;yyyy-MM-dd HH\:mm\:ss,SSS&#125;][%c]%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### ä¿å­˜å¼‚å¸¸ä¿¡æ¯åˆ°å•ç‹¬æ–‡ä»¶ ###</span></span><br><span class="line"><span class="attr">log4j.appender.E</span> = <span class="string">org.apache.log4j.DailyRollingFileAppender</span></span><br><span class="line"><span class="attr">log4j.appender.E.File</span> = <span class="string">$&#123;project&#125;src/main/resources/log/error.log</span></span><br><span class="line"><span class="attr">log4j.appender.E.Append</span> = <span class="string">true</span></span><br><span class="line"><span class="attr">log4j.appender.E.Threshold</span> = <span class="string">ERROR</span></span><br><span class="line"><span class="attr">log4j.appender.E.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.E.layout.ConversionPattern</span> = <span class="string">[%p][%d&#123;yyyy-MM-dd HH\:mm\:ss,SSS&#125;][%c]%m%n</span></span><br></pre></td></tr></table></figure>

<h5 id="ç¬¬ä¸‰æ­¥ï¼šç¼–å†™æµ‹è¯•ç±»"><a href="#ç¬¬ä¸‰æ­¥ï¼šç¼–å†™æµ‹è¯•ç±»" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šç¼–å†™æµ‹è¯•ç±»"></a>ç¬¬ä¸‰æ­¥ï¼šç¼–å†™æµ‹è¯•ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.PropertyConfigurator;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Log4jDemo</span> &#123;</span><br><span class="line">    <span class="comment">//private static Logger logger = LoggerFactory.getLogger(Log4jTestDemo.class);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–å½“å‰é¡¹ç›®çš„æ ¹ç›®å½•</span></span><br><span class="line">        String relativelyPath=System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">        <span class="comment">// æŒ‡å®špropertiesæ–‡ä»¶ä½ç½®</span></span><br><span class="line">        PropertyConfigurator.configure(relativelyPath+ <span class="string">&quot;/src/main/resources/conf/log4j.properties&quot;</span>);</span><br><span class="line">        <span class="comment">// è®°å½•debugçº§åˆ«çš„ä¿¡æ¯</span></span><br><span class="line">        log.debug(<span class="string">&quot;This is debug message.&quot;</span>);</span><br><span class="line">        <span class="comment">// è®°å½•infoçº§åˆ«çš„ä¿¡æ¯</span></span><br><span class="line">        log.info(<span class="string">&quot;This is info message.&quot;</span>);</span><br><span class="line">        <span class="comment">// è®°å½•errorçº§åˆ«çš„ä¿¡æ¯</span></span><br><span class="line">        log.error(<span class="string">&quot;This is error message.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é™¤éé…ç½®æ–‡ä»¶åœ¨resourcesç›®å½•ä¸‹ï¼Œå¦åˆ™ä¸èƒ½è‡ªå·±æ‰¾åˆ°é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œè¿˜éœ€è¦åœ¨ä»£ç ä¸­æŒ‡å®šä½ç½®ï¼Œä½æ•ˆï¼</p>
<p>è¿™ä¸ªé—®é¢˜è²Œä¼¼åœ¨springä¸­å¾—åˆ°è§£å†³ï¼Œåœ¨web.xmlä¸­å¢åŠ é…ç½®ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/HenryMrZ/article/details/79258057">https://blog.csdn.net/HenryMrZ/article/details/79258057</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>log4jConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:/conf/log4j.properties<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="4-mavené¡¹ç›®æ‰“åŒ…"><a href="#4-mavené¡¹ç›®æ‰“åŒ…" class="headerlink" title="4.mavené¡¹ç›®æ‰“åŒ…"></a>4.mavené¡¹ç›®æ‰“åŒ…</h4><p>æœ‰ä¸ªé—®é¢˜ï¼šwebé¡¹ç›®è¿›è¡Œéƒ¨ç½²å‰ï¼Œå¿…é¡»è¦å°†é¡¹ç›®è¿›è¡Œæ‰“åŒ…å—ï¼Ÿ</p>
<p>ç›´æ¥éƒ¨ç½²åœ¨tomcatï¼Œå¹¶æ²¡æœ‰åœ¨targetæ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°waråŒ…ã€‚</p>
<p>maven-webé¡¹ç›®è¦ä½¿ç”¨servletï¼Œå°±è¦å¯¼å…¥ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯¼å…¥ä¹‹åreimportä¸€ä¸‹pom.xmlã€‚</p>
<p>å‘ç°éƒ¨ç½²ä¹‹åï¼ŒåŸæœ¬çš„System.getPropertyè¾“å‡ºçš„é¡¹ç›®ç›®å½•å˜æˆäº†tomcatçš„binç›®å½•ã€‚</p>
<h5 id="ä»‹ç»ä¸€ä¸‹System-getProperty"><a href="#ä»‹ç»ä¸€ä¸‹System-getProperty" class="headerlink" title="ä»‹ç»ä¸€ä¸‹System.getProperty()"></a>ä»‹ç»ä¸€ä¸‹System.getProperty()</h5><p>Javaä¸­ç»™æˆ‘ä»¬æä¾›äº†System.getProperty()è¿™ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥è·å–åˆ°Java JVMä»¥åŠæ“ä½œç³»ç»Ÿçš„ä¸€äº›å‚æ•°ï¼Œå¯ä»¥ä¾›ç¨‹åºåˆ¤æ–­ç­‰ã€‚</p>
<p>System.getProperty()æ–¹æ³•ä¸­éœ€è¦ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²çš„å‚æ•°ï¼Œè¡¨ç¤ºéœ€è¦è·å–é‚£ä¸ªç¯å¢ƒé…ç½®ï¼Œè·å¾—ç»“æœä¸ºStringã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">System.getProperty(<span class="string">&quot;java.vm.version&quot;</span>);<span class="comment">//javaè™šæ‹Ÿæœºç‰ˆæœ¬  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;java.vendor.url&quot;</span>); <span class="comment">//javaå®˜æ–¹ç½‘ç«™  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;java.vm.nam&quot;</span>); <span class="comment">//javaè™šæ‹Ÿæœºåç§°  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;user.country&quot;</span>); <span class="comment">//å›½å®¶æˆ–åœ°åŒº  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;user.dir&quot;</span>); <span class="comment">//å·¥ç¨‹çš„è·¯å¾„  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;java.runtime.version&quot;</span>);<span class="comment">//javaè¿è¡Œç¯å¢ƒç‰ˆæœ¬  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;os.arch&quot;</span>); <span class="comment">//æ“ä½œç³»ç»Ÿä½æ•°ï¼ˆ32æˆ–64ï¼‰  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;os.name&quot;</span>); <span class="comment">//æ“ä½œç³»ç»Ÿåç§°  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;sun.jnu.encoding&quot;</span>); <span class="comment">//ç¼–ç æ ¼å¼  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;os.version&quot;</span>); <span class="comment">//æ“çºµç³»ç»Ÿç‰ˆæœ¬  </span></span><br><span class="line">System.getProperty(<span class="string">&quot;java.version&quot;</span>); <span class="comment">//javaç‰ˆæœ¬ç‰ˆæœ¬</span></span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆå¦‚ä½•æ‰¾åˆ°è·¯å¾„ä¸‹çš„log4j.propertiesé…ç½®æ–‡ä»¶å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> req.getServletContext().getRealPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">System.out.println(filePath); <span class="comment">// æ–‡ä»¶å­˜æ”¾çš„è·¯å¾„</span></span><br><span class="line"><span class="comment">// æŒ‡å®špropertiesæ–‡ä»¶ä½ç½®</span></span><br><span class="line">PropertyConfigurator.configure(filePath + <span class="string">&quot;WEB-INF/classes/conf/log4j.properties&quot;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="é¡¹ç›®ä¸­targetç›®å½•æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#é¡¹ç›®ä¸­targetç›®å½•æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="é¡¹ç›®ä¸­targetç›®å½•æ˜¯ä»€ä¹ˆï¼Ÿ"></a>é¡¹ç›®ä¸­targetç›®å½•æ˜¯ä»€ä¹ˆï¼Ÿ</h5><p>targetæ˜¯ç”¨æ¥å­˜æ”¾é¡¹ç›®æ„å»ºåçš„æ–‡ä»¶å’Œç›®å½•ã€jaråŒ…ã€waråŒ…ã€ç¼–è¯‘çš„classæ–‡ä»¶ï¼Œæ‰€æœ‰éƒ½æ˜¯Mavenæ„å»ºæ—¶ç”Ÿæˆçš„ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://blog.51cto.com/zhangzhixi/5102490?b=totalstatistic">https://blog.51cto.com/zhangzhixi/5102490?b=totalstatistic</a></p>
<p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼štomcatè¿è¡Œä¹‹åï¼Œæ—¥å¿—ä¸ä¿å­˜åœ¨æ–‡ä»¶ä¸­äº†ï¼Œéš¾é“æ˜¯è¯†åˆ«ä¸äº†projectç›®å½•äº†å—ï¼Ÿ</p>
<p>ç¡®å®ï¼Œlogè¾“å‡ºåˆ°äº†tomcatä¸­çš„binç›®å½•ä¸­ã€‚æ”¹æˆç»å¯¹ç›®å½•ã€‚</p>
<h5 id="æ‰“åŒ…éƒ¨ç½²"><a href="#æ‰“åŒ…éƒ¨ç½²" class="headerlink" title="æ‰“åŒ…éƒ¨ç½²"></a>æ‰“åŒ…éƒ¨ç½²</h5><p>ç”±äºwebé¡¹ç›®æ²¡æœ‰å†™javaæ–‡ä»¶æ²¡æœ‰mainå‡½æ•°, æ˜¯æ— æ³•ç›´æ¥è¿è¡Œçš„, å› æ­¤webé¡¹ç›®éœ€è¦æ”¾åœ¨ä¸€ä¸ªå®¹å™¨é‡Œæ‰èƒ½è¿è¡Œ</p>
<p>è¿™é‡Œå°±å°†webé¡¹ç›®æ”¾åœ¨Tomcatè¿™ä¸ªwebæœåŠ¡å™¨é‡Œè¿è¡Œ</p>
<p>åŸºäºmavençš„webé¡¹ç›® â€œ æ‰“åŒ…ã€éƒ¨ç½²ã€ä½¿ç”¨â€ æ“ä½œæ­¥éª¤å¦‚ä¸‹:</p>
<ol>
<li>æ‰“åŒ…ï¼šåœ¨IDEAä¸»ç•Œé¢çš„å³è¾¹æ‰¾åˆ°maven, åœ¨mavençš„ç”Ÿå‘½å‘¨æœŸLifecycleä¸‹é¢æ‰¾åˆ°package, åŒå‡»packageå‘½ä»¤è¿›è¡Œè¿è¡Œã€‚åº•ä¸‹çš„æ§åˆ¶å°æç¤º BUILD SUCCESS ä»£è¡¨æ„å»ºæˆåŠŸã€‚æ„å»ºæˆåŠŸä¹‹å, æ ¹æ®æ§åˆ¶å°é‡Œæç¤ºçš„waråŒ…è·¯å¾„æ‰¾åˆ°warçš„ä½ç½®ã€‚</li>
<li>éƒ¨ç½²ï¼šâ€éƒ¨ç½²â€œ æ“ä½œ      (éƒ¨ç½²å°±æ˜¯æ‰‹åŠ¨æŠŠæ‰“åŒ…å¥½çš„waråŒ…å¤åˆ¶åˆ°tomcat-webappsä¸‹è¾¹)</li>
</ol>
<blockquote>
<p>ä¸æ‰“jaråŒ…è¿è¡Œï¼Œtomcatæ–‡ä»¶å¤¹ä¸‹æ²¡æœ‰åº”ç”¨çš„ç—•è¿¹å•Šã€‚ã€todoã€‘åº”è¯¥æ˜¯æŠŠwaråŒ…æ”¾åœ¨tomcatç›®å½•ä¸‹å’Œideaä¸­å¯åŠ¨ä¸å¤ªä¸€æ ·ã€‚ideaä¸­éœ€è¦ideaä¸€ç›´åœ¨è¿è¡ŒçŠ¶æ€ã€‚ä½†æ˜¯ideaä¸­è¿è¡Œçš„ä¹Ÿæ˜¯tomcatï¼Ÿ</p>
</blockquote>
<ol start="3">
<li><p>è¿è¡Œï¼Œé¦–å…ˆå°†TomcatåŠ è½½åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡</p>
<blockquote>
<p>é…ç½®tomcatç¯å¢ƒå˜é‡ï¼š</p>
<p>å¦‚æœä¸é…ç½®çš„è¯ï¼Œéœ€è¦æ¯æ¬¡éƒ½è¿›åˆ°tomcatçš„binç›®å½•ä¸‹è¿è¡Œstartup.shå¯åŠ¨ã€‚</p>
<p>åœ¨ ï½&#x2F;.zprofile æ–‡ä»¶ä¸­å¢åŠ   export PATH&#x3D;${PATH}:tomcat binç›®å½•</p>
<p>â€‹    è¯­æ³•ï¼š</p>
<p>â€‹    ${}ä¸ºå ä½ç¬¦ï¼Œ${PATH} å’Œ $PATHç­‰æ•ˆ</p>
<p>â€‹    &#x3D;å‰åä¸èƒ½æœ‰ç©ºæ ¼</p>
<p>â€‹    : ä¸ºåˆ†éš”ç¬¦ï¼ˆç­‰åŒäºwindowsç¯å¢ƒå˜é‡ä¸­çš„ ; ï¼‰</p>
<p>â€‹    PATH&#x3D;$PATH:xxx å¯ä»¥ç†è§£ä¸º â€œ PATH+&#x3D;xxx â€œï¼ˆå½“ç„¶ä¸èƒ½è¿™ä¹ˆå†™ï¼‰<br>â€‹    PATH&#x3D;xxx:$PATHè¿™ç§å†™æ³•äº¦å¯ï¼Œåªæ˜¯å‰åé¡ºåºçš„é—®é¢˜ï¼›</p>
<p>export -p æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡</p>
<ol>
<li>sudo su ç”³è¯·æƒé™</li>
<li>startup.sh            &#x2F;&#x2F;å¯åŠ¨tomacat</li>
<li>shutdown.sh          &#x2F;&#x2F;å…³é—­tomcat</li>
</ol>
</blockquote>
</li>
</ol>
<p>å¯åŠ¨ä¹‹åï¼Œå¥½å¥‡æ—¶ä¸€ç›´åœ¨è¿è¡Œè¿˜æ˜¯æ€ä¹ˆçš„ï¼Œåº”è¯¥æ˜¯ä¸€ç›´åœ¨è¿è¡Œã€‚èµ·ä¸ªå®šæ—¶çº¿ç¨‹è¯•ä¸€ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ScheduledExecutorService</span> <span class="variable">service</span> <span class="operator">=</span> Executors.newSingleThreadScheduledExecutor();</span><br><span class="line">service.scheduleAtFixedRate(()-&gt;&#123;</span><br><span class="line">    log.info(<span class="string">&quot;Thread &#123;&#125;, now &#123;&#125;.&quot;</span>, Thread.currentThread(), <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">&#125;, <span class="number">1</span>, <span class="number">3</span>, TimeUnit.SECONDS);</span><br></pre></td></tr></table></figure>

<p>æŠ¥ä¸èƒ½ç”¨lambadaè¡¨è¾¾å¼çš„é”™è¯¯ï¼Œæˆ‘æ”¹äº†levelç­‰çº§ä¸º8ï¼Œæ‰“åŒ…æ—¶è¿˜æŠ¥é”™ã€‚ä¸ç”¨è¯•äº†ï¼Œåªè¦tomcatå¼€çš„ï¼Œåº”ç”¨å°±ä¸€ç›´æ˜¯èµ·çš„ã€‚æ¯è®¿é—®ä¸€æ¬¡ï¼Œlogæ–‡ä»¶ä¸­å°±è®°å½•æ—¥å¿—ã€‚</p>
<h3 id="mavenæ‰“åŒ…"><a href="#mavenæ‰“åŒ…" class="headerlink" title="mavenæ‰“åŒ…"></a>mavenæ‰“åŒ…</h3><h4 id="1-ideaä¸­ä½¿ç”¨mavenæ’ä»¶æ‰“åŒ…"><a href="#1-ideaä¸­ä½¿ç”¨mavenæ’ä»¶æ‰“åŒ…" class="headerlink" title="1.ideaä¸­ä½¿ç”¨mavenæ’ä»¶æ‰“åŒ…"></a>1.ideaä¸­ä½¿ç”¨mavenæ’ä»¶æ‰“åŒ…</h4><p>ä¸Šé¢å°±æ˜¯ç”¨æ­¤æ“ä½œï¼Œåº”è¯¥å…ˆcleanï¼Œå†compileç¼–è¯‘ï¼Œå†æ‰“åŒ…çš„ã€‚</p>
<p>mvn clean æ¸…ç©ºclassæ–‡ä»¶<br>mvn compile ç¼–è¯‘<br>mvn package æ‰“åŒ…<br>mvn test æµ‹è¯•<br>mvn install æ‰“åŒ…å¹¶ä¸Šä¼ åˆ°æœ¬åœ°ä»“åº“<br>mvn deploy ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“<br>mvn -Dmaven.test.skip&#x3D;true è·³è¿‡æµ‹è¯•</p>
<p>pomä¸­çš„æ’ä»¶åº”è¯¥æ˜¯è‡ªåŠ¨ç»™æˆ‘åŠ çš„ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>log-maven-package<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span><span class="comment">&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-clean-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>  è¿™ç§æ‰“åŒ…æ–¹å¼ä¼šæœ‰å¤–éƒ¨ä¾èµ–åŒ…ã€‚</p>
<h4 id="2-ç›´æ¥ä½¿ç”¨mvn-packageæ‰“åŒ…"><a href="#2-ç›´æ¥ä½¿ç”¨mvn-packageæ‰“åŒ…" class="headerlink" title="2.ç›´æ¥ä½¿ç”¨mvn packageæ‰“åŒ…"></a>2.ç›´æ¥ä½¿ç”¨mvn packageæ‰“åŒ…</h4><p>ä¸åœ¨ POM ä¸­é…ç½®ä»»ä½•æ’ä»¶ï¼Œç›´æ¥ä½¿ç”¨ <code>mvn package</code> è¿›è¡Œé¡¹ç›®æ‰“åŒ…ï¼Œè¿™å¯¹äºæ²¡æœ‰ä½¿ç”¨å¤–éƒ¨ä¾èµ–åŒ…çš„é¡¹ç›®æ˜¯å¯è¡Œçš„ã€‚ä½†å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹ JAR åŒ…ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ï¼Œå› ä¸º <code>mvn package</code> æ‰“çš„ JAR åŒ…ä¸­æ˜¯ä¸å«æœ‰ä¾èµ–åŒ…ï¼Œä¼šå¯¼è‡´ä½œä¸šè¿è¡Œæ—¶å‡ºç°æ‰¾ä¸åˆ°ç¬¬ä¸‰æ–¹ä¾èµ–çš„å¼‚å¸¸ã€‚è¿™ç§æ–¹å¼å±€é™æ€§æ¯”è¾ƒå¤§ï¼Œå› ä¸ºå®é™…çš„é¡¹ç›®å¾€å¾€å¾ˆå¤æ‚ï¼Œé€šå¸¸éƒ½ä¼šä¾èµ–ç¬¬ä¸‰æ–¹ JARã€‚</p>
<p>å¤§æ•°æ®æ¡†æ¶çš„å¼€å‘è€…ä¹Ÿè€ƒè™‘åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥åŸºæœ¬æ‰€æœ‰çš„æ¡†æ¶éƒ½æ”¯æŒåœ¨æäº¤ä½œä¸šæ—¶ä½¿ç”¨ <code>--jars</code> æŒ‡å®šç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼çš„é—®é¢˜åŒæ ·å¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯ä½ å¿…é¡»ä¿æŒç”Ÿäº§ç¯å¢ƒä¸å¼€å‘ç¯å¢ƒä¸­çš„æ‰€æœ‰ JAR åŒ…ç‰ˆæœ¬ä¸€è‡´ï¼Œè¿™æ˜¯æœ‰ç»´æŠ¤æˆæœ¬çš„ã€‚</p>
<p>åŸºäºä¸Šé¢è¿™äº›åŸå› ï¼Œæœ€ç®€å•çš„æ˜¯é‡‡ç”¨ <code>All In One</code> çš„æ‰“åŒ…æ–¹å¼ï¼ŒæŠŠæ‰€æœ‰ä¾èµ–éƒ½æ‰“åŒ…åˆ°ä¸€ä¸ª JAR æ–‡ä»¶ä¸­ï¼Œæ­¤æ—¶å¯¹ç¯å¢ƒçš„ä¾èµ–æ€§æœ€å°ã€‚è¦å®ç°è¿™ä¸ªç›®çš„ï¼Œå¯ä»¥ä½¿ç”¨ Maven æä¾›çš„ <code>maven-assembly-plugin</code> æˆ– <code>maven-shade-plugin</code> æ’ä»¶ã€‚</p>
<blockquote>
<p>æˆ‘ç›´æ¥ä½¿ç”¨mvn package æŠ¥é”™è¯¯</p>
<p>[ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?</p>
<p>æœªè§£å†³</p>
</blockquote>
<h4 id="3-maven-assembly-pluginæ’ä»¶"><a href="#3-maven-assembly-pluginæ’ä»¶" class="headerlink" title="3.maven-assembly-pluginæ’ä»¶"></a>3.maven-assembly-pluginæ’ä»¶</h4><p><code>Assembly</code> æ’ä»¶æ”¯æŒå°†é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–ã€æ–‡ä»¶éƒ½æ‰“åŒ…åˆ°åŒä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ä¸­ã€‚ç›®å‰æ”¯æŒè¾“å‡ºä»¥ä¸‹æ–‡ä»¶ç±»å‹ï¼š</p>
<ul>
<li>zip</li>
<li>tar</li>
<li>tar.gz (or tgz)</li>
<li>tar.bz2 (or tbz2)</li>
<li>tar.snappy</li>
<li>tar.xz (or txz)</li>
<li>jar</li>
<li>dir</li>
<li>war</li>
</ul>
<p><strong>åŸºæœ¬ä½¿ç”¨</strong></p>
<p>åœ¨ POM.xml ä¸­å¼•å…¥æ’ä»¶ï¼ŒæŒ‡å®šæ‰“åŒ…æ ¼å¼çš„é…ç½®æ–‡ä»¶ <code>assembly.xml</code>(åç§°å¯è‡ªå®šä¹‰)ï¼Œå¹¶æŒ‡å®šä½œä¸šçš„ä¸»å…¥å£ç±»ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®æœ€ç»ˆæ‰“åŒ…æˆçš„åå­— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>community<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-assembly-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">descriptors</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">descriptor</span>&gt;</span>src/main/resources/assembly.xml<span class="tag">&lt;/<span class="name">descriptor</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">descriptors</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">archive</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- æŒ‡å®šå¯åŠ¨ç±» --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.liuxuan.Log4jDemo<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>assembly.xml æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">assembly</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/ASSEMBLY/2.0.0&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/ASSEMBLY/2.0.0 </span></span></span><br><span class="line"><span class="string"><span class="tag">                              http://maven.apache.org/xsd/assembly-2.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>jar-with-dependencies<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æŒ‡æ˜æ‰“åŒ…æ–¹å¼--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">formats</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">format</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">format</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">formats</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">includeBaseDirectory</span>&gt;</span>false<span class="tag">&lt;/<span class="name">includeBaseDirectory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencySets</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencySet</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>/<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">useProjectArtifact</span>&gt;</span>true<span class="tag">&lt;/<span class="name">useProjectArtifact</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">unpack</span>&gt;</span>true<span class="tag">&lt;/<span class="name">unpack</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è¿™é‡Œä»¥æ’é™¤ storm ç¯å¢ƒä¸­å·²ç»æä¾›çš„ storm-core ä¸ºä¾‹ï¼Œæ¼”ç¤ºæ’é™¤ Jar åŒ…--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>org.apache.storm:storm-core<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencySet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencySets</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">assembly</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é‡‡ç”¨ maven-assembly-plugin è¿›è¡Œæ‰“åŒ…æ—¶å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<p>mvn assembly:assembly </p>
<blockquote>
<p>é—®é¢˜ï¼šä½¿ç”¨å‘½ä»¤mvn compile æ—¶ï¼Œä¼šæŠ¥é”™ no compilerï¼Œä½†æ˜¯ideaä¸­ç‚¹å‡»æ—¶æ²¡é—®é¢˜ã€‚æ‰€ä»¥å¾—å…ˆç‚¹compileç¼–è¯‘ï¼Œå†æ‰§è¡Œassemblyå‘½ä»¤ã€‚</p>
</blockquote>
<p>æ‰“åŒ…åä¼šåŒæ—¶ç”Ÿæˆä¸¤ä¸ª JAR åŒ…ï¼Œå…¶ä¸­åç¼€ä¸º <code>jar-with-dependencies</code> æ˜¯å«æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–çš„ JAR åŒ…ï¼Œåç¼€æ˜¯ç”± <code>assembly.xml</code> ä¸­ <code>&lt;id&gt;</code> æ ‡ç­¾æŒ‡å®šçš„ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹ã€‚</p>
<h4 id="4-maven-shade-pluginæ’ä»¶"><a href="#4-maven-shade-pluginæ’ä»¶" class="headerlink" title="4.maven-shade-pluginæ’ä»¶"></a>4.maven-shade-pluginæ’ä»¶</h4><p><code>maven-shade-plugin</code> æ¯” <code>maven-assembly-plugin</code> åŠŸèƒ½æ›´ä¸ºå¼ºå¤§ï¼Œæ¯”å¦‚ä½ çš„å·¥ç¨‹ä¾èµ–å¾ˆå¤šçš„ JAR åŒ…ï¼Œè€Œè¢«ä¾èµ–çš„ JAR åˆä¼šä¾èµ–å…¶ä»–çš„ JAR åŒ…ï¼Œè¿™æ ·,å½“å·¥ç¨‹ä¸­ä¾èµ–åˆ°ä¸åŒçš„ç‰ˆæœ¬çš„ JAR æ—¶ï¼Œå¹¶ä¸” JAR ä¸­å…·æœ‰ç›¸åŒåç§°çš„èµ„æºæ–‡ä»¶æ—¶ï¼Œshade æ’ä»¶ä¼šå°è¯•å°†æ‰€æœ‰èµ„æºæ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·æ—¶ï¼Œè€Œä¸æ˜¯å’Œ assembly ä¸€æ ·æ‰§è¡Œè¦†ç›–æ“ä½œã€‚</p>
<p><strong>é€šå¸¸ä½¿ç”¨ <code>maven-shade-plugin</code> å°±èƒ½å¤Ÿå®Œæˆå¤§å¤šæ•°çš„æ‰“åŒ…éœ€æ±‚ï¼Œå…¶é…ç½®ç®€å•ä¸”é€‚ç”¨æ€§æœ€å¹¿ï¼Œå› æ­¤å»ºè®®ä¼˜å…ˆä½¿ç”¨æ­¤æ–¹å¼ã€‚</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®æœ€ç»ˆæ‰“åŒ…æˆçš„åå­— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>community<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-shade-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>shade<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">transformers</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!-- æŒ‡å®šå¯åŠ¨ç±» --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">transformer</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">implementation</span>=<span class="string">&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.ronz.community.CommunityApplication<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">transformer</span>&gt;</span></span><br><span class="line">                            </span><br><span class="line">                            <span class="comment">&lt;!-- ä¸‹é¢çš„é…ç½®ä»…é’ˆå¯¹å­˜åœ¨åŒåèµ„æºæ–‡ä»¶çš„æƒ…å†µï¼Œå¦‚æ²¡æœ‰åˆ™ä¸ç”¨é…ç½®--&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!-- æœ‰äº›é¡¹ç›®åŒ…å¯èƒ½ä¼šåŒ…å«åŒæ–‡ä»¶åçš„èµ„æºæ–‡ä»¶ï¼ˆä¾‹å¦‚å±æ€§æ–‡ä»¶ï¼‰--&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!-- ä¸ºé¿å…è¦†ç›–ï¼Œå¯ä»¥å°†å®ƒä»¬çš„å†…å®¹åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">transformer</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">implementation</span>=<span class="string">&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">resource</span>&gt;</span>META-INF/spring.handlers<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">transformer</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">transformer</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">implementation</span>=<span class="string">&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">resource</span>&gt;</span>META-INF/spring.schemas<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">transformer</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">transformers</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ maven-shade-plugin è¿›è¡Œæ‰“åŒ…çš„æ—¶å€™ï¼Œæ‰“åŒ…å‘½ä»¤å’Œæ™®é€šæ‰“åŒ…ä¸€æ ·</p>
<p>mvn package</p>
<h4 id="5-ä½¿ç”¨-maven-jar-plugin-å’Œ-maven-dependency-plugin-æ’ä»¶"><a href="#5-ä½¿ç”¨-maven-jar-plugin-å’Œ-maven-dependency-plugin-æ’ä»¶" class="headerlink" title="5.ä½¿ç”¨ maven-jar-plugin å’Œ maven-dependency-plugin æ’ä»¶"></a>5.ä½¿ç”¨ maven-jar-plugin å’Œ maven-dependency-plugin æ’ä»¶</h4><p>æ­¤ç§æ‰“åŒ…æ–¹å¼æœ‰ä¸€ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„ç¼ºç‚¹ï¼šæ‰“åŒ…åä¼šåœ¨ <code>target</code> ç›®å½•ä¸‹ç”Ÿæˆ <code>lib</code> ç›®å½•ï¼ˆå­˜æ”¾ä¾èµ– Jarï¼‰å’Œé¡¹ç›® Jarã€‚ä¹Ÿå°±æ˜¯è¯´ç”±äºä¾èµ–éƒ½å­˜åœ¨äº <code>lib</code> ç›®å½•ä¸­ï¼Œæ‰€ä»¥è¦æƒ³è¿è¡Œ Jar åŒ…ï¼Œå¿…é¡»å°† Jar åŒ…å’Œ <code>lib</code>ç›®å½•æ”¾åœ¨åŒä¸€ä¸ªè·¯å¾„ä¸‹ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®æœ€ç»ˆæ‰“åŒ…æˆçš„åå­— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>community<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">archive</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- ä¼šåœ¨ MANIFEST.MF ä¸­ç”Ÿæˆ Class-Path é¡¹ --&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- ç³»ç»Ÿä¼šæ ¹æ® Class-Path é¡¹é…ç½®çš„è·¯å¾„åŠ è½½ä¾èµ– --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">addClasspath</span>&gt;</span>true<span class="tag">&lt;/<span class="name">addClasspath</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- æŒ‡å®šä¾èµ–åŒ…æ‰€åœ¨ç›®å½•ï¼Œç›¸å¯¹äºé¡¹ç›®æœ€ç»ˆ Jar åŒ…çš„è·¯å¾„ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">classpathPrefix</span>&gt;</span>lib/<span class="tag">&lt;/<span class="name">classpathPrefix</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- æŒ‡å®š MainClass --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.ronz.community.CommunityApplication<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®ä¾èµ–åŒ… --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-dependency-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ç›¸å½“äºæ‰§è¡Œ mvn å‘½ä»¤ï¼Œå°†ä¾èµ–æ‰“åŒ…åˆ°æŒ‡å®šç›®å½• --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span>copy-dependencies<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-dependencies<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--å°†ä¾èµ–æ‰“åŒ…è‡³ target ä¸‹çš„ lib ç›®å½•--&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/lib<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ€æƒ³ä¹Ÿæ¯”è¾ƒç®€å•ã€‚</p>
<p>é¦–å…ˆè¯´ maven-jar-plugin æ’ä»¶ï¼Œå®ƒçš„æ€æƒ³å°±æ˜¯ï¼šæŒ‡å®šå¯åŠ¨ç±»ã€æŒ‡å®šä¾èµ–åŒ…ç›¸å¯¹äºé¡¹ç›®æœ€ç»ˆ Jar åŒ…æ‰€åœ¨çš„è·¯å¾„ã€ç»™ MANIFEST.MF æ–‡ä»¶æ·»åŠ  Class-Path å±æ€§ï¼ˆè¿è¡Œé¡¹ç›® Jar åŒ…æ—¶ä¼šæ ¹æ® Class-Path å±æ€§æ¥æ‰¾åˆ°å…·ä½“ä¾èµ– Jar åŒ…çš„è·¯å¾„ï¼‰ã€‚</p>
<p>æ¥ç€æ˜¯ maven-dependency-plugin æ’ä»¶ï¼Œå®ƒçš„ä¸»è¦æ€æƒ³å°±æ˜¯ï¼šæŒ‡å®šæ‰€æœ‰ä¾èµ–è¢«æ‰“åŒ…ä¸º Jar åŒ…åçš„å­˜æ”¾è·¯å¾„ã€‚</p>
<p>pom.xml æ–‡ä»¶é…ç½®å®Œæ¯•ä¹‹åï¼Œå°±å¯ä»¥è¿è¡Œæ‰“åŒ…å‘½ä»¤äº†ï¼š<br><em># è·³è¿‡æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œ package å‘½ä»¤</em> mvn package -Dmaven.test.skip&#x3D;true</p>
<p>è¿™ç§æ–¹å¼æ‰“åŒ…å‡ºæ¥çš„ Jar åŒ…ï¼Œåœ¨ä»£ç å±‚é¢åªåŒ…å«äº†é¡¹ç›®æœ¬èº«çš„ä»£ç ã€‚è€Œé¡¹ç›®çš„ä¾èµ–éƒ½ä»¥ Jar åŒ…çš„å½¢å¼æ”¾åœ¨äº†é¡¹ç›® Jar åŒ…åŒçº§åˆ«ç›®å½•ä¸‹çš„ <code>lib</code> ç›®å½•ä¸­ï¼Œè¿™äº›ä¾èµ– Jar åŒ…çš„è·¯å¾„åœ¨ <code>MANIFEST.MF</code> æ–‡ä»¶ä¸­éƒ½ä»¥è·¯å¾„çš„æ–¹å¼æŒ‡æ˜äº†ã€‚</p>
<h4 id="æ‰“åŒ…æ€»ç»“"><a href="#æ‰“åŒ…æ€»ç»“" class="headerlink" title="æ‰“åŒ…æ€»ç»“"></a>æ‰“åŒ…æ€»ç»“</h4><p>å·¥ä½œä¸­ç”¨åˆ°çš„å‘½ä»¤åªæ˜¯ï¼šmvn package -Dmaven.test.skip&#x3D;trueï¼Œä½†æ˜¯çœ‹é¡¹ç›®ä¸­è²Œä¼¼ä½¿ç”¨çš„æ˜¯assemblyã€‚</p>
<p>æ¨èä½¿ç”¨maven-shade-pluginæ’ä»¶ï¼Œå¯ä»¥é¿å…å‰é¢çš„èµ„æºæ–‡ä»¶è¢«åé¢çš„è¦†ç›–æ‰ã€‚</p>
<p>åªæ˜¯mvn compile è¿™ä¸ªé—®é¢˜è¿˜æ²¡è§£å†³ï¼Œä¸ºä»€ä¹ˆideaä¸­ç‚¹å‡»compileèƒ½å¤Ÿç¼–è¯‘ï¼Œç»ˆç«¯æ‰§è¡Œå‘½ä»¤å´ä¸è¡Œã€‚</p>
<h3 id="githubåœ°å€"><a href="#githubåœ°å€" class="headerlink" title="githubåœ°å€"></a>githubåœ°å€</h3><p><a target="_blank" rel="noopener" href="https://github.com/jadeliuliu/log-maven-package/tree/master">https://github.com/jadeliuliu/log-maven-package/tree/master</a></p>
<p>æ‘˜è‡ªï¼š</p>
<p>slf4jã€log4jã€logbackï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/javalinux/p/15683735.html">https://www.cnblogs.com/javalinux/p/15683735.html</a></p>
<p>logå‘å±•å²ï¼š<a target="_blank" rel="noopener" href="https://juejin.cn/post/7033021644142542878">https://juejin.cn/post/7033021644142542878</a></p>
<p>ideaä¸­åˆ›å»ºmaven webé¡¹ç›®ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/weiqingfeng/p/9494914.html">https://www.cnblogs.com/weiqingfeng/p/9494914.html</a></p>
<p>macåŒºåˆ†.bash_profile å’Œ&#x2F;etc&#x2F;profileï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42214743/article/details/116133257">https://blog.csdn.net/weixin_42214743/article/details/116133257</a></p>
<p>bashå’Œzshï¼š<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/20036548/answer/2345481001">https://www.zhihu.com/question/20036548/answer/2345481001</a></p>
<p>log4jé…ç½®æ–‡ä»¶ï¼š<a target="_blank" rel="noopener" href="http://www.blogjava.net/zJun/archive/2006/06/28/55511.html">http://www.blogjava.net/zJun/archive/2006/06/28/55511.html</a></p>
<p>mavené¡¹ç›®æ‰“åŒ…éƒ¨ç½²åˆ°tomcatï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/asdx1020/article/details/104554811">https://blog.csdn.net/asdx1020/article/details/104554811</a>   &amp;&amp;   <a target="_blank" rel="noopener" href="https://blog.csdn.net/Shangxingya/article/details/107295800">https://blog.csdn.net/Shangxingya/article/details/107295800</a></p>
<p>å¸¸ç”¨mavenæ‰“åŒ…æ–¹å¼ï¼š<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904067194437639#heading-1">https://juejin.cn/post/6844904067194437639#heading-1</a>   &amp;&amp; <a target="_blank" rel="noopener" href="https://blog.csdn.net/zhuxian1277/article/details/119880760">https://blog.csdn.net/zhuxian1277/article/details/119880760</a></p>
<h3 id="logæ—¥å¿—æ€ä¹ˆä¼ å‚"><a href="#logæ—¥å¿—æ€ä¹ˆä¼ å‚" class="headerlink" title="logæ—¥å¿—æ€ä¹ˆä¼ å‚"></a>logæ—¥å¿—æ€ä¹ˆä¼ å‚</h3><p>ä¸åŒäºString.formatå’Œsoutï¼Œlogä½¿ç”¨å ä½ç¬¦ä¼ å‚ï¼Œå°±æ˜¯{}ï¼Œå‰é¢ç”¨:è¿˜æ˜¯&#x3D;è¿˜æ˜¯å…¶ä»–æ— æ‰€è°“ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log.info(&quot;remindï¼šorderInfo:&#123;&#125;&quot;, JSON.toJSONString(orderInfo));</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯log.erroré‡Œé¢è¿˜æœ‰Exceptionå¯¹è±¡ï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆæ‰“å°:<br>å¯¹äºå¼‚å¸¸ï¼Œæ˜¯ä¸éœ€è¦å ä½ç¬¦çš„ï¼Œè€Œä¸”ä¹Ÿä¸éœ€è¦ e.getMessage()ï¼Œç›´æ¥æ‰“å°å‡ºæ¥å³å¯.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">&#125; catch (Exeception e) &#123;</span><br><span class="line">    log.error(&quot;error in order:&#123;&#125;&quot;, JSON.toJSONString(orderInfo), e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="logæ—¥å¿—çº§åˆ«å¼€å…³"><a href="#logæ—¥å¿—çº§åˆ«å¼€å…³" class="headerlink" title="logæ—¥å¿—çº§åˆ«å¼€å…³"></a>logæ—¥å¿—çº§åˆ«å¼€å…³</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(log.isDebugEnabled()) &#123;</span><br><span class="line">    log.debug();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/19/myblog/java/servlet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Sweetwater">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sweetwater's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/19/myblog/java/servlet/" class="post-title-link" itemprop="url">servletå…¥é—¨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-19 15:54:44" itemprop="dateCreated datePublished" datetime="2022-03-19T15:54:44+08:00">2022-03-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-20 15:36:37" itemprop="dateModified" datetime="2023-08-20T15:36:37+08:00">2023-08-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="1-Httpåè®®"><a href="#1-Httpåè®®" class="headerlink" title="1.Httpåè®®"></a>1.Httpåè®®</h3><p>HTTPåè®®çš„ç‰¹ç‚¹<br>1.æ”¯æŒå®¢æˆ· &#x2F; æœåŠ¡å™¨æ¨¡å¼ 	<br>2.ç®€å•å¿«é€Ÿ<br>3.çµæ´»<br>4.æ— è¿æ¥ï¼ŒHTTP1.1 ç‰ˆæœ¬åæ”¯æŒå¯æŒç»­è¿æ¥<br>5.æ— çŠ¶æ€</p>
<p>HTTP url:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//host[:port]/[abs_path]</span></span><br><span class="line">http:<span class="comment">//IP(ä¸»æœºå/åŸŸå):ç«¯å£/è®¿é—®çš„èµ„æºè·¯å¾„</span></span><br></pre></td></tr></table></figure>

<ul>
<li>http è¡¨ç¤ºé€šè¿‡HTTPåè®®æ¥å®šä½ç½‘ç»œèµ„æº</li>
<li>host è¡¨ç¤ºåˆæ³•çš„ Internet ä¸»æœºåæˆ–è€… ip åœ°å€</li>
<li>port æŒ‡ä¸€ä¸ªç«¯å£å·ï¼Œä¸ºç©ºåˆ™ä¸º 80</li>
<li>abs_path æŒ‡å®šè¯·æ±‚çš„ URL</li>
</ul>
<h4 id="HTTP-è¯·æ±‚"><a href="#HTTP-è¯·æ±‚" class="headerlink" title="HTTP è¯·æ±‚"></a>HTTP è¯·æ±‚</h4><ul>
<li>httpè¯·æ±‚ç”±è¯·æ±‚è¡Œã€<strong>è¯·æ±‚å¤´</strong>ã€è¯·æ±‚æ­£æ–‡ç»„æˆã€‚<ul>
<li>è¯·æ±‚ä½“ç¬¬ä¸€è¡Œå°±æ˜¯è¯·æ±‚è¡Œï¼›è¯·æ±‚è¡Œç”±è¯·æ±‚æ–¹å¼ï¼Œè¯·æ±‚è·¯å¾„ã€è¯·æ±‚åè®®ç‰ˆæœ¬ä¸‰éƒ¨åˆ†ç»„æˆ</li>
<li>è¯·æ±‚å¤´æŒ‡ä¸€è¡Œä¸€è¡Œçš„é”®å€¼å¯¹</li>
<li>æ­£æ–‡å³æ˜¯å†…å®¹ï¼›GETè¯·æ±‚æ²¡æœ‰æ­£æ–‡ï¼Œå…¶å†…å®¹ç›´æ¥è·Ÿåœ¨åœ°å€åé¢</li>
</ul>
</li>
</ul>
<h4 id="HTTP-å“åº”"><a href="#HTTP-å“åº”" class="headerlink" title="HTTP å“åº”"></a>HTTP å“åº”</h4><ul>
<li>åœ¨æ¥æ”¶å’Œè§£é‡Šè¯·æ±‚æ¶ˆæ¯åï¼ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ª HTTP å“åº”æ¶ˆæ¯ã€‚HTTP å“åº”ç”±çŠ¶æ€è¡Œã€æ¶ˆæ¯æŠ¥å¤´ã€å“åº”æ­£æ–‡ç»„æˆ<ul>
<li>çŠ¶æ€è¡Œç”±åè®®ç‰ˆæœ¬ã€çŠ¶æ€ç ã€è¯·æ±‚ç»“æœç»„æˆ</li>
<li>æ¶ˆæ¯æŠ¥å¤´ä¸è¯·æ±‚å¤´å¤§è‡´ç›¸åŒ</li>
<li>å“åº”æ­£æ–‡å°±æ˜¯æµè§ˆå™¨å‘ˆç°çš„å†…å®¹</li>
</ul>
</li>
</ul>
<h4 id="æ¶ˆæ¯å¤´"><a href="#æ¶ˆæ¯å¤´" class="headerlink" title="æ¶ˆæ¯å¤´"></a>æ¶ˆæ¯å¤´</h4><p>â€ƒâ€ƒHTTPæ¶ˆæ¯ç”±å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„è¯·æ±‚å’ŒæœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„å“åº”ç»„æˆï¼Œè¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½æ˜¯ç”±å¼€å§‹è¡Œï¼ˆå¯¹äºè¯·æ±‚æ¶ˆæ¯ï¼Œ å¼€å§‹è¡Œå°±æ˜¯è¯·æ±‚è¡Œï¼›å“åº”æ¶ˆæ¯åˆ™æ˜¯çŠ¶æ€è¡Œï¼‰ï¼Œæ¶ˆæ¯æŠ¥å¤´ï¼Œç©ºè¡Œï¼Œæ¶ˆæ¯æ­£æ–‡ï¼ˆå¯é€‰ï¼‰ç»„æˆ</p>
<p>â€ƒâ€ƒæ¯ä¸€ä¸ªæŠ¥å¤´åŸŸéƒ½æ˜¯ç”± åå­—+â€:â€+ç©ºæ ¼+å€¼ ç»„æˆï¼Œæ¶ˆæ¯æŠ¥å¤´åŸŸçš„åå­—æ˜¯å¤§å°å†™æ— å…³çš„</p>
<p>1.è¯·æ±‚å¤´ï¼š</p>
<p>â€ƒâ€ƒè¯·æ±‚æŠ¥å¤´å…è®¸å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€’è¯·æ±‚çš„é™„åŠ ä¿¡æ¯ä»¥åŠå®¢æˆ·ç«¯è‡ªèº«çš„ä¿¡æ¯ï¼Œæ— æ³•é€šè¿‡å‚æ•°æ¥ä¼ é€’çš„ç”¨è¯·æ±‚å¤´ã€‚</p>
<ul>
<li><p>refererï¼š è¯¥è¯·æ±‚å¤´æŒ‡æ˜è¯·æ±‚ä»å“ªé‡Œæ¥</p>
<p> æ­¤è¯·æ±‚å¤´åé¢æ¥çš„å€¼ä¸ºä¸Šä¸€ä¸ªé¡µé¢çš„URLåœ°å€ï¼Œé€šå¸¸ç”¨æ¥åšç»Ÿè®¡ã€é˜²ç›—é“¾ã€‚å¦‚æœæ˜¯ä»æµè§ˆå™¨åœ°å€æ ç›´æ¥è¾“å…¥è¿›è¡Œè®¿é—®çš„ï¼Œéƒ½æ²¡æœ‰è¯¥è¯·æ±‚å¤´ã€‚ä¾‹å¦‚ç™¾åº¦çš„å¹¿å‘Šï¼Œæœä¸€ä¸ªä¸œè¥¿ï¼Œå‡ºç°å¹¿å‘Šå­—æ ·çš„è¿æ¥ï¼Œç‚¹å‡»ä¼šè®°å½•æ˜¯ä»ç™¾åº¦æœç´¢è¿›æ¥çš„ã€‚ä¾‹å¦‚é‚€è¯·å¥½å‹ï¼Œç”¨æ¥è®°å½•æ˜¯è°é‚€è¯·è¿›æ¥çš„ã€‚ä¾‹å¦‚ä»aé¡µé¢åˆ°dé¡µé¢ï¼Œå¿…é¡»è¦ç»è¿‡bé¡µé¢å’Œcé¡µé¢ï¼Œé˜²ç›—é“¾ã€‚</p>
</li>
</ul>
<p>2.å“åº”å¤´</p>
<p>â€ƒâ€ƒå“åº”æŠ¥å¤´å…è®¸æœåŠ¡å™¨ä¼ é€’ä¸èƒ½æ”¾åœ¨çŠ¶æ€è¡Œä¸­çš„é™„åŠ å“åº”æ¶ˆæ¯ï¼Œä»¥åŠå…³äºæœåŠ¡å™¨çš„ä¿¡æ¯å’Œå¯¹Request-URLæ‰€æ ‡è¯†çš„èµ„æºè¿›è¡Œä¸‹ä¸€æ­¥è®¿é—®çš„ä¿¡æ¯</p>
<ul>
<li>locationï¼ˆé‡å®šå‘ï¼‰ï¼šlocation å“åº”æŠ¥å¤´åŸŸç”¨äºé‡å®šå‘æ¥æ”¶è€…åˆ°ä¸€ä¸ªæ–°ä½ç½®</li>
</ul>
<p>â€ƒâ€ƒlocationå“åº”æŠ¥å¤´åŸŸï¼Œå¸¸ç”¨åœ¨æœåŠ¡å™¨æ›´æ¢åŸŸåæ—¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.sendRedirect(<span class="string">&quot;http://www.baidu.com&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>refreshï¼šç¬¬ä¸€ç§æ˜¯å®šæ—¶è‡ªåŠ¨è·³è½¬åˆ° [url]æŒ‡å®šçš„é¡µé¢ï¼ˆå•ä½ä¸ºç§’ï¼‰ï¼ˆ307é‡å®šå‘è¿‡æ¥çš„ï¼‰ï¼Œå¯ä»¥åœ¨htmlé¡µé¢é€šè¿‡metaæ ‡ç­¾å®ç°ï¼Œä¹Ÿå¯ä»¥åœ¨åå°å®ç°ï¼›ç¬¬äºŒç§æ˜¯ä¸å¸¦ [url] æ˜¯æŒ‡æ¯ [content] ç§’åˆ·æ–°ä¸€æ¬¡é¡µé¢</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=<span class="string">&quot;refresh&quot;</span> content=<span class="string">&quot;3;url=http://www.baidu.com&quot;</span>&gt;</span><br></pre></td></tr></table></figure>



<h3 id="2-servletæ¦‚è¿°"><a href="#2-servletæ¦‚è¿°" class="headerlink" title="2.servletæ¦‚è¿°"></a>2.servletæ¦‚è¿°</h3><p>Servlet æ˜¯ Server ä¸ Applet çš„ç¼©å†™ï¼Œæ˜¯æœåŠ¡ç«¯å°ç¨‹åºçš„æ„æ€ã€‚ä½¿ç”¨ Java è¯­è¨€ç¼–å†™çš„æœåŠ¡å™¨ç«¯ç¨‹åºï¼Œå¯ä»¥ç”ŸæˆåŠ¨æ€çš„ WEB é¡µï¼ŒServlet ä¸»è¦è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œå¹¶ç”±æœåŠ¡å™¨è°ƒç”¨æ‰§è¡Œï¼Œ æ˜¯ä¸€ç§æŒ‰ç…§ Servlet æ ‡å‡†æ¥å¼€å‘çš„ç±»ã€‚ æ˜¯ SUN å…¬å¸æä¾›çš„ä¸€é—¨ç”¨äºå¼€å‘åŠ¨æ€ Web èµ„æºçš„æŠ€æœ¯ã€‚ï¼ˆè¨€å¤–ä¹‹æ„ï¼šè¦å®ç° web å¼€å‘ï¼Œéœ€è¦å®ç° Servlet æ ‡å‡†ï¼‰</p>
<p>Servlet æœ¬è´¨ä¸Šä¹Ÿæ˜¯ Java ç±»ï¼Œä½†è¦éµå¾ª Servlet è§„èŒƒè¿›è¡Œç¼–å†™ï¼Œæ²¡æœ‰ main()æ–¹æ³•ï¼Œå®ƒçš„åˆ›å»ºã€ä½¿ç”¨ã€é”€æ¯éƒ½ç”± Servletå®¹å™¨è¿›è¡Œç®¡ç†(å¦‚ Tomcat)ã€‚ï¼ˆè¨€å¤–ä¹‹æ„ï¼šå†™è‡ªå·±çš„ç±»ï¼Œä¸ç”¨å†™ main æ–¹æ³•ï¼Œåˆ«äººè‡ªåŠ¨è°ƒç”¨ï¼‰</p>
<p>Servlet æ˜¯å’Œ HTTP åè®®æ˜¯ç´§å¯†è”ç³»çš„ï¼Œå…¶å¯ä»¥å¤„ç† HTTP åè®®ç›¸å…³çš„æ‰€æœ‰å†…å®¹ã€‚è¿™ä¹Ÿæ˜¯ Servlet åº”ç”¨å¹¿æ³›çš„åŸå› ä¹‹ä¸€ã€‚<br>æä¾›äº† Servlet åŠŸèƒ½çš„æœåŠ¡å™¨ï¼Œå«åš Servlet å®¹å™¨ï¼Œå…¶å¸¸è§å®¹å™¨æœ‰å¾ˆå¤šï¼Œå¦‚ Tomcat, Jetty, WebLogic Server, WebSphere, JBoss ç­‰ç­‰ã€‚</p>
<p><strong>tomcatå’Œservletçš„å…³ç³»</strong></p>
<p>Tomcat æ˜¯Webåº”ç”¨æœåŠ¡å™¨,æ˜¯ä¸€ä¸ªServlet&#x2F;JSPå®¹å™¨. Tomcat ä½œä¸ºServletå®¹å™¨,è´Ÿè´£å¤„ç†å®¢æˆ·è¯·æ±‚,æŠŠè¯·æ±‚ä¼ é€ç»™Servlet,å¹¶å°†Servletçš„å“åº”ä¼ é€å›ç»™å®¢æˆ·.è€ŒServletæ˜¯ä¸€ç§è¿è¡Œåœ¨æ”¯æŒJavaè¯­è¨€çš„æœåŠ¡å™¨ä¸Šçš„ç»„ä»¶ã€‚</p>
<h3 id="3-ä½¿ç”¨servlet"><a href="#3-ä½¿ç”¨servlet" class="headerlink" title="3.ä½¿ç”¨servlet"></a>3.ä½¿ç”¨servlet</h3><h4 id="3-1-æ–°å»ºwebé¡¹ç›®"><a href="#3-1-æ–°å»ºwebé¡¹ç›®" class="headerlink" title="3.1.æ–°å»ºwebé¡¹ç›®"></a>3.1.æ–°å»ºwebé¡¹ç›®</h4><p>åˆ›å»ºwebå·¥ç¨‹ï¼Œjava enterprise - web applicationï¼Œå¼•å…¥jdkã€tomcatã€‚</p>
<h4 id="3-2-å®ç°servletè§„èŒƒ"><a href="#3-2-å®ç°servletè§„èŒƒ" class="headerlink" title="3.2.å®ç°servletè§„èŒƒ"></a>3.2.å®ç°servletè§„èŒƒ</h4><p>å®ç° Servlet è§„èŒƒï¼Œå³ç»§æ‰¿ HttpServlet ç±»ï¼ˆtomcaté‡Œçš„jaråŒ…æ”¯æŒçš„ï¼‰ï¼Œè¯¥ç±»ä¸­å·²ç»å®Œæˆäº†é€šä¿¡çš„è§„åˆ™ï¼Œæˆ‘ä»¬åªéœ€è¦è¿›è¡Œä¸šåŠ¡çš„å®ç°å³å¯ã€‚</p>
<p><strong>é‡å†™ service æ–¹æ³•</strong><br>æ»¡è¶³ Servlet è§„èŒƒåªæ˜¯è®©æˆ‘ä»¬çš„ç±»èƒ½å¤Ÿæ»¡è¶³æ¥æ”¶è¯·æ±‚çš„è¦æ±‚ï¼Œæ¥æ”¶åˆ°è¯·æ±‚åéœ€è¦å¯¹è¯·æ±‚è¿›è¡Œåˆ†æï¼Œä»¥åŠè¿›è¡Œä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œè®¡ç®—å‡ºç»“æœï¼Œåˆ™éœ€è¦æ·»åŠ ä»£ç ï¼Œåœ¨è§„èŒƒä¸­æœ‰ä¸€ä¸ªå«åš serviceçš„æ–¹æ³•ï¼Œä¸“é—¨ç”¨æ¥åšè¯·æ±‚å¤„ç†çš„æ“ä½œï¼Œä¸šåŠ¡ä»£ç åˆ™å¯ä»¥å†™åœ¨è¯¥æ–¹æ³•ä¸­ã€‚</p>
<p><strong>é€šè¿‡æ³¨è§£è®¾ç½®è·¯å¾„</strong></p>
<p>åœ¨å®Œæˆå¥½äº†ä¸€åˆ‡ä»£ç çš„ç¼–å†™åï¼Œè¿˜éœ€è¦å‘æœåŠ¡å™¨è¯´æ˜ï¼Œç‰¹å®šè¯·æ±‚å¯¹åº”ç‰¹å®šèµ„æºã€‚</p>
<p>å¼€å‘servleté¡¹ç›®ï¼Œä½¿ç”¨@WebServletå°†ä¸€ä¸ªç»§æ‰¿äºjavax.servlet.http.HttpServlet çš„ç±»å®šä¹‰ä¸ºServletç»„ä»¶ã€‚åœ¨Servlet3.0 ä¸­ ï¼Œ å¯ä»¥ä½¿ç”¨@WebServletæ³¨è§£å°†ä¸€ä¸ªç»§æ‰¿javax.servlet.http.HttpServletçš„ç±»æ ‡æ³¨ä¸ºå¯ä»¥å¤„ç†ç”¨æˆ·è¯·æ±‚çš„Servletã€‚</p>
<blockquote>
<p>javax.servletä¸‹é¢æœ‰ä¸¤ä¸ªservlet-apiï¼Œä¸€ä¸ªæ˜¯servlet-apiï¼Œè¿™ä¸ªå®šä¹‰äº†servletè§„èŒƒï¼Œä¸€ä¸ªæ˜¯javax.servlet-apiï¼Œè¿™ä¸ªæ˜¯serlvetæä¾›çš„apiã€‚<br>@WebServletè¿™ä¸ªæ³¨è§£æ˜¯åœ¨javax.servlet-apiä¾èµ–åŒ…é‡Œ</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nameå¯å†™å¯ä¸å†™ï¼Œvalueè¿‡æ»¤å™¨ä¼šæ‹¦æˆªï¼ŒurlPatternsè¿‡æ»¤å™¨ä¸ä¼šæ‹¦æˆª</span><br><span class="line"><span class="meta">@WebServlet(name=&quot;Servlet01&quot;,value=&quot;/ser01&quot;)</span> </span><br><span class="line"><span class="meta">@WebServlet(name=&quot;Servlet01&quot;,urlPatterns = &quot;/ser01&quot;)</span></span><br><span class="line">ä¹Ÿå¯ä»¥é…ç½®å¤šä¸ªè·¯å¾„ï¼š</span><br><span class="line"><span class="meta">@WebServlet(name=&quot;Servlet01&quot;,value=&#123;&quot;/ser01&quot;,&#x27;/ser001&#x27;&#125;)</span> </span><br><span class="line"><span class="meta">@WebServlet(name=&quot;Servlet01&quot;,urlPatterns=&#123;&quot;/ser01&quot;,&#x27;/ser001&#x27;&#125;)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-19 17:00</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello Servlet!&quot;</span>);</span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-å‘å¸ƒé¡¹ç›®å¹¶å¯åŠ¨æœåŠ¡"><a href="#3-3-å‘å¸ƒé¡¹ç›®å¹¶å¯åŠ¨æœåŠ¡" class="headerlink" title="3.3.å‘å¸ƒé¡¹ç›®å¹¶å¯åŠ¨æœåŠ¡"></a>3.3.å‘å¸ƒé¡¹ç›®å¹¶å¯åŠ¨æœåŠ¡</h4><p>åˆ°æ­¤ï¼Œéœ€è¦ç¼–å†™å’Œé…ç½®çš„åœ°æ–¹å·²ç»å®Œæˆï¼Œé¡¹ç›®å·²ç»å®Œæ•´äº†ï¼Œä½†æ˜¯å¦‚æœéœ€è¦å¤–ç•Œèƒ½å¤Ÿè®¿é—®ï¼Œ è¿˜éœ€è¦å°†é¡¹ç›®å‘å¸ƒåˆ°æœåŠ¡å™¨ä¸Šå¹¶è¿è¡ŒæœåŠ¡å™¨ã€‚</p>
<p>è®¾ç½®tomcaté…ç½®ï¼Œè®¾ç½®é¡¹ç›®çš„ç«™ç‚¹åï¼ˆé¡¹ç›®å¯¹å¤–è®¿é—®è·¯å¾„ï¼‰</p>
<p>é…ç½®ä¸­é€‰deploymentæ›´æ”¹ç«™ç‚¹åã€‚</p>
<p>ç„¶åå¯åŠ¨å°±å¯ä»¥è®¿é—®é¡µé¢ã€‚</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/servlet_demo/ser01">http://localhost:8080/servlet_demo/ser01</a></p>
<p>tomcatæœ‰ä¸ªç»¿ç‚¹è¡¨ç¤ºæ­£åœ¨è¿è¡Œã€‚</p>
<h3 id="4-servletå·¥ä½œæµç¨‹"><a href="#4-servletå·¥ä½œæµç¨‹" class="headerlink" title="4.servletå·¥ä½œæµç¨‹"></a>4.servletå·¥ä½œæµç¨‹</h3><p>1.é€šè¿‡è¯·æ±‚å¤´è·çŸ¥æµè§ˆå™¨è®¿é—®çš„æ˜¯å“ªä¸ªä¸»æœº</p>
<p>2.å†é€šè¿‡è¯·æ±‚è¡Œè·å–è®¿é—®çš„æ˜¯å“ªä¸ªä¸€ä¸ªwebåº”ç”¨</p>
<p>3.å†é€šè¿‡è¯·æ±‚è¡Œä¸­çš„è¯·æ±‚è·¯å¾„è·çŸ¥è®¿é—®çš„æ˜¯å“ªä¸ªèµ„æº</p>
<p>4.é€šè¿‡è·å–çš„èµ„æºè·¯å¾„åœ¨é…ç½®ä¸­åŒ¹é…åˆ°çœŸå®çš„è·¯å¾„</p>
<p>5.æœåŠ¡å™¨ä¼šåˆ›å»ºservletå¯¹è±¡ï¼Œï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ï¼Œåˆ›å»ºservletå®ä¾‹ï¼Œå¹¶è°ƒç”¨initæ–¹æ³•è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼‰</p>
<p>6.è°ƒç”¨serviceï¼ˆrequestï¼Œ responseï¼‰æ–¹æ³•æ¥å¤„ç†è¯·æ±‚å’Œå“åº”çš„æ“ä½œ</p>
<p>7.è°ƒç”¨serviceå®Œæ¯•åè¿”å›æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨å°†responseç¼“å†²åŒºçš„æ•°æ®å–å‡ºï¼Œä»¥httpå“åº”çš„æ ¼å¼å‘é€ç»™æµè§ˆå™¨</p>
<h3 id="5-servletå·¥ä½œæ¨¡å¼"><a href="#5-servletå·¥ä½œæ¨¡å¼" class="headerlink" title="5.servletå·¥ä½œæ¨¡å¼"></a>5.servletå·¥ä½œæ¨¡å¼</h3><ul>
<li>å®¢æˆ·ç«¯å‘é€è¯·æ±‚è‡³æœåŠ¡å™¨</li>
<li>æœåŠ¡å™¨å¯åŠ¨å¹¶è°ƒç”¨Servletï¼ŒServletæ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚ç”Ÿæˆå“åº”å†…å®¹å¹¶å°†å…¶ä¼ ç»™æœåŠ¡å™¨</li>
<li>æœåŠ¡å™¨å°†å“åº”è¿”å›å®¢æˆ·ç«¯</li>
</ul>
<h3 id="6-servletç”Ÿå‘½å‘¨æœŸ"><a href="#6-servletç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="6.servletç”Ÿå‘½å‘¨æœŸ"></a>6.servletç”Ÿå‘½å‘¨æœŸ</h3><p>Servletæ²¡æœ‰ main()æ–¹æ³•ï¼Œä¸èƒ½ç‹¬ç«‹è¿è¡Œï¼Œå®ƒçš„è¿è¡Œå®Œå…¨ç”± Servlet å¼•æ“æ¥æ§åˆ¶å’Œè°ƒåº¦ã€‚ æ‰€è°“ç”Ÿå‘½å‘¨æœŸï¼ŒæŒ‡çš„æ˜¯servlet å®¹å™¨ä½•æ—¶åˆ›å»º servlet å®ä¾‹ã€ä½•æ—¶è°ƒç”¨å…¶æ–¹æ³•è¿›è¡Œè¯·æ±‚çš„å¤„ç†ã€ ä½•æ—¶å¹¶é”€æ¯å…¶å®ä¾‹çš„æ•´ä¸ªè¿‡ç¨‹ã€‚</p>
<ol>
<li>å®ä¾‹å’Œåˆå§‹åŒ–æ—¶æœºï¼ˆç±»åŠ è½½å’Œå®åŠ›åŒ–ï¼‰<br>å½“è¯·æ±‚åˆ°è¾¾å®¹å™¨æ—¶ï¼Œå®¹å™¨æŸ¥æ‰¾è¯¥ servlet å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¼šåˆ›å»ºå®ä¾‹å¹¶è¿›è¡Œåˆå§‹åŒ–ã€‚</li>
<li>å°±ç»ª&#x2F;è°ƒç”¨&#x2F;æœåŠ¡é˜¶æ®µ<br>æœ‰è¯·æ±‚åˆ°è¾¾å®¹å™¨ï¼Œå®¹å™¨è°ƒç”¨ servlet å¯¹è±¡çš„ service()æ–¹æ³•,å¤„ç†è¯·æ±‚çš„æ–¹æ³•åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼›<br>HttpServlet çš„ service()æ–¹æ³•ï¼Œä¼šä¾æ®è¯·æ±‚æ–¹å¼æ¥è°ƒç”¨ doGet()æˆ–è€… doPost()æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œ è¿™ä¸¤ä¸ª do æ–¹æ³•é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦å­ç±»å» overrideã€‚</li>
<li>é”€æ¯æ—¶æœº<br>å½“å®¹å™¨å…³é—­æ—¶ï¼ˆåº”ç”¨ç¨‹åºåœæ­¢æ—¶ï¼‰ï¼Œä¼šå°†ç¨‹åºä¸­çš„ Servlet å®ä¾‹è¿›è¡Œé”€æ¯ã€‚</li>
</ol>
<p>ä¸Šè¿°çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥é€šè¿‡ Servlet ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥è§‚å¯Ÿã€‚åœ¨ Servlet ä¸­æœ‰ä¸‰ä¸ªç”Ÿå‘½å‘¨ æœŸæ–¹æ³•ï¼Œä¸ç”±ç”¨æˆ·æ‰‹åŠ¨è°ƒç”¨ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šçš„æ—¶æœºç”±å®¹å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œè§‚å¯Ÿè¿™ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³• å³å¯è§‚å¯Ÿåˆ° Servlet çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>1âƒ£ï¸ init æ–¹æ³•ï¼Œåœ¨ Servlet å®ä¾‹åˆ›å»ºä¹‹åæ‰§è¡Œï¼ˆè¯æ˜è¯¥ Servlet æœ‰å®ä¾‹åˆ›å»ºäº†ï¼‰</p>
<p>2âƒ£ï¸service æ–¹æ³•ï¼Œæ¯æ¬¡æœ‰è¯·æ±‚åˆ°è¾¾æŸä¸ª Servlet æ–¹æ³•æ—¶æ‰§è¡Œï¼Œç”¨æ¥å¤„ç†è¯·æ±‚ï¼ˆè¯æ˜è¯¥Servlet è¿›è¡ŒæœåŠ¡äº†ï¼‰</p>
<p>3âƒ£ï¸destroy æ–¹æ³•ï¼ŒServlet å®ä¾‹é”€æ¯æ—¶æ‰§è¡Œï¼ˆè¯æ˜è¯¥ Servlet çš„å®ä¾‹è¢«é”€æ¯äº†ï¼‰</p>
<p>Servlet çš„ç”Ÿå‘½å‘¨æœŸï¼Œç®€å•çš„æ¦‚æ‹¬è¿™å°±åˆ†ä¸ºå››æ­¥ï¼šservlet ç±»åŠ è½½â€“&gt;å®ä¾‹åŒ–â€“&gt;æœåŠ¡â€“&gt;é”€æ¯ã€‚<br>ä¸‹é¢æè¿°ä¸€ä¸‹ Tomcat ä¸ Servlet æ˜¯å¦‚ä½•å·¥ä½œçš„,çœ‹çœ‹ä¸‹é¢çš„æ—¶åºå›¾ï¼š</p>
<p><img src="/images/servlet%E6%97%B6%E5%BA%8F%E5%9B%BE.png"></p>
<ol>
<li>Web Client å‘ Servlet å®¹å™¨ï¼ˆTomcatï¼‰å‘å‡º Http è¯·æ±‚</li>
<li>Servlet å®¹å™¨æ¥æ”¶ Web Client çš„è¯·æ±‚</li>
<li>Servlet å®¹å™¨åˆ›å»ºä¸€ä¸ª HttpServletRequest å¯¹è±¡ï¼Œå°† Web Client è¯·æ±‚çš„ä¿¡æ¯å°è£…åˆ°è¿™ä¸ªå¯¹è±¡ ä¸­</li>
<li>Servlet å®¹å™¨åˆ›å»ºä¸€ä¸ª HttpServletResponse å¯¹è±¡</li>
<li>Servlet å®¹å™¨è°ƒHttpServlet å¯¹è±¡service æ–¹æ³•ï¼ŒæŠŠ Request ä¸ Response ä½œä¸ºå‚æ•°ï¼Œä¼ ç»™ HttpServlet</li>
<li>HttpServlet è°ƒç”¨ HttpServletRequest å¯¹è±¡çš„æœ‰å…³æ–¹æ³•ï¼Œè·å– Http è¯·æ±‚ä¿¡æ¯</li>
<li>HttpServlet è°ƒç”¨ HttpServletResponse å¯¹è±¡çš„æœ‰å…³æ–¹æ³•ï¼Œç”Ÿæˆå“åº”æ•°æ®</li>
<li>Servlet å®¹å™¨æŠŠ HttpServlet çš„å“åº”ç»“æœä¼ ç»™ Web Client</li>
</ol>
<h3 id="7-å½¢å‚ï¼šHttpServletRequestå¯¹è±¡"><a href="#7-å½¢å‚ï¼šHttpServletRequestå¯¹è±¡" class="headerlink" title="7.å½¢å‚ï¼šHttpServletRequestå¯¹è±¡"></a>7.å½¢å‚ï¼šHttpServletRequestå¯¹è±¡</h3><p>HttpServletRequest å¯¹è±¡ï¼šä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥æ¥æ”¶å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„è¯·æ±‚ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šè¯·æ±‚çš„å‚æ•°ï¼Œå‘é€çš„å¤´ä¿¡æ¯ç­‰éƒ½å±äºå®¢æˆ·ç«¯å‘æ¥çš„ä¿¡æ¯ï¼Œservice()æ–¹æ³•ä¸­å½¢å‚æ¥æ”¶çš„HttpServletRequest æ¥å£çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œè¡¨ç¤ºè¯¥å¯¹è±¡ä¸»è¦åº”ç”¨åœ¨ HTTP åè®®ä¸Šï¼Œè¯¥å¯¹è±¡æ˜¯ç”± Tomcat å°è£…å¥½ä¼ é€’è¿‡æ¥ã€‚</p>
<p>HttpServletRequest æ˜¯ ServletRequest çš„å­æ¥å£ï¼ŒServletRequest åªæœ‰ä¸€ä¸ªå­æ¥å£ï¼Œå°±æ˜¯ HttpServletRequestã€‚æ—¢ç„¶åªæœ‰ä¸€ä¸ªå­æ¥å£ä¸ºä»€ä¹ˆä¸å°†ä¸¤ä¸ªæ¥å£åˆå¹¶ä¸ºä¸€ä¸ªï¼Ÿ<br>ä»é•¿è¿œä¸Šè®²ï¼šç°åœ¨ä¸»è¦ç”¨çš„åè®®æ˜¯ HTTP åè®®ï¼Œä½†ä»¥åå¯èƒ½å‡ºç°æ›´å¤šæ–°çš„åè®®ã€‚è‹¥ä»¥åæƒ³è¦æ”¯æŒè¿™ç§æ–°åè®®ï¼Œåªéœ€è¦ç›´æ¥ç»§æ‰¿ ServletRequest æ¥å£å°±è¡Œäº†ã€‚</p>
<p>åœ¨ HttpServletRequest æ¥å£ä¸­ï¼Œå®šä¹‰çš„æ–¹æ³•å¾ˆå¤šï¼Œä½†éƒ½æ˜¯å›´ç»•æ¥æ”¶å®¢æˆ·ç«¯å‚æ•°çš„ã€‚ä½†æ˜¯æ€ä¹ˆæ‹¿åˆ°è¯¥å¯¹è±¡å‘¢ï¼Ÿä¸éœ€è¦ï¼Œç›´æ¥åœ¨ Service æ–¹æ³•ä¸­ç”±å®¹å™¨ä¼ å…¥è¿‡æ¥ï¼Œè€Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å–å‡ºå¯¹è±¡ä¸­çš„æ•°æ®ï¼Œè¿›è¡Œåˆ†æã€å¤„ç†ã€‚</p>
<h4 id="æ¥æ”¶è¯·æ±‚"><a href="#æ¥æ”¶è¯·æ±‚" class="headerlink" title="æ¥æ”¶è¯·æ±‚"></a>æ¥æ”¶è¯·æ±‚</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-20 09:41</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser03&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å¸¸ç”¨æ–¹æ³•</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚æ—¶çš„å®Œæ•´è·¯å¾„ï¼ˆä»httpå¼€å§‹ï¼Œåˆ°ï¼Ÿå‰é¢ç»“æŸï¼‰</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> req.getRequestURL() +<span class="string">&quot;&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;url:&quot;</span>+url);</span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚æ—¶çš„éƒ¨åˆ†è·¯å¾„ï¼ˆä»é¡¹ç›®çš„ç«™ç‚¹åç§°å¼€å§‹ï¼Œåˆ°ï¼Ÿå‰é¢ç»“æŸï¼‰</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uri</span> <span class="operator">=</span> req.getRequestURI();</span><br><span class="line">        System.out.println(<span class="string">&quot;uri:&quot;</span>+uri);</span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚æ—¶çš„å‚æ•°å­—ç¬¦ä¸²ï¼ˆä»ï¼Ÿå¼€å§‹ï¼‰</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queryString</span> <span class="operator">=</span> req.getQueryString();</span><br><span class="line">        System.out.println(<span class="string">&quot;queryString:&quot;</span>+queryString);</span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚æ–¹å¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> req.getMethod();</span><br><span class="line">        System.out.println(<span class="string">&quot;method:&quot;</span>+method);</span><br><span class="line">        <span class="comment">// è·å–å½“å‰åè®®ç‰ˆæœ¬</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">protocol</span> <span class="operator">=</span> req.getProtocol();</span><br><span class="line">        System.out.println(<span class="string">&quot;protocol:&quot;</span>+protocol);</span><br><span class="line">        <span class="comment">// è·å–é¡¹ç›®çš„ç«™ç‚¹å</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">webApp</span> <span class="operator">=</span> req.getContextPath();</span><br><span class="line">        System.out.println(<span class="string">&quot;webApp:&quot;</span>+webApp);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è·å–è¯·æ±‚çš„å‚æ•°</span></span><br><span class="line"><span class="comment">         * http://localhost:8080/servlet_demo/ser03?uname=lili&amp;upwd=lslsls&amp;input=111&amp;input=222&amp;input=333</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// è·å–æŒ‡å®šåç§°çš„å‚æ•°å€¼,è¿”å›å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uname</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">upwd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;upwd&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;uname:&quot;</span>+uname);</span><br><span class="line">        System.out.println(<span class="string">&quot;upwd:&quot;</span>+upwd);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–æŒ‡å®šåç§°çš„å‚æ•°çš„æ‰€æœ‰å‚æ•°å€¼,è¿”å›å­—ç¬¦ä¸²æ•°ç»„ï¼ˆç”¨äºå¤é€‰æ¡†ä¼ å€¼ï¼‰</span></span><br><span class="line">        String[] strings = req.getParameterValues(<span class="string">&quot;input&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(strings != <span class="literal">null</span> &amp;&amp; strings.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(String s : strings)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;strings:&quot;</span>+s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="è¯·æ±‚ä¹±ç é—®é¢˜"><a href="#è¯·æ±‚ä¹±ç é—®é¢˜" class="headerlink" title="è¯·æ±‚ä¹±ç é—®é¢˜"></a>è¯·æ±‚ä¹±ç é—®é¢˜</h4><p>ç”±äºç°åœ¨çš„ request å±äºæ¥æ”¶å®¢æˆ·ç«¯çš„å‚æ•°ï¼Œæ‰€ä»¥å¿…ç„¶æœ‰å…¶é»˜è®¤çš„è¯­è¨€ç¼–ç ï¼Œä¸»è¦æ˜¯ç”±äºåœ¨è§£æè¿‡ç¨‹ä¸­é»˜è®¤ä½¿ç”¨çš„ç¼–ç æ–¹å¼ä¸º ISO-8859-1(æ­¤ç¼–ç ä¸æ”¯æŒä¸­æ–‡)ï¼Œæ‰€ä»¥è§£ææ—¶ä¸€å®šä¼šå‡ºç°ä¹±ç ã€‚è¦æƒ³è§£å†³è¿™ç§ä¹±ç é—®é¢˜ï¼Œéœ€è¦è®¾ç½®request ä¸­çš„ç¼–ç æ–¹å¼ï¼Œå‘Šè¯‰æœåŠ¡å™¨ä»¥ä½•ç§æ–¹å¼æ¥è§£ææ•°æ®ã€‚æˆ–è€…åœ¨æ¥æ”¶åˆ°ä¹±ç æ•°æ®ä»¥åï¼Œå†é€šè¿‡ç›¸åº”çš„ç¼–ç æ ¼å¼è¿˜åŸã€‚<br>æ–¹å¼ä¸€ï¼š</p>
<p><code>String nuname = new String(request.getParameter(name).getBytes(&quot;ISO-8859-1&quot;),&quot;UTF-8&quot;); </code></p>
<p>å€ŸåŠ©äº†String å¯¹è±¡çš„æ–¹æ³•ï¼Œè¯¥ç§æ–¹å¼å¯¹ä»»ä½•è¯·æ±‚æœ‰æ•ˆï¼Œæ˜¯é€šç”¨çš„ã€‚ä½†æ˜¯åŸæœ¬ä¸æ˜¯ä¹±ç çš„ï¼Œä½¿ç”¨çš„è¯ä¼šå‡ºç°ä¹±ç ã€‚<br>Tomcat8èµ·ï¼Œä»¥åçš„GETæ–¹å¼è¯·æ±‚æ˜¯ä¸ä¼šå‡ºç°ä¹±ç çš„ã€‚POSTè¯·æ±‚æ˜¯ä¼šä¹±ç çš„ã€‚</p>
<p>ç”¨JSPè¿›è¡Œpostè¯·æ±‚è¡¨å•æäº¤ï¼šæ–°å»ºlogin.jsp</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;ç™»å½•&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;ser03&quot;</span>&gt;</span><br><span class="line">        å§“åï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;uname&quot;</span>&gt; &lt;br&gt;</span><br><span class="line">        å¯†ç ï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;upwd&quot;</span>&gt; &lt;br&gt;</span><br><span class="line">        &lt;button&gt;ç™»å½•&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:8080/servlet_demo/login.jsp">http://localhost:8080/servlet_demo/login.jsp</a></p>
<p>æ–¹å¼äºŒï¼šé€šè¿‡è®¾ç½®æœåŠ¡å™¨è§£æç¼–ç çš„æ ¼å¼ï¼ˆåªé’ˆå¯¹postè¯·æ±‚ï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®ç¼–ç æ ¼å¼</span></span><br><span class="line">req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);	</span><br></pre></td></tr></table></figure>

<h4 id="è¯·æ±‚è½¬å‘"><a href="#è¯·æ±‚è½¬å‘" class="headerlink" title="è¯·æ±‚è½¬å‘"></a>è¯·æ±‚è½¬å‘</h4><p>è¯·æ±‚è½¬å‘ï¼Œæ˜¯ä¸€ç§æœåŠ¡å™¨çš„è¡Œä¸ºï¼Œå½“å®¢æˆ·ç«¯è¯·æ±‚åˆ°è¾¾åï¼ŒæœåŠ¡å™¨è¿›è¡Œè½¬å‘ï¼Œæ­¤æ—¶ä¼šå°†è¯·æ±‚å¯¹è±¡è¿›è¡Œä¿å­˜ï¼Œåœ°å€æ ä¸­çš„ URL åœ°å€ä¸ä¼šæ”¹å˜ï¼Œå¾—åˆ°å“åº”åï¼ŒæœåŠ¡å™¨ç«¯å†å°†å“åº”å‘é€ç»™å®¢æˆ·ç«¯ï¼Œä»å§‹è‡³ç»ˆåªæœ‰ä¸€ä¸ªè¯·æ±‚å‘å‡ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-20 21:34</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚è½¬å‘è·³è½¬</span></span><br><span class="line"><span class="comment"> * å¯ä»¥è®©è¯·æ±‚ä»æœåŠ¡ç«¯è·³è½¬åˆ°å®¢æˆ·ç«¯å³jspï¼ˆæˆ–è·³è½¬åˆ°æŒ‡å®šServletï¼‰æœåŠ¡å™¨è¡Œä¸º</span></span><br><span class="line"><span class="comment"> * ç‰¹ç‚¹ï¼š1ã€‚æœåŠ¡ç«¯è¡Œä¸º 2ã€‚åœ°å€æ ä¸ä¼šå‘ç”Ÿæ”¹å˜</span></span><br><span class="line"><span class="comment"> * 3ã€‚ä»å§‹è‡³ç»ˆåªæœ‰ä¸€ä¸ªè¯·æ±‚ 4ã€‚requestæ•°æ®å¯ä»¥å…±äº«</span></span><br><span class="line"><span class="comment"> * åªèƒ½è·³ä¸€æ¬¡</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser04&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚çš„å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uname</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ser04 uname:&quot;</span>+uname);</span><br><span class="line">        <span class="comment">// è¯·æ±‚è½¬å‘è·³è½¬åˆ°ser03</span></span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;ser03&quot;</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="requestä½œç”¨åŸŸ"><a href="#requestä½œç”¨åŸŸ" class="headerlink" title="requestä½œç”¨åŸŸ"></a><strong>requestä½œç”¨åŸŸ</strong></h4><p>é€šè¿‡è¯¥å¯¹è±¡å¯ä»¥åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­ä¼ é€’æ•°æ®ï¼Œä½œç”¨èŒƒå›´ï¼šåœ¨ä¸€æ¬¡è¯·æ±‚ä¸­æœ‰æ•ˆï¼Œå³æœåŠ¡å™¨è·³è½¬æœ‰æ•ˆã€‚ï¼ˆè¯·æ±‚è½¬å‘è·³è½¬æ—¶æœ‰æ•ˆï¼Œç›´æ¥è®¿é—®è·³è½¬çš„urlæ— æ•ˆï¼‰ã€‚ä½œç”¨åŸŸåœ¨ä¸€æ¬¡è¯·æ±‚ä¸­ï¼Œåœ¨è¯·æ±‚è½¬å‘è¿‡ç¨‹ä¸­é€šè¿‡requestæ¥ä¼ è¾“&#x2F;å…±äº«æ•°æ®ã€‚</p>
<p>Ser05ï¼Œå‡†å¤‡ç”¨æ¥è¯·æ±‚è½¬å‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-20 21:34</span></span><br><span class="line"><span class="comment"> * requestä½œç”¨åŸŸ</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser05&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet5</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®åŸŸå¯¹è±¡</span></span><br><span class="line">        req.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;admin&quot;</span>);</span><br><span class="line">        req.setAttribute(<span class="string">&quot;age&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">        req.setAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">        <span class="comment">// è¯·æ±‚è½¬å‘å¹¶è·³è½¬åˆ°Servlet6ï¼Œå…±äº«åŒä¸€ä¸ªreqå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//req.getRequestDispatcher(&quot;ser06&quot;).forward(req, resp);</span></span><br><span class="line">        <span class="comment">// ä¸€èˆ¬æ˜¯ä»å®¢æˆ·ç«¯è·å–æ•°æ®ï¼Œæ‰€ä»¥è·³è½¬åˆ°jspå®¢æˆ·ç«¯</span></span><br><span class="line">        <span class="comment">// è¯·æ±‚è½¬å‘è·³è½¬åˆ°jspï¼Œå¹¶é€šè¿‡åŸŸå¯¹è±¡ä¼ é€’æ•°æ®</span></span><br><span class="line">        <span class="comment">// htmlå°±ä¸è¡Œï¼Œå› ä¸ºæ˜¯é™æ€é¡µé¢ï¼Œè€Œjspæ˜¯åŠ¨æ€é¡µé¢</span></span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;attribute.jsp&quot;</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è·³è½¬åˆ°ser06</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-20 21:34</span></span><br><span class="line"><span class="comment"> * requestä½œç”¨åŸŸ</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser06&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet6</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// è·å–åŸŸå¯¹è±¡</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String) req.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;nameï¼š&quot;</span> + name);</span><br><span class="line">        List&lt;String&gt; list = (List&lt;String&gt;) req.getAttribute(<span class="string">&quot;list&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è·³è½¬åˆ°jspï¼š</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;attributeé¡µé¢&lt;/h2&gt;</span><br><span class="line">&lt;%-- å¦‚æœè¦åœ¨jspä¸­å†™javaä»£ç ï¼Œéœ€è¦å†™åœ¨è„šæœ¬æ®µä¸­ --%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">// è·å–åŸŸå¯¹è±¡</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String) request.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;nameï¼š&quot;</span> + name);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h3 id="8-å½¢å‚ï¼šHttpServletResponseå¯¹è±¡"><a href="#8-å½¢å‚ï¼šHttpServletResponseå¯¹è±¡" class="headerlink" title="8.å½¢å‚ï¼šHttpServletResponseå¯¹è±¡"></a>8.å½¢å‚ï¼š<strong>HttpServletResponseå¯¹è±¡</strong></h3><p>WebæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„httpè¯·æ±‚ï¼Œä¼šé’ˆå¯¹æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œåˆ†åˆ«åˆ›å»ºä¸€ä¸ªç”¨äºä»£è¡¨è¯·æ±‚çš„ request å¯¹è±¡å’Œä»£è¡¨å“åº”çš„ response å¯¹è±¡ã€‚<br>request å’Œ response å¯¹è±¡ä»£è¡¨è¯·æ±‚å’Œå“åº”ï¼šè·å–å®¢æˆ·ç«¯æ•°æ®ï¼Œéœ€è¦é€šè¿‡ request å¯¹è±¡ï¼›å‘å®¢æˆ·ç«¯è¾“å‡ºæ•°æ®ï¼Œéœ€è¦é€šè¿‡ response å¯¹è±¡ã€‚</p>
<p>HttpServletResponse çš„ä¸»è¦åŠŸèƒ½ç”¨äºæœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚è¿›è¡Œå“åº”ï¼Œå°† Web æœåŠ¡å™¨å¤„ç†åçš„ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚service()æ–¹æ³•ä¸­å½¢å‚æ¥æ”¶çš„æ˜¯ HttpServletResponse æ¥å£çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­å°è£…äº†å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ã€å‘é€å“åº”å¤´ï¼Œå‘é€å“åº”çŠ¶æ€ç çš„æ–¹æ³•ã€‚</p>
<h4 id="å“åº”æ•°æ®"><a href="#å“åº”æ•°æ®" class="headerlink" title="å“åº”æ•°æ®"></a>å“åº”æ•°æ®</h4><p>æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œå¯ä»¥é€šè¿‡ HttpServletResponse å¯¹è±¡ç›´æ¥è¿›è¡Œå“åº”ï¼Œå“åº”æ—¶éœ€è¦è·å–è¾“å‡ºæµã€‚æœ‰ä¸¤ç§å½¢å¼ï¼š</p>
<p>getWriter() è·å–å­—ç¬¦æµ(åªèƒ½å“åº”å­—ç¬¦) </p>
<p>getOutputStream() è·å–å­—èŠ‚æµ(èƒ½å“åº”ä¸€åˆ‡æ•°æ®)</p>
<p>å“åº”å›çš„æ•°æ®åˆ°å®¢æˆ·ç«¯è¢«æµè§ˆå™¨è§£æã€‚<br>æ³¨æ„ï¼šä¸¤è€…ä¸èƒ½åŒæ—¶ä½¿ç”¨ã€‚ä¸€ä¸ªæ–‡ä»¶é‡Œåªèƒ½ç”¨ä¸€ä¸ªï¼Œå› ä¸ºresponseåªæœ‰ä¸€ä¸ªã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-22 08:50</span></span><br><span class="line"><span class="comment"> * getWriter() å­—ç¬¦è¾“å‡ºæµ(è¾“å‡ºå­—ç¬¦ä¸²)</span></span><br><span class="line"><span class="comment"> * getOutputStream() å­—èŠ‚è¾“å‡ºæµ(è¾“å‡ºä¸€åˆ‡æ•°æ®)</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser07&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet7</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"><span class="comment">//        // getWriteè·å–å­—ç¬¦è¾“å‡ºæµ</span></span><br><span class="line"><span class="comment">//        PrintWriter writer = resp.getWriter();</span></span><br><span class="line"><span class="comment">//        // è¾“å‡ºæ•°æ®</span></span><br><span class="line"><span class="comment">//        writer.write(&quot;hello&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// getOutputStreamå­—èŠ‚è¾“å‡ºæµ</span></span><br><span class="line">        <span class="type">ServletOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> resp.getOutputStream();</span><br><span class="line">        <span class="comment">// è¾“å‡ºæ•°æ®</span></span><br><span class="line">        out.write(<span class="string">&quot;hi&quot;</span>.getBytes());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å“åº”ä¹±ç é—®é¢˜"><a href="#å“åº”ä¹±ç é—®é¢˜" class="headerlink" title="å“åº”ä¹±ç é—®é¢˜"></a>å“åº”ä¹±ç é—®é¢˜</h4><p>åœ¨å“åº”ä¸­ï¼Œå¦‚æœæˆ‘ä»¬å“åº”çš„å†…å®¹ä¸­å«æœ‰ä¸­æ–‡ï¼Œåˆ™æœ‰å¯èƒ½å‡ºç°ä¹±ç ã€‚è¿™æ˜¯å› ä¸ºæœåŠ¡å™¨å“åº”çš„æ•°æ®ä¹Ÿä¼šç»è¿‡ç½‘ç»œä¼ è¾“ï¼ŒæœåŠ¡å™¨ç«¯æœ‰ä¸€ç§ç¼–ç æ–¹å¼ï¼Œåœ¨å®¢æˆ·ç«¯ä¹Ÿå­˜åœ¨ä¸€ç§ç¼–ç æ–¹å¼ï¼Œå½“ä¸¤ç«¯ä½¿ç”¨çš„ç¼–ç æ–¹å¼ä¸åŒæ—¶åˆ™å‡ºç°ä¹±ç ã€‚</p>
<p>getWriter()çš„å­—ç¬¦ä¹±ç <br>å¯¹äº getWriter()è·å–åˆ°çš„å­—ç¬¦æµï¼Œå“åº”ä¸­æ–‡å¿…å®šå‡ºä¹±ç ï¼Œç”±äºæœåŠ¡å™¨ç«¯åœ¨è¿›è¡Œç¼–ç æ—¶é»˜è®¤ä¼šä½¿ç”¨ ISO-8859-1 æ ¼å¼çš„ç¼–ç ï¼Œè¯¥ç¼–ç æ–¹å¼å¹¶ä¸æ”¯æŒä¸­æ–‡ã€‚</p>
<p>è¦è§£å†³è¯¥ç§ä¹±ç åªèƒ½åœ¨æœåŠ¡å™¨ç«¯å‘ŠçŸ¥æœåŠ¡å™¨ä½¿ç”¨ä¸€ç§èƒ½å¤Ÿæ”¯æŒä¸­æ–‡çš„ç¼–ç æ ¼å¼ï¼Œæ¯”å¦‚æˆ‘ä»¬é€šå¸¸ç”¨çš„â€UTF-8â€ã€‚</p>
<p>å®¢æˆ·ç«¯ä¹Ÿè¦è®¾ç½®ï¼Œå­—èŠ‚è¾“å‡ºæµå¯ä»¥è®¾ç½®å“åº”ç±»å‹ï¼Œé»˜è®¤æ˜¯å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®æœåŠ¡ç«¯çš„ç¼–ç æ ¼å¼</span></span><br><span class="line">resp.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®å®¢æˆ·ç«¯çš„ç¼–ç æ ¼å¼å’Œå“åº”ç±»å‹</span></span><br><span class="line">resp.setHeader(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;text/html;charset=UTF-8&quot;</span>);       </span><br></pre></td></tr></table></figure>

<p>å­—ç¬¦è¾“å‡ºæµä¹Ÿä¸€æ ·ã€‚</p>
<p>ä¹Ÿå¯ä»¥åŒæ—¶è®¾ç½®å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç¼–ç æ ¼å¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒæ—¶è®¾ç½®æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„ç¼–ç æ ¼å¼</span></span><br><span class="line">resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ï¼šè¦æƒ³è§£å†³å“åº”çš„ä¹±ç ï¼Œåªéœ€è¦ä¿è¯ä½¿ç”¨æ”¯æŒä¸­æ–‡çš„ç¼–ç æ ¼å¼ã€‚å¹¶ä¸”ä¿è¯æœåŠ¡å™¨ç«¯ å’Œå®¢æˆ·ç«¯ä½¿ç”¨ç›¸åŒçš„ç¼–ç æ–¹å¼å³å¯ã€‚</p>
<h4 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h4><p>é‡å®šå‘æ˜¯ä¸€ç§æœåŠ¡å™¨æŒ‡å¯¼ï¼Œå®¢æˆ·ç«¯çš„è¡Œä¸ºã€‚å®¢æˆ·ç«¯å‘å‡ºç¬¬ä¸€ä¸ªè¯·æ±‚ï¼Œè¢«æœåŠ¡å™¨æ¥æ”¶å¤„ç†åï¼ŒæœåŠ¡å™¨ä¼šè¿›è¡Œå“åº”ï¼Œåœ¨å“åº”çš„åŒæ—¶ï¼ŒæœåŠ¡å™¨ä¼šç»™å®¢æˆ·ç«¯ä¸€ä¸ªæ–°çš„åœ°å€ï¼ˆä¸‹æ¬¡è¯·æ±‚çš„åœ°å€ response.sendRedirect(url);ï¼‰ï¼Œå½“å®¢æˆ·ç«¯æ¥æ”¶åˆ°å“åº”åï¼Œä¼šç«‹åˆ»ã€é©¬ä¸Šã€è‡ªåŠ¨æ ¹æ®æœåŠ¡å™¨ç»™çš„æ–°åœ°å€å‘èµ·ç¬¬äºŒä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚å¹¶ä½œå‡ºå“åº”ï¼Œé‡å®šå‘å®Œæˆã€‚<br>ä»æè¿°ä¸­å¯ä»¥çœ‹å‡ºé‡å®šå‘å½“ä¸­æœ‰ä¸¤ä¸ªè¯·æ±‚å­˜åœ¨ï¼Œå¹¶ä¸”å±äºå®¢æˆ·ç«¯è¡Œä¸ºã€‚</p>
<p>ç‰¹ç‚¹ï¼š<br>æœåŠ¡ç«¯æŒ‡å¯¼ï¼Œå®¢æˆ·ç«¯è¡Œä¸º<br>å­˜åœ¨ä¸¤æ¬¡è¯·æ±‚<br> requestå¯¹è±¡ä¸å…±äº«</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-22 08:50</span></span><br><span class="line"><span class="comment"> * é‡å®šå‘ 302</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ser08&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet8</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ser08&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">uname</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ser08:&quot;</span>+uname);</span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;ser07&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è§‚å¯Ÿæµè§ˆå™¨æˆ‘ä»¬å‘ç°ç¬¬ä¸€æ¬¡è¯·æ±‚è·å¾—çš„å“åº”ç ä¸º 302ï¼Œå¹¶ä¸”å«æœ‰ä¸€ä¸ª location å¤´ä¿¡æ¯ã€‚å¹¶ä¸”åœ°å€æ æœ€ç»ˆçœ‹åˆ°çš„åœ°å€æ˜¯å’Œç¬¬ä¸€æ¬¡è¯·æ±‚åœ°å€ä¸åŒçš„ï¼Œåœ°å€æ å·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚</p>
<h4 id="è¯·æ±‚è½¬å‘ä¸é‡å®šå‘çš„åŒºåˆ«"><a href="#è¯·æ±‚è½¬å‘ä¸é‡å®šå‘çš„åŒºåˆ«" class="headerlink" title="è¯·æ±‚è½¬å‘ä¸é‡å®šå‘çš„åŒºåˆ«"></a><strong>è¯·æ±‚è½¬å‘ä¸é‡å®šå‘çš„åŒºåˆ«</strong></h4><p><img src="/images/%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91%E4%B8%8E%E9%87%8D%E5%AE%9A%E5%90%91.png"></p>
<p>å¯¹äºè¯·æ±‚è½¬å‘ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå‰ç«¯é¡µé¢è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œreq.getAttributeè·å–å‚æ•°ï¼Œæˆ–æ˜¯req.setAttributeè®¾ç½®å‚æ•°ï¼Œä½¿ç”¨è¯·æ±‚è½¬å‘å¯ä»¥å°†å‚æ•°ä¼ é€’åˆ°jspé¡µé¢ï¼Œjspé¡µé¢ä½¿ç”¨req.getAttributeè¿›è¡Œè·å–ã€‚</p>
<p>è€Œé‡å®šå‘æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„é¡µé¢ï¼Œä¸¤ä¸ªé¡µé¢ä¹‹é—´æ²¡æœ‰å‚æ•°ä¼ é€’ã€‚</p>
<p>è¯·æ±‚è½¬å‘çš„åœ°å€åªèƒ½æ˜¯å½“å‰ç«™ç‚¹ä¸‹ï¼ˆå­—ç¬¦ä¸²å‚æ•°å°±æ˜¯åŠ è½½é¡¹ç›®æ ¹ç›®å½•åé¢çš„å­—ç¬¦ä¸²ï¼‰ï¼Œé‡å®šå‘åœ°å€å¯ä»¥æ˜¯ä»»æ„åœ°å€ã€‚è·¨åŸŸè·³è½¬åªèƒ½ç”¨é‡å®šå‘ã€‚</p>
<h3 id="9-cookie"><a href="#9-cookie" class="headerlink" title="9.cookie"></a>9.cookie</h3><p>webç¨‹åºä½¿ç”¨httpåè®®ä¼ è¾“ï¼Œhttpæ— çŠ¶æ€ï¼Œå¯¼è‡´æ¯ä¸€æ¬¡è¿æ¥ä¼ è¾“çš„æ•°æ®é‡å¢å¤§ã€‚æœåŠ¡å™¨ä»ç½‘ç»œè¿æ¥ä¸­æ— æ³•è·å¾—å®¢æˆ·ç«¯èº«ä»½ï¼Œcookieç›¸å½“äºæ˜¯æœåŠ¡ç«¯é¢å‘ç»™å®¢æˆ·ç«¯çš„é€šè¡Œè¯ã€‚ä¸åŒçš„æœåŠ¡å™¨åº”ç”¨ç»™å®¢æˆ·ç«¯çš„cookieä¹Ÿä¸ä¸€æ ·ï¼Œæ˜¯éš”ç¦»çš„ã€‚</p>
<p>cookieæ˜¯æµè§ˆå™¨æä¾›çš„ä¸€ç§æŠ€æœ¯ï¼Œé€šè¿‡æœåŠ¡å™¨çš„ç¨‹åºèƒ½å°†ä¸€äº›åªé¡»ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œæˆ–è€…åœ¨å®¢æˆ·ç«¯è¿›è¡Œå¤„ç†çš„æ•°æ®ï¼Œæ”¾åœ¨æœ¬åœ°çš„è®¡ç®—æœºä¸Šï¼Œä¸éœ€è¦é€šè¿‡ç½‘ç»œä¼ è¾“ï¼Œå› è€Œæé«˜ç½‘é¡µå¤„ç†çš„æ•ˆç‡ï¼Œå¹¶ä¸”èƒ½å¤Ÿå‡å°‘æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œä½†æ˜¯ç”±äºcookieæ˜¯æœåŠ¡å™¨ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œæ‰€ä»¥å…¶å®‰å…¨æ€§ä¹Ÿæ˜¯å¾ˆå·®çš„ã€‚ä¾‹å¦‚å¸¸è§çš„è®°ä½å¯†ç åˆ™å¯ä»¥é€šè¿‡cookieæ¥å®ç°ï¼Œè¿˜æœ‰é€šå¸¸çš„æ¨èæ˜¾ç¤ºã€‚</p>
<p>æœ‰ä¸€ä¸ªä¸“é—¨æ“ä½œCookieçš„ç±»javax.servlet.http.Cookieã€‚éšç€æœåŠ¡å™¨ç«¯çš„å“åº”å‘é€ç»™å®¢æˆ·ç«¯ï¼Œä¿å­˜åœ¨æµè§ˆå™¨ã€‚å½“ä¸‹æ¬¡å†è®¿é—®æœåŠ¡å™¨æ—¶æŠŠCookieå†å¸¦å›æœåŠ¡å™¨ã€‚</p>
<p>Cookieçš„æ ¼å¼ï¼šé”®å€¼å¯¹ç”¨&#x3D;è¿æ¥ï¼Œå¤šä¸ªé”®å€¼å¯¹é—´ç”¨;éš”å¼€ã€‚</p>
<h4 id="cookieçš„åˆ›å»ºå’Œå‘é€"><a href="#cookieçš„åˆ›å»ºå’Œå‘é€" class="headerlink" title="cookieçš„åˆ›å»ºå’Œå‘é€"></a>cookieçš„åˆ›å»ºå’Œå‘é€</h4><p>é€šè¿‡ new Cookie(â€œkeyâ€,â€œvalueâ€);æ¥åˆ›å»ºä¸€ä¸ª Cookie å¯¹è±¡ï¼Œè¦æƒ³å°† Cookie éšå“åº”å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œéœ€è¦å…ˆæ·»åŠ åˆ° response å¯¹è±¡ä¸­ï¼Œresponse.addCookie(cookie);æ­¤æ—¶è¯¥ cookie å¯¹è±¡åˆ™éšç€å“åº”å‘é€è‡³äº†å®¢æˆ·ç«¯ã€‚åœ¨æµè§ˆå™¨ä¸Šå¯ä»¥çœ‹è§ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.cookie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-26 11:04</span></span><br><span class="line"><span class="comment"> * cookieçš„åˆ›å»ºå’Œå‘é€</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/coo1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cookie01</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºcookie nameå”¯ä¸€</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        <span class="comment">// å‘é€ï¼ˆå“åº”ï¼‰cookie</span></span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>macæµè§ˆå™¨æ£€æŸ¥cookieï¼šå³é”®æ£€æŸ¥å…ƒç´ â€“å‚¨å­˜ç©ºé—´â€“ç‚¹å‡»cookie</p>
<h4 id="cookieçš„è·å–"><a href="#cookieçš„è·å–" class="headerlink" title="cookieçš„è·å–"></a>cookieçš„è·å–</h4><p>åœ¨æœåŠ¡å™¨ç«¯åªæä¾›äº†ä¸€ä¸ª getCookies()çš„æ–¹æ³•ç”¨æ¥è·å–å®¢æˆ·ç«¯å›ä¼ çš„æ‰€æœ‰ cookie ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœéœ€è¦è·å–å• ä¸ª cookie åˆ™éœ€è¦é€šè¿‡éå†ï¼ŒgetName()è·å– Cookie çš„åç§°ï¼ŒgetValue()è·å– Cookie çš„å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.cookie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-26 11:04</span></span><br><span class="line"><span class="comment"> * cookieçš„è¿”å›ï¼Œæ˜¯æ•°ç»„</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/coo2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cookie02</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// è·å–cookieæ•°ç»„</span></span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line">        <span class="comment">// éç©ºåˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span>(cookies != <span class="literal">null</span> &amp;&amp; cookies.length &gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">// éå†cookieæ•°ç»„</span></span><br><span class="line">            <span class="keyword">for</span>(Cookie cookie : cookies)&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> cookie.getName();</span><br><span class="line">                <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> cookie.getValue();</span><br><span class="line">                System.out.println(<span class="string">&quot;åç§°ï¼š&quot;</span>+name+<span class="string">&quot;--å€¼ï¼š&quot;</span>+value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›´æ¥è¿è¡Œå°±æœ‰ä¸Šæ¬¡ä¼ å…¥æµè§ˆå™¨çš„cookieã€‚</p>
<h4 id="cookieè®¾ç½®åˆ°æœŸæ—¶é—´"><a href="#cookieè®¾ç½®åˆ°æœŸæ—¶é—´" class="headerlink" title="cookieè®¾ç½®åˆ°æœŸæ—¶é—´"></a>cookieè®¾ç½®åˆ°æœŸæ—¶é—´</h4><p>é™¤äº† Cookie çš„åç§°å’Œå†…å®¹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å…³å¿ƒä¸€ä¸ªä¿¡æ¯ï¼Œåˆ°æœŸæ—¶é—´ï¼Œåˆ°æœŸæ—¶é—´ç”¨æ¥æŒ‡å®šè¯¥ cookie ä½•æ—¶å¤±æ•ˆã€‚é»˜è®¤ ä¸ºå½“å‰æµè§ˆå™¨å…³é—­å³å¤±æ•ˆã€‚æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è®¾å®š cookie çš„æœ‰æ•ˆæ—¶é—´ï¼ˆé€šè¿‡åˆ°æœŸæ—¶é—´è®¡ç®—ï¼‰ï¼Œé€šè¿‡ setMaxAge(int time);æ–¹æ³•è®¾å®š cookie çš„æœ€å¤§æœ‰æ•ˆæ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</p>
<p>åˆ°æœŸæ—¶é—´çš„å–å€¼ï¼š</p>
<ul>
<li><p>è´Ÿæ•´æ•°</p>
<p>è‹¥ä¸ºè´Ÿæ•°ï¼Œè¡¨ç¤ºä¸åœ¨ç¡¬ç›˜å­˜å‚¨è¯¥ cookieã€‚</p>
<p>cookie çš„ maxAge å±æ€§çš„é»˜è®¤å€¼å°±æ˜¯-1ï¼Œè¡¨ç¤ºåªåœ¨æµè§ˆå™¨å†…å­˜ä¸­å­˜æ´»ï¼Œä¸€æ—¦å…³é—­æµè§ˆå™¨çª—å£ï¼Œé‚£ä¹ˆ cookie å°±ä¼šæ¶ˆå¤±ã€‚</p>
</li>
<li><p>æ­£æ•´æ•°</p>
<p>å¤§äº 0 çš„æ•´æ•°ï¼Œè¡¨ç¤ºå­˜å‚¨çš„ç§’æ•°ã€‚</p>
<p>è¡¨ç¤º cookie å¯¹è±¡å¯å­˜æ´»æŒ‡å®šçš„ç§’æ•°ã€‚å½“ç”Ÿå‘½å¤§äº 0 æ—¶ï¼Œæµè§ˆå™¨ä¼šæŠŠ Cookie ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šï¼Œå°±ç®—å…³é—­æµè§ˆå™¨ï¼Œ å°±ç®—é‡å¯å®¢æˆ·ç«¯ç”µè„‘ï¼Œcookie ä¹Ÿä¼šå­˜æ´»ç›¸åº”çš„æ—¶é—´ã€‚</p>
</li>
<li><p>é›¶(ç”¨äºåˆ é™¤Cookie)</p>
<p>è‹¥ä¸º 0ï¼Œè¡¨ç¤ºåˆ é™¤è¯¥ cookieã€‚</p>
<p>cookie ç”Ÿå‘½ç­‰äº 0 æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼Œå®ƒè¡¨ç¤º cookie è¢«ä½œåºŸï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåŸæ¥æµè§ˆå™¨å·²ç»ä¿å­˜äº†è¿™ä¸ª Cookieï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ Cookie çš„ setMaxAge(0)æ¥åˆ é™¤è¿™ä¸ª Cookieã€‚ æ— è®ºæ˜¯åœ¨æµè§ˆå™¨å†…å­˜ä¸­ï¼Œè¿˜æ˜¯åœ¨å®¢æˆ·ç«¯ ç¡¬ç›˜ä¸Šéƒ½ä¼šåˆ é™¤è¿™ä¸ª Cookieã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.cookie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-26 11:04</span></span><br><span class="line"><span class="comment"> * cookieçš„åˆ°æœŸæ—¶é—´</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/coo3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cookie03</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// é»˜è®¤å€¼-1ï¼Œè¡¨ç¤ºåªåœ¨æµè§ˆå™¨å†…å­˜ä¸­</span></span><br><span class="line">        <span class="comment">// åˆ›å»ºCookieå¯¹è±¡</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®Cookie 3å¤©åå¤±æ•ˆ</span></span><br><span class="line">        cookie.setMaxAge(<span class="number">3</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span>);</span><br><span class="line">        <span class="comment">// å‘é€Cookieå¯¹è±¡ è®¾ç½®ä¹‹åå¿…éœ€è¿›è¡Œå“åº”</span></span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line">        <span class="comment">// åˆ é™¤ä¹‹å‰çš„cookie</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">oldCookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;kkk&quot;</span>);</span><br><span class="line">        oldCookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">        resp.addCookie(oldCookie);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="cookieçš„æ³¨æ„ç‚¹"><a href="#cookieçš„æ³¨æ„ç‚¹" class="headerlink" title="cookieçš„æ³¨æ„ç‚¹"></a>cookieçš„æ³¨æ„ç‚¹</h4><ul>
<li>Cookieä¿å­˜åœ¨å½“å‰æµè§ˆå™¨ä¸­ã€‚</li>
</ul>
<p>åœ¨ä¸€èˆ¬çš„ç«™ç‚¹ä¸­å¸¸å¸¸æœ‰è®°ä½ç”¨æˆ·åè¿™æ ·ä¸€ä¸ªæ“ä½œï¼Œè¯¥æ“ä½œåªæ˜¯å°†ä¿¡æ¯ä¿å­˜åœ¨æœ¬æœºä¸Šï¼Œæ¢ç”µè„‘ä»¥åè¿™äº›ä¿¡æ¯å°±æ—  æ•ˆäº†ã€‚è€Œä¸” cookie è¿˜ä¸èƒ½è·¨æµè§ˆå™¨ã€‚</p>
<ul>
<li>Cookieå­˜ä¸­æ–‡é—®é¢˜ ï¼ˆä¸€èˆ¬ä¸å­˜ä¸­æ–‡ï¼‰</li>
</ul>
<p>Cookie ä¸­ä¸èƒ½å‡ºç°ä¸­æ–‡ï¼Œå¦‚æœæœ‰ä¸­æ–‡åˆ™é€šè¿‡ URLEncoder.encode()æ¥è¿›è¡Œç¼–ç ï¼Œè·å–æ—¶é€šè¿‡ URLDecoder.decode()æ¥è¿›è¡Œè§£ç ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;å§“å&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line"><span class="comment">// é€šè¿‡ URLEncoder.encode()æ¥è¿›è¡Œç¼–ç </span></span><br><span class="line">name = URLEncoder.encode(name);</span><br><span class="line">value = URLEncoder.encode(value);</span><br><span class="line"><span class="comment">// åˆ›å»ºCookieå¯¹è±¡</span></span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(name,value);</span><br><span class="line"><span class="comment">// å‘é€Cookieå¯¹è±¡</span></span><br><span class="line">response.addCookie(cookie);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//è·å–æ—¶é€šè¿‡ URLDecoder.decode()æ¥è¿›è¡Œè§£ç </span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> URLDecoder.decode(cookie.getName());</span><br><span class="line"><span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> URLDecoder.decode(cookie.getValue());</span><br></pre></td></tr></table></figure>

<ul>
<li>åŒåCookieé—®é¢˜</li>
</ul>
<p>å¦‚æœæœåŠ¡å™¨ç«¯å‘é€é‡å¤çš„Cookieé‚£ä¹ˆä¼šè¦†ç›–åŸæœ‰çš„Cookieã€‚</p>
<ul>
<li>æµè§ˆå™¨å­˜æ”¾Cookieçš„æ•°é‡</li>
</ul>
<p>ä¸åŒçš„æµè§ˆå™¨å¯¹Cookieä¹Ÿæœ‰é™å®šï¼ŒCookieçš„å­˜å‚¨æœ‰æ˜¯ä¸Šé™çš„ã€‚Cookieæ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰çš„ï¼Œè€Œä¸”ä¸€èˆ¬ æ˜¯ç”±æœåŠ¡å™¨ç«¯åˆ›å»ºå’Œè®¾å®šã€‚åæœŸç»“åˆSessionæ¥å®ç°å›è¯è·Ÿè¸ªã€‚Cookieçš„å¤§å°ä¹Ÿæ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸€èˆ¬æ˜¯4kbä»¥ä¸‹ã€‚</p>
<h4 id="cookieçš„è·¯å¾„"><a href="#cookieçš„è·¯å¾„" class="headerlink" title="cookieçš„è·¯å¾„"></a>cookieçš„è·¯å¾„</h4><p>Cookieçš„setPathè®¾ç½®cookieçš„è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„ç›´æ¥å†³å®šæœåŠ¡å™¨çš„è¯·æ±‚æ˜¯å¦ä¼šä»æµè§ˆå™¨ä¸­åŠ è½½æŸäº›cookieã€‚</p>
<p><strong>æƒ…æ™¯ä¸€ï¼šå½“å‰æœåŠ¡å™¨ä¸‹ä»»ä½•é¡¹ç›®çš„ä»»æ„èµ„æºéƒ½å¯è·å–Cookieå¯¹è±¡</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;XXX&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®è·¯å¾„ä¸º&quot;/&quot;ï¼Œè¡¨ç¤ºåœ¨å½“å‰æœåŠ¡å™¨ä¸‹ä»»ä½•é¡¹ç›®éƒ½å¯è®¿é—®åˆ°Cookieå¯¹è±¡</span></span><br><span class="line">cookie.setPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>

<p><strong>æƒ…æ™¯äºŒï¼šå½“å‰é¡¹ç›®ä¸‹çš„èµ„æºå¯è·å–Cookieå¯¹è±¡ ï¼ˆé»˜è®¤ä¸è®¾ç½®Cookieçš„pathï¼‰</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;XXX&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®è·¯å¾„ä¸º&quot;/s01&quot;ï¼Œè¡¨ç¤ºåœ¨å½“å‰é¡¹ç›®ä¸‹ä»»ä½•é¡¹ç›®éƒ½å¯è®¿é—®åˆ°Cookieå¯¹è±¡</span></span><br><span class="line">cookie.setPath(<span class="string">&quot;/servlet_demo&quot;</span>); <span class="comment">// é»˜è®¤æƒ…å†µï¼Œå¯ä¸è®¾ç½®pathçš„å€¼</span></span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>

<p><strong>æƒ…æ™¯ä¸‰ï¼šæŒ‡å®šé¡¹ç›®ä¸‹çš„èµ„æºå¯è·å–Cookieå¯¹è±¡</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å½“å‰é¡¹ç›®è·¯å¾„ä¸ºï¼šservlet_demo */</span></span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;XXX&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®è·¯å¾„ä¸º&quot;/servlet_1&quot;ï¼Œè¡¨ç¤ºåœ¨s02é¡¹ç›®ä¸‹æ‰å¯è®¿é—®åˆ°Cookieå¯¹è±¡</span></span><br><span class="line">cookie.setPath(<span class="string">&quot;/servlet_1&quot;</span>); <span class="comment">// åªèƒ½åœ¨servlet_1é¡¹ç›®ä¸‹è·å–Cookieï¼Œå°±ç®—cookieæ˜¯servlet_demoäº§ç”Ÿçš„ï¼Œservlet_demoä¹Ÿä¸èƒ½è·å–å®ƒ</span></span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>

<p><strong>æƒ…æ™¯å››ï¼šæŒ‡å®šé¡¹ç›®çš„æŒ‡å®šç›®å½•ä¸‹çš„èµ„æºå¯è·å–Cookieå¯¹è±¡</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;XXX&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®è·¯å¾„ä¸º&quot;/servlet_demo/coo1&quot;ï¼Œè¡¨ç¤ºåœ¨servlet_demo/coo1ç›®å½•ä¸‹æ‰å¯è®¿é—®åˆ°Cookieå¯¹è±¡</span></span><br><span class="line">cookie.setPath(<span class="string">&quot;/servlet_demo/cook&quot;</span>); </span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬è®¾ç½®pathï¼Œå¦‚æœå½“å‰è®¿é—®çš„è·¯å¾„åŒ…å«äº†cookieçš„è·¯å¾„ï¼ˆå½“å‰è®¿é—®è·¯å¾„åœ¨cookieè·¯å¾„åŸºç¡€ä¸Šè¦æ¯”cookieçš„èŒƒå›´å°ï¼‰cookieå°±ä¼šåŠ è½½åˆ°requestå¯¹è±¡ä¹‹ä¸­ã€‚</p>
<p>cookieçš„è·¯å¾„æŒ‡çš„æ˜¯å¯ä»¥è®¿é—®è¯¥cookieçš„é¡¶å±‚ç›®å½•ï¼Œè¯¥è·¯å¾„çš„å­è·¯å¾„ä¹Ÿå¯ä»¥è®¿é—®è¯¥cookieã€‚</p>
<p>æ€»ç»“ï¼šå½“è®¿é—®çš„è·¯å¾„åŒ…å«äº†cookieçš„è·¯å¾„æ—¶ï¼Œåˆ™è¯¥è¯·æ±‚å°†å¸¦ä¸Šè¯¥cookieï¼›å¦‚æœè®¿é—®è·¯å¾„ä¸åŒ…å«cookieè·¯å¾„ï¼Œåˆ™è¯¥è¯·æ±‚ä¸ä¼šæºå¸¦è¯¥cookieã€‚</p>
<h3 id="10-HttpSessionå¯¹è±¡"><a href="#10-HttpSessionå¯¹è±¡" class="headerlink" title="10.HttpSessionå¯¹è±¡"></a>10.HttpSessionå¯¹è±¡</h3><p>ä¸Šé¢è®²è§£äº†è¯·æ±‚çš„æ¦‚å¿µï¼Œæ— çŠ¶æ€ï¼Œæ— æ³•åšåˆ°å¤šä¸ªè¯·æ±‚ä¹‹é—´çš„æ•°æ®å…±äº«ã€‚</p>
<p>HttpSessionå¯¹è±¡æ˜¯javax.servlet.http.HttpSessionçš„å®ä¾‹ï¼Œè¯¥æ¥å£å¹¶ä¸åƒHttpServletRequestæˆ–HttpServletResponseè¿˜å­˜åœ¨ä¸€ä¸ªçˆ¶æ¥å£ï¼Œè¯¥æ¥å£åªæ˜¯ä¸€ä¸ªçº¯ç²¹çš„æ¥å£ã€‚è¿™å› ä¸ºSessionæœ¬èº«å°±å±äºHTTPåè®®çš„èŒƒç•´ã€‚</p>
<p>Sessionï¼šåœ¨è®¡ç®—æœºä¸­ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œåº”ç”¨ä¸­ï¼Œç§°ä¸ºâ€œä¼šè¯æ§åˆ¶â€ã€‚Sessionå¯¹è±¡å­˜å‚¨ç‰¹å®šç”¨æˆ·ä¼šè¯æ‰€éœ€çš„å±æ€§åŠé…ç½®ä¿¡æ¯ã€‚è¿™æ ·ï¼Œå½“ç”¨æˆ·åœ¨åº”ç”¨ç¨‹åºçš„Webé¡µä¹‹é—´è·³è½¬æ—¶ï¼Œå­˜å‚¨åœ¨Sessionå¯¹è±¡ä¸­çš„å˜é‡å°†ä¸ä¼šä¸¢å¤±ï¼Œè€Œæ˜¯åœ¨æ•´ä¸ªç”¨æˆ·ä¼šè¯ä¸­ä¸€ç›´å­˜åœ¨ä¸‹å»ã€‚</p>
<p>å¯¹äºæœåŠ¡å™¨è€Œè¨€ï¼Œæ¯ä¸€ä¸ªè¿æ¥åˆ°å®ƒçš„å®¢æˆ·ç«¯éƒ½æ˜¯ä¸€ä¸ª sessionï¼Œservlet å®¹å™¨ä½¿ç”¨æ­¤æ¥å£åˆ›å»º HTTP å®¢æˆ·ç«¯å’Œ HTTP æœåŠ¡å™¨ä¹‹é—´çš„ä¼šè¯ã€‚ä¼šè¯å°†ä¿ç•™æŒ‡å®šçš„æ—¶é—´æ®µï¼Œè·¨å¤šä¸ªè¿æ¥æˆ–æ¥è‡ªç”¨æˆ·çš„é¡µé¢è¯·æ±‚ã€‚<strong>ä¸€ ä¸ªä¼šè¯é€šå¸¸å¯¹åº”äºä¸€ä¸ªç”¨æˆ·ï¼Œè¯¥ç”¨æˆ·å¯èƒ½å¤šæ¬¡è®¿é—®ä¸€ä¸ªç«™ç‚¹</strong>ã€‚å¯ä»¥é€šè¿‡æ­¤æ¥å£æŸ¥çœ‹å’Œæ“ä½œæœ‰å…³æŸä¸ªä¼šè¯ çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ä¼šè¯æ ‡è¯†ç¬¦ã€åˆ›å»ºæ—¶é—´å’Œæœ€åä¸€æ¬¡è®¿é—®æ—¶é—´ã€‚åœ¨æ•´ä¸ª session ä¸­ï¼Œæœ€é‡è¦çš„å°±æ˜¯å±æ€§çš„æ“ä½œã€‚</p>
<p>sessionæ— è®ºå®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨ç«¯éƒ½å¯ä»¥æ„ŸçŸ¥åˆ°ï¼Œè‹¥é‡æ–°æ‰“å¼€ä¸€ä¸ªæ–°çš„æµè§ˆå™¨ï¼Œåˆ™æ— æ³•å–å¾—ä¹‹å‰è®¾ç½®çš„sessionï¼Œå› ä¸ºæ¯ä¸€ä¸ªsessionåªä¿å­˜åœ¨å½“å‰çš„æµè§ˆå™¨å½“ä¸­ï¼Œå¹¶åœ¨ç›¸å…³çš„é¡µé¢å–å¾—ã€‚</p>
<p>sessionçš„ä½œç”¨æ˜¯ä¸ºäº†æ ‡è¯†ä¸€æ¬¡ä¼šè¯ï¼Œæˆ–è€…è¯´ç¡®è®¤ä¸€ä¸ªç”¨æˆ·ï¼›å¹¶ä¸”åœ¨**ä¸€æ¬¡ä¼šè¯ï¼ˆä¸€ä¸ªç”¨æˆ·çš„å¤šæ¬¡è¯·æ±‚ï¼‰**æœŸé—´å…±äº«æ•°æ®ã€‚å¯ä»¥é€šè¿‡request.getSession()æ–¹æ³•ï¼Œæ¥è·å–å½“å‰ä¼šè¯çš„sessionå¯¹è±¡ã€‚å½“è·å–sessionå¯¹è±¡æ—¶ï¼Œä¼šå…ˆåˆ¤æ–­sessionå¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™è·å–sessionå¯¹è±¡ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.session;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-26 22:54</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/sess01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Session1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// sessionå¯¹è±¡çš„è·å–,</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        <span class="comment">// è·å–sessionçš„å”¯ä¸€æ ‡è¯†--ä¼šè¯æ ‡è¯†ç¬¦</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> session.getId();</span><br><span class="line">        System.out.println(<span class="string">&quot;å”¯ä¸€æ ‡è¯†ç¬¦å·ï¼š&quot;</span>+id);</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ›å»ºæ—¶é—´ï¼š&quot;</span>+session.getCreationTime());</span><br><span class="line">        System.out.println(<span class="string">&quot;æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´(æ—¶é—´æˆ³)ï¼š&quot;</span>+session.getLastAccessedTime());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜¯å¦æ˜¯æ–°çš„sessionå¯¹è±¡ï¼š&quot;</span>+session.isNew());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="æ ‡è¯†ä¼šè¯-JSESSIONID"><a href="#æ ‡è¯†ä¼šè¯-JSESSIONID" class="headerlink" title="æ ‡è¯†ä¼šè¯ JSESSIONID"></a><strong>æ ‡è¯†ä¼šè¯ JSESSIONID</strong></h4><p>Session æ—¢ç„¶æ˜¯ä¸ºäº†æ ‡è¯†ä¸€æ¬¡ä¼šè¯ï¼Œé‚£ä¹ˆæ­¤æ¬¡ä¼šè¯å°±åº”è¯¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡å¿—ï¼Œè¿™ä¸ªæ ‡å¿—å°±æ˜¯ sessionIdã€‚</p>
<p>æ¯å½“ä¸€æ¬¡è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ï¼Œå¦‚æœæœåŠ¡å™¨å¼€å¯äº†ä¼šè¯ï¼ˆè®¿é—®äº† sessionï¼‰ï¼ŒæœåŠ¡å™¨ç¬¬ä¸€æ­¥ä¼šæŸ¥çœ‹æ˜¯å¦ä»å®¢æˆ·ç«¯å›ä¼ ä¸€ä¸ªåä¸º JSESSION çš„ cookieï¼Œå¦‚æœæ²¡æœ‰åˆ™è®¤ä¸ºè¿™æ˜¯ä¸€æ¬¡æ–°çš„ä¼šè¯ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ session å¯¹è±¡ï¼Œå¹¶ç”¨å”¯ä¸€çš„ sessionId ä¸ºæ­¤æ¬¡ä¼šè¯åšä¸€ä¸ªæ ‡å¿—ï¼Œ<strong>å¹¶ä¸”è¿˜ä¼šä¼ å¯¹åº”çš„cookieåœ¨æµè§ˆå™¨</strong>ã€‚å¦‚æœæœ‰ JESSIONID è¿™ä¸ª cookie å›ä¼ ï¼ŒæœåŠ¡å™¨åˆ™ä¼š æ ¹æ® JSESSIONID è¿™ä¸ªå€¼å»æŸ¥çœ‹æ˜¯å¦å«æœ‰ id ä¸º JSESSION å€¼çš„ session å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰åˆ™è®¤ä¸ºæ˜¯ä¸€ä¸ªæ–°çš„ä¼šè¯ï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„ session å¯¹è±¡ï¼Œå¹¶æ ‡å¿—æ­¤æ¬¡ä¼šè¯ï¼Œ<strong>å¹¶ä¼šå‘æµè§ˆå™¨å“åº”ä¸€ä¸ªæ–°çš„cookieï¼Œæµè§ˆå™¨æ›´æ–°è¿™ä¸ªcookie</strong>ï¼›å¦‚æœæ‰¾åˆ°äº†ç›¸åº”çš„ session å¯¹è±¡ï¼Œåˆ™è®¤ä¸ºæ˜¯ä¹‹å‰æ ‡å¿—è¿‡çš„ä¸€æ¬¡ä¼šè¯ï¼Œè¿”å›è¯¥ session å¯¹è±¡ï¼Œæ•°æ®è¾¾åˆ°å…±äº«ã€‚</p>
<blockquote>
<p>æµè§ˆå™¨æ¯ä¸€æ¬¡è®¿é—®æœåŠ¡å™¨ï¼Œéƒ½ä¼šå°†cookieä¼ ç»™åå°ï¼Œåå°å¯ä»¥æ“ä½œcookieå†å“åº”ã€‚</p>
<p>æµè§ˆå™¨é‡Œå¯ä»¥å°†sessionidçš„cookieåˆ æ‰ã€‚</p>
</blockquote>
<p>è¿™é‡Œæåˆ°ä¸€ä¸ªå«åš JSESSION çš„ cookieï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ cookieï¼Œå½“ç”¨æˆ·è¯·æ±‚æœåŠ¡å™¨æ—¶ï¼Œå¦‚æœè®¿é—®äº† sessionï¼Œåˆ™æœåŠ¡å™¨ä¼šåˆ›å»ºä¸€ä¸ªåä¸º JSESSIONï¼Œå€¼ä¸ºè·å–åˆ°çš„ sessionï¼ˆæ— è®ºæ˜¯è·å–åˆ°çš„è¿˜æ˜¯ æ–°åˆ›å»ºçš„ï¼‰çš„ sessionId çš„ cookie å¯¹è±¡ï¼Œå¹¶æ·»åŠ åˆ° response å¯¹è±¡ä¸­ï¼Œå“åº”ç»™å®¢æˆ·ç«¯ï¼Œæœ‰æ•ˆæ—¶é—´ä¸ºå…³é—­æµè§ˆå™¨ã€‚</p>
<p>sessionidä»¥cookieçš„å½¢å¼å­˜å‚¨ï¼› Session çš„åº•å±‚ä¾èµ– Cookie æ¥å®ç°ã€‚ä¸€ä¸ªæœåŠ¡å™¨åº”ç”¨å¯ä»¥å¯¹åº”å¤šä¸ªcookieï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªsessionã€‚</p>
<p>cookieæ˜¯ä¸ºäº†æ–¹ä¾¿å‡å°‘æ•°æ®ä¼ è¾“çš„ï¼Œè®©æœåŠ¡ç«¯è®°ä½å®¢æˆ·ç«¯èº«ä»½çš„ï¼›sessionæ˜¯ä¸ºäº†å¤šæ¬¡è®¿é—®è®°ä½çŠ¶æ€çš„ï¼Œä¹Ÿå°±æ˜¯å½¢æˆä¼šè¯çš„ã€‚</p>
<p>cookieæ˜¯æœ‰è·¯å¾„çš„ï¼Œsessionå°±çœ‹æ˜¯ä¸æ˜¯ä¸€æ¬¡ä¼šè¯äº†ã€‚</p>
<h4 id="sessionåŸŸå¯¹è±¡"><a href="#sessionåŸŸå¯¹è±¡" class="headerlink" title="sessionåŸŸå¯¹è±¡"></a>sessionåŸŸå¯¹è±¡</h4><p>Session ç”¨æ¥è¡¨ç¤ºä¸€æ¬¡ä¼šè¯ï¼Œåœ¨ä¸€æ¬¡ä¼šè¯ä¸­æ•°æ®æ˜¯å¯ä»¥å…±äº«çš„ï¼Œè¿™æ—¶ session ä½œä¸ºåŸŸå¯¹è±¡å­˜åœ¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setAttribute(String name, Object o); <span class="comment">// è®¾ç½®åŸŸå¯¹è±¡å†…å®¹ </span></span><br><span class="line">getAttribute(String name); <span class="comment">// è·å–åŸŸå¯¹è±¡å†…å®¹ </span></span><br><span class="line">removeAttribute(String name); <span class="comment">//åˆ é™¤åŸŸå¯¹è±¡å†…å®¹</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.session;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-27 09:50</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/sess02&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Session2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;uname&quot;</span>, <span class="string">&quot;lili&quot;</span>);</span><br><span class="line">        session.setAttribute(<span class="string">&quot;pwd&quot;</span>, <span class="string">&quot;123&quot;</span>);</span><br><span class="line">        session.removeAttribute(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        req.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;lili&quot;</span>);</span><br><span class="line">        <span class="comment">// è¯·æ±‚è½¬å‘è·³è½¬åˆ°jspé¡µé¢ï¼Œè¯·æ±‚è½¬å‘ï¼Œä¸€æ¬¡è¯·æ±‚ï¼Œrequestå¯ä»¥æ‹¿åˆ°ï¼Œsessionä¹Ÿå¯ä»¥æ‹¿åˆ°</span></span><br><span class="line">        <span class="comment">//req.getRequestDispatcher(&quot;sess01.jsp&quot;).forward(req, resp);</span></span><br><span class="line">        <span class="comment">// é‡å®šå‘è·³è½¬åˆ°jspé¡µé¢,ä¸¤æ¬¡è¯·æ±‚ï¼Œrequestå¤±æ•ˆï¼Œä½†æ˜¯sessionå¯ä»¥æ‹¿åˆ°</span></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;sess01.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: mac</span><br><span class="line">  Date: <span class="number">2022</span>/<span class="number">3</span>/<span class="number">27</span></span><br><span class="line">  Time: ä¸Šåˆ<span class="number">10</span>:<span class="number">00</span></span><br><span class="line">  To change <span class="built_in">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;è·å–åŸŸå¯¹è±¡&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">// è·å–sessionåŸŸå¯¹è±¡</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">uname</span> <span class="operator">=</span> (String) request.getSession().getAttribute(<span class="string">&quot;uname&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> (String) request.getSession().getAttribute(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–requeståŸŸå¯¹è±¡</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String) request.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;session uname:&quot;</span>+uname);</span><br><span class="line">    System.out.println(<span class="string">&quot;session pwd:&quot;</span>+ pwd);</span><br><span class="line">    System.out.println(<span class="string">&quot;request name:&quot;</span>+ name);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>æ•°æ®å­˜å‚¨åœ¨ session åŸŸå¯¹è±¡ä¸­ï¼Œå½“ session å¯¹è±¡ä¸å­˜åœ¨äº†ï¼Œæ•°æ®ä¹Ÿå°±ä¸èƒ½å…±äº«äº†ã€‚ä¸åŒçš„æœåŠ¡å™¨åº”ç”¨ä¹‹é—´ï¼Œsessionå¯¹è±¡ä¹Ÿæ˜¯éš”ç¦»çš„ï¼Œä¸¤ä¸ªä¸åŒçš„sessionå¯¹è±¡é—´æ•°æ®ä¸èƒ½å…±äº«ã€‚</p>
<h4 id="sessionçš„é”€æ¯"><a href="#sessionçš„é”€æ¯" class="headerlink" title="sessionçš„é”€æ¯"></a><strong>sessionçš„é”€æ¯</strong></h4><p>1.é»˜è®¤åˆ°æœŸæ—¶é—´</p>
<p>å½“å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚servletå¹¶ä¸”æ“ä½œsessionæ—¶ï¼Œsessionå¯¹è±¡ç”Ÿæˆï¼ŒTomcatä¸­sessioné»˜è®¤çš„å­˜æ´»æ—¶é—´ä¸º30minï¼Œå³ä½ ä¸æ“ä½œç•Œé¢çš„æ—¶é—´ï¼Œä¸€æ—¦æœ‰æ“ä½œï¼Œsessionä¼šé‡æ–°è®¡æ—¶ã€‚</p>
<p>sessionçš„é»˜è®¤æ—¶é—´å¯ä»¥åœ¨tomcatå®‰è£…ç›®å½•ä¸‹çš„confç›®å½•ä¸‹çš„web.xmlæ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ã€‚å•ä½ä¸ºåˆ†ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>30<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.è®¾ç½®åˆ°æœŸæ—¶é—´</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡session.setMaxInactionInterval()å¯ä»¥è‡ªè¡Œè®¾å®šå­˜æ´»æ—¶é—´ï¼Œå•ä½ä¸ºç§’</span></span><br><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">session.setMaxInactiveInterval(<span class="number">10</span>);</span><br><span class="line"><span class="comment">//10ç§’åé”€æ¯session</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥çœ‹sessionæœ€å¤§ä¸æ´»åŠ¨æ—¶é—´ï¼Œå³å­˜æ´»æ—¶é—´</span></span><br><span class="line">System.out.println(session.getMaxInactiveInterval());</span><br></pre></td></tr></table></figure>

<p>3.ç«‹å³é”€æ¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">session.invalidate();</span><br><span class="line"><span class="comment">//sessionç«‹å³ä½œåºŸ</span></span><br></pre></td></tr></table></figure>

<p>æµè§ˆå™¨æ¯æ¬¡è®¿é—®éƒ½æ˜¯ä¸€ä¸ªæ–°çš„ã€‚</p>
<p>4.å…³é—­æµè§ˆå™¨</p>
<p>sessionåº•å±‚ä»¥æ¥cookieï¼Œcookieå¯¹è±¡é»˜è®¤åªåœ¨æµè§ˆå™¨å†…å­˜ä¸­å­˜æ´»ï¼Œå…³é—­æµè§ˆå™¨å³å¤±æ•ˆã€‚</p>
<p>è¿™ä¸ªé»˜è®¤çš„ä¼˜å…ˆçº§é«˜ï¼Œå¦‚æœä¸å…³æµè§ˆå™¨30åˆ†é’Ÿå¤±æ•ˆï¼Œå…³äº†æµè§ˆå™¨ç«‹é©¬å¤±æ•ˆã€‚</p>
<p>5.å…³é—­æœåŠ¡å™¨</p>
<p>éæ­£å¸¸å…³é—­æœåŠ¡å™¨æ—¶æ‰ä¼šå¤±æ•ˆã€‚  	</p>
<p>å¦‚æœæ˜¯æ­£å¸¸å…³é—­æœåŠ¡å™¨ï¼Œsessionä¼šè¢«é’åŒ–åˆ°æœ¬åœ°ç£ç›˜ï¼Œä¸‹æ¬¡è®¿é—®æ—¶ä¼šä»æœ¬åœ°ç£ç›˜ä¸­æ´»åŒ–å‡ºæ¥ã€‚åœ¨ å·¥ä½œç©ºé—´ work ç›®å½•ä¸‹çš„ SESSION.ser æ–‡ä»¶ä¸­ã€‚ </p>
<p>Session å¤±æ•ˆåˆ™æ„å‘³ç€æ­¤æ¬¡ä¼šè¯ç»“æŸï¼Œæ•°æ®å…±äº«ç»“æŸã€‚</p>
<h3 id="11-ServletContextå¯¹è±¡"><a href="#11-ServletContextå¯¹è±¡" class="headerlink" title="11.ServletContextå¯¹è±¡"></a>11.ServletContextå¯¹è±¡</h3><h4 id="ServletContextå¯¹è±¡çš„è·å–"><a href="#ServletContextå¯¹è±¡çš„è·å–" class="headerlink" title="ServletContextå¯¹è±¡çš„è·å–"></a>ServletContextå¯¹è±¡çš„è·å–</h4><p>æ¯ä¸€ä¸ªwebåº”ç”¨éƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªServletContextå¯¹è±¡ï¼Œåˆç§°ä¸ºApplicationå¯¹è±¡ï¼Œä»åç§°ä¸­å¯çŸ¥ï¼Œè¯¥å¯¹è±¡æ˜¯ä¸åº”ç”¨ç¨‹åºç›¸å…³çš„ã€‚åœ¨webå®¹å™¨å¯åŠ¨æ—¶ï¼Œä¼šä¸ºæ¯ä¸€ä¸ªwebåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ServletContextå¯¹è±¡ã€‚</p>
<p>è¯¥å¯¹è±¡æœ‰ä¸¤å¤§ä½œç”¨ï¼Œç¬¬ä¸€ã€ä½œä¸ºåŸŸå¯¹è±¡æ¥å…±äº«æ•°æ®ï¼Œæ­¤æ—¶æ•°æ®åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å…±äº«ï¼›ç¬¬äºŒã€è¯¥å¯¹è±¡ä¸­ä¿å­˜äº†å½“å‰åº”ç”¨ç¨‹åºç›¸å…³ä¿¡æ¯ã€‚ä¾‹å¦‚å¯ä»¥é€šè¿‡getServerInfo()æ–¹æ³•è·å–å½“å‰æœåŠ¡å™¨ä¿¡æ¯ï¼ŒgetRealPath(String path)è·å–èµ„æºçš„çœŸå®è·¯å¾„ç­‰ã€‚</p>
<p>ServletContextå¯¹è±¡è·å–ï¼š</p>
<p>â‘ .é€šè¿‡requestå¯¹è±¡è·å–</p>
<p>ServletContext servletContext &#x3D; req.getServletContext();<br>(ä¸èƒ½ç”¨äº†ï¼Ÿ)</p>
<p>â‘¡.é€šè¿‡sessionå¯¹è±¡è·å–</p>
<p>ServletContext servletContext &#x3D; request.getSession().getServletContext();</p>
<p>â‘¢.é€šè¿‡servletConfigå¯¹è±¡è·å–ï¼Œåœ¨Servletæ ‡å‡†ä¸­æä¾›äº†ServletConfigæ–¹æ³•</p>
<p>ServletContext servletContext &#x3D; getServletConfig().getServletContext();</p>
<p>â‘£.ç›´æ¥è·å– Servletç±»ä¸­æä¾›äº†ç›´æ¥è·å–ServletContextå¯¹è±¡çš„æ–¹æ³•</p>
<p>ServletContext servletContext &#x3D; getServletContext();</p>
<p>å¸¸ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> getServletContext();</span><br><span class="line"><span class="comment">//å¸¸ç”¨æ–¹æ³•</span></span><br><span class="line"><span class="comment">//è·å–å½“å‰æœåŠ¡å™¨çš„ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="comment">//Apache Tomcat/9.0.59</span></span><br><span class="line"><span class="type">String</span> <span class="variable">ServletInfo</span> <span class="operator">=</span> servletContext.getServerInfo();</span><br><span class="line">System.out.println(<span class="string">&quot;æœåŠ¡å™¨å½“å‰çš„ç‰ˆæœ¬ä¿¡æ¯ï¼š&quot;</span> + ServletInfo);</span><br><span class="line"><span class="comment">//è·å–é¡¹ç›®çš„çœŸå®è·¯å¾„</span></span><br><span class="line"><span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;/&quot;</span>);     <span class="comment">//è¡¨ç¤ºè·å–æ ¹è·¯å¾„,é¡¹ç›®çš„è€Œä¸æ˜¯åº”ç”¨çš„</span></span><br><span class="line"><span class="comment">///Users/liuxuan/MyProject/JavaProject/java/web/target/web/</span></span><br><span class="line">System.out.println(<span class="string">&quot;è·å–é¡¹ç›®çš„çœŸå®è·¯å¾„ï¼š&quot;</span> + realPath);</span><br></pre></td></tr></table></figure>



<h4 id="ServletContextåŸŸå¯¹è±¡"><a href="#ServletContextåŸŸå¯¹è±¡" class="headerlink" title="ServletContextåŸŸå¯¹è±¡"></a>ServletContextåŸŸå¯¹è±¡</h4><p>ServletContextä¹Ÿå¯ä»¥å½“åšåŸŸå¯¹è±¡æ¥ä½¿ç”¨ï¼Œé€šè¿‡ServletContextä¸­å­˜å–æ•°æ®ï¼Œå¯ä»¥ä½¿å¾—æ•´ä¸ªåº”ç”¨ç¨‹åºå…±äº«æŸäº›æ•°æ®ã€‚å½“ç„¶ä¸å»ºè®®å­˜æ”¾è¿‡å¤šæ•°æ®ï¼Œå› ä¸ºServletContextä¸­çš„æ•°æ®ä¸€æ—¦å­˜å‚¨è¿›å»æ²¡æœ‰æ‰‹åŠ¨ç§»é™¤çš„è¯ï¼Œå°†ä¼šä¸€ç›´ä¿å­˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-29 09:19</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/con02&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Context2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> getServletContext();</span><br><span class="line">        <span class="comment">// è®¾ç½®åŸŸå¯¹è±¡</span></span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">        <span class="comment">// è·å–åŸŸå¯¹è±¡</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String) servletContext.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        <span class="comment">// ç§»é™¤åŸŸå¯¹è±¡</span></span><br><span class="line">        servletContext.removeAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Servletä¸‰å¤§ä½œç”¨åŸŸ</strong>ï¼š</p>
<p>1.requeståŸŸå¯¹è±¡<br>åœ¨ä¸€æ¬¡è¯·æ±‚ä¸­æœ‰æ•ˆã€‚è¯·æ±‚è½¬å‘æœ‰æ•ˆ,é‡å®šå‘å¤±è´¥ã€‚</p>
<p>2.sessionåŸŸå¯¹è±¡<br>åœ¨ä¸€æ¬¡ä¼šè¯ä¸­æœ‰æ•ˆã€‚è¯·æ±‚è½¬å‘å’Œé‡å®šå‘éƒ½æœ‰æ•ˆï¼Œsessioné”€æ¯åå¤±æ•ˆã€‚</p>
<p>3.servletContextåŸŸå¯¹è±¡<br>åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­æœ‰æ•ˆã€‚æœåŠ¡å™¨å…³é—­é”€æ¯ã€‚</p>
<h3 id="12-æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"><a href="#12-æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="12.æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"></a>12.æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½</h3><p>servletä¸­å¦‚ä½•å®ç°æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½ã€‚</p>
<h4 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h4><p>æ–‡ä»¶ä¸Šä¼ æ¶‰åŠåˆ°å‰å°é¡µé¢çš„ç¼–å†™å’Œåå°æœåŠ¡å™¨ç«¯ä»£ç çš„ç¼–å†™ï¼Œå‰å°å‘é€æ–‡ä»¶ï¼Œåå°æ¥æ”¶å¹¶ä¿å­˜æ–‡ä»¶ï¼Œè¿™æ‰æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶ä¸Šä¼ ã€‚</p>
<h5 id="å‰å°é¡µé¢"><a href="#å‰å°é¡µé¢" class="headerlink" title="å‰å°é¡µé¢"></a>å‰å°é¡µé¢</h5><p>åœ¨åšæ–‡ä»¶ä¸Šä¼ çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€ä¸ªä¸Šä¼ æ–‡ä»¶çš„ç•Œé¢ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¡¨å•ï¼Œå¹¶ä¸”è¡¨å•çš„è¯·æ±‚æ–¹å¼ä¸º POSTï¼›å…¶æ¬¡æˆ‘ä»¬çš„ form è¡¨å•çš„ enctype å¿…é¡»è®¾ä¸ºâ€multipart&#x2F;form-dataâ€å³ enctype&#x3D;â€œmultipart&#x2F;form-dataâ€ æ„æ€æ˜¯è®¾ç½®è¡¨å•çš„ MIME ç¼–ç ã€‚é»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªç¼–ç æ ¼å¼æ˜¯ â€application&#x2F;x-www-form-urlencodedâ€ï¼Œä¸èƒ½ç”¨äºæ–‡ä»¶ä¸Šä¼ ï¼›åªæœ‰ä½¿ç”¨äº† multipart&#x2F;form-data æ‰èƒ½å®Œæ•´åœ°ä¼ é€’æ–‡ä»¶æ•°æ®ã€‚</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: mac</span><br><span class="line">  Date: <span class="number">2022</span>/<span class="number">3</span>/<span class="number">29</span></span><br><span class="line">  Time: ä¸‹åˆ<span class="number">9</span>:<span class="number">41</span></span><br><span class="line">  To change <span class="built_in">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;æ–‡ä»¶ä¸Šä¼ &lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        <span class="number">1.</span>å‡†å¤‡è¡¨å•</span><br><span class="line">        <span class="number">2.</span>è®¾ç½®è¡¨å•çš„æäº¤ç±»å‹ method=<span class="string">&quot;post&quot;</span></span><br><span class="line">        <span class="number">3.</span>è®¾ç½®è¡¨å•ç±»å‹ä¸ºæ–‡ä»¶ä¸Šä¼ è¡¨å• enctype=<span class="string">&quot;multipart/form-data&quot;</span></span><br><span class="line">        <span class="number">4.</span>è®¾ç½®æ–‡ä»¶æäº¤çš„åœ°å€ action=<span class="string">&quot;uploadServlet&quot;</span></span><br><span class="line">        <span class="number">5.</span>å‡†å¤‡è¡¨å•å…ƒç´  <span class="number">1.</span>æ™®é€šè¡¨å•é¡¹ type=<span class="string">&quot;text&quot;</span> <span class="number">2.</span>æ–‡ä»¶é¡¹ type=<span class="string">&quot;file&quot;</span></span><br><span class="line">        <span class="number">6.</span>è®¾ç½®è¡¨å•å…ƒç´ çš„nameå±æ€§å€¼ï¼Œå¦åˆ™åå°æ— æ³•æ¥æ”¶æ•°æ®</span><br><span class="line">        --&gt;</span><br><span class="line">    &lt;form method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;uploadServlet&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">        å§“åï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;uname&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">        æ–‡ä»¶ï¼š&lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;myfile&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">        &lt;!-- button é»˜è®¤çš„ type å±æ€§æ˜¯ submitï¼Œåšæäº¤æŒ‰é’®å¯ä»¥ä¸è®¾ç½® type --&gt;</span><br><span class="line">        &lt;button type=<span class="string">&quot;submit&quot;</span>&gt; æäº¤ &lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h5 id="åå°å®ç°"><a href="#åå°å®ç°" class="headerlink" title="åå°å®ç°"></a>åå°å®ç°</h5><p>ä½¿ç”¨æ³¨è§£ <code>@MultipartConfig</code>æ ‡è¯†ä¸ºæ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œ Servlet å°† <code>Multipart/form-data</code> çš„postè¯·æ±‚å°è£…æˆ Part é€šè¿‡partå¯¹ä¸Šä¼ æ–‡ä»¶è¿›è¡Œæ“ä½œã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.file;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.MultipartConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Part;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-29 21:51</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@MultipartConfig</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/uploadServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UploadServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–‡ä»¶ä¸Šä¼ ......&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸ºä¿è¯æ•°æ®æ­£ç¡®æ€§ï¼Œé¦–å…ˆè®¾ç½®ç¼–ç </span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–æ™®é€šè¡¨å•é¡¹å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uname</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;uname&quot;</span>); <span class="comment">// è¡¨å•å…ƒç´ ä¸­ uname çš„å€¼</span></span><br><span class="line">        System.out.println(<span class="string">&quot;unameï¼š&quot;</span> + uname);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å– Part å¯¹è±¡ï¼Œä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="type">Part</span> <span class="variable">part</span> <span class="operator">=</span> req.getPart(<span class="string">&quot;myfile&quot;</span>); <span class="comment">// è¡¨å•ä¸­ file æ–‡ä»¶åŸŸçš„ name å±æ€§å€¼</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€šè¿‡ part å¯¹è±¡å¾—åˆ°ä¸Šä¼ çš„æ–‡ä»¶å</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> part.getSubmittedFileName();</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸Šä¼ çš„æ–‡ä»¶åï¼š&quot;</span> + fileName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¾—åˆ°æ–‡ä»¶è¦å­˜æ”¾çš„è·¯å¾„--é¡¹ç›®è·¯å¾„</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> req.getServletContext().getRealPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        System.out.println(filePath); <span class="comment">// æ–‡ä»¶å­˜æ”¾çš„è·¯å¾„</span></span><br><span class="line">        <span class="comment">// /Users/liuxuan/MyProject/JavaProject/servletdemo/servlet-demo/out/artifacts/servlet_demo_war_exploded/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¿å­˜æ–‡ä»¶åˆ°æŒ‡å®šè·¯å¾„</span></span><br><span class="line">        part.write(filePath + <span class="string">&quot;/&quot;</span> + fileName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨å‰ç«¯é¡µé¢â€¦&#x2F;upload.jspé€‰æ‹©æ–‡ä»¶æäº¤åï¼Œè‡ªåŠ¨è·³è½¬è‡³â€¦&#x2F;uploadServleté¡µé¢ã€‚</p>
<p>âš ï¸ä¸€ä¸ªé£˜çº¢é—®é¢˜</p>
<p>Servlet3.0æ–°å¢äº†request.getParts()&#x2F;getPart(String filename) apiï¼Œç”¨äºè·å–ä½¿ç”¨multipart&#x2F;form-dataæ ¼å¼ä¼ é€’çš„httpè¯·æ±‚çš„è¯·æ±‚ä½“ï¼Œé€šå¸¸ç”¨äºè·å–ä¸Šä¼ æ–‡ä»¶ã€‚ç”¨äºä»è¯·æ±‚ä¸­è§£æä¸Šä¼ çš„æ–‡ä»¶ã€‚</p>
<p>request.getParts()  è·å–è¯·æ±‚ä¸­å…¨éƒ¨æ–‡ä»¶<br>getPart(String filename)   è·å–è¯·æ±‚ä¸­æŒ‡å®šnameçš„æ–‡ä»¶</p>
<p>æ‰€ä»¥getPartæ–¹æ³•é£˜çº¢çš„è¯ï¼Œçœ‹ä¸€ä¸‹ç”¨çš„servletæ–¹æ³•ç‰ˆæœ¬æ˜¯ä¸æ˜¯3.0çš„ã€‚</p>
<p><code>InputStream is = part.getInputStream();</code> è·å–è¾“å…¥æµ</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨request.getParts()æ–¹æ³•å¿…é¡»ç»™servletæ·»åŠ æ³¨è§£@MultipartConfigï¼Œå¦åˆ™è™½ç„¶ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯è·å–ä¸åˆ°æ•°æ®ã€‚</p>
<p>æ›´å¤šç”¨æ³•æ’’ï¼š<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012334071/article/details/50261063/">https://blog.csdn.net/u012334071/article/details/50261063/</a></p>
<p><a target="_blank" rel="noopener" href="https://wenku.baidu.com/view/c66d20190a12a21614791711cc7931b765ce7b61.html">https://wenku.baidu.com/view/c66d20190a12a21614791711cc7931b765ce7b61.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/sunyongxing/articles/2622891.html">https://www.cnblogs.com/sunyongxing/articles/2622891.html</a></p>
<h4 id="æ–‡ä»¶ä¸‹è½½"><a href="#æ–‡ä»¶ä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸‹è½½"></a>æ–‡ä»¶ä¸‹è½½</h4><p>å³å°†æœåŠ¡å™¨ä¸Šçš„èµ„æºä¸‹è½½ï¼ˆæ‹·è´ï¼‰åˆ°æœ¬åœ°ï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼ä¸‹è½½ï¼šé€šè¿‡è¶…é“¾æ¥ä¸‹è½½ã€é€šè¿‡ä»£ç ä¸‹è½½ã€‚</p>
<p>é¡¹ç›®å†…çš„æ–‡æœ¬æˆ–å›¾ç‰‡èµ„æºæ–‡ä»¶å¤¹éœ€è¦é€šè¿‡ Tomcat -&gt; Deployment è¿›è¡Œä¸Šä¼ æ‰èƒ½é€šè¿‡é¡¹ç›®å‘å¸ƒï¼Œè¿›è¡Œè®¿é—®ã€‚</p>
<h5 id="è¶…é“¾æ¥ä¸‹è½½"><a href="#è¶…é“¾æ¥ä¸‹è½½" class="headerlink" title="è¶…é“¾æ¥ä¸‹è½½"></a>è¶…é“¾æ¥ä¸‹è½½</h5><p>å½“æˆ‘ä»¬åœ¨HTMLæˆ–JSPé¡µé¢ä¸­ä½¿ç”¨aæ ‡ç­¾æ—¶ï¼ŒåŸæ„æ˜¯å¸Œæœ›èƒ½å¤Ÿè¿›è¡Œè·³è½¬ï¼Œä½†å½“è¶…é“¾æ¥é‡åˆ°æµè§ˆå™¨ä¸è¯†åˆ«çš„èµ„æºæ—¶ä¼šè‡ªåŠ¨ä¸‹è½½ï¼›å½“é‡åˆ°æµè§ˆå™¨èƒ½å¤Ÿç›´æ¥æ˜¾ç¤ºçš„èµ„æºï¼Œæµè§ˆå™¨å°±ä¼šé»˜è®¤æ˜¾ç¤ºå‡ºæ¥ï¼Œæ¯”å¦‚txtã€pngã€jpgç­‰ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡downloadå±æ€§è§„å®šæµè§ˆå™¨è¿›è¡Œä¸‹è½½ã€‚ä½†æœ‰äº›æµè§ˆå™¨å¹¶ä¸æ”¯æŒã€‚</p>
<p>åœ¨webæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªdownloadæ–‡ä»¶å¤¹ï¼Œå‡†å¤‡å›¾ç‰‡ã€æ–‡æœ¬æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–‡ä»¶å­˜æ”¾åœ°å€éœ€è¦é…ç½®ä¸€ä¸‹ï¼Œç‚¹å³ä¸Šè§’configurationï¼Œå†ç‚¹deploymentï¼Œå†ç‚¹åŠ å·external sourceï¼Œé€‰åˆ°downloadæ–‡ä»¶å¤¹ä¸‹ï¼Œå†æ”¹ä¸€ä¸‹application contextï¼š&#x2F;servlet_demo&#x2F;downloadã€‚è¿™æ ·æ–‡ä»¶å¤¹ä¸‹çš„èµ„æºæ‰èƒ½è¢«æµè§ˆå™¨è®¿é—®åˆ°ã€‚ï¼ˆè¿™ä¸ªdownloadæ˜¯æ–‡ä»¶å¤¹åå­—ï¼‰</p>
<p>è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:8080/servlet_demo/download.html">http://localhost:8080/servlet_demo/download.html</a> ï¼ˆè¿™ä¸ªdownloadæ˜¯htmlåå­—ï¼‰</p>
<p>download.htmlï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡ä»¶ä¸‹è½½<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«çš„èµ„æºï¼Œç‚¹å‡»å±•ç¤º --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;download/TacoCloud.jpeg&quot;</span>&gt;</span>å›¾ç‰‡æ–‡ä»¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;download/Taco.java&quot;</span>&gt;</span>æ–‡æœ¬æ–‡ä»¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åŠ downloadç‚¹å‡»ä¸‹è½½,å¯ä¸å†™å±æ€§åï¼Œè¡¨ç¤ºæ–‡ä»¶å --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;download/TacoCloud.jpeg&quot;</span> <span class="attr">download</span>=<span class="string">&quot;ç™¾åº¦.jpeg&quot;</span>&gt;</span>å›¾ç‰‡æ–‡ä»¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;download/Taco.java&quot;</span> <span class="attr">download</span>=<span class="string">&quot;&quot;</span>&gt;</span>æ–‡æœ¬æ–‡ä»¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æµè§ˆå™¨ä¸èƒ½å¤Ÿè¯†åˆ«çš„èµ„æº,è‡ªåŠ¨ä¸‹è½½ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>å‹ç¼©æ–‡ä»¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="åå°å®ç°ä¸‹è½½"><a href="#åå°å®ç°ä¸‹è½½" class="headerlink" title="åå°å®ç°ä¸‹è½½"></a>åå°å®ç°ä¸‹è½½</h5><p>å®ç°æ­¥éª¤ï¼š</p>
<p>å¾—çŸ¥é“è¦ä¸‹è½½çš„èµ„æºæ–‡ä»¶åï¼Œæ–‡ä»¶åä¼ åˆ°åå°ä»£ç ä¹‹åï¼š</p>
<ol>
<li>éœ€è¦é€šè¿‡response.setContentTypeæ–¹æ³•è®¾ç½®Content-typeå¤´å­—æ®µçš„å€¼ï¼Œä¸ºæµè§ˆå™¨æ— æ³•ä½¿ç”¨æŸç§æ–¹å¼æˆ–æ¿€æ´»æŸä¸ªç¨‹åºæ¥å¤„ç†çš„MIMEç±»å‹ï¼Œä¾‹å¦‚â€œapplication&#x2F;octet-streamâ€æˆ–â€œapplication&#x2F;x-msdownloadâ€˜ç­‰ã€‚</li>
<li>éœ€è¦é€šè¿‡response.setHeaderæ–¹æ³•è®¾ç½®Content-Dispositionå¤´çš„å€¼ä¸ºâ€œattachment;filename&#x3D;æ–‡ä»¶åâ€œ</li>
<li>è¯»å–ä¸‹è½½æ–‡ä»¶ï¼Œè°ƒç”¨response.getOutputStreamæ–¹æ³•å‘å®¢æˆ·ç«¯å†™å…¥é™„ä»¶å†…å®¹ã€‚</li>
</ol>
<p>ç¬¬ä¸€æ­¥ï¼šå†™htmlé¡µé¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;æ–‡ä»¶ä¸‹è½½&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;downloadServlet&quot;</span>&gt;</span><br><span class="line">        æ–‡ä»¶åï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;fileName&quot;</span> placeholder=<span class="string">&quot;è¯·è¾“å…¥è¦ä¸‹è½½çš„æ–‡ä»¶å&quot;</span>&gt;</span><br><span class="line">        &lt;button&gt;ä¸‹è½½&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒæ­¥ï¼šå†™ä¸€ä¸ªservleté¡µé¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.servlet.file;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-31 21:59</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/downloadServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DownloadServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">//é‡å†™é’¥åŒ™çš„</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–‡ä»¶ä¸‹è½½===&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®è¯·æ±‚çš„ç¼–ç æ ¼å¼</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">// ä¹±ç é—®é¢˜ï¼Œè®¾ç½®ç¼–ç æ ¼å¼</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">// è·å–å‚æ•°ï¼ˆå¾—åˆ°è¦ä¸‹è½½çš„æ–‡ä»¶åï¼‰</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fileName&quot;</span>);</span><br><span class="line">        <span class="comment">// å‚æ•°çš„éç©ºåˆ¤æ–­  trim()å»é™¤å­—ç¬¦ä¸²å‰åç©ºæ ¼ï¼Œä¸­é—´çš„ä¸ç®¡</span></span><br><span class="line">        <span class="keyword">if</span>(fileName == <span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(fileName.trim()))&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;è¯·è¾“å…¥è¦ä¸‹è½½çš„æ–‡ä»¶åï¼&quot;</span>);</span><br><span class="line">            resp.getWriter().close();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¾—åˆ°å›¾ç‰‡å­˜æ”¾çš„è·¯å¾„,æ–‡ä»¶æ”¾åœ¨é…ç½®å¥½çš„downloadç›®å½•ä¸‹çš„ã€‚</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> req.getServletContext().getRealPath(<span class="string">&quot;/download/&quot;</span>);</span><br><span class="line">        <span class="comment">// é€šè¿‡è·¯å¾„å¾—åˆ°fileå¯¹è±¡</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path + fileName);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–‡ä»¶ï¼š&quot;</span>+ file);</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ–‡ä»¶å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯ä¸ªæ ‡å‡†æ–‡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span>(file.exists() &amp;&amp; file.isFile())&#123;</span><br><span class="line">            <span class="comment">// 1.è®¾ç½®å“åº”ç±»å‹ï¼Œè®¾ç½®ä¸ºæµè§ˆå™¨æ— æ³•ä½¿ç”¨æŸç§æ–¹å¼æˆ–æ¿€æ´»æŸä¸ªç¨‹åºæ¥å¤„ç†çš„MIMEç±»å‹</span></span><br><span class="line">            resp.setContentType(<span class="string">&quot;application/x-msdownload&quot;</span>);</span><br><span class="line">            <span class="comment">// 2.è®¾ç½®å“åº”å¤´</span></span><br><span class="line">            resp.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + fileName);</span><br><span class="line">            <span class="comment">// 3.å¾—åˆ°fileæ–‡ä»¶çš„è¾“å…¥æµ</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">            <span class="comment">// 4.å¾—åˆ°å­—èŠ‚è¾“å‡ºæµï¼Œå­—ç¬¦è¾“å‡ºæµæ–‡ä»¶æ˜¯ä¸è¡Œçš„</span></span><br><span class="line">            <span class="type">ServletOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> resp.getOutputStream();</span><br><span class="line">            <span class="comment">// 5.å®šä¹‰byteæ•°ç»„</span></span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="comment">// 6.å®šä¹‰é•¿åº¦</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// 7.å¾ªç¯è¾“å‡º</span></span><br><span class="line">            <span class="keyword">while</span> ((len = in.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                out.write(bytes, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 8.å…³é—­èµ„æº</span></span><br><span class="line">            out.close();</span><br><span class="line">            in.close();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·é‡è¯•ï¼&quot;</span>);</span><br><span class="line">            resp.getWriter().close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="githubåœ°å€"><a href="#githubåœ°å€" class="headerlink" title="githubåœ°å€"></a>githubåœ°å€</h3><p><a target="_blank" rel="noopener" href="https://github.com/jadeliuliu/servletdemo/tree/master/servlet-demo">https://github.com/jadeliuliu/servletdemo/tree/master/servlet-demo</a></p>
<h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p>æ¯”è¾ƒå…¨çš„æ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_19782019/article/details/80292110">https://blog.csdn.net/qq_19782019/article/details/80292110</a></p>
<p>å®ç°ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/Hello_zbs/article/details/108394660">https://blog.csdn.net/Hello_zbs/article/details/108394660</a></p>
<p>bç«™è§†é¢‘ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Ta4y1H7Vc?p=26&spm_id_from=pageDriver">https://www.bilibili.com/video/BV1Ta4y1H7Vc?p=26&amp;spm_id_from=pageDriver</a></p>
<p>å­¦ä¹ ç¬”è®°ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/yuan-liu/p/15255326.html">https://www.cnblogs.com/yuan-liu/p/15255326.html</a></p>
<h3 id="servletçš„getå’Œpostè¯·æ±‚"><a href="#servletçš„getå’Œpostè¯·æ±‚" class="headerlink" title="servletçš„getå’Œpostè¯·æ±‚"></a>servletçš„getå’Œpostè¯·æ±‚</h3><p>getï¼šå°†æ•°æ®é€šè¿‡urlé™„åŠ æ•°æ®ç°è¡Œçš„å‘æœåŠ¡å™¨å‘é€æ•°æ®<br>postï¼šå°†æ•°æ®å­˜æ”¾åœ¨è¯·æ±‚ä½“ä¸­éšæ€§çš„å‘æœåŠ¡å™¨å‘é€æ•°æ®</p>
<p>åŒºåˆ«ï¼š<br>1.getå¸¸ç”¨äºä¸åŒ…å«æ•æ„Ÿä¿¡æ¯çš„æŸ¥è¯¢åŠŸèƒ½ ï¼ˆä¸ç”¨è¾“å…¥å¯†ç ï¼‰<br>2.postç”¨äºå®‰å…¨æ€§è¾ƒé«˜çš„åŠŸèƒ½æˆ–è€…æœåŠ¡å™¨çš„â€œå†™â€æ“ä½œ egï¼šç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€æ›´æ–°è´¦ç›®</p>
<p>service()æ˜¯è¯·æ±‚å¤„ç†çš„æ ¸å¿ƒæ–¹æ³•ï¼Œæ— è®ºæ˜¯getæˆ–è€…æ˜¯postéƒ½ä¼šè¢«service()æ–¹æ³•å¤„ç†ã€‚<br>å½“é‡‡ç”¨æ— å·®åˆ«è¯·æ±‚æ—¶ï¼Œå¯ä»¥ç”¨service()æ–¹æ³•ã€‚<br>request.getMethod()æŸ¥çœ‹è¯·æ±‚æ–¹å¼<br>doGet()æ–¹æ³•å¤„ç†getè¯·æ±‚<br>doPost()æ–¹æ³•å¤„ç†postè¯·æ±‚<br>response.setContentType(â€œtext&#x2F;html;charset&#x3D;UTF-8â€);è§£å†³ä¸­æ–‡ä¹±ç </p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://juejin.cn/post/6869979139164602382">https://juejin.cn/post/6869979139164602382</a></p>
<h3 id="WebServletå’Œ-RequestMapping"><a href="#WebServletå’Œ-RequestMapping" class="headerlink" title="@WebServletå’Œ@RequestMapping"></a>@WebServletå’Œ@RequestMapping</h3><p>éƒ½æ˜¯ç”¨åœ¨Controllerç±»é‡Œï¼Œç”¨äºæ‹¦æˆªç‰¹å®šè¯·æ±‚çš„ã€‚</p>
<p>@WebServletæ³¨è§£ä½œç”¨åœ¨ç±»ä¸Šï¼Œç”¨äºæ ‡æ³¨åœ¨ä¸€ä¸ªç»§æ‰¿äº†HttpServletç±»ä¹‹ä¸Šï¼Œå±äºç±»çº§åˆ«çš„æ³¨è§£ï¼Œä¸€èˆ¬ç”¨äºéœ€è¦æœ‰HttpServletRequestè¯·æ±‚ä¸­å¸¦äº†å‚æ•°ï¼Œæˆ–è€…éœ€è¦filterç­‰åœºæ™¯ï¼Œè¿™ä¸ªæ˜¯Servletå®ç°çš„è·¯å¾„æ˜ å°„é€»è¾‘ã€‚</p>
<p>@RequestMapping åœ¨controllerç±»ä¸ŠåŠ ï¼Œå…·ä½“çš„æ–¹æ³•ä¸Šå†åŠ ï¼Œ å¯ä»¥åœ¨æ§åˆ¶å™¨ç±»çš„çº§åˆ«å’Œ&#x2F;æˆ–å…¶ä¸­çš„æ–¹æ³•çš„çº§åˆ«ä¸Šä½¿ç”¨ å¤„ç†æ™®é€šçš„URIè¯·æ±‚ï¼Œæˆ–è€…httpè¯·æ±‚ï¼Œè¿™ä¸ªæ˜¯springå®ç°çš„DispatcherServletçš„è·¯å¾„æ˜ å°„é€»è¾‘ã€‚</p>
<p>âœ… ä¸¤ç§æ„é€ Controllerçš„åŒºåˆ«ï¼š</p>
<p>Controlleræ˜¯spring çš„ä¸€ä¸ªbeanï¼Œç”±springçš„IOCæ¥ç®¡ç†çš„ä¸€ä¸ªbean</p>
<p>Servletæ˜¯ä¸€ä¸ªæ¥å£æˆ–è€…æ¥å£çš„å®ç°ï¼ˆå¸¸è§çš„æ˜¯GenericServlet å’Œ HttpServletï¼‰</p>
<p>Servletå®ç°æ–¹å¼ï¼š<br>æœ‰ä¸€ä¸ªæ˜ å°„å…³ç³»servlet-mappingï¼Œurlçš„endpoint å¯¹åº”çš„å…·ä½“çš„servletï¼Œ æ¯”å¦‚è§„å®šâ€™&#x2F;demoâ€™ æ˜ å°„åˆ°ServletDemoï¼ˆç»§æ‰¿è‡ªHttpServletï¼Œé‡å†™doGetï¼ŒdoPostç­‰æ–¹æ³•ï¼‰.<br>åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥localhost:8088&#x2F;demo   , è¿™ä¸ªè¯·æ±‚å°±ä¼šæ‰§è¡Œåˆ°ServletDemoçš„doGetæ–¹æ³•ï¼Œç»è¿‡ä¸€ç³»åˆ—é€»è¾‘ï¼Œæœ€ç»ˆå°†è¦è¿”å›ç»™æµè§ˆå™¨çš„æ•°æ®å†™å…¥HttpServletResponseï¼Œè¿™æ ·æµè§ˆå™¨å°±èƒ½æ”¶åˆ°ç»“æœã€‚</p>
<p>Controllerå®ç°æ–¹å¼ï¼š<br>åªæ˜¯ä¸€ä¸ªbeanï¼Œæ–¹æ³•ä¸Šå¯ä»¥åŠ ä¸Šæ³¨è§£GetMappingï¼ŒPostMappingç­‰ï¼Œæ ‡æ³¨æ˜ å°„çš„urlçš„endpointã€‚<br>Servletå®¹å™¨ï¼ˆTomcatç­‰ï¼‰æ¥æ”¶åˆ°è¯·æ±‚ä»¥åï¼Œå°†è¯·æ±‚äº¤ç»™DispatcherServletçš„serviceæ–¹æ³•æ¥å¤„ç†ï¼Œservletä¼šåœ¨doDispatché‡Œé¢å…ˆæ‰¾åˆ°mappedHandler ï¼Œç„¶åæ‰¾åˆ°HandlerAdapterã€‚è°ƒç”¨HandlerAdapter çš„handleæ–¹æ³•ï¼Œå…¶å®åº”è¯¥æ˜¯AbstractHandlerMethodAdapterï¼Œ<br>ç„¶åè°ƒç”¨åˆ°RequestMappingHandlerAdapterçš„handleInternalï¼Œæœ€ç»ˆè°ƒç”¨åˆ°invokeAndHandleï¼Œåå°„è°ƒç”¨controllerçš„æ–¹æ³•ã€‚æ‰¾åˆ°endpointå¯¹åº”çš„beançš„æ–¹æ³•ï¼Œå¹¶è°ƒç”¨ã€‚</p>
<p>æ€»ç»“ï¼š<br><em><strong>å®¹å™¨&#x3D;&#x3D;ã€‹DispatcherServlet (serviceæ–¹æ³•) &#x3D;&#x3D;ã€‹ doDispatcher &#x3D;&#x3D;ã€‹HandlerAdapter ï¼ˆhandleï¼‰&#x3D;ã€‹AbstractHandlerMethodAdapter&#x3D;&#x3D;ã€‹RequestMappingHandlerAdapter &#x3D;&#x3D;ã€‹invokeAndHandle&#x3D;&#x3D;ã€‹åå°„å…·ä½“çš„controlleræ–¹æ³•</strong></em></p>
<p>è½¬è‡ªï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/huainanyin/p/15936212.html">https://www.cnblogs.com/huainanyin/p/15936212.html</a></p>
<p>Springæä¾›çš„DispatcherServletæ˜¯æ€ä¹ˆè°ƒç”¨æˆ‘ä»¬çš„Controlleré‡Œçš„ä¸šåŠ¡æ¥å£çš„ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/caoyuanyenang/article/details/114401414">https://blog.csdn.net/caoyuanyenang/article/details/114401414</a></p>
<p>âœ…@RequestMapingå‚æ•°<br>è§javaæ³¨è§£</p>
<h3 id="cookie-session-tockençš„åŒºåˆ«"><a href="#cookie-session-tockençš„åŒºåˆ«" class="headerlink" title="cookie session tockençš„åŒºåˆ«"></a>cookie session tockençš„åŒºåˆ«</h3><p>é‰´æƒï¼šé‰´å®šæƒé™</p>
<p>âœ…cookie</p>
<p>cookieæ˜¯é‰´æƒçš„æ–¹å¼ä¹‹ä¸€ï¼Œæ˜¯å®¢æˆ·ç«¯ç™»å½•åï¼ŒæœåŠ¡å™¨ç«¯ç”Ÿæˆåå‘é€ç»™å®¢æˆ·ç«¯çš„ã€‚cookieå¯ä»¥ä¿å­˜å¾ˆå¤šç§æ•°æ®ï¼Œä½†æ˜¯ä»–åªèƒ½ä¿å­˜å­—ç¬¦ä¸²ï¼Œä¸”åœ¨å®‰å…¨æ€§ä¸Šæœ‰éšæ‚£ã€‚<br>åœ¨å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚åï¼ŒæœåŠ¡å™¨ç«¯ç”Ÿæˆä¸€ä¸ªcookieï¼Œå¹¶å‘é€ç»™å®¢æˆ·ç«¯ï¼Œä¿å­˜åœ¨å®¢æˆ·ç«¯æœ¬åœ°ï¼Œä¸‹æ¬¡è¯·æ±‚çš„æ—¶å€™å¸¦ä¸Šcookieã€‚</p>
<p>âœ…session</p>
<p>sessionæ˜¯ä¸€ç§ä¼šè¯ï¼Œæ¯”å¦‚æˆ‘å‘èµ·è¯·æ±‚åˆ°å…³é—­æµè§ˆå™¨è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªä¼šè¯ã€‚sessionæ˜¯é‰´æƒçš„æ–¹å¼ä¹‹äºŒï¼Œåœ¨å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚åï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„sessionï¼Œå¹¶ä¿å­˜åœ¨æœåŠ¡å™¨ä¸­ï¼Œå†æŠŠsession idä¿å­˜åˆ°cookieé‡Œé¢ï¼Œé€šè¿‡cookieå‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°cookieè¿‡åï¼Œä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶å°±ä¼šæŠŠcookieå¸¦ä¸Šï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ä¸­çš„session idåå°±ä¼šæŠŠå®ƒä¸ä¹‹å‰ä¿å­˜çš„sessionåšå¯¹æ¯”ï¼Œå¦‚æœæ˜¯ä¸€æ ·çš„ï¼Œé‚£å°±è¯´æ˜æ˜¯å·²ç»ç™»å½•è¿‡çš„ï¼Œå¦‚æœä¸ä¸€æ ·ï¼Œé‚£å°±éœ€è¦é‡æ–°ç™»å½•ï¼šæœåŠ¡å™¨ä¸ºå®¢æˆ·ç«¯åˆ›é€ ä¸€ä¸ªsessionï¼Œå¹¶ä¸”ç”Ÿæˆä¸€ä¸ªä¸sessionç›¸å…³è”çš„session idå­˜æ”¾åˆ°cookieä¸­ï¼Œåœ¨æœ¬æ¬¡å“åº”ä¸­è¿”å›åˆ°å®¢æˆ·ç«¯ä¿å­˜ã€‚</p>
<p>âœ…token</p>
<p>tokenæ˜¯ä¸€ä¸ªä»¤ç‰Œï¼Œæ˜¯é‰´æƒæ–¹å¼ä¹‹ä¸‰ï¼Œä»–æ˜¯ç”±ä¸€éƒ¨åˆ†å›ºå®šçš„headerã€ä»¥åŠbodyç»„æˆçš„ï¼Œåœ¨bodyä¸­å¯ä»¥æ”¾userid+ç”µè¯å·ç ï¼Œç­‰ç”¨æˆ·çš„ééšç§˜ä¿¡æ¯ï¼Œç„¶åå†é€šè¿‡æŸç§åŠ å¯†æ–¹å¼ï¼ŒæŠŠè¿™ä¸¤éƒ¨åˆ†åŠ å¯†å½¢æˆä¸€ä¸ªç§˜é’¥ã€‚</p>
<p>åœ¨å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚åï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆä¸€ä¸ªtokenï¼Œå¯ä»¥é€šè¿‡cookieä¹Ÿå¯ä»¥ç›´æ¥å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°tokenåï¼Œä¼šæŠŠå®ƒä¿å­˜åœ¨æœ¬åœ°ï¼Œåœ¨ä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œä¼šå¸¦ä¸Šï¼ŒæœåŠ¡å™¨ç«¯æ”¶åˆ°äºŒæ¬¡è¯·æ±‚ä»¥åŠå¸¦ä¸Šçš„tokenåï¼Œä¼šå†æ ¹æ®ç”¨æˆ·çš„ä¿¡æ¯å»åŠ å¯†ä¸€ä¸ªtokenï¼Œå†æŠŠä¸¤æ¬¡tokenè¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœæ˜¯ç›¸åŒçš„ï¼Œé‚£å°±ä¸ç”¨å†ç™»å½•äº†ï¼Œå¦‚æœä¸ä¸€æ ·å°±éœ€è¦å†é‡æ–°ç™»å½•ã€‚</p>
<p>ç¬¬ä¸€æ¬¡è¯·æ±‚å®¢æˆ·ç«¯å‘é€çš„æ²¡æœ‰è¿™ä¸ªtockenï¼ŒæœåŠ¡ç«¯ç”Ÿæˆtockenç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ç¬¬äºŒæ¬¡å‘é€å¸¦ä¸Štockenï¼Œå°±ä¸ç”¨é‡æ–°ç™»é™†äº†ã€‚æœåŠ¡ç«¯ä¸ä¿å­˜tockenã€‚</p>
<p>âœ…åŒºåˆ«</p>
<p>cookieã€sessionã€tokençš„åŒºåˆ«<br>1.ç”Ÿæˆçš„ä½ç½®ç›¸åŒï¼šcookieã€sessionã€tokenéƒ½æ˜¯åœ¨æœåŠ¡å™¨ç«¯ç”Ÿæˆï¼›<br>2.ä¿å­˜çš„ä½ç½®ä¸åŒï¼šcookieã€tokenä¿å­˜åœ¨å®¢æˆ·ç«¯æœ¬åœ°ï¼Œsessionä¿å­˜åœ¨æœåŠ¡å™¨ï¼›<br>3.é‰´æƒè¿‡ç¨‹ä¸åŒï¼š<br>cookieæ˜¯å°†è¯·æ±‚ä¸­æºå¸¦çš„cookieä¸æœåŠ¡å™¨è®°å½•çš„cookieåšå¯¹æ¯”ï¼›<br>sessionæ˜¯å°†è¯·æ±‚ä¸­æºå¸¦çš„sessionä¸æœåŠ¡å™¨å­˜å‚¨çš„sessionåšå¯¹æ¯”ï¼›<br>tokenæ˜¯å°†è¯·æ±‚ä¸­æºå¸¦çš„tokenä¸æœåŠ¡å™¨é€šè¿‡è¯·æ±‚ä¸­çš„ä¿¡æ¯ï¼ˆuseridã€ç­¾åï¼‰ç”Ÿæˆçš„tokenä½œå¯¹æ¯”ã€‚</p>
<p>æ‘˜è‡ªï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43844012/article/details/124271258">https://blog.csdn.net/qq_43844012/article/details/124271258</a></p>
<p>cookieï¼šç”¨æ¥ä¿å­˜ä¸€äº›ä¿¡æ¯åœ¨å®¢æˆ·ç«¯çš„ï¼Œæ¯”å¦‚è®°ä½å¯†ç å’Œæ¨èæ˜¾ç¤ºã€‚<br>sessionï¼šæ˜¯ç”¨æ¥æ ‡è¯†ä¸€æ¬¡ä¼šè¯çš„ï¼Œåœ¨ä¸€æ¬¡ä¼šè¯æœŸé—´å…±äº«æ•°æ®ã€‚<br>tokenï¼šç”¨æ¥ä½œä¸ºå¯†é’¥å¿«æ·ç™»å½•çš„</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/19/myblog/java/java%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Sweetwater">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sweetwater's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/19/myblog/java/java%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3/" class="post-title-link" itemprop="url">javaå®ç°è‡ªå®šä¹‰æ³¨è§£</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-19 10:22:13" itemprop="dateCreated datePublished" datetime="2022-03-19T10:22:13+08:00">2022-03-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-09 22:43:27" itemprop="dateModified" datetime="2022-04-09T22:43:27+08:00">2022-04-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="å…³äºæ³¨è§£"><a href="#å…³äºæ³¨è§£" class="headerlink" title="å…³äºæ³¨è§£"></a>å…³äºæ³¨è§£</h3><p>Annotationï¼Œæ³¨è§£æ˜¯Java SE 5.0ç‰ˆæœ¬å¼€å§‹å¼•å…¥çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å¯¹javaæºä»£ç çš„è¯´æ˜ï¼Œæ˜¯ä¸€ç§å…ƒæ•°æ®ï¼ˆæè¿°æ•°æ®çš„æ•°æ®ï¼‰ã€‚</p>
<ul>
<li>æ³¨é‡Š<br>   æ³¨é‡Šæ˜¯å¯¹ä»£ç çš„è¯´æ˜ï¼Œç»™ä»£ç çš„è¯»è€…çœ‹ï¼Œä¾¿äºå¸®è¯»è€…æ¢³ç†ä¸šåŠ¡é€»è¾‘ï¼›</li>
<li>æ³¨è§£<br>  æ³¨è§£ä¹Ÿæ˜¯å¯¹ä»£ç çš„è¯´æ˜ï¼Œéœ€è¦é…åˆå·¥å…·ï¼ˆè§£æå®ƒçš„ä»£ç ï¼‰ä½¿ç”¨ï¼Œå‚ä¸ä»£ç çš„ç¼–è¯‘ï¼Œç»™åº”ç”¨ç¨‹åºçœ‹çš„ã€‚</li>
</ul>
<p>æ³¨è§£çš„æ¸Šæºï¼š</p>
<p>åœ¨é¢‘ç¹ä½¿ç”¨æ³¨è§£ä¹‹å‰ï¼Œæ˜¯ç”¨xml æ¥ä½œä¸ºå…ƒæ•°æ®ä½¿ç”¨ï¼Œåœ¨æœ€å¼€å§‹ä½¿ç”¨ssm(Spring,SpringMVC,Mybatis)æ¡†æ¶æ—¶ï¼Œbeanä¸beanä¹‹é—´çš„ä¾èµ–å…³ç³»æ˜¯é€šè¿‡xmlæ–‡ä»¶æ¥é…ç½®ï¼Œè¿™ä¸ªxmlæ–‡ä»¶å’Œæºä»£ç åˆ†æ•£ï¼Œå½“å¾®æœåŠ¡ã€åˆ†å¸ƒå¼æ³¨è§£æµè¡Œï¼Œç³»ç»Ÿè¶Šæ¥è¶Šå¤§ï¼Œéœ€è¦è¶Šæ¥è¶Šå¤šçš„xmlæ–‡ä»¶æ¥é…ç½®ç®¡ç†ï¼Œæ–‡ä»¶é…ç½®å†—é•¿ï¼Œè€Œä¸”ç±»å‹ä¸å®‰å…¨ï¼ˆè¿è¡ŒæœŸæ‰ä¼šå‘ç°é”™è¯¯ï¼‰,æ­¤æ—¶å°±éœ€è¦ä¸€ç§æ¯”è¾ƒç®€å•ç›´è§‚è€Œä¸”ç±»å‹å®‰å…¨çš„é…ç½®æ–¹å¼ï¼Œæ³¨è§£å°±åº”è¿è€Œç”Ÿäº†ï¼ŒæŒ‰ç…§Springbootâ€œçº¦å®šå¤§äºé…ç½®â€çš„æ–¹å¼ï¼Œé€šè¿‡æ³¨è§£æ¥çº¦å®šå…¶å«ä¹‰ï¼Œæ›´æ˜¯å‡å°‘äº†xmlé…ç½®æ–‡ä»¶çš„æ•°é‡ã€‚<br>     å¯¹äºä¸€äº›ç»å¸¸å˜åŠ¨æˆ–è€…é…ç½®å¤æ‚çš„é…ç½®ï¼Œä½¿ç”¨xmlæ–‡ä»¶æ¥è¯´æ˜¯æ¯”è¾ƒåˆé€‚çš„ï¼Œæ‰€ä»¥ç°åœ¨ç»å¸¸æ˜¯æ³¨è§£å’Œxmlæ–¹å¼å…±å­˜ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/zt15732625878/article/details/99671586">https://blog.csdn.net/zt15732625878/article/details/99671586</a></p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<h3 id="æ³¨è§£åˆ†ç±»"><a href="#æ³¨è§£åˆ†ç±»" class="headerlink" title="æ³¨è§£åˆ†ç±»"></a>æ³¨è§£åˆ†ç±»</h3><p>æŒ‰ç…§æ¥æºåˆ’åˆ†ï¼Œå¯ä»¥åˆ†ä¸º JDKçš„æ³¨è§£ï¼Œç¬¬ä¸‰æ–¹çš„æ³¨è§£ï¼Œè‡ªå®šä¹‰æ³¨è§£ã€‚</p>
<p>JDKæ³¨è§£</p>
<p>Java å†…ç½®ä¸‰å¤§æ³¨è§£<br>@Override ï¼ˆæ ‡è®°é‡å†™æ–¹æ³•ï¼‰<br>@Deprecated ï¼ˆæ ‡è®°è¿‡æ—¶ï¼‰<br>@SuppressWarnings ï¼ˆå¿½ç•¥è­¦å‘Šï¼‰</p>
<p>å…ƒæ³¨è§£ (æ³¨è§£çš„æ³¨è§£)<br>@Target ï¼ˆæ³¨è§£çš„ä½œç”¨ç›®æ ‡ï¼‰<br>@Retention ï¼ˆæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼‰<br>@Document ï¼ˆæ³¨è§£æ˜¯å¦è¢«åŒ…å«åœ¨JavaDocä¸­ï¼‰<br>@Inherited ï¼ˆæ˜¯å¦å…è®¸å­ç±»é›†æˆè¯¥æ³¨è§£ï¼‰</p>
<p>ç¬¬ä¸‰æ–¹æ³¨è§£ï¼ˆä¸»è¦æ¥æºäºå„ç§æ¡†æ¶ï¼‰<br>Springæ³¨è§£<br>@RequestMapping,@RestController,@Configuration,@Value,@Controller,@Service,@Repository,@Componentç­‰<br>SpringBootæ³¨è§£<br>@SpringBootApplication,@EnableAutoConfigurationç­‰<br>JPAæ³¨è§£<br>@Table,@Entity,@Column,@Idç­‰<br>â€¦â€¦</p>
<p>è‡ªå®šä¹‰æ³¨è§£<br>ä½¿ç”¨å…ƒæ³¨è§£è‡ªå·±å®šä¹‰çš„æ³¨è§£</p>
<h3 id="æ³¨è§£çš„å®šä¹‰"><a href="#æ³¨è§£çš„å®šä¹‰" class="headerlink" title="æ³¨è§£çš„å®šä¹‰"></a>æ³¨è§£çš„å®šä¹‰</h3><p>1&gt;.æ¯ä¸€ä¸ªæ–¹æ³•å®é™…ä¸Šæ˜¯å£°æ˜äº†ä¸€ä¸ªé…ç½®å‚æ•°,<br>2&gt;.æ–¹æ³•çš„åç§°å°±æ˜¯å‚æ•°çš„åç§°,<br>3&gt;.è¿”å›å€¼ç±»å‹å°±æ˜¯å‚æ•°çš„ç±»å‹,(è¿”å›å€¼ç±»å‹åªèƒ½æ˜¯åŸºæœ¬ç±»å‹ã€Classã€Stringã€enum)<br>4&gt;.å¯ä»¥é€šè¿‡defaultæ¥å£°æ˜å‚æ•°çš„é»˜è®¤å€¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ <span class="meta">@interface</span> æ³¨è§£å &#123;</span><br><span class="line">    æ³¨è§£å…ƒç´ çš„å£°æ˜<span class="number">1</span> </span><br><span class="line">    æ³¨è§£å…ƒç´ çš„å£°æ˜<span class="number">2</span></span><br><span class="line">    type <span class="title function_">elementName</span><span class="params">()</span>;</span><br><span class="line">    type <span class="title function_">elementName</span><span class="params">()</span> <span class="keyword">default</span> value;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@Serviceçš„å®šä¹‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ElementType.TYPE ä»£è¡¨åœ¨ç±»ä¸Šä½¿ç”¨</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="comment">// RetentionPolicy.RUNTIME ä»£è¡¨è¿è¡Œæ—¶ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡åå°„è·å–åˆ°</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="comment">//åŒ…å«åœ¨JavaDocä¸­</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="comment">//å…è®¸é€šè¿‡åŒ…æ‰«æçš„æ–¹å¼è‡ªåŠ¨æ£€æµ‹</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Service &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * The value may indicate a suggestion for a logical component name,</span></span><br><span class="line"><span class="comment">	 * to be turned into a Spring bean in case of an autodetected component.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the suggested component name, if any (or empty String otherwise)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@AliasFor(annotation = Component.class)</span></span><br><span class="line">	String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Annotationï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Annotation</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ‰€æœ‰æ³¨è§£</strong>ï¼Œ<strong>é»˜è®¤æ˜¯ä¸€ä¸ªå®ç°äº†Annotationæ¥å£çš„æ¥å£ã€‚</strong></p>
<h3 id="è‡ªå®šä¹‰æ³¨è§£"><a href="#è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="è‡ªå®šä¹‰æ³¨è§£"></a>è‡ªå®šä¹‰æ³¨è§£</h3><p>æ³¨è§£æ˜¯ä¸€ç§èƒ½è¢«æ·»åŠ åˆ°javaæºä»£ç ä¸­çš„å…ƒæ•°æ®ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ‡è®°ï¼Œå¯ä»¥ç”¨åœ¨æ–¹æ³•ã€ç±»ã€å‚æ•°å’ŒåŒ…ä¸Šï¼Œç¨‹åºåœ¨ç¼–è¯‘æˆ–è€…è¿è¡Œæ—¶å¯ä»¥æ£€æµ‹åˆ°è¿™äº›æ ‡è®°è€Œè¿›è¡Œä¸€äº›ç‰¹æ®Šçš„å¤„ç†ã€‚</p>
<p>æ³¨è§£çš„åŸºæœ¬å…ƒç´ ï¼š</p>
<ul>
<li>ä¿®é¥°ç¬¦<br> è®¿é—®ä¿®é¥°ç¬¦å¿…é¡»ä¸ºpublic,ä¸å†™é»˜è®¤ä¸ºpubicï¼›</li>
<li>å…³é”®å­—<br> å…³é”®å­—ä¸º@interfaceï¼›</li>
<li>æ³¨è§£åç§°<br> æ³¨è§£åç§°ä¸ºè‡ªå®šä¹‰æ³¨è§£çš„åç§°ï¼Œä½¿ç”¨æ—¶è¿˜ä¼šç”¨åˆ°ï¼›</li>
<li>æ³¨è§£ç±»å‹å…ƒç´ <br> æ³¨è§£ç±»å‹å…ƒç´ æ˜¯æ³¨è§£ä¸­å†…å®¹ï¼Œå¯ä»¥ç†è§£æˆè‡ªå®šä¹‰æ¥å£çš„å®ç°éƒ¨åˆ†ï¼›</li>
</ul>
<p>ä½¿ç”¨å…ƒæ³¨è§£ä¿®é¥°æ³¨è§£ï¼š</p>
<p>@Targetï¼Œ@Retention,@Document,@Inheritedç”¨æ¥ä¿®é¥°æ³¨è§£ã€‚</p>
<p><strong>@Target</strong><br> è¡¨æ˜è¯¥æ³¨è§£å¯ä»¥åº”ç”¨çš„javaå…ƒç´ ç±»å‹ã€‚<br>ElementType.TYPE	åº”ç”¨äºç±»ã€æ¥å£ï¼ˆåŒ…æ‹¬æ³¨è§£ç±»å‹ï¼‰ã€æšä¸¾<br>ElementType.FIELD	åº”ç”¨äºå±æ€§ï¼ˆåŒ…æ‹¬æšä¸¾ä¸­çš„å¸¸é‡ï¼‰<br>ElementType.METHOD	åº”ç”¨äºæ–¹æ³•<br>ElementType.PARAMETER	åº”ç”¨äºæ–¹æ³•çš„å½¢å‚<br>ElementType.CONSTRUCTOR	åº”ç”¨äºæ„é€ å‡½æ•°<br>ElementType.LOCAL_VARIABLE	åº”ç”¨äºå±€éƒ¨å˜é‡<br>ElementType.ANNOTATION_TYPE	åº”ç”¨äºæ³¨è§£ç±»å‹<br>ElementType.PACKAGE	åº”ç”¨äºåŒ…<br>ElementType.TYPE_PARAMETER	1.8ç‰ˆæœ¬æ–°å¢ï¼Œåº”ç”¨äºç±»å‹å˜é‡<br>ElementType.TYPE_USE	1.8ç‰ˆæœ¬æ–°å¢ï¼Œåº”ç”¨äºä»»ä½•ä½¿ç”¨ç±»å‹çš„è¯­å¥ä¸­ï¼ˆä¾‹å¦‚å£°æ˜è¯­å¥ã€æ³›å‹å’Œå¼ºåˆ¶è½¬æ¢è¯­å¥ä¸­çš„ç±»å‹ï¼‰</p>
<p>@Retention<br>  è¡¨æ˜è¯¥æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸ<br>RetentionPolicy.SOURCE	ç¼–è¯‘æ—¶è¢«ä¸¢å¼ƒï¼Œä¸åŒ…å«åœ¨ç±»æ–‡ä»¶ä¸­<br>RetentionPolicy.CLASS	JVMåŠ è½½æ—¶è¢«ä¸¢å¼ƒï¼ŒåŒ…å«åœ¨ç±»æ–‡ä»¶ä¸­ï¼Œé»˜è®¤å€¼<br>RetentionPolicy.RUNTIME	ç”±JVM åŠ è½½ï¼ŒåŒ…å«åœ¨ç±»æ–‡ä»¶ä¸­ï¼Œåœ¨è¿è¡Œæ—¶å¯ä»¥è¢«è·å–åˆ°</p>
<p>@Document<br>  è¡¨æ˜è¯¥æ³¨è§£æ ‡è®°çš„å…ƒç´ å¯ä»¥è¢«Javadoc æˆ–ç±»ä¼¼çš„å·¥å…·æ–‡æ¡£åŒ–</p>
<p>@Inherited<br>  è¡¨æ˜ä½¿ç”¨äº†@Inheritedæ³¨è§£çš„æ³¨è§£ï¼Œæ‰€æ ‡è®°çš„ç±»çš„å­ç±»ä¹Ÿä¼šæ‹¥æœ‰è¿™ä¸ªæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.FIELD, ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Info &#123;</span><br><span class="line">      String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;tracy&quot;</span>;</span><br><span class="line">      <span class="type">boolean</span> <span class="title function_">isDelete</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£"><a href="#ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£"></a>ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="comment">// ä¸ºPersonç±»é…ç½®äº†åˆšåˆšå®šä¹‰çš„æ³¨è§£@Info</span></span><br><span class="line"><span class="meta">@Info(isDelete = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨åå°„è§£ææ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//è·å–Personçš„Classå¯¹è±¡(ç±»)</span></span><br><span class="line">            <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> Person.builder().build();</span><br><span class="line">            <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> person.getClass();</span><br><span class="line">            <span class="comment">//åˆ¤æ–­ç±»ä¸Šæ˜¯å¦æœ‰Infoæ³¨è§£</span></span><br><span class="line">            <span class="keyword">if</span> (clazz.isAnnotationPresent(Info.class)) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Personç±»ä¸Šé…ç½®äº†Infoæ³¨è§£ï¼&quot;</span>);</span><br><span class="line">                <span class="comment">//è·å–è¯¥å¯¹è±¡ä¸ŠInfoç±»å‹çš„æ³¨è§£</span></span><br><span class="line">                <span class="type">Info</span> <span class="variable">infoAnno</span> <span class="operator">=</span> (Info) clazz.getAnnotation(Info.class);</span><br><span class="line">                System.out.println(<span class="string">&quot;infoAnno.value :&quot;</span> + infoAnno.value() + <span class="string">&quot;,infoAnno.isDelete:&quot;</span> + infoAnno.isDelete());</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Personç±»ä¸Šæ²¡æœ‰é…ç½®Infoæ³¨è§£ï¼&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºä¸€ä¸ªç±»æˆ–è€…æ¥å£æ¥è¯´ï¼ŒClassç±»(java.langåŒ…ä¸‹)ä¸­æä¾›äº†ä¸€äº›æ–¹æ³•ç”¨äºåå°„æ³¨è§£ï¼Œå½“ç„¶å¯¹äºå­—æ®µã€æ–¹æ³•æ¥è¯´åå°„æ³¨è§£çš„æ–¹å¼å¾ˆç±»ä¼¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›æŒ‡å®šçš„æ³¨è§£</span></span><br><span class="line">getAnnotation</span><br><span class="line"><span class="comment">//åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦è¢«æŒ‡å®šæ³¨è§£ä¿®é¥°</span></span><br><span class="line">isAnnotationPresent</span><br><span class="line"><span class="comment">//è¿”å›æ‰€æœ‰çš„æ³¨è§£</span></span><br><span class="line">getAnnotations</span><br></pre></td></tr></table></figure>

<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<p>å‚è€ƒé“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/zt15732625878/article/details/100061528">https://blog.csdn.net/zt15732625878/article/details/100061528</a></p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<h3 id="ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ä¾‹å­2"><a href="#ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ä¾‹å­2" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ä¾‹å­2"></a>ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ä¾‹å­2</h3><p>&lt;1&gt;.ä½œç”¨åœ¨å±æ€§ä¸Šæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.FIELD)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> FiledAnnotation &#123;</span><br><span class="line">	 String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;GetFiledAnnotation&quot;</span>;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&lt;2&gt;.ä½œç”¨åœ¨æ–¹æ³•ä¸Šæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MethodAnnotation &#123;</span><br><span class="line">	String <span class="title function_">name</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;MethodAnnotation&quot;</span>;   </span><br><span class="line">    String <span class="title function_">url</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;https://www.cnblogs.com&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&lt;3&gt;.ä½œç”¨åœ¨ç±»ä¸Šæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> TypeAnnotation &#123;</span><br><span class="line">	String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;Is-TypeAnnotation&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&lt;4&gt;.ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TypeAnnotation(value = &quot;doWork&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Worker</span> &#123;</span><br><span class="line"><span class="meta">@FiledAnnotation(value = &quot;CSDNåšå®¢&quot;)</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">String</span> <span class="variable">myfield</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@MethodAnnotation()</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getDefaultInfo</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;do the getDefaultInfo method&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@MethodAnnotation(name = &quot;ç™¾åº¦&quot;, url = &quot;www.baidu.com&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getDefineInfo</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;do the getDefineInfo method&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&lt;5&gt;.æµ‹è¯•è‡ªå®šä¹‰æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMain</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">	</span><br><span class="line">    <span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.zbz.annotation.pattern3.Worker&quot;</span>);</span><br><span class="line">    Method[] method = cls.getMethods();</span><br><span class="line">    <span class="comment">/**åˆ¤æ–­Workerç±»ä¸Šæ˜¯å¦æœ‰TypeAnnotationæ³¨è§£*/</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> cls.isAnnotationPresent(TypeAnnotation.class);</span><br><span class="line">    <span class="comment">/**è·å–Workerç±»ä¸Šæ˜¯TypeAnnotationæ³¨è§£å€¼*/</span></span><br><span class="line">    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">    	<span class="type">TypeAnnotation</span> <span class="variable">typeAnno</span> <span class="operator">=</span> (TypeAnnotation) cls.getAnnotation(TypeAnnotation.class);</span><br><span class="line">    	System.out.println(<span class="string">&quot;@TypeAnnotationå€¼:&quot;</span> + typeAnno.value());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**æ–¹æ³•ä¸Šæ³¨è§£*/</span></span><br><span class="line">    List&lt;Method&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Method&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; method.length; i++) &#123;</span><br><span class="line">        list.add(method[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (Method m : list) &#123;</span><br><span class="line">    	<span class="type">MethodAnnotation</span> <span class="variable">methodAnno</span> <span class="operator">=</span> m.getAnnotation(MethodAnnotation.class);</span><br><span class="line">        <span class="keyword">if</span> (methodAnno == <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        System.out.println( <span class="string">&quot;æ–¹æ³•åç§°:&quot;</span> + m.getName());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•ä¸Šæ³¨è§£name = &quot;</span> + methodAnno.name());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•ä¸Šæ³¨è§£url = &quot;</span> + methodAnno.url());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**å±æ€§ä¸Šæ³¨è§£*/</span></span><br><span class="line">    List&lt;Field&gt; fieldList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Field&gt;();  <span class="comment">//Fieldè¡¨ç¤ºå±æ€§</span></span><br><span class="line">    <span class="keyword">for</span> (Field f : cls.getDeclaredFields()) &#123;<span class="comment">// è®¿é—®æ‰€æœ‰å­—æ®µ</span></span><br><span class="line">    	<span class="type">FiledAnnotation</span> <span class="variable">filedAno</span> <span class="operator">=</span> f.getAnnotation(FiledAnnotation.class);</span><br><span class="line">    	System.out.println( <span class="string">&quot;å±æ€§åç§°:&quot;</span> + f.getName());</span><br><span class="line">    	System.out.println(<span class="string">&quot;å±æ€§æ³¨è§£å€¼FiledAnnotation = &quot;</span> + filedAno.value());</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/zhangbeizhen18/article/details/87885441/">https://blog.csdn.net/zhangbeizhen18/article/details/87885441/</a></p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<h3 id="ç†è§£"><a href="#ç†è§£" class="headerlink" title="ç†è§£"></a>ç†è§£</h3><p>è‡ªå®šä¹‰æ³¨è§£åƒæ˜¯ä¸ºç±»æˆ–è€…ä»€ä¹ˆçš„æ–°å¢åŠ äº†å±æ€§ï¼Œå¯ä»¥æœ‰é»˜è®¤å€¼ï¼Œé€šè¿‡ç±»å¯ä»¥è·å¾—ç±»ä¸Šçš„è‡ªå®šä¹‰æ³¨è§£ï¼Œç„¶åé€šè¿‡æ³¨è§£è·å¾—æ³¨è§£ä¸­çš„å€¼ã€‚æ³¨è§£ä¸æ˜¯å±äºå¯¹è±¡çš„ã€‚å®šä¹‰åœ¨å±æ€§ä¸Šçš„ï¼Œå¯ä»¥ç”¨å±æ€§æ³¨è§£æ¥åŒºåˆ«è¿™äº›å±æ€§ï¼Œç›¸å½“äºå±æ€§åçš„åˆ«åã€‚</p>
<h3 id="å…¶ä»–å‚è€ƒ"><a href="#å…¶ä»–å‚è€ƒ" class="headerlink" title="å…¶ä»–å‚è€ƒ"></a>å…¶ä»–å‚è€ƒ</h3><p>è‡ªå®šä¹‰æ³¨è§£+AOPï¼š<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/283936459">https://zhuanlan.zhihu.com/p/283936459</a></p>
<p>ä½¿ç”¨æ–¹æ³•ä¸Šçš„æ³¨è§£ï¼Œå®ç°é€šè¿‡æ³¨è§£æ¥å”¤é†’ä¸€ä¸ªç±»é‡Œæ–¹æ³•çš„æ•ˆæœï¼š</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b5b79434d3b5">https://www.jianshu.com/p/b5b79434d3b5</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/12/myblog/java/Mybatis%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Sweetwater">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sweetwater's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/12/myblog/java/Mybatis%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">mybatiså…¥é—¨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-03-12 21:21:21 / Modified: 23:44:29" itemprop="dateCreated datePublished" datetime="2022-03-12T21:21:21+08:00">2022-03-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>mybatis</strong></p>
<h3 id="â›½ï¸ç¬¬ä¸€è¯¾"><a href="#â›½ï¸ç¬¬ä¸€è¯¾" class="headerlink" title="â›½ï¸ç¬¬ä¸€è¯¾"></a>â›½ï¸ç¬¬ä¸€è¯¾</h3><p>âœ…å¼€å‘æ­¥éª¤ï¼š</p>
<p>1.æ·»åŠ Mybatisçš„åæ ‡ã€mysqlçš„é©±åŠ¨ï¼ˆpom.xmlä¸­ï¼‰</p>
<p>2.åˆ›å»ºæ•°æ®è¡¨ã€ç¼–å†™å¯¹åº”çš„å®ä½“ç±»ï¼ˆæ“ä½œå®ä½“ä»è€Œé—´æ¥æ“ä½œè¡¨ï¼ŒæŸ¥è¯¢è¡¨ä»è€Œé—´æ¥å°è£…å®ä½“ï¼‰</p>
<p>3.ç¼–å†™æ˜ å°„æ–‡ä»¶UserMapper.xml  ä¸»è¦æè¿°sqlæ–‡ä»¶ï¼ˆç¬¬ä¸€ä¸ªç‚¹ï¼šnamespaceå‘½åç©ºé—´ï¼Œç¬¬äºŒä¸ªç‚¹ï¼šidå’ŒresultTypeï¼Œé€šè¿‡å‘½åç©ºé—´.idè¿›è¡Œè°ƒç”¨ï¼ŒresultTypeç»“æœé›†ï¼Œå°è£…åˆ°æŒ‡å®šçš„ç±»å‹ä¸­ï¼‰</p>
<p>4.ç¼–å†™æ ¸å¿ƒæ–‡ä»¶sqlMapConfig.xmlï¼Œé…ç½®mybatisæ ¸å¿ƒå†…å®¹çš„ï¼Œé…ç½®æ•°æ®æºä¿¡æ¯ã€åŠ è½½æ˜ å°„æ–‡ä»¶ï¼ˆå¯èƒ½å¾ˆå¤šï¼‰ã€‚</p>
<p>5.ç¼–å†™æµ‹è¯•ç±»ï¼ˆ1.è·å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ 2.è·å¾—sessionå·¥å‚å¯¹è±¡ 3.è·å¾—sessionä¼šè¯å¯¹è±¡ 4.æ‰§è¡Œæ“ä½œ 5.æ‰“å°æ•°æ® 6.é‡Šæ”¾èµ„æºï¼‰</p>
<p>mybatisæ˜ å°„æ–‡ä»¶ï¼š </p>
<p><img src="https://img-blog.csdnimg.cn/6779525e71d546109fea38a2120c0479.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAamFkZWxsbGx4eHg=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="Pasted Graphic.tiff"></p>
<p>DTDçº¦æŸå¤´åœ¨å†™æ ‡ç­¾æˆ–è€…å±æ€§æ—¶èƒ½ç»™æç¤ºã€‚</p>
<p>âœ…ä»€ä¹ˆæ˜¯mybatisï¼Ÿ</p>
<p>æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatisï¼Œ2010å¹´è¿ç§»åˆ°google codeï¼Œæ”¹åä¸ºmybatisï¼Œ2013å¹´è¿ç§»åˆ°githubã€‚</p>
<p>Mybatisæ˜¯ä¸€ä¸ªå®ç°äº†æ•°æ®æŒä¹…åŒ–çš„å¼€æºæ¡†æ¶ï¼Œç®€å•ç†è§£å°±æ˜¯å¯¹JDBCè¿›è¡Œå°è£…ã€‚</p>
<p>ORMappingï¼šObject Relationship Mapping å¯¹è±¡å…³ç³»æ˜ å°„</p>
<p>å¯¹è±¡ï¼šé¢å‘å¯¹è±¡</p>
<p>å…³ç³»ï¼šå…³ç³»å‹æ•°æ®åº“</p>
<p>æ˜ å°„ï¼šjavaåˆ°mysqlçš„æ˜ å°„ï¼Œå¼€å‘è€…ä»¥é¢å‘å¯¹è±¡çš„æ€æƒ³æ¥ç®¡ç†æ•°æ®åº“ã€‚</p>
<p>âœ…mybatisä¼˜ç¼ºç‚¹</p>
<p>ä¼˜ç‚¹ï¼š</p>
<p>1âƒ£ï¸ä¸JDBCç›¸æ¯”ï¼Œå‡å°‘50%ä»£ç é‡</p>
<p>2âƒ£ï¸æœ€ç®€å•çš„æŒä¹…åŒ–æ¡†æ¶ï¼Œå°å·§ç®€å•</p>
<p>3âƒ£ï¸çµæ´»ï¼Œä¸ä¼šå¯¹ç¨‹åºæˆ–æ•°æ®åº“çš„ç°æœ‰è®¾è®¡å¼ºè¡ŒåŠ ä»»ä½•å½±å“ï¼Œsqlå†™åœ¨xmlä¸­ï¼Œä»ç¨‹åºä»£ç ä¸­å½»åº•åˆ†ç¦»ï¼Œè§£è€¦åˆï¼Œå¯é‡ç”¨ã€‚</p>
<p>4âƒ£ï¸æä¾›xmlæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sqlè¯­å¥ã€‚</p>
<p>5âƒ£ï¸æä¾›æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡çš„å±æ€§ä¸æ•°æ®åº“çš„ORMå­—æ®µå…³ç³»æ˜ å°„ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>1âƒ£ï¸åŠè‡ªåŠ¨çš„ï¼Œsqlè¯­å¥ç¼–å†™å·¥ä½œé‡å¤§</p>
<p>2âƒ£ï¸ä¾èµ–äºæ•°æ®åº“ï¼Œæ•°æ®åº“è¿ç§»æ€§å·®ã€‚</p>
<p>âœ…Mybatisæ ¸å¿ƒæ¥å£å’Œç±»</p>
<p>javaå’ŒMybatisçš„è¿æ¥è€…ï¼šsqlsession</p>
<p>SqlSessionFactoryBuilderæ¥å£ build()æ–¹æ³•ã€‚å¾—åˆ°SqlSessionFactoryï¼ˆå·¥å‚å¯¹è±¡ï¼‰ã€‚è°ƒç”¨openSession()æ–¹æ³•ï¼Œè·å¾—SqlSessionã€‚</p>
<p>âœ…Mybatisçš„å¼€å‘æ–¹å¼</p>
<p>1âƒ£ï¸ä½¿ç”¨åŸç”Ÿæ¥å£</p>
<p>2âƒ£ï¸Mapperä»£ç†å®ç°è‡ªå®šä¹‰æ¥å£</p>
<p>ä¸¤ç§æ–¹æ³•éƒ½æ˜¯é€šè¿‡sqlsessionçš„ç›¸å…³æ–¹æ³•æ¥å®Œæˆçš„ã€‚</p>
<p>âœ…åˆ›å»ºç¬¬ä¸€ä¸ªmybatisé¡¹ç›®</p>
<p>1âƒ£ï¸æ–°å»ºä¸€ä¸ªmavené¡¹ç›®</p>
<p>pom.xmlæ–‡ä»¶ï¼šå¢åŠ mybatisåæ ‡org.mybatis. mysqlé©±åŠ¨</p>
<p>â“pom.xmlä¸­åŠ å…¥ä¾èµ–æ˜¾çº¢æ€ä¹ˆåŠï¼Ÿ</p>
<p>è§£å†³ï¼šé¦–å…ˆåˆ é™¤.mæ–‡ä»¶å¤¹ä¸‹çš„repoæ–‡ä»¶å¤¹ï¼Œç„¶åå›åˆ°é¡¹ç›®å³é”®pom.xmlï¼Œé€‰mavenï¼Œé€‰reimport</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.28<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>2âƒ£ï¸æ–°å»ºè¡¨</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database mybatis;</span><br><span class="line"><span class="keyword">create table</span> account(</span><br><span class="line"> id <span class="type">int</span> <span class="keyword">primary key</span> auto_increment,</span><br><span class="line"> username <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line"> password <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line"> age <span class="type">int</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<p>3âƒ£ï¸æ–°å»ºæ•°æ®è¡¨å¯¹åº”çš„å®ä½“ç±»</p>
<p>è¿™é‡Œç”¨Lombokåº“ï¼Œç”¨æ¥è‡ªåŠ¨ç”Ÿæˆæ„é€ æ–¹æ³•.ç±»çº§åˆ«çš„ @Data æ³¨é‡Šæ˜¯ç”± Lombok æä¾›çš„ï¼Œå®ƒå‘Šè¯‰ Lombok ç”Ÿæˆæ‰€æœ‰ç¼ºå°‘çš„æ–¹æ³•ï¼Œä»¥åŠæ¥å—æ‰€æœ‰finalå±æ€§ä½œä¸ºå‚æ•°çš„æ„é€ å‡½æ•°ã€‚</p>
<p>åŠ lombokä¾èµ–æ—¶ï¼Œæœ‰é”™è¯¯ï¼Œå› ä¸ºç‰ˆæœ¬å·çš„åŸå› ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">long</span> id;</span><br><span class="line">  <span class="keyword">private</span> String username;</span><br><span class="line">  <span class="keyword">private</span> String password;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>4âƒ£ï¸åˆ›å»ºmybatisé…ç½®æ–‡ä»¶ config.xml æ–‡ä»¶åå¯è‡ªå®šä¹‰ï¼Œå»ºåœ¨resourceæ–‡ä»¶å¤¹ä¸­</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">â€‹    <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- é…ç½®Mybatisè¿è¡Œç¯å¢ƒ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">â€‹    <span class="comment">&lt;!-- ä¸‹é¢å¯ä»¥å¤šä¸ªenvironmentï¼Œä½†æ˜¯ä¸Šé¢é€‰ä¸€ä¸ª --&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">â€‹      <span class="comment">&lt;!-- é…ç½®jdbcäº‹åŠ¡ç®¡ç† --&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">â€‹      <span class="comment">&lt;!--POOLEDé…ç½®JDBCæ•°æ®æºè¿æ¥æ±  --&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xuan&quot;</span>/&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jade&quot;</span>/&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>5âƒ£ï¸ä½¿ç”¨åŸç”Ÿæ¥å£çš„æ–¹å¼å¼€å‘</p>
<p>ï¼ˆ1ï¼‰Mybatisæ¡†æ¶éœ€è¦å¼€å‘è€…è‡ªå®šä¹‰sqlè¯­å¥ï¼Œå†™åœ¨Mapper.xmlæ–‡ä»¶ä¸­ï¼Œå®é™…å¼€å‘ä¸­ï¼Œä¼šä¸ºæ¯ä¸ªå®ä½“ç±»åˆ›å»ºå¯¹åº”çš„Mapper.xmlï¼Œå®šä¹‰ç®¡ç†è¯¥å¯¹è±¡æ•°æ®çš„SQLã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">â€‹    <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- namespaceæ˜¯mybatisåŠ è½½é…ç½®æ–‡ä»¶æ—¶è¦æ‰¾çš„è·¯å¾„ï¼ˆåŒ…+æ–‡ä»¶åçš„å½¢å¼ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">  idæ˜¯ä¸€ä¼šå„¿è°ƒç”¨sqlè¯­å¥æ—¶è¦ç”¨çš„åå­—ï¼Œè‡ªå®šä¹‰çš„.</span></span><br><span class="line"><span class="comment">  parameterTypeæ˜¯è¦ä¼ å…¥çš„å‚æ•°,ä¸‹é¢è¯­å¥æ˜¯ä»å¯¹è±¡ä¸­å–å€¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.demo.mybatis.mapper.AccountMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line">â€‹    insert into account(username, password, age) values(#&#123;username&#125;, #&#123;password&#125;, #&#123;age&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ï¼ˆ2ï¼‰åœ¨å…¨å±€é…ç½®æ–‡ä»¶config.xmlä¸­æ³¨å†ŒAccountMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ³¨å†ŒAccountMapper.xmlï¼ŒåŠ è½½æ˜ å°„æ–‡ä»¶ï¼Œè¿™é‡Œå¸¦åç¼€ï¼Œæ‰€ä»¥ç”¨è·¯å¾„/ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/demo/mybatis/mapper/AccountMapper.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ï¼ˆ3ï¼‰è°ƒç”¨mybatisçš„åŸç”Ÿæ¥å£æ‰§è¡Œæ·»åŠ æ“ä½œï¼Œå†™æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.demo.mybatis.entity.Account;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestInsert</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="comment">//åŠ è½½mybatisé…ç½®æ–‡ä»¶config.xml</span></span><br><span class="line">â€‹    <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> TestInsert.class.getClassLoader().getResourceAsStream(<span class="string">&quot;config.xml&quot;</span>); <span class="comment">//å˜æˆä¸€ä¸ªæµ</span></span><br><span class="line">â€‹    <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">â€‹    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(inputStream); <span class="comment">//ä¼ å…¥æµ</span></span><br><span class="line">â€‹    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">â€‹    <span class="comment">//ç„¶åå°±å¯ä»¥è¿›è¡Œjavaå’Œmysqlçš„å…³è”ï¼Œç»“åˆnamespaceå’Œidè·å–ä½ç½®</span></span><br><span class="line">â€‹    <span class="comment">//å› ä¸ºé…ç½®æ–‡ä»¶å·²ç»åŠ è½½åˆ°ç¯å¢ƒä¸­ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä¸‹é¢æ‰¾åˆ°</span></span><br><span class="line">â€‹    <span class="type">String</span> <span class="variable">statement</span> <span class="operator">=</span> <span class="string">&quot;com.demo.mybatis.mapper.AccountMapper.save&quot;</span>;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="comment">//ä¼ å‚æ•°éœ€è¦å¯¹è±¡ï¼Œå› æ­¤éœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">â€‹    <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>(<span class="number">1L</span>, <span class="string">&quot;liu&quot;</span>, <span class="string">&quot;hello&quot;</span>, <span class="number">12</span>);</span><br><span class="line">â€‹    sqlSession.insert(statement, account);</span><br><span class="line">â€‹    <span class="comment">//commitæ–¹æ³•æäº¤äº‹åŠ¡</span></span><br><span class="line">â€‹    sqlSession.commit();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â“å‡ºç°é—®é¢˜ï¼Œæ˜æ˜å·²ç»æœ‰lombokï¼Œå¯æ˜¯åœ¨å¯¹è±¡å®ä¾‹åŒ–çš„æ—¶å€™è¿˜æ˜¯æœ‰é—®é¢˜ã€‚</p>
<p>è§£å†³ï¼šæ·»åŠ æ’ä»¶ï¼šè®¾ç½®é‡Œæ‰¾åˆ°pluginsï¼Œæœç´¢lombok pluginï¼Œå®‰è£…ï¼Œé‡å¯ã€‚å‹¾é€‰é…ç½®ï¼šsettingâ€“&gt;build,excecution,deploymentâ€“&gt;compilerâ€“&gt;annotation processorså‹¾é€‰ä¸Š enable annotation processingã€‚å³å¯ç”Ÿæ•ˆã€‚</p>
<p>âš ï¸mavenå·¥ç¨‹ä¸­ä¸èƒ½ç›´æ¥è¯»å–resourceä»¥å¤–çš„xmlæ–‡ä»¶ï¼Œå¾—åœ¨pomé‡ŒåŠ ä¸€ä¸ªé…ç½®</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">include</span>&gt;</span>*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">include</span>&gt;</span>*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>â“java.lang.ClassNotFoundException: Cannot find class: com.mysql.cj.jdbc</p>
<p>è§£å†³ï¼š<property name="driver" value="com.mysql.cj.jdbc.Driver"/> å°‘å†™äº†Driver</p>
<p>ğŸ‰Success</p>
<h3 id="â›½ï¸ç¬¬äºŒè¯¾"><a href="#â›½ï¸ç¬¬äºŒè¯¾" class="headerlink" title="â›½ï¸ç¬¬äºŒè¯¾"></a>â›½ï¸ç¬¬äºŒè¯¾</h3><p>âœ…ä½¿ç”¨Mapperä»£ç†å®ç°è‡ªå®šä¹‰æ¥å£</p>
<p>å®é™…å¼€å‘ä¸­æ¨èç”¨è¿™ç§ã€‚</p>
<p>Mapperæ˜¯mybatiså†…éƒ¨æä¾›çš„ç»„å»ºï¼Œæ¥å£æ˜¯å¼€å‘è€…è‡ªå·±å†™ï¼Œæ¥å£çš„å®ç°ç±»æ˜¯ç”±mybatisåŠ¨æ€ç”Ÿæˆå®ç°ç±»ï¼ŒåŒæ—¶è·å–å®ç°ç±»çš„å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥ç”¨ã€‚</p>
<p>1âƒ£ï¸è‡ªå®šä¹‰æ¥å£ï¼Œå®šä¹‰ç›¸å…³çš„ä¸šåŠ¡æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.mybatis.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.demo.mybatis.entity.Account;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AccountRepository</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">save</span><span class="params">(Account account)</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Account account)</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">  <span class="keyword">public</span> List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">  <span class="keyword">public</span> Account <span class="title function_">findById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>2âƒ£ï¸ç¼–å†™ä¸æ¥å£ç›¸å¯¹åº”çš„Mapper.xmlï¼Œå®šä¹‰æ¥å£æ–¹æ³•å¯¹åº”çš„sqlè¯­å¥ã€‚</p>
<p>statementæ ‡ç­¾ï¼ˆå¦‚<code>&lt;insert&gt;</code>ï¼‰å¯æ ¹æ®sqlæ‰§è¡Œçš„ä¸šåŠ¡é€‰æ‹©insertã€deleteã€updateã€selectã€‚</p>
<p>Mybatisä¼šè‡ªåŠ¨æ ¹æ®è§„åˆ™è‡ªåŠ¨åˆ›å»ºæ¥å£å®ç°ç±»çš„ä»£ç†å¯¹è±¡ã€‚</p>
<p>è§„åˆ™ï¼š</p>
<ol>
<li>Mapper.xmlä¸­namespaceä¸ºæ¥å£çš„å…¨ç±»åã€‚</li>
<li>Mapper.xmlä¸­statementçš„idä¸ºæ¥å£ä¸­å¯¹åº”çš„æ–¹æ³•åã€‚</li>
<li>Mapper.xmlä¸­statementçš„parameterTypeå’Œæ¥å£ä¸­å¯¹åº”æ–¹æ³•çš„å‚æ•°ç±»å‹ä¸€è‡´ã€‚</li>
<li>Mapper.xmlä¸­statementçš„resultTypeå’Œæ¥å£ä¸­å¯¹åº”çš„æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ä¸€è‡´ã€‚</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">â€‹    <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.demo.mybatis.repository.AccountRepository&quot;</span>&gt;</span>  <span class="comment">&lt;!-- æ˜ å°„ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line">â€‹    <span class="comment">&lt;!-- æ·»åŠ  ä¿®æ”¹ åˆ é™¤ ä¸‰ä¸ªæ“ä½œåœ¨æ•°æ®åº“è¿”å›çš„ç»“æœä¸€å®šæ˜¯intï¼Œ æ‰€ä»¥è¿™é‡Œæ²¡æœ‰resultTypeå±æ€§ --&gt;</span></span><br><span class="line">â€‹    insert into account(username, password, age) values(#&#123;username&#125;, #&#123;password&#125;, #&#123;age&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line">â€‹    update account set username = #&#123;username&#125;, password = #&#123;password&#125;, age = #&#123;age&#125; where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;long&quot;</span>&gt;</span></span><br><span class="line">â€‹    delete from account where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line">â€‹    <span class="comment">&lt;!-- ä¸å†™é›†åˆç±»å‹ï¼Œè€Œå†™é›†åˆé‡Œçš„æ³›å‹ç±»å‹ --&gt;</span></span><br><span class="line">â€‹    select * from account</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;long&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line">â€‹    select * from account where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>3âƒ£ï¸åœ¨config.xmlä¸­æ³¨å†ŒAccountRepository.xml</p>
<p><code>&lt;mappers&gt;</code></p>
<p>  <code>&lt;mapper resource=&quot;com/demo/mybatis/mapper/AccountMapper.xml&quot;&gt;&lt;/mapper&gt;</code></p>
<p>  <code>&lt;!-- æ³¨å†Œç¬¬äºŒè¯¾ä¸­çš„AccountRepository.xml --&gt;</code></p>
<p>  <code>&lt;mapper resource=&quot;com/demo/mybatis/repository/AccountRepository.xml&quot;&gt;&lt;/mapper&gt;</code></p>
<p><code>&lt;/mappers&gt;</code></p>
<p>4âƒ£ï¸æµ‹è¯•</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">â€‹    <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- é…ç½®Mybatisè¿è¡Œç¯å¢ƒ ,é…ç½®æ•°æ®æºä¿¡æ¯--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">â€‹    <span class="comment">&lt;!-- ä¸‹é¢å¯ä»¥å¤šä¸ªenvironmentï¼Œä½†æ˜¯ä¸Šé¢é€‰ä¸€ä¸ª --&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">â€‹      <span class="comment">&lt;!-- é…ç½®jdbcäº‹åŠ¡ç®¡ç† --&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">â€‹      <span class="comment">&lt;!--POOLEDé…ç½®JDBCæ•°æ®æºè¿æ¥æ±  --&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xuan&quot;</span>/&gt;</span></span><br><span class="line">â€‹        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jade&quot;</span>/&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- æ³¨å†ŒAccountMapper.xmlï¼ŒåŠ è½½æ˜ å°„æ–‡ä»¶ï¼Œè¿™é‡Œå¸¦åç¼€ï¼Œæ‰€ä»¥ç”¨è·¯å¾„/ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/demo/mybatis/mapper/AccountMapper.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line">â€‹    <span class="comment">&lt;!-- æ³¨å†Œç¬¬äºŒè¯¾ä¸­çš„AccountRepository.xml --&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/demo/mybatis/repository/AccountRepository.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ğŸ¤”æˆ‘å¯¹åŠ¨æ€ä»£ç†çš„ç†è§£ï¼š</p>
<p>è‡ªå·±åªéœ€è¦å†™ä¸€ä¸ªç±»ï¼Œæ¡†æ¶ä¸ºæˆ‘åŠ¨æ€ä»£ç†å®ç°æ¥å£çš„å®ç°ç±»ï¼Œå¹¶ä¸”è¿˜ç»™æˆ‘å®ç°ç±»çš„å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥ç”¨ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ç¬¬ä¸€ç§æ–¹æ³•ï¼Œç¡®å®æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦è‡ªå·±å†™statementï¼Œä½†æ˜¯è¯´çš„è‡ªå·±å†™æ¥å£å®ç°ç±»ï¼Ÿæ²¡æœ‰å§</p>
<h3 id="â›½ï¸ç¬¬ä¸‰è¯¾"><a href="#â›½ï¸ç¬¬ä¸‰è¯¾" class="headerlink" title="â›½ï¸ç¬¬ä¸‰è¯¾"></a>â›½ï¸ç¬¬ä¸‰è¯¾</h3><p>Mapper.xmlè§£è¯»</p>
<ol>
<li><p>statementæ ‡ç­¾ï¼Œselectã€updateã€deleteã€insertåˆ†åˆ«å¯¹åº”æŸ¥è¯¢ã€ä¿®æ”¹ã€åˆ é™¤ã€æ·»åŠ </p>
</li>
<li><p>parameterTypeï¼šå‚æ•°æ•°æ®ç±»å‹</p>
<p>A. åŸºæœ¬æ•°æ®ç±»å‹ï¼Œé€šè¿‡idæŸ¥è¯¢Account,  â€œlongâ€</p>
<p>b. Stringç±»å‹ï¼Œé€šè¿‡nameæŸ¥è¯¢Accountï¼Œâ€java.lang.Stringâ€</p>
<p>C. åŒ…è£…ç±»ï¼Œé€šè¿‡idæŸ¥è¯¢Accountã€‚â€œjava.lang.longâ€</p>
</li>
</ol>
<p>â€‹     {ç”¨åŒ…è£…ç±»çš„å¥½å¤„ï¼šåŸºæœ¬æ•°æ®ç±»å‹æ¥å—ä¸äº†nullï¼Œnullä¼ è¿›æ¥æŠ¥å¼‚å¸¸ï¼Œä¸šåŠ¡ä¸­å¯èƒ½ä¼šæœ‰nullï¼Œéœ€è¦åˆ¤æ–­}</p>
<p>   D.å¤šä¸ªå‚æ•°ï¼Œé€šè¿‡usernameå’ŒageæŸ¥è¯¢account</p>
<p>â€‹     âš ï¸ï¼šå¦‚æœè¿”å›ç»“æœå¯èƒ½å¤šä¸ªï¼Œå°±å¾—Listã€‚å¥½åƒå¤šä¸ªæ“ä½œcommitä¸€æ¬¡å°±è¡Œå§ã€‚</p>
<p>   e.java bean</p>
<p>â€‹    updateæ“ä½œä¼ å…¥çš„accountå¯¹è±¡</p>
<ol>
<li><p>resultTypeç»“æœç±»å‹</p>
<p>A. åŸºæœ¬æ•°æ®ç±»å‹</p>
<p>B. åŒ…è£…ç±» java.lang.Integer</p>
<p>C. stringç±»å‹ï¼Œæ¯”å¦‚é€šè¿‡idæŸ¥è¯¢username</p>
</li>
</ol>
<p>  âš ï¸çœ‹åˆ°idæœ‰ä¸­æ–­ï¼Œè¿™æ˜¯å› ä¸ºä¹‹å‰ç¨‹åºæœ‰é”™å¼‚å¸¸äº†ï¼Œæ²¡commitæäº¤ï¼Œä½†æ˜¯idå·²ç»æ¶¨äº†ã€‚</p>
<p>   D. Java bean</p>
<p>â€‹    findAllè¿”å›çš„accountå¯¹è±¡</p>
<h3 id="â›½ï¸ç¬¬å››è¯¾"><a href="#â›½ï¸ç¬¬å››è¯¾" class="headerlink" title="â›½ï¸ç¬¬å››è¯¾"></a>â›½ï¸ç¬¬å››è¯¾</h3><p>âœ…åŠè”æŸ¥è¯¢</p>
<p>1âƒ£ï¸ä¸€å¯¹å¤šï¼Œä¸€ä¸ªç­å¯¹åº”å¤šä¸ªå­¦ç”Ÿ</p>
<p>è¦æŸ¥è¯¢id&#x3D;1çš„å­¦ç”Ÿçš„åå­—ã€ç­çº§</p>
<p>å»ºè¡¨ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span> student(</span><br><span class="line"> id <span class="type">int</span> <span class="keyword">primary key</span> auto_increment,</span><br><span class="line"> name <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line"> cid <span class="type">int</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span> classes(</span><br><span class="line"> id <span class="type">int</span> <span class="keyword">primary key</span> auto_increment,</span><br><span class="line"> name <span class="type">varchar</span>(<span class="number">11</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>æŸ¥è¯¢è¯­å¥ï¼š <code>select * from student s, classes c where s.id =1 and s.cid=c.id;</code></p>
<p>ğŸ¤”é¦–å…ˆå»ºæ¥å£ï¼Œå†å†™xxxRepository.xml, å†æŠŠxmlæ–‡ä»¶åŠ è½½åˆ°configä¸­ã€‚ æµ‹è¯•ä»£ç ä¸­ï¼Œç”¨æ–¹æ³•å°±å¥½äº†ã€‚</p>
<p>ğŸmybatiså’Œjavaç±»æ€ä¹ˆåšåˆ°æ˜ å°„ï¼Œmybatisä¸å…³æ³¨è¡¨å’Œç±»çš„ç»“æ„ï¼Œå…³æ³¨çš„æ˜¯ç»“æœé›†å’Œç±»çš„æ˜ å°„ã€‚</p>
<p>ä»selectæŸ¥å‡ºæ¥çš„ç»“æœé›†ï¼Œåˆ°èµ‹ç»™resutlçš„ç»“æœçš„æ˜ å°„ã€‚ä»ç»“æœé›†é‡ŒæŒ‰é¡ºåºæ‰¾resultå¯¹çš„ä¸Šçš„å­—æ®µï¼Œèµ‹ç»™resultã€‚</p>
<p>åº”è¯¥ç»™åé¢çš„å–åˆ«åã€‚è¿™é‡Œå…³äºç­çº§çš„ä¿¡æ¯è¦èµ‹ç»™classeså¯¹è±¡ï¼Œéœ€è¦å»ºç«‹æ˜ å°„ï¼Œç”¨resultMapã€‚</p>
<p>æ³¨æ„æ˜ å°„çš„æ—¶å€™ï¼Œæ˜¯çœ‹è¿™ä¸ªæŸ¥è¯¢ç»“æœé›†ä¸Šé¢çš„å­—æ®µã€‚</p>
<p>è¿™æ ·å°±å®Œæˆäº†ï¼Œç»“æœç±» å’Œ ç»“æœé›†çš„æ˜ å°„</p>
<p>2âƒ£ï¸é€šè¿‡classesæŸ¥students</p>
<p>é€šè¿‡ç­çº§idï¼ŒæŸ¥å‡ºæ•´ä¸ªclassesç±».</p>
<p>é¦–å…ˆå†™æ¥å£ï¼Œå†å†™xmlæ–‡ä»¶ï¼Œxmlæ–‡ä»¶ä¸­å…ˆå†™sqlè¯­å¥ï¼Œå®Œæˆæ˜ å°„ï¼Œæ·»åŠ åˆ°configï¼Œæµ‹è¯•ã€‚</p>
<p>âš ï¸æ³¨æ„ç»“æœé›†è¦ç”¨resultMapï¼Œè¦è¿˜æ˜¯ç”¨resultTypeçš„è¯ï¼Œç›¸å½“äºå†™çš„æ˜ å°„æ²¡æœ‰ç”¨åˆ°ã€‚</p>
<p>3âƒ£ï¸å¤šå¯¹å¤š</p>
<p>æ¯”å¦‚è¯´ï¼Œå®¢æˆ·å’Œå•†å“ï¼Œè¿™ä¸¤ä¸ªæ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚</p>
<p>customerè¡¨å’Œgoodsè¡¨ï¼Œä¸­é—´éœ€è¦å»ºä¸€ä¸ªä»è¡¨customer_goodsï¼Œé‡Œé¢cidè¡¨ç¤ºå®¢æˆ·è¡¨çš„å¤–é”®ï¼Œgidè¡¨ç¤ºå•†å“è¡¨çš„å¤–é”®ã€‚</p>
<p>customerç±»ä¸­ï¼Œæœ‰ä¸€ä¸ªgoodsé›†åˆ</p>
<p>goodsç±»ä¸­ï¼Œæœ‰ä¸€ä¸ªcustimeré›†åˆ</p>
<p>è¦åšçš„æ˜¯ï¼šæ ¹æ®customerçš„idï¼Œè¿”å›custimerç±»ã€‚</p>
<p><code>select c.id as cid, c.name as came, g.id as gid, g.name as gname from customer as c, goods as gï¼Œ customer_goods as cg where c.id=1 and cg.cid = c.id and cg.gid = g.id;</code> </p>
<p>è¿”å›id&#x3D;1çš„å®¢äººä¹°çš„å•†å“ã€‚</p>
<p>âš ï¸çŸ¥è¯†ç‚¹ï¼›ç¬›å¡å°”ç§¯ï¼Œéœ€è¦æ‰¾è¿™ä¸¤å¼ è¡¨çš„å…³è”å…³ç³»ï¼šç¬¬ä¸‰å¼ è¡¨.</p>
<p>æ ¹æ®ä¸€å¯¹å¤šæ¥å»ºç«‹å¤šå¯¹å¤šçš„æ˜ å°„å°±å¥½äº†ï¼Œä¸åŒä¹‹å¤„åœ¨å»sqlè¯­å¥ä¸­ä¸¤å¼ è¡¨å»ºç«‹å…³ç³»çš„æ–¹å¼æ˜¯é€šè¿‡ç¬¬ä¸‰å¼ è¡¨äº†ã€‚</p>
<p>ä½†æ˜¯xmlæ–‡ä»¶ä¸­æ„å»ºæ˜ å°„è¦çœ‹çš„æ˜¯sqlè¯­å¥è¿”å›ç»“æœé›†å’Œæ¥å£æ–¹æ³•è¦è¿”å›çš„è¿”å›ç±»å¯¹è±¡ã€‚</p>
<h3 id="â›½ï¸ç¬¬äº”è¯¾"><a href="#â›½ï¸ç¬¬äº”è¯¾" class="headerlink" title="â›½ï¸ç¬¬äº”è¯¾"></a>â›½ï¸ç¬¬äº”è¯¾</h3><p>âœ…é€†å‘å·¥ç¨‹</p>
<p>å¯¹ä¼ ç»Ÿå¼€å‘åå‘çš„ä¸€ä¸ªæ–¹å¼ã€‚</p>
<p>Mybatisæ¡†æ¶éœ€è¦ï¼šå®ä½“ç±»ã€è‡ªå®šä¹‰çš„Mapperæ¥å£ã€Mapper.xmlã€‚</p>
<p>ä¼ ç»Ÿçš„å¼€å‘ä¸­ï¼Œä¸Šè¿°çš„ä¸‰ä¸ªç»„ä»¶éœ€è¦å¼€å‘è€…æ‰‹åŠ¨åˆ›å»ºï¼Œé€†å‘å·¥ç¨‹å¯ä»¥å¸®åŠ©å¼€å‘è€…è‡ªåŠ¨åˆ›å»ºè¿™ä¸‰ä¸ªç»„ä»¶ï¼Œå‡è½»å¼€å‘è€…çš„å·¥ä½œé‡ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚</p>
<p>ç¼ºç‚¹ï¼šé€†å‘å·¥ç¨‹åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œé€†å‘å·¥ç¨‹æ ¹æ®æ•°æ®è¡¨æ¥å»ºç«‹å®ä½“ç±»ç­‰ï¼Œå¦‚æœæ”¹äº†è¡¨ç»“æ„ï¼Œå°±éœ€è¦é‡æ–°æ‰§è¡Œä¸€æ¬¡é€†å‘å·¥ç¨‹ã€‚</p>
<p>å¦‚æœæ”¹äº†è¡¨ç»“æ„ï¼Œå°±éœ€è¦åˆ äº†å·²ç»å­˜åœ¨çš„ï¼Œé‡æ–°æ‰§è¡Œã€‚</p>
<p>&#x3D;&#x3D;&#x3D;&#x3D;</p>
<p>å¦‚ä½•ä½¿ç”¨ï¼š</p>
<p>Mybatis Generatorï¼Œç®€ç§°MBGï¼Œæ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºMybatisæ¡†æ¶å¼€å‘è€…å®šåˆ¶çš„ä»£ç ç”Ÿæˆå™¨å’Œè‡ªåŠ¨ç”ŸæˆMybatisæ¡†æ¶æ‰€éœ€çš„å®ä½“ç±»ã€Mapperæ¥å£ã€Mapper.xmlï¼Œæ”¯æŒåŸºæœ¬CRUDæ“ä½œï¼Œä½†æ˜¯ä¸€äº›ç›¸å¯¹å¤æ‚çš„sqléœ€è¦å¼€å‘è€…è‡ªå·±æ¥å®Œæˆã€‚</p>
<p>1âƒ£ï¸æ–°å»ºMavenå·¥ç¨‹ï¼Œå¼•å…¥ä¾èµ–</p>
<p>æ•°æ®åº“å»ºä¸ªè¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table t_user(</span><br><span class="line"> id int primary key auto_increment,</span><br><span class="line"> name varchar(11),</span><br><span class="line"> age int</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>2âƒ£ï¸åˆ›å»ºMBGé…ç½®æ–‡ä»¶generatorConfig.xml</p>
<p> \1. jdbcConnection é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯</p>
<p> \2. javaModelGenerator é…ç½®javaBeançš„ç”Ÿæˆç­–ç•¥ï¼Œè¦æŠŠåˆ›å»ºçš„å®ä½“ç±»æ”¾åœ¨å“ªä¸ªåŒ…é‡Œ</p>
<p> \3. sqlMapGenerator é…ç½®sqlæ˜ å°„æ–‡ä»¶ç”Ÿæˆç­–ç•¥</p>
<p> \4. javaClientGenerator é…ç½®Mapperæ¥å£</p>
<p> \5. table é…ç½®ç›®æ ‡æ•°æ®è¡¨ï¼ˆtableNameï¼šè¡¨åï¼ŒdominObjectNameï¼šJavaBeanç±»åï¼‰</p>
<p>3âƒ£ï¸åˆ›å»ºGeneratoræ‰§è¡Œç±»</p>
<p>å¯åŠ¨ç±»mainï¼Œé‡Œé¢æ²¡æœ‰ä¸šåŠ¡é€»è¾‘ï¼Œæ²¡ç†è§£åæ­£æ˜¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.mybatis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.api.MyBatisGenerator;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.xml.ConfigurationParser;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.exception.InvalidConfigurationException;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.exception.XMLParserException;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.internal.DefaultShellCallback;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">â€‹    List&lt;String&gt;warings = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">â€‹    <span class="type">boolean</span> <span class="variable">overwrite</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">â€‹    <span class="type">String</span> <span class="variable">genCig</span> <span class="operator">=</span> <span class="string">&quot;/generatorConfig.xml&quot;</span>; <span class="comment">// /å°±è¡¨ç¤ºresourceæ–‡ä»¶å¤¹</span></span><br><span class="line">â€‹    <span class="type">File</span> <span class="variable">configFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(Main.class.getResource(genCig).getFile()); <span class="comment">//è·å–è¿è¡Œæ—¶ç±»ï¼ŒgetResource(è·¯å¾„)ï¼Œè·å–é…ç½®æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">â€‹    <span class="type">ConfigurationParser</span> <span class="variable">configurationParser</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConfigurationParser</span>(warings);</span><br><span class="line">â€‹    <span class="type">Configuration</span> <span class="variable">configuration</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="keyword">try</span> &#123;</span><br><span class="line">â€‹      configuration = configurationParser.parseConfiguration(configFile);</span><br><span class="line">â€‹    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">â€‹      e.printStackTrace();</span><br><span class="line">â€‹    &#125; <span class="keyword">catch</span> (XMLParserException e) &#123;</span><br><span class="line">â€‹      e.printStackTrace();</span><br><span class="line">â€‹    &#125;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="type">DefaultShellCallback</span> <span class="variable">callback</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultShellCallback</span>(overwrite);</span><br><span class="line">â€‹    <span class="type">MyBatisGenerator</span> <span class="variable">myBatisGenerator</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">â€‹    <span class="keyword">try</span> &#123;</span><br><span class="line">â€‹      myBatisGenerator = <span class="keyword">new</span> <span class="title class_">MyBatisGenerator</span>(configuration, callback, warings);</span><br><span class="line">â€‹    &#125; <span class="keyword">catch</span> (InvalidConfigurationException e) &#123;</span><br><span class="line">â€‹      e.printStackTrace();</span><br><span class="line">â€‹    &#125;</span><br><span class="line"></span><br><span class="line">â€‹    <span class="keyword">try</span> &#123;</span><br><span class="line">â€‹      myBatisGenerator.generate(<span class="literal">null</span>);</span><br><span class="line">â€‹    &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">â€‹      throwables.printStackTrace();</span><br><span class="line">â€‹    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">â€‹      e.printStackTrace();</span><br><span class="line">â€‹    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">â€‹      e.printStackTrace();</span><br><span class="line">â€‹    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>IDEAæŠ›å‡ºå¼‚å¸¸å¿«æ·é”®ï¼š</strong></p>
<p><strong>Mac</strong></p>
<p><strong>æ–¹å¼ä¸€ï¼ˆå…‰æ ‡ç§»åˆ°è¯¥ä»£ç è¡Œï¼Œoption+Enterï¼‰ï¼Œå¯ä»¥å¼‚å¸¸å¤–æŠ›å‡ºï¼Œä¹Ÿå¯ä»¥try-catchï¼š</strong></p>
<p><strong>æ–¹å¼äºŒï¼ˆå…‰æ ‡ç§»åˆ°è¯¥ä»£ç è¡Œï¼Œæˆ–è€…é€‰ä¸­è¯¥è¡Œä»£ç ï¼Œoption+command+Tï¼‰ï¼š[ä½¿ç”¨å…³é”®å­—æˆ–æ§åˆ¶è¯­å¥ï¼Œæ¯”å¦‚ifâ€¦else, tryâ€¦catch, for, synchronizedç­‰]</strong></p>
<p>4âƒ£ï¸<strong>ç„¶åè¿è¡Œmainæ–¹æ³•ï¼Œæ–‡ä»¶å¤¹ä¸‹ä»€ä¹ˆéƒ½æœ‰äº†ï¼Œè€Œä¸”æ ¹æ®æ•°æ®åº“çš„è¡¨å»ºç«‹äº†å®ä½“ç±»ã€‚</strong></p>
<h3 id="â›½ï¸ç¬¬å…­è¯¾"><a href="#â›½ï¸ç¬¬å…­è¯¾" class="headerlink" title="â›½ï¸ç¬¬å…­è¯¾"></a>â›½ï¸<strong>ç¬¬å…­è¯¾</strong></h3><p>âœ…<strong>å»¶è¿ŸåŠ è½½</strong></p>
<p><strong>ä»€ä¹ˆæ˜¯å»¶è¿ŸåŠ è½½ï¼Ÿä¹Ÿå«æ‡’åŠ è½½ã€æƒ°æ€§åŠ è½½</strong></p>
<p><strong>ä½¿ç”¨å»¶è¿ŸåŠ è½½å¯ä»¥æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼Œé’ˆå¯¹äºæ•°æ®çš„æŒä¹…å±‚çš„æ“ä½œã€‚åœ¨æŸäº›ç‰¹å®šçš„æƒ…å†µä¸‹å»è®¿é—®ç‰¹å®šçš„æ•°æ®åº“ï¼Œåœ¨å…¶ä»–æƒ…å†µä¸‹å¯ä»¥ä¸è®¿é—®æŸäº›è¡¨ï¼Œä»ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘äº†javaåº”ç”¨ä¸æ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ã€‚</strong></p>
<p><strong>æ¯”å¦‚è¯´ä¸Šé¢åŠè”æŸ¥è¯¢æ—¶ï¼ŒæŸ¥è¯¢å­¦ç”Ÿå’Œç­çº§ï¼Œå­¦ç”Ÿå’Œç­çº§åœ¨ä¸¤å¼ ä¸åŒçš„è¡¨ï¼Œå¦‚æœå½“å‰çš„éœ€æ±‚åªéœ€è¦è·å–å­¦ç”Ÿçš„ä¿¡æ¯ï¼Œé‚£ä¹ˆæŸ¥è¯¢å­¦ç”Ÿå•è¡¨å³å¯ï¼Œå¦‚æœéœ€è¦é€šè¿‡å­¦ç”Ÿè·å–å¯¹åº”çš„ç­çº§ä¿¡æ¯ï¼Œåˆ™å¿…é¡»æŸ¥è¯¢ä¸¤å¼ è¡¨ã€‚</strong></p>
<p><strong>ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚ï¼Œéœ€è¦æŸ¥è¯¢ä¸åŒçš„è¡¨ï¼Œæ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚æ¥åŠ¨æ€å‡å°‘æ•°æ®è¡¨æŸ¥è¯¢çš„å·¥ä½œå°±æ˜¯å»¶è¿ŸåŠ è½½ã€‚</strong></p>
<p><strong>ä¸¾ä¾‹ï¼šstudentå’Œclassesçš„ä¾‹å­é‡Œï¼Œä¸¤ä¸ªæ¥å£é‡Œéƒ½å¢åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œå„è‡ªé‡å†™xmlé‡Œé¢å¯¹åº”æ–°å¢æ–¹æ³•çš„sqlè¯­å¥ï¼Œselectè¯­å¥ä¸è”è¡¨æŸ¥è¯¢äº†ï¼Œå„æŸ¥å„çš„ï¼Œæµ‹è¯•æ—¶ï¼Œé¦–å…ˆå¾—åˆ°studentçš„åå­—ï¼Œå¦‚æœå¤Ÿäº†ï¼Œå°±ä¸ç”¨æŸ¥classesè¡¨äº†ï¼Œå¦‚æœä¸å¤Ÿï¼Œå†æ ¹æ®studentçš„cidè·å¾—classesç›¸å…³ä¿¡æ¯ã€‚</strong></p>
<p><strong>å› æ­¤è¦åœ¨é…ç½®æ–‡ä»¶é‡Œå®Œæˆä¸€ä¸ªè¿æ¥çš„æ“ä½œæ¥è‡ªåŠ¨è¯†åˆ«æ˜¯å¦è¿˜éœ€è¦æŸ¥å¦ä¸€å¼ è¡¨ï¼Œåœ¨</strong>associationä¸­ã€‚</p>
<p>å®è·µæ•ˆæœï¼šæ ¹æ®å­¦ç”Ÿidï¼ŒæŸ¥åˆ°å­¦ç”Ÿå®Œæˆä¿¡æ¯ï¼ŒåŒ…æ‹¬é‡Œé¢çš„Classesç±»ã€‚</p>
<p>å®é™…ä¸Šè¿›è¡Œäº†ä¸¤æ¬¡sqlæŸ¥è¯¢ï¼Œæœ¬èº«studentæ¥å£æ–¹æ³•è°ƒç”¨æŸ¥è¯¢ä¸€æ¬¡ï¼Œstudenté…ç½®æ–‡ä»¶ä¸­selectæ ‡ç­¾åˆæŸ¥ä¸€æ¬¡ã€‚</p>
<p>é€šè¿‡é…ç½®configæ–‡ä»¶ä¸­settingå¯ä»¥æ‰“å°sqlæ‰§è¡Œè¿‡ç¨‹ã€‚</p>
<p>ä½†æ˜¯ï¼Œåªæ‹¿nameçš„è¯ï¼Œè¿˜æ˜¯æ‰§è¡Œä¸¤æ¬¡sqlã€‚å› æ­¤éœ€è¦åœ¨configä¸­å¼€å¯å»¶è¿ŸåŠ è½½ã€‚</p>
<p>å¥‡æ€ªäº†ï¼Œæˆ‘å¼€å¯äº†å»¶è¿ŸåŠ è½½ï¼Œåªè·å¾—studentçš„nameï¼Œè¿˜æ˜¯æŸ¥ä¸¤æ¬¡ã€‚</p>
<p>âš ï¸å‡ºç°é—®é¢˜ï¼ŒCannot enable lazy loading because CGLIB is not available. Add CGLIB to your classpath.</p>
<p>åº”è¯¥å¢åŠ CGLIBä¾èµ–ã€‚</p>
<p>â“ä¾èµ–é—²çº¢çš„æ—¶å€™ï¼Œå¿…é¡»è¦åˆ é™¤.m2æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ä¾èµ–ï¼Œç„¶åreimportå—ï¼Ÿ</p>
<h3 id="â›½ï¸ç¬¬ä¸ƒè¯¾"><a href="#â›½ï¸ç¬¬ä¸ƒè¯¾" class="headerlink" title="â›½ï¸ç¬¬ä¸ƒè¯¾"></a>â›½ï¸ç¬¬ä¸ƒè¯¾</h3><p>âœ…MyBatisç¼“å­˜</p>
<p>ä»€ä¹ˆäº‹mybatisç¼“å­˜ï¼Ÿä½¿ç”¨ç¼“å­˜å¯ä»¥å‡å°‘Javaåº”ç”¨ä¸æ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œä»è€Œæé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚æ¯”å¦‚æŸ¥è¯¢å‡ºid&#x3D;1çš„å¯¹è±¡ï¼Œç¬¬ä¸€æ¬¡æŸ¥è¯¢å‡ºä¹‹åä¼šè‡ªåŠ¨å°†è¯¥å¯¹è±¡ä¿å­˜åˆ°ç¼“å­˜ä¸­ï¼Œå½“ä¸‹ä¸€æ¬¡æŸ¥è¯¢æ—¶ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­å–å‡ºå¯¹è±¡å³å¯ï¼Œæ— éœ€å†æ¬¡è®¿é—®æ•°æ®åº“ã€‚</p>
<p>Mybatisç¼“å­˜åˆ†ç±»ï¼š</p>
<ol>
<li><strong>ä¸€çº§ç¼“å­˜ï¼šSqlSessionçº§åˆ«ï¼Œé»˜è®¤å¼€å¯ï¼Œå¹¶ä¸”ä¸èƒ½å…³é—­ã€‚</strong></li>
</ol>
<p>  <strong>æ“ä½œæ•°æ®åº“æ—¶éœ€è¦åˆ›å»ºSqlSessionå¯¹è±¡ï¼Œåœ¨å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªHashMapç”¨äºå­˜å‚¨ç¼“å­˜æ•°æ®ï¼Œä¸åŒçš„SqlSessionä¹‹é—´ç¼“å­˜æ•°æ®åŒºåŸŸæ˜¯äº’ä¸å½±å“çš„ã€‚</strong></p>
<p>  <strong>ä¸€çº§ç¼“å­˜çš„ä½œç”¨åŸŸæ˜¯SqlSessionèŒƒå›´çš„ï¼Œå½“åœ¨åŒä¸€ä¸ªSqlSessionä¸­æ‰§è¡Œä¸¤æ¬¡ç›¸åŒçš„SQLè¯­å¥æ—¶ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œå®Œæ¯•å°†ç»“æœä¿å­˜åˆ°ç¼“å­˜ä¸­ï¼Œç¬¬äºŒæ¬¡æŸ¥è¯¢æ—¶ç›´æ¥ä»ç¼“å­˜ä¸­è·å–ã€‚</strong></p>
<p>  <strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¦‚æœSqlSessionæ‰§è¡Œäº†DMLæ“ä½œï¼ˆinsertã€updateã€deleteï¼‰ï¼ŒMybatiså¿…é¡»å°†ç¼“å­˜æ¸…ç©ºï¼Œæ¥ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§ã€‚</strong></p>
<ol>
<li><strong>äºŒçº§ç¼“å­˜ï¼šMapperçº§åˆ«çš„ï¼Œé»˜è®¤å…³é—­ï¼Œå¯ä»¥å¼€å¯ã€‚</strong></li>
</ol>
<p>  <strong>ä½¿ç”¨äºŒçº§ç¼“å­˜æ—¶ï¼Œå¤šä¸ªSqlSessionä½¿ç”¨åŒä¸€ä¸ªMapperçš„sqlè¯­å¥æ“ä½œæ•°æ®åº“ï¼Œå¾—åˆ°çš„æ•°æ®ä¼šå­˜åœ¨äºŒçº§ç¼“å­˜ä¸­ï¼ŒåŒæ ·æ˜¯ä½¿ç”¨HashMapè¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œç›¸æ¯”è¾ƒä¸€çº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜çš„èŒƒå›´æ›´å¤§ï¼Œå¤šä¸ªsqlsessionå¯ä»¥å…±ç”¨äºŒçº§ç¼“å­˜ã€‚äºŒçº§ç¼“å­˜æ˜¯è·¨sqlsessionçš„ã€‚</strong></p>
<p>  <strong>äºŒçº§ç¼“å­˜æ˜¯å¤šä¸ªsqlsessionå…±äº«çš„ï¼Œå…¶ä½œç”¨åŸŸæ˜¯mapperçš„åŒä¸€ä¸ªnamespqceï¼Œä¸åŒçš„sqlsessionä¸¤æ¬¡æ‰§è¡Œç›¸åŒçš„namespaceä¸‹çš„sqlè¯­å¥ï¼Œå‚æ•°ä¹Ÿç›¸åŒï¼Œåˆ™ç¬¬ä¸€æ¬¡æ‰§è¡ŒæˆåŠŸä¹‹åä¼šå°†æ•°æ®ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼Œç¬¬äºŒæ¬¡å¯ç›´æ¥ä»äºŒçº§ç¼“å­˜ä¸­å–å‡ºæ•°æ®ã€‚</strong></p>
<p>âš ï¸<strong>ä¸€çº§ç¼“å­˜æ˜¯ä¸€ä¸ªsqlsessionä¸€ä¸ªç¼“å­˜ã€‚äºŒçº§ç¼“å­˜æ˜¯ä¸€ä¸ªmapperä¸€ä¸ªï¼Œå¤šä¸ªsqlsession å¯èƒ½æ˜¯ä½¿ç”¨çš„åŒä¸€mapperï¼Œä¹Ÿå°±æ˜¯åŒä¸€ä¸ªnamespaceã€‚äºŒçº§ç¼“å­˜èŒƒå›´æ›´å¤§ã€‚</strong></p>
<p><strong>å¦‚ä½•å¼€å¯äºŒçº§ç¼“å­˜ï¼š</strong></p>
<p><strong>config.xmlä¸­</strong></p>
<p><code>&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;</code></p>
<p><strong>ç„¶åå†å¯¹åº”çš„mapper.xmlä¸­ï¼Œæ·»åŠ é…ç½®äºŒçº§ç¼“å­˜</strong></p>
<p><code>&lt;cache&gt;&lt;/cache&gt;</code></p>
<p><strong>ç„¶åå®ä½“ç±»å®ç°åºåˆ—åŒ–æ¥å£</strong></p>
<p><code>public class Classes implements Serializable</code></p>
<ol>
<li><strong>ç¬¬ä¸‰æ–¹äºŒçº§ç¼“å­˜ã€‚éœ€è¦åœ¨pom.xmlé‡Œæ·»åŠ ç›¸å…³ä¾èµ–</strong></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   &lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;mybatis-ehcache&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;1.0.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p><strong>ç„¶åæ·»åŠ é…ç½®æ–‡ä»¶ehcache.xml ä¸ç”¨è‡ªå·±å†™ï¼Œå®šä¹‰äº†ä¸€äº›äºŒçº§ç¼“å­˜çš„è®¾ç½®</strong></p>
<p><strong>ç„¶ååœ¨config.xmlä¸­å¼€å¯äºŒçº§ç¼“å­˜</strong></p>
<p><strong>ç„¶ååœ¨mapper.xmlä¸­é…ç½®äºŒçº§ç¼“å­˜</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;cache type=&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;&gt;</span><br><span class="line">  &lt;!-- ç¼“å­˜åˆ›å»ºä¹‹åï¼Œæœ€åä¸€æ¬¡è®¿é—®ç¼“å­˜çš„æ—¶é—´è‡³ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´é—´éš” --&gt;</span><br><span class="line">  &lt;property name=&quot;timeToIdleSeconds&quot; value=&quot;3600&quot;/&gt;</span><br><span class="line">  &lt;!-- ç¼“å­˜è‡ªåˆ›å»ºæ—¶é—´èµ·è‡³å¤±æ•ˆçš„æ—¶é—´é—´éš” --&gt;</span><br><span class="line">  &lt;property name=&quot;timeToLiveSeconds&quot; value=&quot;3600&quot;/&gt;</span><br><span class="line">  &lt;!-- ç¼“å­˜çš„å›æ”¶ç­–ç•¥ ,LRUç§»é™¤è¿‘æœŸä½¿ç”¨æœ€å°‘--&gt;</span><br><span class="line">  &lt;property name=&quot;memoryStoreEvictionPolicy&quot; value=&quot;LRU&quot;/&gt;</span><br><span class="line">&lt;/cache&gt;</span><br></pre></td></tr></table></figure>

<p><strong>è¿™ä¸ªç¼“å­˜é‡Œå®ä½“ç±»å†…ä¸éœ€è¦å®ç°åºåˆ—åŒ–æ¥å£</strong></p>
<h3 id="â›½ï¸ç¬¬å…«è¯¾-MybatisåŠ¨æ€sql"><a href="#â›½ï¸ç¬¬å…«è¯¾-MybatisåŠ¨æ€sql" class="headerlink" title="â›½ï¸ç¬¬å…«è¯¾ MybatisåŠ¨æ€sql"></a>â›½ï¸<strong>ç¬¬å…«è¯¾ MybatisåŠ¨æ€sql</strong></h3><p><strong>sqlè¯­å¥æ˜¯åŠ¨æ€åˆ›å»ºçš„ï¼Œåªéœ€è¦å®šä¸€ä¸ªå¤§è‡´çš„æ ·å¼ï¼Œå®ƒä¼šæ ¹æ®å…·ä½“çš„å‚æ•°ã€å…·ä½“çš„ä¸šåŠ¡å»åŠ¨æ€ç”Ÿæˆä¸åŒçš„sqlã€‚</strong></p>
<p><strong>èƒŒæ™¯ï¼šä¸šåŠ¡æ¯”è¾ƒå¤æ‚æ—¶ï¼Œå¦‚æœéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»æ‹¼æ¥sqlè¯­å¥æ¥å®Œæˆæ“ä½œï¼Œæ•ˆç‡æ¯”è¾ƒä½è€Œä¸”å®¹æ˜“å‡ºé”™ã€‚</strong></p>
<p>â“<strong>å‘ç°testç±»é‡Œï¼Œç¬¬ä¸€è¡Œçš„åŠ è½½ç±»ä¸€ç›´æ˜¯ç¬¬ä¸€æ¬¡ç”¨çš„ï¼Œè¿™åˆç†å—ï¼Ÿ</strong></p>
<p><strong>ç”¨ä¸€ä¸ªaccountå¯¹è±¡æŸ¥accountå¯¹è±¡ï¼Œæ ¹æ®å¯¹è±¡çš„å››ä¸ªå‚æ•°å¯¹åº”æ”¾åˆ°sqlè¯­å¥ä¸­ï¼Œå¦‚æœä¼ å…¥çš„accountçš„ä¸€ä¸ªå‚æ•°æ²¡è®¾ç½®ï¼Œåˆ™ä¼ åˆ°sqlè¯­å¥é‚£é‡Œï¼Œè¿™ä¸ªå­—æ®µ&#x3D;nullã€‚ä¸€èˆ¬å°±æ²¡ç»“æœã€‚</strong></p>
<p><strong>åŠ¨æ€sqlï¼šåªéœ€è¦å†™ä¸€ä¸ªæ¨¡ç‰ˆï¼Œè®©ç¨‹åºè‡ªåŠ¨æ ¹æ®å±æ€§æ˜¯å¦æœ‰å€¼ï¼Œæ¥åŠ¨æ€å†³å®šæ˜¯å¦åŠ è¿™ä¸ªæ¡ä»¶ã€‚</strong></p>
<p><strong>å…¶å®å°±æ˜¯ä¸€ä¸ªif elseçš„æµç¨‹ï¼Œåˆ¤æ–­å¦‚æœä¸ºnullï¼Œå°±å¿½ç•¥æ‰ï¼Œä½¿å¾—æœ‰ç»“æœã€‚</strong></p>
<p><strong>ä½¿ç”¨åŠ¨æ€sqlçš„ä½œç”¨ï¼šå¯ç®€åŒ–ä»£ç çš„å¼€å‘ï¼Œå‡å°‘å¼€å‘è€…çš„å·¥ä½œé‡ï¼Œç¨‹åºå¯ä»¥è‡ªåŠ¨æ ¹æ®ä¸šåŠ¡å‚æ•°æ¥å†³å®šsalçš„ç»„æˆã€‚</strong></p>
<ul>
<li><strong>ifæ ‡ç­¾</strong></li>
</ul>
<p><strong>ï½ï½ï½ï½ï½</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByAccount1&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  select * from account where</span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != 0&quot;</span>&gt;</span></span><br><span class="line">â€‹    id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span></span><br><span class="line">â€‹    and username = #&#123;username&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span></span><br><span class="line">â€‹    and password = #&#123;password&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != 0&quot;</span>&gt;</span></span><br><span class="line">â€‹    age = #&#123;age&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>ä½†æ˜¯ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸ç»™ï¼Œå°±ä¼šå‡ºé”™ï¼Œå› ä¸ºç›´æ¥andåé¢çš„ï¼Œè¯­æ³•é”™è¯¯ã€‚</strong></p>
<p><strong>å°†ifæ ‡ç­¾çš„è¯­å¥ï¼Œæ”¾åœ¨whereæ ‡ç­¾é‡Œå°±å¯ä»¥äº†ã€‚</strong></p>
<p><strong>ifæ ‡ç­¾å¯ä»¥è‡ªåŠ¨æ ¹æ®è¡¨è¾¾å¼çš„ç»“æœæ¥å†³å®šæ˜¯å¦å°†å¯¹åº”çš„è¯­å¥æ·»åŠ åˆ°sqlä¸­ï¼Œå¦‚æœæ¡ä»¶ä¸æˆç«‹åˆ™ä¸æ·»åŠ ï¼Œå¦‚æœæ¡ä»¶æˆç«‹åˆ™æ·»åŠ ã€‚</strong></p>
<p><strong>whereæ ‡ç­¾å¯ä»¥è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦è¦åˆ é™¤è¯­å¥å—ä¸­çš„andå…³é”®å­—ï¼Œå¦‚æœç›‘æµ‹åˆ°whereç›´æ¥è·Ÿandæ‹¼æ¥ï¼Œåˆ™è‡ªåŠ¨åˆ é™¤andï¼Œé€šå¸¸æƒ…å†µä¸‹ if å’Œ whereç»“åˆä½¿ç”¨ã€‚</strong></p>
<ul>
<li><strong>chooseã€whenæ ‡ç­¾</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByAccount2&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  select * from account</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span> = <span class="string">&quot;id !=0 &quot;</span>&gt;</span></span><br><span class="line">â€‹        id = #&#123;id&#125;</span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span> = <span class="string">&quot;username !=null &quot;</span>&gt;</span></span><br><span class="line">â€‹        username = #&#123;username&#125;</span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span> = <span class="string">&quot;password !=null &quot;</span>&gt;</span></span><br><span class="line">â€‹        password = #&#123;password&#125;</span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹      <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span> = <span class="string">&quot;age !=0 &quot;</span>&gt;</span></span><br><span class="line">â€‹        age = #&#123;age&#125;</span><br><span class="line">â€‹      <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li><p><strong>trimæ ‡ç­¾ï¼štrimæ ‡ç­¾ä¸­çš„prefixå’Œsuffixå±æ€§ä¼šè¢«ç”¨äºç”Ÿæˆå®é™…çš„sqlè¯­å¥ï¼Œä¼šå’Œæ ‡ç­¾å†…éƒ¨çš„è¯­å¥è¿›è¡Œæ‹¼æ¥ï¼Œå¦‚æœè¯­å¥å‰åå‡ºç°äº†prefixOverridesæˆ–è€…suffixOverrideså±æ€§ä¸­æŒ‡å®šçš„å€¼ï¼ŒMybatisæ¡†æ¶ä¼šè‡ªåŠ¨å°†å…¶åˆ é™¤ã€‚</strong></p>
</li>
<li><p><strong>setæ ‡ç­¾ï¼šç”¨äºupdateæ“ä½œï¼Œä¼šè‡ªåŠ¨æ ¹æ®å‚æ•°æ¥é€‰æ‹©ç”Ÿæˆsqlè¯­å¥ã€‚</strong></p>
</li>
</ul>
<p><strong>updateä¼ å…¥çš„å¯¹è±¡ï¼Œå¦‚æœsetå±æ€§åªæœ‰ä¸€ä¸ªï¼Œç›¸å½“äºå…¶ä»–å±æ€§ä¸ä¼ å€¼ï¼Œå˜ä¸ºäº†nullæˆ–è€…0.</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update1&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.demo.mybatis.entity.Account&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  update account</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != 0&quot;</span>&gt;</span></span><br><span class="line">â€‹      id = #&#123;id&#125;</span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span></span><br><span class="line">â€‹      and username = #&#123;username&#125;</span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span></span><br><span class="line">â€‹      and password = #&#123;password&#125;</span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != 0&quot;</span>&gt;</span></span><br><span class="line">â€‹      age = #&#123;age&#125;</span><br><span class="line">â€‹    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">   where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>è¿™æ˜¯sqlæ‹¼æ¥å—ï¼Ÿ</strong></p>
<ul>
<li><strong>foreachæ ‡ç­¾</strong></li>
</ul>
<p><strong>foreachæ ‡ç­¾å¯ä»¥è¿­ä»£ç”Ÿæˆä¸€ç³»åˆ—å€¼ï¼Œè¿™ä¸ªæ ‡ç­¾ä¸»è¦ç”¨äºsqlçš„inè¯­å¥ã€‚</strong></p>
<p><code>private List&lt;Long&gt; ids;</code></p>
<p><code>List&lt;Long&gt; ids = new ArrayList&lt;Long&gt;();</code></p>
<p><strong>è¿˜å¾—åœ¨å®ä½“ç±»é‡Œå»ºä¸€ä¸ªListå—ï¼Ÿæ„Ÿè§‰ä¸å¤ªä¾¿åˆ©ã€‚</strong></p>
<p><code>&lt;select id=&quot;findByIds&quot; param&gt;</code></p>
<h3 id="â›½ï¸ç¬¬ä¹è¯¾-mybatis-é€šç”¨Mapper"><a href="#â›½ï¸ç¬¬ä¹è¯¾-mybatis-é€šç”¨Mapper" class="headerlink" title="â›½ï¸ç¬¬ä¹è¯¾ mybatis é€šç”¨Mapper"></a>â›½ï¸<strong>ç¬¬ä¹è¯¾ mybatis é€šç”¨Mapper</strong></h3><p><strong>è™½ç„¶æœ‰é€†å‘å·¥ç¨‹MBGï¼Œèƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œä½†æ˜¯entityæ”¹å˜ä¼šç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚</strong></p>
<p>1âƒ£ï¸<strong>å»ºè¡¨</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span> mapperdemo(</span><br><span class="line"> id <span class="type">int</span> <span class="keyword">primary key</span> auto_increment,</span><br><span class="line"> username <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line"> password <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line"> age <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert into</span> mapperdemo (username, password, age) <span class="keyword">values</span></span><br><span class="line">(<span class="string">&#x27;liuxuan&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>, <span class="number">23</span>),</span><br><span class="line">(<span class="string">&#x27;jade&#x27;</span>, <span class="string">&#x27;kk&#x27;</span>, <span class="number">22</span>),</span><br><span class="line">(<span class="string">&#x27;aks&#x27;</span>, <span class="string">&#x27;aa&#x27;</span>, <span class="number">12</span>);</span><br></pre></td></tr></table></figure>



<p>2âƒ£ï¸æ–°å»ºjavaå®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.mybatis.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span> <span class="comment">//æœ‰å‚æ„é€ </span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span>  <span class="comment">//æ— å‚æ„é€ </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mapperdemo</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Integer id;</span><br><span class="line">  <span class="keyword">private</span> String username;</span><br><span class="line">  <span class="keyword">private</span> String password;</span><br><span class="line">  <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre><code>
è€ƒè™‘åˆ°åŸºæœ¬æ•°æ®ç±»å‹åœ¨Javaç±»å‹ä¸­éƒ½æœ‰é»˜è®¤å€¼ï¼Œä¼šå¯¼è‡´mybatisåœ¨æ‰§è¡Œç›¸å…³æ“ä½œæ—¶å¾ˆéš¾åˆ¤æ–­å½“å‰å­—æ®µæ˜¯å¦ä¸ºnullã€‚å› æ­¤åœ¨mybatisç¯å¢ƒä¸‹ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»å‹ã€‚(ä¸Šé¢çš„ä½œåºŸ)



âœ…mapperæ³¨è§£é‡æ¥ï¼š

å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/jintingbo/article/details/80517053



ä»mybatis3.4.0å¼€å§‹åŠ å…¥äº†@Mapperæ³¨è§£ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†ä¸å†å†™mapperæ˜ å°„æ–‡ä»¶

ç°åœ¨æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€æ˜“çš„mavené¡¹ç›®å»äº†è§£@Mapperæ³¨è§£çš„ä½¿ç”¨æ–¹å¼ï¼š



1âƒ£ï¸å»ºè¡¨ï¼š

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span> <span class="keyword">user</span>(</span><br><span class="line"> name <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line"> pwd <span class="type">varchar</span>(<span class="number">11</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert into</span> <span class="keyword">user</span> (name, pwd) <span class="keyword">values</span></span><br><span class="line">(<span class="string">&#x27;liuxuan&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;jade&#x27;</span>, <span class="string">&#x27;kk&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;aks&#x27;</span>, <span class="string">&#x27;aa&#x27;</span>);</span><br></pre></td></tr></table></figure>



2âƒ£ï¸å®ä½“ç±»

æ“ä½œä¹‹å‰ï¼Œä»githubä¸Šcloneä¸‹æ¥çš„é¡¹ç›®å‡ºç°é—®é¢˜

1.æ–‡ä»¶å·¦ä¸‹è§’æœ‰ä¸ªæ©™è‰²çš„å°æ—¶é’Ÿï¼Œå‡ºç°æ©™è‰²åŸå› ï¼šæ²¡æœ‰æ·»åŠ åˆ°mavenè§£å†³åŠæ³•ï¼šæ‰¾åˆ°é¡¹ç›®çš„xml,å¦‚æœæœ€å¤–å±‚æ²¡æœ‰xml,æ‰¾åˆ°æ¨¡å—é‡Œé¢å¯¹åº”çš„xml,å³é”®é€‰æ‹©Add as Maven project. å¯¼å…¥é€šè¿‡mavenå¯¼å…¥jarã€‚å°±è§£å†³äº†äº†ã€‚

2.é¡¹ç›®ä¾èµ–æ˜¯çº¢çš„ï¼Œå»mavenä»“åº“[Maven Repository: Search/Browse/Explore](https://mvnrepository.com/)ä¸‹ä¸‹æ¥ï¼Œæ”¾åœ¨.m2æ–‡ä»¶å¤¹ä¸‹ã€‚

3.æ²¡å¼„sdkï¼Œå¼„æˆjdk1.8

4.å¥‡äº†æ€ªäº†ï¼Œè¿™ä¸ªé¡¹ç›®é‡Œå®ä½“ç±»ç”¨Lombokï¼Œä¾èµ–æ˜¾çº¢ï¼Œæ‡µé€¼äº†ã€‚

5.pç©ºé—´æ˜¾çº¢çš„è§£å†³åŠæ³•ï¼šfile--&gt;settings...--&gt;languages &amp; frameworks--&gt;schemas and DTDs --&gt; æ·»åŠ url



3âƒ£ï¸åŠ è½½é…ç½®æ–‡ä»¶æ—¶æ‰¾ä¸åˆ°bean

ä¸çŸ¥é“å•¥åŸå› äº†ï¼Œåº”è¯¥æ˜¯mybatisç»“åˆspringï¼Œè¿™ä¸€ç‚¹è¿˜æ²¡æŒæ¡ã€‚



æ€»ä¹‹ï¼Œä½¿ç”¨æ–¹é¢ï¼Œä¸éœ€è¦åœ¨mapper.xmlé‡Œå†™sqlè¯­å¥ï¼Ÿ

æµ‹è¯•ç±»é‡Œç›´æ¥è°ƒç”¨daoæ¥å£é‡Œçš„æ–¹æ³•å³å¯ï¼Ÿ

ï¼ï¼ï¼é¡¹ç›®é‡Œè¿˜æ˜¯æœ‰sqlè¯­å¥çš„ï¼Œæ¥å£é‡Œç”¨@mapper @paramæ³¨è§£ï¼Œåªæ˜¯ä¼ é€’å‚æ•°ã€‚å’Œä¹‹å‰å­¦çš„ï¼Œåªæ˜¯åœ¨æ¥å£é‡Œå¤šäº†è¿™ä¿©æ³¨è§£ã€‚
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/12/myblog/java/Tomcat%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Sweetwater">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sweetwater's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/12/myblog/java/Tomcat%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">tomcatå…¥é—¨æ•™ç¨‹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-12 21:19:51" itemprop="dateCreated datePublished" datetime="2022-03-12T21:19:51+08:00">2022-03-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-06-04 14:32:50" itemprop="dateModified" datetime="2022-06-04T14:32:50+08:00">2022-06-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="tomcat"><a href="#tomcat" class="headerlink" title="tomcat"></a><strong>tomcat</strong></h3><p>ä¸ºä»€ä¹ˆæœ‰tomcatï¼Ÿ</p>
<p>ä¸€ä¸ªé¡¹ç›®ï¼šå®¢æˆ·ç«¯+åç«¯+æ•°æ®åº“ã€‚</p>
<p>å¦‚ä½•è®¿é—®åˆ°æœåŠ¡ï¼Ÿéœ€è¦åœ¨webåº”ç”¨æœåŠ¡å™¨é‡Œè¿›è¡Œéƒ¨ç½²ã€‚</p>
<p>tomcatå°±æ˜¯ä¸€ä¸ªwebåº”ç”¨æœåŠ¡å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªæœåŠ¡ï¼Œé‡Œé¢æ”¾javaç¨‹åºã€‚</p>
<p>webåº”ç”¨æœåŠ¡å™¨ï¼štomcatã€Jboosã€Weblogicã€Jettyã€‚</p>
<p>æœ‰äº†tomcatå¯ä»¥å®ç°ä¸¤ä¸ªç”µè„‘ä¹‹é—´çš„äº’ç›¸è®¿é—®ï¼Œå‰ææ˜¯åœ¨ä¸€ä¸ªå±€åŸŸç½‘é‡Œã€‚</p>
<h3 id="1âƒ£ï¸å®‰è£…tomcatã€‚"><a href="#1âƒ£ï¸å®‰è£…tomcatã€‚" class="headerlink" title="1âƒ£ï¸å®‰è£…tomcatã€‚"></a>1âƒ£ï¸å®‰è£…tomcatã€‚</h3><p>apacheå‡ºçš„ï¼Œè¿›å…¥å®˜ç½‘ï¼Œé€‰æ‹©tomcat9ï¼Œä¸‹è½½å‹ç¼©æ–‡ä»¶tar.gz</p>
<p>è§£å‹ç¼©ï¼Œæ”¾libraryé‡Œã€‚</p>
<p>binï¼šå­˜æ”¾å„ä¸ªå¹³å°ä¸‹å¯åŠ¨å’Œåœæ­¢tomcatæœåŠ¡çš„è„šæœ¬æ–‡ä»¶ã€‚batæ˜¯windowsç³»ç»Ÿä¸‹çš„è„šæœ¬æ–‡ä»¶ï¼Œshæ˜¯macå’Œlinuxçš„ã€‚</p>
<p>confï¼šå­˜æ”¾å„ç§tomcatæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é…ç½®ç«¯å£ï¼Œserver.xmlã€‚</p>
<p>libï¼šå­˜æ”¾tomcatæœåŠ¡å™¨éœ€è¦çš„jaråŒ…ã€‚</p>
<p>logsï¼šå­˜æ”¾tomcatæœåŠ¡è¿è¡Œçš„æ—¥å¿—ã€‚</p>
<p>tempï¼štomcatè¿è¡Œæ—¶çš„ä¸´æ—¶æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸Šä¼ ä¸‹è½½ioæµçš„æ—¶å€™ç”¨ï¼Œå¤§æ–‡ä»¶æ”¾åœ¨javaè™šæ‹Ÿæœºå†…å­˜é‡Œå ç”¨èµ„æºå¤§ï¼Œå…ˆæ”¾åœ¨tempæ–‡ä»¶å¤¹é‡Œã€‚</p>
<p>webappsï¼šå­˜æ”¾å…è®¸å®¢æˆ·ç«¯è®¿é—®çš„èµ„æºï¼ˆjavaç¨‹åºï¼‰ã€‚</p>
<p>workï¼šå­˜æ”¾tomcatå°†jspè½¬æ¢ä¹‹åçš„servletæ–‡ä»¶ã€‚</p>
<h3 id="2âƒ£ï¸ideaé›†æˆtomcat"><a href="#2âƒ£ï¸ideaé›†æˆtomcat" class="headerlink" title="2âƒ£ï¸ideaé›†æˆtomcat"></a>2âƒ£ï¸ideaé›†æˆtomcat</h3><p>create new project â€“&gt; java enterprise â€“&gt; web application â€“&gt; å®Œæˆ</p>
<p>index.jspï¼šå†™htmlçš„</p>
<p>web.xmlï¼šé…ç½®åº”ç”¨çš„</p>
<p>æ·»åŠ tomcaté…ç½®ï¼šå³ä¸Šè§’add configurationï¼Œç‚¹åŠ å·ï¼Œtomcalï¼Œé€‰localï¼Œé…ä¸€ä¸ªæœ¬åœ°çš„tomcatï¼Œè®¾ç½®ï¼Œå†™åå­—ï¼Œé€‰tomcatè·¯å¾„ï¼ˆä¸»è¦å°±ç”¨tomcatçš„ä¸¤ä¸ªjaråŒ…ï¼šjspã€servletï¼‰ã€‚ç›¸å½“äºæ˜¯æŠŠideaå’Œtomcatæ˜ å°„èµ·æ¥äº†ã€‚è®¾ç½®urlï¼šé»˜è®¤æµè§ˆå™¨ï¼Œafter launchæ˜¯å¯åŠ¨åè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œurlæ˜¯è®¿é—®è·¯å¾„ï¼Œè®¿é—®åˆ°tomcatæœåŠ¡ã€‚ç„¶åé€‰deploymentæ·»åŠ javaå·¥ç¨‹ï¼Œç‚¹åŠ å·ï¼Œé€‰artifactï¼Œè‡ªåŠ¨åŠ è¿›æ¥äº†ã€‚ç›¸å½“äºæ˜¯æŠŠjavaå·¥ç¨‹æ”¾åœ¨testé‡Œäº†ã€‚ç„¶åapplyï¼Œokã€‚</p>
<p>ç‚¹å³ä¸Šè§’è™«å­å›¾æ ‡ã€‚è‡ªåŠ¨è·³å‡ºæ¥é¡µé¢ã€‚å…³æ‰ideaï¼Œå°±æ²¡äº†ã€‚</p>
<p>urlç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šip:port&#x2F;application name</p>
<p>å¯ä»¥æ”¹åº”ç”¨çš„åå­—ï¼Œåœ¨å³ä¸Šè§’edit applicationï¼Œé€‰deploymentï¼Œä¸‹é¢contextæ”¹åå­—ã€‚é‡å¯å°±å¯ä»¥äº†ã€‚</p>
<p>ä¹Ÿå¯ä»¥æ²¡æœ‰åå­—ï¼Œåªæ˜¯ä¸€ä¸ª&#x2F;ã€‚</p>
<h3 id="3âƒ£ï¸æ‰“åŒ…åœ¨tomcatè¿è¡Œ"><a href="#3âƒ£ï¸æ‰“åŒ…åœ¨tomcatè¿è¡Œ" class="headerlink" title="3âƒ£ï¸æ‰“åŒ…åœ¨tomcatè¿è¡Œ"></a>3âƒ£ï¸æ‰“åŒ…åœ¨tomcatè¿è¡Œ</h3><p>1.é¦–å…ˆåŸºäºmavenè¿›è¡Œæ‰“åŒ…ï¼Œå°†waråŒ…å¤åˆ¶åˆ°æŸä¸ªè·¯å¾„ï¼ˆä¸æ”¹é…ç½®çš„è¯æ”¾åœ¨webappsæ–‡ä»¶å¤¹ä¸‹ï¼‰<br>2.å¯¹äºæ”¾åœ¨å…¶ä»–æ–‡ä»¶å¤¹çš„waråŒ…ï¼Œåœ¨tomcatåŒ…ä¸‹çš„confæ–‡ä»¶å¤¹ä¸‹çš„server.xmlæ–‡ä»¶å¢åŠ é…ç½®ï¼ˆwaråŒ…è·¯å¾„å¯åŠ¨ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Host&gt; æ ‡ç­¾ä¸‹</span><br><span class="line">&lt;Context docBase=&quot;/Users/liuxuan/MyProject/java/log-maven-package.war&quot; </span><br><span class="line">        path=&quot;/log&quot; </span><br><span class="line">        reloadable=&quot;true&quot; /&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>path:æŒ‡å®šè®¿é—®è¯¥Webåº”ç”¨çš„URLå…¥å£<br>docBase:æŒ‡å®šWebåº”ç”¨çš„æ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥ç»™å®šç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ç»™å®šç›¸å¯¹äº<code>&lt;Host&gt;</code>çš„appBaseå±æ€§çš„ç›¸å¯¹è·¯å¾„ï¼Œå¦‚æœWebåº”ç”¨é‡‡ç”¨å¼€æ”¾ç›®å½•ç»“æ„ï¼Œåˆ™æŒ‡å®šWebåº”ç”¨çš„ æ ¹ç›®å½•ï¼Œå¦‚æœWebåº”ç”¨æ˜¯ä¸ªwaræ–‡ä»¶ï¼Œåˆ™æŒ‡å®šwaræ–‡ä»¶çš„è·¯å¾„ã€‚<br>reloadable:å¦‚æœè¿™ä¸ªå±æ€§è®¾ä¸ºtrueï¼ŒtomcatæœåŠ¡å™¨åœ¨è¿è¡ŒçŠ¶æ€ä¸‹ä¼šç›‘è§†åœ¨WEB-INF&#x2F;classeså’ŒWEB-INF&#x2F;libç›®å½•ä¸‹classæ–‡ä»¶çš„æ”¹åŠ¨ï¼Œå¦‚æœç›‘æµ‹åˆ°æœ‰classæ–‡ä»¶è¢«æ›´æ–°çš„ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½Webåº”ç”¨ã€‚<br>Tomcatæœ¬èº«è®¾ç½®äº†Reloadableçš„å±æ€§ï¼Œæ•…Tomcatåœ¨æ£€æµ‹åˆ°classæ–‡ä»¶å‘ç”Ÿå˜åŒ–ä¹‹åï¼Œå¯¹WebAppçš„åº”ç”¨è¿›è¡Œäº†é‡æ–°åŠ è½½ï¼šå…ˆå¸è½½ï¼Œå†é‡æ–°åŠ è½½ã€‚<br>åœ¨å¼€å‘é˜¶æ®µå°†reloadableå±æ€§è®¾ä¸ºtrueï¼Œæœ‰åŠ©äºè°ƒè¯•servletå’Œå…¶å®ƒçš„classæ–‡ä»¶ï¼Œä½†è¿™æ ·ç”¨åŠ é‡æœåŠ¡å™¨è¿è¡Œè´Ÿè·ï¼Œå»ºè®®åœ¨Webåº”ç”¨çš„å‘å­˜é˜¶æ®µå°†reloadableè®¾ä¸ºfalseã€‚</p>
</blockquote>
<p>3.å¯åŠ¨tomcatï¼Œä¹‹å‰é…ç½®è¿‡ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥ä¸ç”¨åŒºtomcatçš„binç›®å½•ä¸‹å¯åŠ¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨ï¼šstartup.sh</span><br><span class="line">å…³é—­ï¼šshutdown.sh</span><br><span class="line">æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼šps -ef|grep tomcat</span><br><span class="line">æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ï¼š</span><br><span class="line">cd /usr/local/tomcat/apache-tomcat-8.5.51/logs/</span><br><span class="line">tail -200f catalina.out</span><br></pre></td></tr></table></figure>
<p>4.è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:8080/log/">http://localhost:8080/log/</a><br>5.å¤–ç½‘å¦‚ä½•è®¿é—®ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_30596023/article/details/98539676">https://blog.csdn.net/weixin_30596023/article/details/98539676</a><br>6.å¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_53324833/article/details/123802881">https://blog.csdn.net/qq_53324833/article/details/123802881</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/07/myblog/spring/springboot%20b%E7%AB%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Sweetwater">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sweetwater's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/07/myblog/spring/springboot%20b%E7%AB%99/" class="post-title-link" itemprop="url">spring bootå…¥é—¨æ•™ç¨‹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-07 08:59:17" itemprop="dateCreated datePublished" datetime="2022-03-07T08:59:17+08:00">2022-03-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-12-22 18:37:11" itemprop="dateModified" datetime="2022-12-22T18:37:11+08:00">2022-12-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Spring-Boot"><a href="#Spring-Boot" class="headerlink" title="Spring Boot"></a>Spring Boot</h3><p>spring bootæ˜¯ä¸€ä¸ªå¿«é€Ÿå¼€å‘æ¡†æ¶ï¼Œå¯ä»¥è¿…é€Ÿæ­å»ºä¸€å¥—åŸºäºspringæ¡†æ¶ä½“ç³»çš„åº”ç”¨ï¼Œæ˜¯spring cloudçš„åŸºç¡€ã€‚</p>
<p>springMVCè™½ç„¶ç®€åŒ–äº†é…ç½®ï¼Œå‡å°‘äº†å¾ˆå¤šç±»çš„æ•°é‡ï¼Œä¸€ä¸ªæ§åˆ¶å™¨å½“ä¸­å¤šä¸ªæ–¹æ³•å¯ä»¥å¯¹åº”ä¸åŒçš„ä¸šåŠ¡ï¼Œä½†æ˜¯SpringMVCçš„é…ç½®è¿˜æ˜¯æ¯”è¾ƒå¤šï¼Œæ­å»ºå·¥ç¨‹æœ‰å¾ˆå¤šé‡å¤æ­¥éª¤ï¼Œå¼€å‘é€Ÿåº¦ä¸å¤Ÿå¿«ã€‚</p>
<p>spring bootå¼€å¯äº†å„ç§è‡ªåŠ¨è£…é…ï¼Œä»è€Œç®€åŒ–ä»£ç çš„å¼€å‘ï¼Œä¸éœ€è¦ç¼–å†™å„ç§é…ç½®æ–‡ä»¶ï¼Œåªéœ€è¦å¼•å…¥ç›¸å…³ä¾èµ–å°±å¯ä»¥è¿…é€Ÿæ­å»ºä¸€ä¸ªåº”ç”¨ã€‚</p>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li><p>ä¸éœ€è¦web.xml</p>
</li>
<li><p>ä¸éœ€è¦springmvc.xml</p>
</li>
<li><p>ä¸éœ€è¦tomcatï¼ŒSpring Bootå†…åµŒäº†tomcat</p>
</li>
<li><p>ä¸éœ€è¦é…ç½®jsonè§£æï¼ˆfastjsonï¼‰ï¼Œæ”¯æŒRESTæ¶æ„</p>
</li>
<li><p>ä¸ªæ€§åŒ–é…ç½®éå¸¸ç®€å•ï¼Œè‡³å°‘éœ€è¦ç«¯å£å•¥çš„</p>
</li>
</ul>
<p>å®ƒæ˜¯ä¸€ä¸ªå¿«é€Ÿå¼€å‘æ¡†æ¶ï¼Œä¸åƒmybatisæ˜¯ä¸€ä¸ªormæ˜ å°„çš„åº”ç”¨ã€‚ç›¸å½“äºä¸€ä¸ªè„šæ‰‹æ¶ï¼Œä½¿å¾—å…¶ä»–å·¥ç§å¿«é€Ÿè¿›è¡Œå·¥ä½œï¼Œæ­å»ºä¸€ä¸ªæ•´ä½“çš„ç¯å¢ƒã€‚</p>
<h3 id="springbootæ¦‚å¿µ"><a href="#springbootæ¦‚å¿µ" class="headerlink" title="springbootæ¦‚å¿µ"></a>springbootæ¦‚å¿µ</h3><p>spring bootçš„è®¾è®¡ç›®çš„æ˜¯ç”¨æ¥ç®€åŒ–springåº”ç”¨çš„åˆå§‹æ­å»ºä»¥åŠå¼€å‘è¿‡ç¨‹ï¼Œè¯¥æ¡†æ¶ä½¿ç”¨äº†ç‰¹å®šçš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œä»è€Œä½¿å¼€å‘äººå‘˜ä¸å†éœ€è¦å®šä¹‰æ ·æ¿åŒ–çš„é…ç½®ï¼Œ</p>
<p>spring booté»˜è®¤é…ç½®äº†å¾ˆå¤šæ¡†æ¶çš„ä½¿ç”¨æ–¹å¼ï¼Œå°±åƒMavenæ•´åˆäº†æ‰€æœ‰çš„JaråŒ…ï¼Œspring bootæ•´åˆäº†æ‰€æœ‰çš„æ¡†æ¶ï¼Œé€šè¿‡å°‘é‡çš„ä»£ç å°±èƒ½åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ã€äº§å“çº§åˆ«çš„springåº”ç”¨ã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œspring bootæ˜¯ä¸€ä¸ªé›†æˆäº†springå„ç§ç»„ä»¶çš„å¿«é€Ÿå¼€å‘æ¡†æ¶ï¼Œä½œä¸ºä¸€ä¸ªç”¨æˆ·å’Œspringä¹‹é—´çš„è¿æ¥è€…ã€‚</p>
<p>spring bootæ˜¯åŸºç¡€ï¼Œspring cloudæ˜¯åŸºäºspring bootçš„ï¼Œç”¨æ¥åšåˆ†å¸ƒå¼å¾®æœåŠ¡çš„ã€‚</p>
<h4 id="spring-bootç‰¹ç‚¹"><a href="#spring-bootç‰¹ç‚¹" class="headerlink" title="spring bootç‰¹ç‚¹"></a>spring bootç‰¹ç‚¹</h4><ul>
<li>ä½¿ç”¨springé¡¹ç›®å¼•å¯¼é¡µé¢å¯ä»¥åœ¨å‡ ç§’æ„å»ºä¸€ä¸ªé¡¹ç›®ã€‚</li>
<li>æ–¹ä¾¿å¯¹å¤–è¾“å‡ºå„ç§å½¢å¼çš„æœåŠ¡ï¼Œå¦‚REST APIã€WebSocketã€Webã€Streamingã€Tasks</li>
<li>éå¸¸ç®€æ´çš„å®‰å…¨ç­–ç•¥é›†æˆ</li>
<li>æ”¯æŒå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“</li>
<li>æ”¯æŒè¿è¡ŒæœŸå†…åµŒå®¹å™¨ï¼Œå¦‚tomcatã€jetty</li>
<li>è‡ªåŠ¨ç®¡ç†ä¾èµ–</li>
</ul>
<h4 id="spring-bootä¸å¾®æœåŠ¡"><a href="#spring-bootä¸å¾®æœåŠ¡" class="headerlink" title="spring bootä¸å¾®æœåŠ¡"></a>spring bootä¸å¾®æœåŠ¡</h4><ul>
<li>spring bootçš„ä¸€ç³»åˆ—ç‰¹æ€§æœ‰åŠ©äºå®ç°å¾®æœåŠ¡æ¶æ„çš„è½åœ°ï¼Œä»ç›®å‰ä¼—å¤šçš„æŠ€æœ¯æ ˆå¯¹æ¯”æ¥çœ‹å®ƒæ˜¯javaé¢†åŸŸå¾®æœåŠ¡æ¶æ„æœ€ä¼˜è½åœ°æŠ€æœ¯ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚</li>
<li>spring cloudä¾èµ–äºspring bootã€‚</li>
<li>spring bootä¸“æ³¨äºå¿«é€Ÿå¼€å‘ä¸ªä½“å¾®æœåŠ¡ï¼Œspring cloudæ˜¯å…³æ³¨å…¨å±€çš„å¾®æœåŠ¡åè°ƒæ²»ç†æ¡†æ¶ã€‚spring bootæä¾›ç»„å»ºï¼Œspring cloudæ¥ç®¡ç†ç»„ä»¶ã€‚</li>
</ul>
<h3 id="åˆ›å»ºç¬¬ä¸€ä¸ªå·¥ç¨‹"><a href="#åˆ›å»ºç¬¬ä¸€ä¸ªå·¥ç¨‹" class="headerlink" title="åˆ›å»ºç¬¬ä¸€ä¸ªå·¥ç¨‹"></a>åˆ›å»ºç¬¬ä¸€ä¸ªå·¥ç¨‹</h3><h4 id="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºmavenå·¥ç¨‹ï¼Œå¯¼å…¥ç›¸å…³çš„ä¾èµ–"><a href="#ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºmavenå·¥ç¨‹ï¼Œå¯¼å…¥ç›¸å…³çš„ä¾èµ–" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºmavenå·¥ç¨‹ï¼Œå¯¼å…¥ç›¸å…³çš„ä¾èµ–"></a>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºmavenå·¥ç¨‹ï¼Œå¯¼å…¥ç›¸å…³çš„ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»§æ‰¿çˆ¶åŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- dependenciesä¸‹é¢å†å¼•ç›¸å…³çš„å­åŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- webå¯åŠ¨çš„jaråŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå®ä½“ç±»ï¼ŒåŠ lombok"><a href="#ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå®ä½“ç±»ï¼ŒåŠ lombok" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå®ä½“ç±»ï¼ŒåŠ lombok"></a>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå®ä½“ç±»ï¼ŒåŠ lombok</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.demo.springboot.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-12 10:42</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºStudentRepository"><a href="#ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºStudentRepository" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºStudentRepository"></a>ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºStudentRepository</h4><p>ä¹‹å‰ï¼Œéœ€è¦é…ç½®æ–‡ä»¶å»æ‰«daoå®ç°ç±»çš„åŒ…ï¼Œä½†æ˜¯springbootç¯å¢ƒå¯åŠ¨ä¹‹åï¼Œä¼šè‡ªåŠ¨è¿›è¡Œæ‰«æã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.demo.springboot.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.liuxuan.demo.springboot.entity.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-12 10:45</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Collection&lt;Student&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> Student <span class="title function_">findById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveOrUpdate</span><span class="params">(Student stu)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.demo.springboot.repository.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.liuxuan.demo.springboot.entity.Student;</span><br><span class="line"><span class="keyword">import</span> com.liuxuan.demo.springboot.repository.StudentDao;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-12 10:49</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">StudentDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨é™æ€mapä»£æ›¿æ•°æ®åº“</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Long, Student&gt; studentMap;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        studentMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        studentMap.put(<span class="number">1L</span>, <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">1L</span>, <span class="string">&quot;lili&quot;</span>, <span class="number">22</span>));</span><br><span class="line">        studentMap.put(<span class="number">2L</span>, <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">1L</span>, <span class="string">&quot;mary&quot;</span>, <span class="number">12</span>));</span><br><span class="line">        studentMap.put(<span class="number">3L</span>, <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">1L</span>, <span class="string">&quot;jade&quot;</span>, <span class="number">24</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;Student&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> studentMap.values();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Student <span class="title function_">findById</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> studentMap.get(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveOrUpdate</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">        studentMap.put(student.getId(), student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        studentMap.remove(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬å››æ­¥ï¼šåˆ›å»ºcontrolå±‚ï¼ˆè·³è¿‡äº†serviceå±‚ï¼‰"><a href="#ç¬¬å››æ­¥ï¼šåˆ›å»ºcontrolå±‚ï¼ˆè·³è¿‡äº†serviceå±‚ï¼‰" class="headerlink" title="ç¬¬å››æ­¥ï¼šåˆ›å»ºcontrolå±‚ï¼ˆè·³è¿‡äº†serviceå±‚ï¼‰"></a>ç¬¬å››æ­¥ï¼šåˆ›å»ºcontrolå±‚ï¼ˆè·³è¿‡äº†serviceå±‚ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.demo.springboot.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.liuxuan.demo.springboot.entity.Student;</span><br><span class="line"><span class="keyword">import</span> com.liuxuan.demo.springboot.repository.StudentDao;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-12 11:00</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/student&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">// è‡ªåŠ¨æ³¨å…¥ï¼Œdaoå®ç°ç±»è¦åŠ @Repositoryæ³¨è§£</span></span><br><span class="line">    <span class="keyword">private</span> StudentDao studentDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/findAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;Student&gt; <span class="title function_">findAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/findById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Student <span class="title function_">findById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">long</span> id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentDao.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// postè¯·æ±‚ï¼Œå‰ç«¯è¿”å›çš„æ˜¯jsonæ ¼å¼çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œéœ€è¦æ˜ å°„æˆå¯¹è±¡</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/sav&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> Student student)</span>&#123;</span><br><span class="line">        studentDao.saveOrUpdate(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°ç”¨putæ–¹æ³•</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Student student)</span>&#123;</span><br><span class="line">        studentDao.saveOrUpdate(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">long</span> id)</span>&#123;</span><br><span class="line">        studentDao.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬äº”æ­¥ï¼šåˆ›å»ºå¯åŠ¨ç±»"><a href="#ç¬¬äº”æ­¥ï¼šåˆ›å»ºå¯åŠ¨ç±»" class="headerlink" title="ç¬¬äº”æ­¥ï¼šåˆ›å»ºå¯åŠ¨ç±»"></a>ç¬¬äº”æ­¥ï¼šåˆ›å»ºå¯åŠ¨ç±»</h4><p>å¹³å¸¸çš„webå·¥ç¨‹éœ€è¦åœ¨tomcatéƒ¨ç½²ã€‚springbootæœ‰è‡ªå·±å†…ç½®çš„tomcatï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªå¯åŠ¨ç±»ï¼Œä½œä¸ºæ•´ä¸ªspringbootçš„å…¥å£.</p>
<p>application.javaéœ€è¦åœ¨å…¶ä»–ç»„ä»¶åŒ…çš„çˆ¶åŒ…ä¸‹ï¼Œè¦ä¸ç„¶æ‰«æä¸åˆ°ã€‚åå­—å«ä»€ä¹ˆæ— æ‰€è°“ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liuxuan.demo.springboot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-03-12 11:17</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å‚æ•°æ˜¯å¯åŠ¨ç±»çš„è¿è¡Œæ—¶ç±»ï¼Œè¿˜æœ‰mainæ–¹æ³•é‡Œçš„args</span></span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<p> Tomcat started on port(s): 8080 (http) with context path â€˜â€™</p>
<p>Started Application in 2.772 seconds (JVM running for 3.857)</p>
<p>è¡¨ç¤ºéƒ¨ç½²æˆåŠŸï¼Œå¯ä»¥ç›´æ¥è®¿é—®äº†ã€‚<a target="_blank" rel="noopener" href="http://localhost:8080/student/findAll">http://localhost:8080/student/findAll</a></p>
<p>å› ä¸ºæ˜¯åŸºäºrestçš„ï¼Œæ‰€ä»¥å¯ä»¥ç”¨postmanå·¥å…·æ¥æµ‹è¯•ã€‚ï¼ˆpostè¯·æ±‚å‘jsonï¼Œé€‰bodyâ€“rawâ€“jsonï¼‰</p>
<h4 id="ç¬¬å…­æ­¥ï¼šå¦‚æœæƒ³è¦æ›´æ”¹ç«¯å£å·ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æ›´æ”¹ã€‚"><a href="#ç¬¬å…­æ­¥ï¼šå¦‚æœæƒ³è¦æ›´æ”¹ç«¯å£å·ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æ›´æ”¹ã€‚" class="headerlink" title="ç¬¬å…­æ­¥ï¼šå¦‚æœæƒ³è¦æ›´æ”¹ç«¯å£å·ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æ›´æ”¹ã€‚"></a>ç¬¬å…­æ­¥ï¼šå¦‚æœæƒ³è¦æ›´æ”¹ç«¯å£å·ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æ›´æ”¹ã€‚</h4><p>resourceé‡Œæ–°å»ºä¸€ä¸ªapplication.ymlæ–‡ä»¶ã€‚æ–‡ä»¶åä¸èƒ½å˜ã€‚</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9090</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„9090å‰æœ‰ä¸ªç©ºæ ¼ã€‚</p>
<h3 id="springbootæ•´åˆJSP"><a href="#springbootæ•´åˆJSP" class="headerlink" title="springbootæ•´åˆJSP"></a>springbootæ•´åˆJSP</h3><p>æ–°å»ºmavenå·¥ç¨‹ï¼Œé€‰æ‹©archetypeï¼Œé€‰æ‹©webappï¼ˆwebæ¨¡ç‰ˆï¼Œç”¨æ¥è®¿é—®JSP.ï¼‰</p>
<p>ä¸Šä¸€ä¸ªå·¥ç¨‹åªå±•ç¤ºäº†æ•°æ®ï¼Œä½†æ˜¯æ²¡æœ‰è§†å›¾viewã€‚</p>
<p>JSPï¼ˆå…¨ç§°JavaServer Pagesï¼‰æ˜¯ç”±Sun Microsystemså…¬å¸ä¸»å¯¼åˆ›å»ºçš„ä¸€ç§åŠ¨æ€ç½‘é¡µæŠ€æœ¯æ ‡å‡†ã€‚JSPéƒ¨ç½²äºç½‘ç»œæœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥å“åº”å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚ï¼Œå¹¶æ ¹æ®è¯·æ±‚å†…å®¹åŠ¨æ€åœ°ç”ŸæˆHTMLã€XMLæˆ–å…¶ä»–æ ¼å¼æ–‡æ¡£çš„Webç½‘é¡µï¼Œç„¶åè¿”å›ç»™è¯·æ±‚è€…ã€‚JSPæŠ€æœ¯ä»¥Javaè¯­è¨€ä½œä¸ºè„šæœ¬è¯­è¨€ï¼Œä¸ºç”¨æˆ·çš„HTTPè¯·æ±‚æä¾›æœåŠ¡ï¼Œå¹¶èƒ½ä¸æœåŠ¡å™¨ä¸Šçš„å…¶å®ƒJavaç¨‹åºå…±åŒå¤„ç†å¤æ‚çš„ä¸šåŠ¡éœ€æ±‚ã€‚</p>
<p>å‰åç«¯åˆ†ç¦»ï¼Œjspæ›´åƒå‰ç«¯çš„ç»„ä»¶ï¼Œç•¥ã€‚</p>
<p>javaç¨‹åºçš„å¯¹è±¡ï¼Œåºåˆ—åŒ–ä¸ºjsonå­—ç¬¦ä¸²ï¼Œä¼ é€’ç»™htmlè¿›è¡Œæ˜¾ç¤ºã€‚jspå°±æ˜¯æä¾›è§†å›¾çš„ã€‚controllerç”¨ModeAndViewã€‚</p>
<h3 id="spring-boot-html"><a href="#spring-boot-html" class="headerlink" title="spring boot html"></a>spring boot html</h3><p>spring mvcé‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼å±•ç¤ºjavaå¯¹è±¡ï¼Œéœ€è¦é€šè¿‡jsonå­—ç¬¦ä¸²è¿›è¡Œè¯»å–ï¼Œä½†æ˜¯spring bootå¯ä»¥åœ¨htmlä¸­è¯»å–javaå¯¹è±¡ã€‚</p>
<p>spring bootå¯ä»¥ç»“åˆthymeleafæ¨¡ç‰ˆæ¥æ•´åˆhtmlï¼Œä½¿ç”¨åŸç”Ÿçš„htmlä½œä¸ºè§†å›¾ã€‚</p>
<p>Thymeleafæ¨¡ç‰ˆæ˜¯é¢å‘Webå’Œç‹¬ç«‹ç¯å¢ƒçš„javaæ¨¡ç‰ˆå¼•æ“ï¼Œèƒ½å¤Ÿå¤„ç†htmlã€xmlã€javascriptã€cssç­‰ã€‚</p>
<p>å‰ç«¯ï¼Œç•¥ã€‚</p>
<h3 id="spring-bootæ•°æ®æ ¡éªŒ"><a href="#spring-bootæ•°æ®æ ¡éªŒ" class="headerlink" title="spring bootæ•°æ®æ ¡éªŒ"></a>spring bootæ•°æ®æ ¡éªŒ</h3><p>ç”¨æ¥ç¡®ä¿å®¢æˆ·ç«¯è¾“å…¥çš„æ•°æ®æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦ç”¨åŒ…è£…ç±»ç±»å‹ï¼Ÿå› ä¸ºå‰å°æœ‰å¯èƒ½æ²¡ç©¿å€¼ï¼Œå°±ä¼šæ˜¯nullå€¼ï¼Œéœ€è¦åŒ…è£…ç±»ç±»å‹æ¥æ¥æ”¶ã€‚</p>
<p>notnullæ˜¯å‹æ ¹æ²¡ç©¿å€¼ï¼Œnotemptyæ˜¯ä¼ çš„ç©ºã€‚</p>
<p>è¿™äº›æ ¡éªŒå¯ä»¥äº¤ç»™å‰ç«¯ï¼Œä½†æ˜¯åç«¯æœ‰çš„åŸå› æ˜¯é˜²æ­¢æ”»å‡»ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.validator.constraints.Length;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Min;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotEmpty;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotNull;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;idä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@NotEmpty(message = &quot;å§“åä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Length(min = 2,message = &quot;å§“åé•¿åº¦ä¸èƒ½å°äº2ä½&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Min(value = 16,message = &quot;å¹´é¾„å¿…é¡»å¤§äº16å²&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/validator&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">validatorUser</span><span class="params">(<span class="meta">@Valid</span> User user,BindingResult bindingResult)</span>&#123;</span><br><span class="line">  System.out.println(user);</span><br><span class="line">  <span class="keyword">if</span>(bindingResult.hasErrors())&#123;</span><br><span class="line">    List&lt;ObjectError&gt; list = bindingResult.getAllErrors();</span><br><span class="line">    <span class="keyword">for</span>(ObjectError objectError:list)&#123;</span><br><span class="line">      System.out.println(objectError.getCode()+<span class="string">&quot;-&quot;</span>+objectError.getDefaultMessage());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨@Validè¡¨ç¤ºè‡ªåŠ¨å»æ ¡éªŒï¼Œå°†é”™è¯¯ä¼ ç»™BindingResultã€‚getCodeæ˜¯æ³¨è§£åç§°ã€‚</p>
<h3 id="spring-bootæ•´åˆjdbc"><a href="#spring-bootæ•´åˆjdbc" class="headerlink" title="spring bootæ•´åˆjdbc"></a>spring bootæ•´åˆjdbc</h3><ul>
<li>pom.xmlï¼š</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>application.yml</li>
</ul>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9090</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">thymeleaf:</span></span><br><span class="line">    <span class="attr">prefix:</span> <span class="string">classpath:/templates/</span></span><br><span class="line">    <span class="attr">suffix:</span> <span class="string">.html</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="string">HTML5</span></span><br><span class="line">    <span class="attr">encoding:</span> <span class="string">UTF-8</span></span><br><span class="line">  <span class="attr">datasource:</span> <span class="string">//è¿æ¥æ•°æ®åº“ç›¸å…³</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span> </span><br></pre></td></tr></table></figure>

<ul>
<li>User</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.validator.constraints.Length;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Min;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotEmpty;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotNull;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;idä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@NotEmpty(message = &quot;å§“åä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Length(min = 2,message = &quot;å§“åé•¿åº¦ä¸èƒ½å°äº2ä½&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Min(value = 60,message = &quot;æˆç»©å¿…é¡»å¤§äº60åˆ†&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> score;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>UserRepository</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.southwind.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserRepository</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(User user)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>UserRepositoryImplï¼ŒjdbcTemplateä¸¤ç§æ–¹æ³•ï¼šqueryã€updateã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.repository.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.southwind.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.southwind.repository.UserRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.BeanPropertyRowMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRepositoryImpl</span> <span class="keyword">implements</span> <span class="title class_">UserRepository</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.query(<span class="string">&quot;select * from user&quot;</span>,<span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;&gt;(User.class));</span><br><span class="line">    &#125;       <span class="comment">// è§£æå®ä½“ç±»ï¼Œæ‹¬å·å†…ä¼ å…¥è¦è§£ææˆä¸ºçš„å®ä½“ç±»</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.queryForObject(<span class="string">&quot;select * from user where id = ?&quot;</span>,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;id&#125;,<span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;&gt;(User.class));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        jdbcTemplate.update(<span class="string">&quot;insert into user(name,score) values(?,?)&quot;</span>,user.getName(),user.getScore());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        jdbcTemplate.update(<span class="string">&quot;update user set name = ?,score = ? where id = ?&quot;</span>,user.getName(),user.getScore(),user.getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        jdbcTemplate.update(<span class="string">&quot;delete from user where id = ?&quot;</span>,id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Handler</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.southwind.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.southwind.repository.UserRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/findAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/findById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">long</span> id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userRepository.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">        userRepository.save(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">        userRepository.update(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/deleteById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">long</span> id)</span>&#123;</span><br><span class="line">        userRepository.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="spring-bootæ•´åˆmybatis"><a href="#spring-bootæ•´åˆmybatis" class="headerlink" title="spring bootæ•´åˆmybatis"></a>spring bootæ•´åˆmybatis</h3><p>mybatisæ˜¯åŠè‡ªåŠ¨åŒ–çš„ï¼Œæ„æ€æ˜¯å¾—è‡ªå·±å†™sqlè¯­å¥ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦mapper.xml</p>
<h4 id="ç¬¬ä¸€æ­¥ï¼šæ–°å»ºmavenå·¥ç¨‹"><a href="#ç¬¬ä¸€æ­¥ï¼šæ–°å»ºmavenå·¥ç¨‹" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šæ–°å»ºmavenå·¥ç¨‹"></a>ç¬¬ä¸€æ­¥ï¼šæ–°å»ºmavenå·¥ç¨‹</h4><p>pom.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»§æ‰¿çˆ¶åŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- dependenciesä¸‹é¢å†å¼•ç›¸å…³çš„å­åŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- webå¯åŠ¨çš„jaråŒ…ï¼Œä¸ç”¨å†™ç‰ˆæœ¬ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- mybatisè·Ÿspringbootæ•´åˆçš„ï¼Œmybatisè‡ªå·±å‡ºçš„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--mysqlçš„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- lombok --&gt;</span></span><br><span class="line">			 <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ•°æ®è¡¨"><a href="#ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ•°æ®è¡¨" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ•°æ®è¡¨"></a>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ•°æ®è¡¨</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span> student&#123;</span><br><span class="line">	id <span class="type">int</span> <span class="keyword">primary key</span> auto_increment,</span><br><span class="line">	name <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line">	score <span class="keyword">double</span>,</span><br><span class="line">	birthday <span class="type">date</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºå®ä½“ç±»"><a href="#ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºå®ä½“ç±»" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºå®ä½“ç±»"></a>ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºå®ä½“ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.validator.constraints.Length;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Min;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotEmpty;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotNull;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;idä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@NotEmpty(message = &quot;å§“åä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Length(min = 2,message = &quot;å§“åé•¿åº¦ä¸èƒ½å°äº2ä½&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Min(value = 60,message = &quot;æˆç»©å¿…é¡»å¤§äº60åˆ†&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> score;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬å››æ­¥ï¼šåˆ›å»ºrepositoryæ¥å£"><a href="#ç¬¬å››æ­¥ï¼šåˆ›å»ºrepositoryæ¥å£" class="headerlink" title="ç¬¬å››æ­¥ï¼šåˆ›å»ºrepositoryæ¥å£"></a>ç¬¬å››æ­¥ï¼šåˆ›å»ºrepositoryæ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.southwind.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserRepository</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">(<span class="type">int</span> index,<span class="type">int</span> limit)</span>;</span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(User user)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">count</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬äº”æ­¥ï¼šåˆ›å»ºæ¥å£å¯¹åº”çš„mapper-xml"><a href="#ç¬¬äº”æ­¥ï¼šåˆ›å»ºæ¥å£å¯¹åº”çš„mapper-xml" class="headerlink" title="ç¬¬äº”æ­¥ï¼šåˆ›å»ºæ¥å£å¯¹åº”çš„mapper.xml"></a>ç¬¬äº”æ­¥ï¼šåˆ›å»ºæ¥å£å¯¹åº”çš„mapper.xml</h4><p>æ”¾åœ¨resourceæ–‡ä»¶å¤¹ä¸‹çš„mappingæ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line">        <span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.southwind.mapper.UserRepository&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from user limit #&#123;param1&#125;,#&#123;param2&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;count&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        select count(id) from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;long&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        insert into user(name,score) values(#&#123;name&#125;,#&#123;score&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        update user set name = #&#123;name&#125;,score = #&#123;score&#125; where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;long&quot;</span>&gt;</span>   //å¦‚æœæ˜¯åŒ…è£…ç±»ç±»å‹ï¼Œâ€œjava.lang.Longâ€</span><br><span class="line">        delete from user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬å…­æ­¥ï¼šåˆ›å»ºcontrollerå±‚"><a href="#ç¬¬å…­æ­¥ï¼šåˆ›å»ºcontrollerå±‚" class="headerlink" title="ç¬¬å…­æ­¥ï¼šåˆ›å»ºcontrollerå±‚"></a>ç¬¬å…­æ­¥ï¼šåˆ›å»ºcontrollerå±‚</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.controller;</span><br><span class="line"><span class="keyword">import</span> com.southwind.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.southwind.mapper.UserRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>   <span class="comment">//è§†é¢‘ä¸­æ˜¯ @RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">limit</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/findAll/&#123;page&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">findAll</span><span class="params">(<span class="meta">@PathVariable(&quot;page&quot;)</span> <span class="type">int</span> page)</span>&#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> (page-<span class="number">1</span>)*limit;</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;list&quot;</span>,userRepository.findAll(index,limit));</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;page&quot;</span>,page);</span><br><span class="line">        <span class="comment">//è®¡ç®—æ€»é¡µæ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> userRepository.count();</span><br><span class="line">        <span class="type">int</span> <span class="variable">pages</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(count%limit == <span class="number">0</span>)&#123;</span><br><span class="line">            pages = count/limit;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            pages = count/limit+<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;pages&quot;</span>,pages);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/deleteById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">long</span> id)</span>&#123;</span><br><span class="line">        userRepository.deleteById(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/mapper/findAll/1&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/findById&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">findById</span><span class="params">(<span class="meta">@RequestParam(&quot;id&quot;)</span> <span class="type">long</span> id)</span>&#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;user&quot;</span>,userRepository.findById(id));</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;update&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        userRepository.update(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/mapper/findAll/1&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        userRepository.save(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/mapper/findAll/1&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/redirect/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">redirect</span><span class="params">(<span class="meta">@PathVariable(&quot;name&quot;)</span> String name)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>@RequestBodyæ˜¯æŠŠè¯·æ±‚é‡Œçš„jsonè½¬æ¢æˆjavaå¯¹è±¡</p>
<p>@RequestBodyæ˜¯æŠŠjavaå¯¹è±¡è½¬æˆjson</p>
<p>@PathVariableç›´æ¥ä»å¯¹è±¡ä¸­ä¼ æ•°æ®çš„</p>
<p>@RequestParamä¹Ÿæ˜¯ä»å¯¹è±¡ä¸­å–æ•°æ®ï¼Ÿ</p>
</blockquote>
<h4 id="ç¬¬ä¸ƒæ­¥ï¼šé…ç½®yml"><a href="#ç¬¬ä¸ƒæ­¥ï¼šé…ç½®yml" class="headerlink" title="ç¬¬ä¸ƒæ­¥ï¼šé…ç½®yml"></a>ç¬¬ä¸ƒæ­¥ï¼šé…ç½®yml</h4><p>resourceæ–‡ä»¶å¤¹ä¸‹application.yml</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9090</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">thymeleaf:</span></span><br><span class="line">    <span class="attr">prefix:</span> <span class="string">classpath:/templates/</span></span><br><span class="line">    <span class="attr">suffix:</span> <span class="string">.html</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="string">HTML5</span></span><br><span class="line">    <span class="attr">encoding:</span> <span class="string">UTF-8</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:/mapping/*.xml</span>   <span class="string">//æ³¨å…¥mapper</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.southwind.entity</span>    <span class="string">//è‡ªåŠ¨å°†åŒ…åæå‡ºæ¥ï¼Œæ‰€ä»¥mapperé‡Œä¸ç”¨å†™åŒ…åäº†ã€‚</span></span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬å…«æ­¥ï¼šåˆ›å»ºå¯åŠ¨ç±»"><a href="#ç¬¬å…«æ­¥ï¼šåˆ›å»ºå¯åŠ¨ç±»" class="headerlink" title="ç¬¬å…«æ­¥ï¼šåˆ›å»ºå¯åŠ¨ç±»"></a>ç¬¬å…«æ­¥ï¼šåˆ›å»ºå¯åŠ¨ç±»</h4><p>åœ¨controllerã€entityçš„å¤–éƒ¨æ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.liuxuan.demo.springboot;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author: liuxuan</span><br><span class="line"> * @date: 2022-03-12 11:17</span><br><span class="line"> **/</span><br><span class="line">@SpringBootApplication</span><br><span class="line">@MapperScan(com.liuxuan.repository)  //å› ä¸ºmapperæ¥å£æ˜¯mybatisçš„ï¼Œæ‰€ä»¥åŠ è¿™ä¸ªæ³¨è§£ç”¨æ¥æ‰«æï¼ŒæŠŠå®ƒçš„å®ä¾‹åŒ–å¯¹è±¡åŠ åˆ°iocå®¹å™¨ä¸­ã€‚</span><br><span class="line">public class Application &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // å‚æ•°æ˜¯å¯åŠ¨ç±»çš„è¿è¡Œæ—¶ç±»ï¼Œè¿˜æœ‰mainæ–¹æ³•é‡Œçš„args</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬ä¹æ­¥ï¼šHTML"><a href="#ç¬¬ä¹æ­¥ï¼šHTML" class="headerlink" title="ç¬¬ä¹æ­¥ï¼šHTML"></a>ç¬¬ä¹æ­¥ï¼šHTML</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/mapper/save&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        ç”¨æˆ·å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        ç”¨æˆ·æˆç»©ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;score&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/mapper/update&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        ç”¨æˆ·IDï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;user.id&#125;&quot;</span> <span class="attr">readonly</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        ç”¨æˆ·å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;user.name&#125;&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        ç”¨æˆ·æˆç»©ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;score&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;user.score&#125;&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/jquery-3.3.1.min.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#first&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> page = $(<span class="string">&quot;#page&quot;</span>).<span class="title function_">text</span>();</span></span><br><span class="line"><span class="language-javascript">                page = <span class="built_in">parseInt</span>(page);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(page == <span class="number">1</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>=<span class="string">&quot;/mapper/findAll/1&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#previous&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> page = $(<span class="string">&quot;#page&quot;</span>).<span class="title function_">text</span>();</span></span><br><span class="line"><span class="language-javascript">                page = <span class="built_in">parseInt</span>(page);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(page == <span class="number">1</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                page = page-<span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>=<span class="string">&quot;/mapper/findAll/&quot;</span>+page;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#next&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> page = $(<span class="string">&quot;#page&quot;</span>).<span class="title function_">text</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> pages = $(<span class="string">&quot;#pages&quot;</span>).<span class="title function_">text</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(page == pages)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                page = <span class="built_in">parseInt</span>(page);</span></span><br><span class="line"><span class="language-javascript">                page = page+<span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>=<span class="string">&quot;/mapper/findAll/&quot;</span>+page;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#last&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> page = $(<span class="string">&quot;#page&quot;</span>).<span class="title function_">text</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> pages = $(<span class="string">&quot;#pages&quot;</span>).<span class="title function_">text</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(page == pages)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>=<span class="string">&quot;/mapper/findAll/&quot;</span>+pages;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç”¨æˆ·ä¿¡æ¯<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>ç”¨æˆ·ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>ç”¨æˆ·å<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>æˆç»©<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;user:$&#123;list&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.id&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.name&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.score&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/mapper/deleteById/&#123;id&#125;(id=$&#123;user.id&#125;)&#125;&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/mapper/findById(id=$&#123;user.id&#125;)&#125;&quot;</span>&gt;</span>ä¿®æ”¹<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;first&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;previous&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span>&gt;</span>ä¸Šä¸€é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;page&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;page&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>/<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;pages&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;pages&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;next&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span>&gt;</span>ä¸‹ä¸€é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;last&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span>&gt;</span>å°¾é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/mapper/redirect/save&quot;</span>&gt;</span>æ·»åŠ ç”¨æˆ·<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="spring-bootæ•´åˆspring-data-jpa"><a href="#spring-bootæ•´åˆspring-data-jpa" class="headerlink" title="spring bootæ•´åˆspring data jpa"></a>spring bootæ•´åˆspring data jpa</h3><p>JPAæ˜¯ä¸€å¥—æŒä¹…å±‚è§„èŒƒï¼Œå®šä¹‰äº†ä¸€ç³»åˆ—ormæ¥å£ï¼Œéœ€è¦å®ç°æ‰èƒ½ä½¿ç”¨ã€‚</p>
<p>Hibernateæ¡†æ¶å°±æ˜¯ä¸€ä¸ªjpaå®ç°ã€‚</p>
<p>spring data jpaä¸æ˜¯å¯¹jpaè§„èŒƒçš„å…·ä½“å®ç°ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œåº•å±‚é€šè¿‡Hibernateå®ç°ã€‚</p>
<h3 id="spring-bootæ•´åˆspring-data-mongoDB"><a href="#spring-bootæ•´åˆspring-data-mongoDB" class="headerlink" title="spring bootæ•´åˆspring data mongoDB"></a>spring bootæ•´åˆspring data mongoDB</h3><h3 id="spring-bootæ•´åˆspring-data-redis"><a href="#spring-bootæ•´åˆspring-data-redis" class="headerlink" title="spring bootæ•´åˆspring data redis"></a>spring bootæ•´åˆspring data redis</h3><h3 id="spring-bootæ•´åˆspring-security"><a href="#spring-bootæ•´åˆspring-security" class="headerlink" title="spring bootæ•´åˆspring security"></a>spring bootæ•´åˆspring security</h3><p>æ¥æºï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1v4411G72q?spm_id_from=333.999.0.0">https://www.bilibili.com/video/BV1v4411G72q?spm_id_from=333.999.0.0</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/12/myblog/spring/Spring%20b%E7%AB%99%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Sweetwater">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sweetwater's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/12/myblog/spring/Spring%20b%E7%AB%99%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">spring Bç«™å­¦ä¹ ç¬”è®°</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-01-12 13:18:21" itemprop="dateCreated datePublished" datetime="2022-01-12T13:18:21+08:00">2022-01-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-20 15:39:35" itemprop="dateModified" datetime="2023-08-20T15:39:35+08:00">2023-08-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">javaå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Day-1"><a href="#Day-1" class="headerlink" title="Day 1"></a>Day 1</h2><h3 id="bean"><a href="#bean" class="headerlink" title="bean"></a>bean</h3><p>ç†å¿µï¼šIOCï¼ˆinversion of controlï¼‰AOPï¼ˆaspect oriented programmingï¼‰æ§åˆ¶åè½¬ã€é¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚</p>
<p>1 ã€JavaBeanï¼šä¸€ç§javaè¯­è¨€å†™æˆçš„å¯é‡ç”¨ç»„ä»¶ï¼Œæ›´å¤šæ˜¯ä¸€ç§è§„èŒƒï¼Œå¯ä»¥è¢«å…¶å®ƒçš„ç¨‹åºå‘˜æˆ–è€…æ¡†æ¶ä½¿ç”¨ï¼ŒåŒ…å«ä¸€ç»„setå’Œgetæ–¹æ³•çš„javaå¯¹è±¡ï¼Œå¯ä»¥ä½¿åº”ç”¨ç¨‹åºæ›´åŠ é¢å‘å¯¹è±¡ï¼ŒæŠŠæ•°æ®å°è£…èµ·æ¥ï¼ŒæŠŠåº”ç”¨çš„ä¸šåŠ¡é€»è¾‘å’Œæ˜¾ç¤ºé€»è¾‘åˆ†å¼€ï¼Œé™ä½äº†å¼€å‘çš„å¤æ‚æ€§å’Œç»´æŠ¤æˆæœ¬ã€‚</p>
<p>2.pojoï¼šplain ordinary java objectï¼Œç®€å•çš„javaå¯¹è±¡ï¼Œé‚£äº›æ²¡æœ‰ç»§æ‰¿ä»»ä½•ç±»ã€ä¹Ÿæ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼Œæ›´æ²¡æœ‰è¢«å…¶å®ƒæ¡†æ¶ä¾µå…¥çš„javaå¯¹è±¡ã€‚ä¸å…è®¸æœ‰ä¸šåŠ¡æ–¹æ³•ï¼Œä¹Ÿä¸èƒ½æºå¸¦connectionä¹‹ç±»çš„æ–¹æ³•ï¼Œå®é™…å°±æ˜¯æ™®é€šJavaBeansã€‚</p>
<p>pojoç±»å’ŒBeanå‡ç”¨äºå®šä¹‰Javaå¯¹è±¡ï¼Œä»¥æé«˜å…¶å¯è¯»æ€§å’Œå¯é‡ç”¨æ€§ã€‚pojoæ²¡æœ‰å…¶ä»–é™åˆ¶ï¼Œè€Œbeanæ˜¯å…·æœ‰æŸäº›é™åˆ¶çš„ç‰¹æ®Špojoã€‚</p>
<p>SpringBeanæ˜¯å—Springç®¡ç†çš„å¯¹è±¡ï¼Œæ‰€æœ‰èƒ½å—Springå®¹å™¨ç®¡ç†çš„å¯¹è±¡éƒ½å¯ä»¥æˆä¸ºSpringBeanã€‚Springä¸­çš„beanï¼Œæ˜¯é€šè¿‡é…ç½®æ–‡ä»¶ã€javaconfigç­‰çš„è®¾ç½®ï¼Œç”±Springè‡ªåŠ¨å®ä¾‹åŒ–ï¼Œç”¨å®Œåè‡ªåŠ¨é”€æ¯çš„å¯¹è±¡ã€‚</p>
<p>3.entityï¼š Entity Beanæ˜¯åŸŸæ¨¡å‹å¯¹è±¡ï¼Œç”¨äºå®ç°O&#x2F;Ræ˜ å°„ï¼Œè´Ÿè´£å°†æ•°æ®åº“ä¸­çš„è¡¨è®°å½•æ˜ å°„ä¸ºå†…å­˜ä¸­çš„Entityå¯¹è±¡ï¼Œäº‹å®ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªEntity Beanå¯¹è±¡ç›¸å½“äºæ–°å»ºä¸€æ¡è®°å½•ï¼Œåˆ é™¤ä¸€ä¸ª Entity Beanä¼šåŒæ—¶ä»æ•°æ®åº“ä¸­åˆ é™¤å¯¹åº”è®°å½•ï¼Œä¿®æ”¹ä¸€ä¸ªEntity Beanæ—¶ï¼Œå®¹å™¨ä¼šè‡ªåŠ¨å°†Entity Beançš„çŠ¶æ€å’Œæ•°æ®åº“åŒæ­¥ã€‚</p>
<h3 id="IOCå®¹å™¨"><a href="#IOCå®¹å™¨" class="headerlink" title="IOCå®¹å™¨"></a>IOCå®¹å™¨</h3><p>é‡Œé¢è£…çš„æ˜¯javaå¯¹è±¡ï¼Œåƒä¸€ä¸ªå†œè´¸å¸‚åœºã€‚</p>
<p>ä¸æ˜¯ä»€ä¹ˆæŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œå°±æ˜¯å°†åŸæœ¬åœ¨ç¨‹åºä¸­æ‰‹åŠ¨åˆ›å»ºå¯¹è±¡çš„æ§åˆ¶æƒï¼Œäº¤ç»™springæ¡†æ¶æ¥ç®¡ç†ã€‚</p>
<p>ä»¥å¾€çš„æ€æƒ³æ˜¯ï¼šè‹¥è¦ä½¿ç”¨æŸä¸ªå¯¹è±¡ï¼Œè‡ªå·±å»è´Ÿè´£å¯¹è±¡çš„åˆ›å»ºã€‚</p>
<p>åè½¬çš„æ€æƒ³ï¼šè‹¥è¦ä½¿ç”¨æŸä¸ªå¯¹è±¡ï¼Œåªéœ€è¦ä»springå®¹å™¨ä¸­è·å–éœ€è¦ä½¿ç”¨çš„å¯¹è±¡ï¼Œä¸å…³å¿ƒå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯æŠŠåˆ›å»ºå¯¹è±¡çš„æ§åˆ¶æƒåè½¬ç»™äº†springæ¡†æ¶ã€‚</p>
<p>å…·ä½“ä¾‹å­ï¼šè¦åšä¸€ä¸ªé’æ¤’è‚‰ä¸ï¼ŒåŸæœ¬æ˜¯éœ€è¦ç§é’æ¤’å’Œå…»çŒªçš„ï¼Œè€Œæœ‰äº†springï¼Œåªéœ€è¦å»å†œè´¸å¸‚åœºä¹°é’æ¤’å’ŒçŒªè‚‰ï¼Œå°±å¯ä»¥ã€‚</p>
<p>springå®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://spring.io/">https://spring.io</a></p>
<h2 id="Day-2"><a href="#Day-2" class="headerlink" title="Day 2"></a>Day 2</h2><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>mavenä»“åº“ï¼š<a target="_blank" rel="noopener" href="https://mvnrepository.com/">https://mvnrepository.com</a></p>
<p>releaseç¨³å®šç‰ˆæœ¬ã€‚ </p>
<h3 id="springæ¡†æ¶æ¦‚å¿µ"><a href="#springæ¡†æ¶æ¦‚å¿µ" class="headerlink" title="springæ¡†æ¶æ¦‚å¿µ"></a>springæ¡†æ¶æ¦‚å¿µ</h3><p>springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å¼€æºçš„JavaEEæ¡†æ¶ã€‚</p>
<p>è½»é‡çº§ï¼šä½“ç§¯æ¯”è¾ƒå°ï¼Œé‡Œé¢çš„jaråŒ…æ¯”è¾ƒå°‘ã€‚è§£å†³ä¼ä¸šåº”ç”¨å¼€å‘çš„å¤æ‚æ€§ã€‚</p>
<p>springæœ‰ä¸¤ä¸ªæ ¸å¿ƒå†…å®¹ï¼šIOCæ§åˆ¶åè½¬ï¼ŒåŸå§‹éœ€è¦newä¸ªç±»æ¥åˆ›å»ºå¯¹è±¡ï¼Œè€Œiocå°†åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹äº¤ç»™springã€‚AOPé¢å‘åˆ‡é¢ï¼Œç¨‹åºä¸­æ‰©å±•ä¸ªåŠŸèƒ½ï¼ŒåŸå§‹éœ€è¦ä¿®æ”¹æºä»£ç æ¥å®ç°ï¼Œè€Œspringä¸éœ€è¦ä¿®æ”¹ä»£ç è¿›è¡ŒåŠŸèƒ½å¢å¼ºã€‚å½“ç„¶è¿˜æœ‰äº‹åŠ¡ã€mvcç­‰æ“ä½œã€‚</p>
<p>springæ¡†æ¶çš„ç›¸å…³ç‰¹ç‚¹ï¼š1.æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘ï¼Œiocåˆ›å»ºå¯¹è±¡åŒ…æ‹¬è°ƒç”¨é€šè¿‡springå®ç°ï¼Œä½¿å¾—è€¦åˆåº¦é™ä½ã€‚2.Aopç¼–ç¨‹æ”¯æŒã€‚3.æ–¹ä¾¿ç¨‹åºæµ‹è¯•ã€‚4.æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶ï¼šhibernateã€strutsã€mybatisã€‚5.é™ä½javaEE APIçš„ä½¿ç”¨ï¼šjdbcç­‰ã€‚6.æ–¹ä¾¿è¿›è¡Œäº‹åŠ¡æ“ä½œã€‚</p>
<p>ä¸‹è½½å®˜ç½‘ï¼šspring.ioï¼Œåè·ŸGAçš„æ˜¯ç¨³å®šç‰ˆæœ¬ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://repo.spring.io/ui/native/release/org/springframework/spring/">https://repo.spring.io/ui/native/release/org/springframework/spring/</a> 5.2.6ç‰ˆæœ¬ã€‚ä¸‹è½½spring-5.2.6.RELEASE-dist.zipã€‚docsæ–‡ä»¶å¤¹ä¸‹æ˜¯ä¸€äº›æ–‡æ¡£ã€libsæ˜¯ä¸€äº›jaråŒ…ã€schemaæ˜¯ä¸€äº›é…ç½®æ–‡ä»¶ã€‚jaråŒ…ä¸­æ¯ä¸€ç§éƒ½æœ‰ä¸‰ä¸ªï¼šjaråŒ…ã€æ–‡æ¡£ã€æºä»£ç ã€‚</p>
<h3 id="spring5æ¨¡å—"><a href="#spring5æ¨¡å—" class="headerlink" title="spring5æ¨¡å—"></a>spring5æ¨¡å—</h3><p>ä»ä¸‹å¾€ä¸Š</p>
<p>testç›¸å…³æµ‹è¯•</p>
<p>Core Containerï¼šåŒ…å«beansã€coreï¼ˆå‰ä¸¤ä¸ªå¯¹åº”IOCï¼‰ã€contextã€expressionã€‚åŸºæœ¬åŠŸèƒ½è‡³å°‘è¦æœ‰è¿™å››ä¸ªjaråŒ…ã€‚commons-loggingåŒ…æ—¥å¿—ç›¸å…³çš„jaråŒ…ã€‚</p>
<p>å†å¾€ä¸Šæ˜¯Aopï¼Œå†å¾€ä¸Šæ˜¯æ•°æ®è®¿é—®éƒ¨åˆ†å’Œç½‘ç»œéƒ¨åˆ†ã€‚</p>
<h3 id="å¯¼å…¥jaråŒ…ï¼Œioc-xmlæ¡ˆä¾‹"><a href="#å¯¼å…¥jaråŒ…ï¼Œioc-xmlæ¡ˆä¾‹" class="headerlink" title="å¯¼å…¥jaråŒ…ï¼Œioc+xmlæ¡ˆä¾‹"></a>å¯¼å…¥jaråŒ…ï¼Œioc+xmlæ¡ˆä¾‹</h3><p>ä¸ç”¨mavençš„æƒ…å†µä¸‹ï¼Œå·¥ç¨‹ä¸‹æ–°å»ºlibæ–‡ä»¶å¤¹ï¼Œå°†è¦ç”¨çš„jaråŒ…ï¼ˆåªè¦jaråŒ…ï¼‰å¤åˆ¶åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼Œå†åœ¨file-project structureä¸­ï¼Œé€‰æ‹©moduleï¼ŒåŠ +å·å¯¼å…¥ç›¸å…³çš„jaråŒ…ã€‚</p>
<p>æ¢ç©¶iocï¼Œåˆ›å»ºä¸€ä¸ªæ™®é€šçš„ç±»ï¼Œç±»å†…åˆ›å»ºä¸€ä¸ªæ™®é€šçš„æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">    	System.out.println(<span class="string">&quot;add&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ™®é€šçš„åˆ›å»ºå¯¹è±¡æ˜¯é€šè¿‡newæ¥å®ç°ï¼Œç”¨springåˆ›å»ºå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶åšåˆ°ï¼Œå¯ä»¥é€šè¿‡æ³¨è§£åšåˆ°ã€‚</p>
<p>å› æ­¤ï¼Œåˆ›å»ºspringé…ç½®æ–‡ä»¶ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ›å»ºçš„å¯¹è±¡ã€‚<br>ï¼ˆ1ï¼‰springé…ç½®æ–‡ä»¶ä½¿ç”¨xmlæ ¼å¼ï¼Œbean1.xmlï¼Œç”¨beanæ ‡ç­¾è¿›è¡Œé…ç½®ï¼Œidæ˜¯åˆ«åï¼Œclassæ˜¯ç±»è·¯å¾„+åå­—ã€‚ï¼ˆå¯¼äº†åŒ…æ‰å¯ä»¥æ–°å»ºxmlæ—¶å‡ºç°spring configï¼‰</p>
<blockquote>
<p>Create project from template æ˜¯æ˜¯å¦åˆ›å»ºæ¨¡æ¿çš„æ„æ€ï¼Œä¼šå¤šä¸€äº›å†…å®¹ã€‚</p>
<p>æ‰“åŒ…jaråŒ…ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45760579/article/details/114777280">https://blog.csdn.net/weixin_45760579/article/details/114777280</a></p>
<p>å¦‚ä½•è·å–jaråŒ…ï¼Œ<a target="_blank" rel="noopener" href="https://mvnrepository.com/">https://mvnrepository.com</a> æœç´¢å³å¯</p>
</blockquote>
<p>åœ¨srcæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºxmlæ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-é…ç½®Userå¯¹è±¡åˆ›å»º--&gt;</span><br><span class="line">&lt;bean id=&quot;user&quot; class=&quot;com.company.User&quot;&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ2ï¼‰è¿›è¡Œæµ‹è¯•ä»£ç ç¼–å†™ï¼ŒåŠ è½½springé…ç½®æ–‡ä»¶ï¼Œè·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡ã€‚</p>
<p>com.companyä¸‹åˆ›å»ºtestdemoåŒ…ï¼ŒåŒ…ä¸‹æ–°å»ºTestXMLç±»ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestXML</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span>   <span class="comment">//å•å…ƒæµ‹è¯•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAdd</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1.åŠ è½½springé…ç½®æ–‡ä»¶</span></span><br><span class="line">        <span class="comment">//åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡ï¼Œä¸åœ¨srcä¸‹ï¼Œéœ€è¦è·¯å¾„+åç§°</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//2.è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;user&quot;</span>, User.class);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        user.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Day-3"><a href="#Day-3" class="headerlink" title="Day 3"></a>Day 3</h2><h3 id="IOCå®¹å™¨-1"><a href="#IOCå®¹å™¨-1" class="headerlink" title="IOCå®¹å™¨"></a>IOCå®¹å™¨</h3><p>æ§åˆ¶åè½¬ï¼Œæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ç§è®¾è®¡åŸåˆ™ï¼Œé™ä½ä»£ç è€¦åˆåº¦ã€‚é€šè¿‡æ§åˆ¶åè½¬ï¼Œå¯¹è±¡åœ¨è¢«åˆ›å»ºæ—¶ï¼Œç”±ä¸€ä¸ªè°ƒæ§ç³»ç»Ÿå†…æ‰€æœ‰å¯¹è±¡çš„å¤–ç•Œå®ä½“å°†å…¶æ‰€ä¾èµ–çš„å¯¹è±¡çš„å¼•ç”¨ä¼ é€’ç»™å®ƒï¼Œä¹Ÿå«ä¾èµ–æ³¨å…¥DIã€‚</p>
<p>é€šä¿—ï¼šåˆ›å»ºå¯¹è±¡ï¼ŒåŸå§‹æ–¹æ³•newå¯¹è±¡ï¼ŒIOCæŠŠå¯¹è±¡çš„åˆ›å»ºå’Œå¯¹è±¡ä¹‹é—´çš„è°ƒç”¨è¿‡ç¨‹éƒ½äº¤ç»™Springè¿›è¡Œç®¡ç†ã€‚ä½¿ç”¨IOCæ¥ä½¿å¾—è€¦åˆåº¦é™ä½ã€‚</p>
<p>ä¸¤ç§æ–¹å¼è¿›è¡ŒBeanç®¡ç†ï¼š1.åŸºäºxmlé…ç½®æ–‡ä»¶  2.åŸºäºæ³¨è§£æ–¹å¼</p>
<h3 id="IOCåº•å±‚åŸç†"><a href="#IOCåº•å±‚åŸç†" class="headerlink" title="IOCåº•å±‚åŸç†"></a>IOCåº•å±‚åŸç†</h3><p>ï¼ˆ1ï¼‰xmlè§£æã€å·¥å‚æ¨¡å¼ã€åå°„</p>
<p>åŸå§‹æ–¹å¼ï¼šä¸€ä¸ªç±»å†…è°ƒç”¨å¦ä¸€ä¸ªç±»çš„æ–¹æ³•ï¼Œéœ€è¦åœ¨ç±»Aä¸­åˆ›å»ºä¸€ä¸ªç±»Bçš„å¯¹è±¡ï¼Œå†é€šè¿‡ç±»Bçš„å¯¹è±¡è°ƒç”¨ç±»Bçš„æ–¹æ³•ã€‚è¿™æ ·åšçš„ç¼ºç‚¹ï¼šè€¦åˆåº¦å¤ªé«˜ï¼Œç±»Bçš„è·¯å¾„å’Œæ–¹æ³•å¦‚æœæ”¹å˜çš„è¯ï¼Œç±»Aä¹Ÿè¦è·Ÿç€è¯¥ï¼Œä¸åˆ©äºç¨‹åºæ‰©å±•ã€‚</p>
<p>å·¥å‚æ¨¡å¼è¿›è¡Œè§£è€¦åˆï¼šé™¤äº†ç±»Aå’Œç±»Bï¼Œè¿˜æ–°å»ºä¸€ä¸ªå·¥å‚ç±»ï¼Œé‡Œé¢public staticæ–¹æ³•ä¸­ï¼šreturn new B()ï¼› è¿”å›ç±»Bçš„å¯¹è±¡ï¼Œå› æ­¤åœ¨ç±»Aä¸­è°ƒç”¨ç±»Bçš„æ–¹æ³•æ—¶ï¼Œè°ƒç”¨å·¥å‚ç±»çš„æ–¹æ³•æ¥åˆ›å»ºç±»Bçš„å¯¹è±¡ï¼Œç„¶åè°ƒç”¨ç±»Bçš„æ–¹æ³•ã€‚é™ä½ç±»Aå’Œç±»Bä¹‹é—´çš„è€¦åˆåº¦ã€‚æ€»ç»“æ¥è¯´ï¼Œé€šè¿‡å·¥å‚ç±»æ¥åˆ›å»ºå¯¹è±¡ï¼Œå®ç°è§£è€¦ã€‚</p>
<p>ï¼ˆ2ï¼‰IOCè¿‡ç¨‹ï¼šxmlè§£æã€å·¥å‚æ¨¡å¼ã€åå°„</p>
<p>ç¬¬ä¸€æ­¥ï¼šxmlé…ç½®æ–‡ä»¶ï¼Œé…ç½®åˆ›å»ºçš„å¯¹è±¡</p>
<p><code>&lt;bean id=&quot;dao&quot; class=&quot;UserDao&quot;&gt;&lt;/bean&gt; </code></p>
<p>ç¬¬äºŒæ­¥ï¼šæœ‰serviceç±»ï¼ˆAç±»ï¼‰å’Œdaoç±»ï¼ˆBç±»ï¼‰ï¼Œåˆ›å»ºå·¥å‚ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserFactory</span>&#123;</span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">static</span> UserDao <span class="title function_">getDao</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">classValue</span> <span class="operator">=</span> classå±æ€§å€¼; <span class="comment">//1.xmlè§£æï¼Œå¤šç§æ–¹å¼ï¼Œå¯ä»¥ç”¨dom4jå®ç°</span></span><br><span class="line">      	<span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(classValue); <span class="comment">//2.ç”¨åå°„æŠ€æœ¯åˆ›å»ºå¯¹è±¡ï¼Œå¾—åˆ°ç±»çš„å­—èŠ‚ç æ–‡ä»¶</span></span><br><span class="line">      	<span class="keyword">return</span> (UserDao)clazz.newInstance();  <span class="comment">//3.å¾—åˆ°å¯¹è±¡ï¼Œå¼ºè½¬ä¸€ä¸‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿›ä¸€æ­¥è§£è€¦ï¼Œä¾‹å¦‚å½“daoç±»è·¯å¾„æ”¹äº†ï¼Œè¿™é‡Œä¸éœ€è¦ä¿®æ”¹serviceç±»ï¼Œåªéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶é‡Œçš„ç±»è·¯å¾„ã€‚</p>
<h3 id="IOCæ¥å£ï¼ˆBeanFactoryï¼‰"><a href="#IOCæ¥å£ï¼ˆBeanFactoryï¼‰" class="headerlink" title="IOCæ¥å£ï¼ˆBeanFactoryï¼‰"></a>IOCæ¥å£ï¼ˆBeanFactoryï¼‰</h3><p>IOCæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œæ€æƒ³ä¸­åŸºäºå®¹å™¨æ¥å®Œæˆï¼Œå®¹å™¨æœ¬è´¨ä¸Šå°±æ˜¯<strong>å¯¹è±¡å·¥å‚</strong>ï¼Œåœ¨é‡Œé¢å¯ä»¥è¯»å–é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡åå°„åˆ›å»ºå¯¹è±¡ã€‚å› æ­¤ï¼ŒIOCæ€æƒ³åŸºäºIOCå®¹å™¨ï¼ŒIOCå®¹å™¨ï¼Œåº•å±‚æœ¬è´¨æ˜¯å¯¹è±¡å·¥å‚ã€‚</p>
<p>å·¥å‚éœ€è¦å®ä¾‹åŒ–ï¼ŒSpringæä¾›IOCå®¹å™¨å®ç°çš„ä¸¤ç§æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªé‡è¦çš„æ¥å£ï¼šéƒ½èƒ½å®ç°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡å·¥å‚åˆ›å»ºå¯¹è±¡ã€‚</p>
<p>ï¼ˆ1ï¼‰BeanFactoryï¼šIOCå®¹å™¨åŸºæœ¬å®ç°ï¼ŒSpringé‡Œé¢å†…éƒ¨çš„ä½¿ç”¨æ¥å£ï¼Œä¸€èˆ¬å¼€å‘äººå‘˜ä¸ä½¿ç”¨ã€‚<br>*åŠ è½½é…ç½®æ–‡ä»¶æ—¶ä¸ä¼šåˆ›å»ºå¯¹è±¡ï¼Œåœ¨è·å–å¯¹è±¡ï¼ˆä½¿ç”¨ï¼‰æ—¶æ‰å»åˆ›å»ºå¯¹è±¡ã€‚</p>
<p>ï¼ˆ2ï¼‰ApplicationContextï¼šBeanFactoryæ¥å£çš„å­æ¥å£ï¼Œæä¾›æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œä¸€èˆ¬ç”±å¼€å‘äººå‘˜ä½¿ç”¨ã€‚<br>*åŠ è½½é…ç½®æ–‡ä»¶æ—¶å°±ä¼šæŠŠé…ç½®æ–‡ä»¶å¯¹è±¡è¿›è¡Œåˆ›å»º</p>
<p>è¿™ä¸¤ç§ï¼Œå“ªç§æ›´å¥½ï¼Œè™½ç„¶ç¬¬ä¸€ç§èŠ‚çº¦èµ„æºï¼Œä½†æ˜¯ä¸€èˆ¬springæ¡†æ¶ç»“åˆwebé¡¹ç›®ï¼Œç”¨tomcatè¿›è¡Œå¯åŠ¨ï¼Œå› æ­¤è€—æ—¶å¥½èµ„æºçš„å·¥ä½œéƒ½åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶è¿›è¡Œæ“ä½œã€‚</p>
<hr>
<p>ApplicationContextæ¥å£æœ‰ä¸åŒçš„å®ç°ç±»ï¼ˆcontrol+hæ‰“å¼€ï¼Œï¼‰</p>
<p>ä¾‹å¦‚ï¼šä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œä¸€ä¸ªç±»è·¯å¾„ã€‚</p>
<p><img src="/images/applicationContext.png"></p>
<h3 id="IOCæ“ä½œBeanç®¡ç†ï¼ˆåŸºäºXMLï¼‰"><a href="#IOCæ“ä½œBeanç®¡ç†ï¼ˆåŸºäºXMLï¼‰" class="headerlink" title="IOCæ“ä½œBeanç®¡ç†ï¼ˆåŸºäºXMLï¼‰"></a>IOCæ“ä½œBeanç®¡ç†ï¼ˆåŸºäºXMLï¼‰</h3><p> ä»€ä¹ˆæ˜¯Beanç®¡ç†ï¼Ÿï¼š1.Springåˆ›å»ºå¯¹è±¡ï¼Œ2.ç”¨Springæ³¨å…¥å±æ€§ï¼ˆåˆ›å»ºå¯¹è±¡æ—¶å‘å˜é‡è®¾ç½®å€¼ï¼Œæœ€æ™®é€šçš„è¯ç”¨setæ–¹æ³•è®¾ç½®å€¼ï¼Œä½†æ˜¯ç°åœ¨ç”¨springåšåˆ°ï¼‰</p>
<p>ï¼ˆ1ï¼‰åŸºäºxmlæ–¹å¼åˆ›å»ºå¯¹è±¡</p>
<p>åšæ³•ï¼šåœ¨springé…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨beanæ ‡ç­¾ï¼Œæ ‡ç­¾é‡Œé¢æ·»åŠ å¯¹åº”å±æ€§ï¼Œå°±å¯ä»¥å®ç°å¯¹è±¡åˆ›å»ºã€‚<code>&lt;bean id=&quot;dao&quot; class=&quot;UserDao&quot;&gt;&lt;/bean&gt;</code></p>
<p>åœ¨beanæ ‡ç­¾ä¸­æœ‰å¾ˆå¤šå±æ€§ï¼š<br>*idå±æ€§ï¼šç»™å¯¹è±¡å–ä¸€ä¸ªåˆ«åï¼Œå”¯ä¸€æ ‡è¯†<br>*classå±æ€§ï¼šç±»å…¨è·¯å¾„ï¼ˆåŒ…å«è·¯å¾„ï¼‰<br>*nameå±æ€§ï¼šå’Œidä¸€æ ·ä½œç”¨ï¼Œidå±æ€§ä¸­ä¸èƒ½åŠ ç‰¹æ®Šç¬¦å·ï¼Œnameå±æ€§ä¸­å¯ä»¥åŠ ç‰¹æ®Šç¬¦å·ï¼Œnameå±æ€§æ¯”è¾ƒæ—©æœŸï¼Œç”¨å¾—å°‘ã€‚</p>
<p>Xmlåˆ›å»ºå¯¹è±¡æ—¶ï¼Œé»˜è®¤æ‰§è¡Œæ— å‚æ•°çš„æ„é€ æ–¹æ³•å®Œæˆå¯¹è±¡åˆ›å»ºã€‚å› æ­¤ï¼Œå¦‚æœç±»é‡Œåˆ›å»ºäº†æœ‰å‚æ„é€ ä½†æ˜¯æ²¡æœ‰å£°æ˜æ— å‚æ„é€ ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<blockquote>
<p>IDEAä¸ºä¸€ä¸ªç±»åˆ›å»ºæ„é€ æ–¹æ³•ã€setæ–¹æ³•ã€getæ–¹æ³•å¿«æ·é”®ï¼šalt+insertï¼ˆWindowsï¼‰command+nï¼ˆMacï¼‰</p>
</blockquote>
<p>ï¼ˆ2ï¼‰åŸºäºxmlæ–¹å¼æ³¨å…¥å±æ€§</p>
<p>DIï¼šä¾èµ–æ³¨å…¥ï¼Œå°±æ˜¯æ³¨å…¥å±æ€§ã€‚</p>
<p>&lt;1&gt;ç¬¬ä¸€ç§æ³¨å…¥å±æ€§æ–¹å¼ï¼šä½¿ç”¨setæ–¹æ³•è¿›è¡Œæ³¨å…¥ã€‚</p>
<p>é¦–å…ˆåœ¨ç±»ä¸­å®šä¹‰å±æ€§ï¼Œå¹¶å®šä¹‰å¯¹åº”çš„setæ–¹æ³•ï¼Œä¸€ä¸ªå±æ€§å¯¹åº”ä¸€ä¸ªsetæ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String bname;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBname</span><span class="params">(String bname)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.bname = bname;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDemo</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(bname);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶æ¬¡åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®å¯¹è±¡åˆ›å»ºï¼Œé…ç½®å±æ€§æ³¨å…¥ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Book&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä½¿ç”¨propertyå®Œæˆå±æ€§æ³¨å…¥</span></span><br><span class="line"><span class="comment">    	nameï¼šç±»é‡Œå±æ€§åç§°</span></span><br><span class="line"><span class="comment">    	valueï¼šå‘å±æ€§æ³¨å…¥çš„å€¼</span></span><br><span class="line"><span class="comment">    	--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è¥¿æ¸¸è®°&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æœ€åå†™ä¸€ä¸ªæµ‹è¯•ä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestXML</span> &#123;</span><br><span class="line">  <span class="comment">//ä¸€ä¸ªç±»ä¸‹å°±è¡Œ</span></span><br><span class="line">    <span class="meta">@Test</span>   <span class="comment">//å•å…ƒæµ‹è¯•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBook</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1.åŠ è½½springé…ç½®æ–‡ä»¶</span></span><br><span class="line">        <span class="comment">//åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡ï¼Œä¸åœ¨srcä¸‹ï¼Œéœ€è¦è·¯å¾„+åç§°</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//ApplicationContextä¹Ÿå¯ä»¥æ¢ä¸ºBeanFactory</span></span><br><span class="line">        <span class="comment">//2.è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;book&quot;</span>, Book.class);</span><br><span class="line">        System.out.println(book);</span><br><span class="line">        book.testDemo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&lt;2&gt;ç¬¬äºŒç§æ³¨å…¥å±æ€§æ–¹å¼ï¼šæœ‰å‚æ„é€ è¿›è¡Œæ³¨å…¥</p>
<p>é¦–å…ˆåœ¨ç±»ä¸­å®šä¹‰å±æ€§ï¼Œå¹¶å®šä¹‰æœ‰å‚æ„é€ å‡½æ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Music</span>&#123;</span><br><span class="line">		<span class="keyword">private</span> String mname;</span><br><span class="line">		<span class="keyword">private</span> String mauthor;</span><br><span class="line">		<span class="comment">//æœ‰å‚æ„é€ </span></span><br><span class="line">		<span class="keyword">public</span> <span class="title function_">Music</span><span class="params">(String mname, String mauthor)</span>&#123;</span><br><span class="line">				<span class="built_in">this</span>.mname = mname;</span><br><span class="line">				<span class="built_in">this</span>.mauthor = mauthor;</span><br><span class="line">		&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDemo</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(mname+<span class="string">&quot;::&quot;</span>+mauthor);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶æ¬¡ï¼Œåœ¨Springé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œä½¿ç”¨æœ‰å‚æ„é€ åˆ›å»ºå¯¹è±¡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;music&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Music&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä½¿ç”¨æœ‰å‚æ„é€ è¿›è¡Œæ³¨å…¥</span></span><br><span class="line"><span class="comment">    	--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;mname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å€¾åŸ&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;mauthor&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é™ˆå¥•è¿…&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--nameæ˜¯ä½¿ç”¨åç§°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç´¢å¼•å€¼indexï¼Œindex=&quot;0&quot; è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œå†™ä¸€ä¸ªæµ‹è¯•ä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span>   <span class="comment">//å•å…ƒæµ‹è¯•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testMusic</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//1.åŠ è½½springé…ç½®æ–‡ä»¶</span></span><br><span class="line">    <span class="comment">//åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡ï¼Œä¸åœ¨srcä¸‹ï¼Œéœ€è¦è·¯å¾„+åç§°</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">    <span class="comment">//ApplicationContextä¹Ÿå¯ä»¥æ¢ä¸ºBeanFactory</span></span><br><span class="line">    <span class="comment">//2.è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡</span></span><br><span class="line">    <span class="type">Music</span> <span class="variable">music</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;music&quot;</span>, Music.class);</span><br><span class="line">    System.out.println(music);</span><br><span class="line">    music.testDemo();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Day-4"><a href="#Day-4" class="headerlink" title="Day 4"></a>Day 4</h2><h3 id="ä½¿ç”¨Påç§°ç©ºé—´æ³¨å…¥"><a href="#ä½¿ç”¨Påç§°ç©ºé—´æ³¨å…¥" class="headerlink" title="ä½¿ç”¨Påç§°ç©ºé—´æ³¨å…¥"></a>ä½¿ç”¨Påç§°ç©ºé—´æ³¨å…¥</h3><p>é’ˆå¯¹setæ–¹æ³•è¿›è¡Œå±æ€§æ³¨å…¥ï¼Œå¯ä»¥ä½¿ç”¨påç§°ç©ºé—´æ³¨å…¥ï¼Œæ¥ç®€åŒ–xmlé…ç½®æ–¹å¼ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šæ·»åŠ påç§°ç©ºé—´åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚</p>
<p><code>xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</code></p>
<p>ç¬¬äºŒæ­¥ï¼šè¿›è¡Œå±æ€§æ³¨å…¥ï¼Œåœ¨beanæ ‡ç­¾é‡Œè¿›è¡Œæ“ä½œ</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Book&quot;</span> <span class="attr">p:bname</span>=<span class="string">&quot;çº¢æ¥¼æ¢¦&quot;</span> <span class="attr">p:bauthor</span>=<span class="string">&quot;æ›¹é›ªèŠ¹&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="IOCæ“ä½œBeanç®¡ç†ï¼ˆxmlæ³¨å…¥å…¶ä»–ç±»å‹å±æ€§ï¼‰"><a href="#IOCæ“ä½œBeanç®¡ç†ï¼ˆxmlæ³¨å…¥å…¶ä»–ç±»å‹å±æ€§ï¼‰" class="headerlink" title="IOCæ“ä½œBeanç®¡ç†ï¼ˆxmlæ³¨å…¥å…¶ä»–ç±»å‹å±æ€§ï¼‰"></a>IOCæ“ä½œBeanç®¡ç†ï¼ˆxmlæ³¨å…¥å…¶ä»–ç±»å‹å±æ€§ï¼‰</h3><p>1.å­—é¢é‡ï¼šä¸ç‰¹æ®Šçš„å±æ€§</p>
<p>ï¼ˆ1ï¼‰nullå€¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;property name=&quot;bname&quot;&gt;</span><br><span class="line">   &lt;null/&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ2ï¼‰å±æ€§å€¼åŒ…å«ç‰¹æ®Šç¬¦å·</p>
<p>å¯ä»¥å°†ç‰¹æ®Šç¬¦å·è¿›è¡Œè½¬ä¹‰</p>
<p><code>&lt;property name=&quot;bname&quot; value=&quot;&amp;lt;&amp;gt;ã€Šè¥¿æ¸¸è®°ã€‹&quot;&gt;&lt;/property&gt;</code></p>
<p>ä¹Ÿå¯ä»¥æŠŠå¸¦æœ‰ç‰¹æ®Šç¬¦å·å†…å®¹å†™åˆ°CDATA</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;property name=&quot;bname&quot;&gt; </span><br><span class="line">  &lt;value&gt;&lt;![CDATA[ã€Šå—äº¬ã€‹]]&gt;&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure>

<p>2.æ³¨å…¥å±æ€§-å¤–éƒ¨bean</p>
<p>webå±‚è°ƒç”¨serviceå±‚ï¼Œserviceè°ƒç”¨daoå±‚</p>
<p>ï¼ˆ1ï¼‰åˆ›å»ºä¸¤ä¸ªç±»serviceç±»å’Œdaoç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class UserService&#123;</span><br><span class="line">	public void add()&#123;</span><br><span class="line">		System.out.println(&quot;service add.....&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface UserDao&#123;</span><br><span class="line">	public void update();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ2ï¼‰åœ¨serviceè°ƒç”¨daoé‡Œé¢çš„æ–¹æ³•</p>
<p>åŸå§‹æ–¹å¼ï¼šserviceä¸­åˆ›å»ºUserDaoå¯¹è±¡ï¼Œå†è°ƒç”¨ç±»ä¸­æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">userDao.update();</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼šç”¨springçš„xmlé…ç½®æ–¹æ³•è¿›è¡Œè°ƒç”¨</p>
<p>é¦–å…ˆé…ç½®æ–‡ä»¶ä¸­åˆ›å»ºä¸¤ä¸ªå¯¹è±¡ï¼Œç„¶åå°†Daoå¯¹è±¡æ³¨å…¥åˆ°Serviceå¯¹è±¡ä¸­ã€‚setæ³¨å…¥æˆ–æœ‰å‚æ³¨å…¥éƒ½è¡Œã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//UserServiceç±»ä¸­åˆ›å»ºUserDaoç±»å‹å±æ€§ï¼Œç”Ÿæˆsetæ–¹æ³•</span></span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.service.UserService&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDaoImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.dao.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>refå±æ€§ï¼šåˆ›å»ºuserDaoå¯¹è±¡beanæ ‡ç­¾idå€¼ï¼Œå®Œæˆå¤–éƒ¨beanæ³¨å…¥</p>
<p>å†™æµ‹è¯•ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBean</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span>   <span class="comment">//å•å…ƒæµ‹è¯•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAdd</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1.åŠ è½½springé…ç½®æ–‡ä»¶</span></span><br><span class="line">        <span class="comment">//åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡ï¼Œä¸åœ¨srcä¸‹ï¼Œéœ€è¦è·¯å¾„+åç§°</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean2.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//ApplicationContextä¹Ÿå¯ä»¥æ¢ä¸ºBeanFactory</span></span><br><span class="line">        <span class="comment">//2.è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class);</span><br><span class="line">        System.out.println(userService);</span><br><span class="line">        userService.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.æ³¨å…¥å±æ€§-å†…éƒ¨beanå’Œçº§è”èµ‹å€¼</p>
<p>ï¼ˆ1ï¼‰ä¸€å¯¹å¤šå…³ç³»ï¼šéƒ¨é—¨å’Œå‘˜å·¥</p>
<p>ï¼ˆ2ï¼‰åœ¨å®ä½“ä¹‹é—´è¡¨ç¤ºä¸€å¯¹å¤šå…³ç³»ï¼Œå†™éƒ¨é—¨ç±»å’Œå‘˜å·¥ç±»ï¼Œå‘˜å·¥è¡¨ç¤ºæ‰€å±éƒ¨é—¨ï¼Œä½¿ç”¨å¯¹è±¡ç±»å‹å±æ€§è¿›è¡Œè¡¨ç¤ºã€‚</p>
<p>ï¼ˆ3ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</p>
<p>åœ¨empå¯¹è±¡åˆ›å»ºæ—¶ï¼Œæœ‰ä¸€ä¸ªå±æ€§æ˜¯deptï¼Œå¯ä»¥ç”¨refå¤–éƒ¨beançš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ç”¨å†…éƒ¨beançš„æ–¹å¼ã€‚ç›¸å½“äºæ˜¯åµŒå¥—beanäº†ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å†…éƒ¨bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.bean.Emp&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å¼ ä¸‰&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç ”å‘éƒ¨&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ï¼ˆ4ï¼‰æµ‹è¯•æ–¹æ³•</p>
<p>4.æ³¨å…¥å±æ€§â€“çº§è”èµ‹å€¼</p>
<p>çº§è”èµ‹å€¼æŒ‡çš„æ˜¯ä¸€ä¸ªç±»å†…æœ‰å…¶ä»–ç±»çš„å¯¹è±¡ä½œä¸ºå±æ€§ï¼Œå¯ä»¥ç”¨å¤–éƒ¨beançš„æ–¹æ³•refï¼Œä¹Ÿå¯ä»¥å†…éƒ¨beançš„æ–¹æ³•ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.bean.Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æå››&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å¥³&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept.dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æµ‹è¯•éƒ¨é—¨&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept.dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è´¢åŠ¡éƒ¨&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºæµ‹è¯•éƒ¨é—¨ï¼Œè€Œä¸æ˜¯è´¢åŠ¡éƒ¨ã€‚</p>
<h3 id="IOCæ“ä½œBeanç®¡ç†ï¼ˆxmlæ³¨å…¥é›†åˆå±æ€§ï¼‰"><a href="#IOCæ“ä½œBeanç®¡ç†ï¼ˆxmlæ³¨å…¥é›†åˆå±æ€§ï¼‰" class="headerlink" title="IOCæ“ä½œBeanç®¡ç†ï¼ˆxmlæ³¨å…¥é›†åˆå±æ€§ï¼‰"></a>IOCæ“ä½œBeanç®¡ç†ï¼ˆxmlæ³¨å…¥é›†åˆå±æ€§ï¼‰</h3><p>1.æ³¨å…¥æ•°ç»„ç±»å‹å±æ€§ï¼Œæ³¨å…¥Listé›†åˆç±»å‹å±æ€§ï¼Œæ³¨å…¥Mapé›†åˆç±»å‹å±æ€§</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Stu</span>&#123;</span><br><span class="line">    <span class="comment">//1 æ•°ç»„ç±»å‹å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> String[] course;</span><br><span class="line">    <span class="comment">//2 listé›†åˆç±»å‹å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; lists;</span><br><span class="line">    <span class="comment">//3 mapé›†åˆç±»å‹å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt;maps;</span><br><span class="line">    <span class="comment">//4 seté›†åˆ</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt;sets;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCourse</span><span class="params">(String[] course)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.course = course;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSets</span><span class="params">(Set&lt;String&gt; sets)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sets = sets;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setList</span><span class="params">(List&lt;String&gt; lists)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.lists = lists;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMaps</span><span class="params">(Map&lt;String, String&gt; maps)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.maps = maps;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.åœ¨springé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é›†åˆç±»å‹å±æ€§æ³¨å…¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stu&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.collectiontype.Stu&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;course&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ•°æ®åº“<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>java<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;lists&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ•°æ®åº“<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>java<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maps&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;JAVA&quot;</span> <span class="attr">value</span>=<span class="string">&quot;java&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;PHP&quot;</span> <span class="attr">value</span>=<span class="string">&quot;php&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sets&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>redis<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ•°ç»„å¦‚æœç›´æ¥è¾“å‡ºï¼Œä¸æ˜¯å€¼ï¼Œè€Œæ˜¯åœ°å€å€¼ï¼Œéœ€è¦Arrays.toString()</p>
</blockquote>
<p>3.é›†åˆä¸­è®¾ç½®å¯¹è±¡ç±»å‹å€¼</p>
<p> beané…ç½®ä¸­ï¼Œåˆ›å»ºå¤šä¸ªcourseå¯¹è±¡ï¼Œç„¶åç”¨refæ³¨å…¥åˆ°stuå¯¹è±¡çš„é›†åˆå±æ€§ä¸­ã€‚</p>
<p>æ³¨æ„ï¼šè¿™é‡ŒCourseç±»ä¸­æ²¡æœ‰é‡å†™toStringç±»çš„è¯ï¼Œè¾“å‡ºclistä¸­çš„å€¼æ˜¯å¯¹è±¡åœ°å€ï¼Œåªæœ‰é‡å†™Courseç±»ä¸­çš„toStringæ–¹æ³•ï¼Œè¾“å‡ºæ‰èƒ½æ˜¯å¯¹è±¡ä¸­çš„å„ç§å±æ€§å€¼ã€‚</p>
<p>4.æŠŠé›†åˆæ³¨å…¥éƒ¨åˆ†æå–å‡ºæ¥ä½œä¸ºå…¬å…±éƒ¨åˆ†</p>
<p>ï¼ˆ1ï¼‰åœ¨Springé…ç½®æ–‡ä»¶ä¸­å¼•å…¥åç§°ç©ºé—´util</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ï¼ˆ2ï¼‰æå–listé›†åˆå±æ€§æ³¨å…¥</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æå–listé›†åˆå±æ€§æ³¨å…¥,å¤šä¸ªbeanéƒ½å¯ä½¿ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">util:list</span> <span class="attr">id</span>=<span class="string">&quot;stulist&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>è¯¾ç¨‹1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>è¯¾ç¨‹2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">util:list</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨å…¬å…±listé›†åˆ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stu&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.collectiontype.Stu&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;lists&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;stulist&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="IOCæ“ä½œBeanç®¡ç†ï¼ˆFactoryBeanï¼‰"><a href="#IOCæ“ä½œBeanç®¡ç†ï¼ˆFactoryBeanï¼‰" class="headerlink" title="IOCæ“ä½œBeanç®¡ç†ï¼ˆFactoryBeanï¼‰"></a>IOCæ“ä½œBeanç®¡ç†ï¼ˆFactoryBeanï¼‰</h3><p>1.Springä¸­æœ‰ä¸¤ç§ç±»å‹beanï¼Œä¸€ç§æ™®é€šbeanï¼Œå¦å¤–ä¸€ç§FactoryBeanã€‚</p>
<p>2.æ™®é€šbeanï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰beanç±»å‹å°±æ˜¯è¿”å›ç±»å‹ã€‚</p>
<p>3.å·¥å‚beanï¼šåœ¨é…ç½®æ–‡ä»¶å®šä¹‰beanç±»å‹å¯ä»¥å’Œè¿”å›ç±»å‹ä¸ä¸€æ ·ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç±»ï¼Œè®©è¿™ä¸ªç±»ä½œä¸ºå·¥å‚beanï¼Œå®ç°æ¥å£FactoryBean</p>
<p>ç¬¬äºŒæ­¥ï¼šå®ç°æ¥å£é‡Œé¢çš„æ–¹æ³•ï¼Œåœ¨å®ç°çš„æ–¹æ³•ä¸­å®šä¹‰è¿”å›çš„beanç±»å‹ã€‚</p>
<h3 id="IOCæ“ä½œBeanç®¡ç†ï¼ˆBeançš„ä½œç”¨åŸŸï¼‰"><a href="#IOCæ“ä½œBeanç®¡ç†ï¼ˆBeançš„ä½œç”¨åŸŸï¼‰" class="headerlink" title="IOCæ“ä½œBeanç®¡ç†ï¼ˆBeançš„ä½œç”¨åŸŸï¼‰"></a>IOCæ“ä½œBeanç®¡ç†ï¼ˆBeançš„ä½œç”¨åŸŸï¼‰</h3><p>1.åœ¨Springä¸­ï¼Œå¯ä»¥è®¾ç½®åˆ›å»ºbeanå®ä¾‹æ˜¯å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹ã€‚</p>
<blockquote>
<p>æ‰€è°“å•ä¾‹å°±æ˜¯æ‰€æœ‰çš„è¯·æ±‚éƒ½ç”¨ä¸€ä¸ªå¯¹è±¡æ¥å¤„ç†ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„serviceå’Œdaoå±‚çš„å¯¹è±¡é€šå¸¸éƒ½æ˜¯å•ä¾‹çš„ï¼Œè€Œå¤šä¾‹åˆ™æŒ‡æ¯ä¸ªè¯·æ±‚ç”¨ä¸€ä¸ªæ–°çš„å¯¹è±¡æ¥å¤„ç†ï¼Œæ¯”å¦‚action;</p>
</blockquote>
<p>2.åœ¨Springä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ›å»ºçš„beanæ˜¯å•å®ä¾‹å¯¹è±¡ã€‚</p>
<p>æµ‹è¯•ç±»ä¸­åˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œè¾“å‡ºåœ°å€ï¼Œå¯ä»¥å‘ç°å¤šä¸ªå¯¹è±¡çš„åœ°å€ç›¸åŒã€‚ä¹Ÿå°±æ˜¯å¤šä¸ªè¯·æ±‚ç”¨ä¸€ä¸ªå¯¹è±¡å¤„ç†ã€‚</p>
<p>3.å¦‚ä½•è®¾ç½®å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹</p>
<p>ï¼ˆ1ï¼‰åœ¨springé…ç½®æ–‡ä»¶beanæ ‡ç­¾é‡Œé¢æœ‰å±æ€§ï¼ˆscopeï¼‰ç”¨äºè®¾ç½®å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹</p>
<p>ï¼ˆ2ï¼‰scopeå±æ€§å€¼ï¼šé»˜è®¤å€¼singletonï¼Œè¡¨ç¤ºå•å®ä¾‹å¯¹è±¡ã€‚prototypeï¼Œè¡¨ç¤ºå¤šå®ä¾‹å¯¹è±¡ã€‚</p>
<p>å…¶ä»–ä¸å¸¸ç”¨çš„ï¼š<br>requestè¡¨ç¤ºä¸€æ¬¡è¯·æ±‚<br>sessionè¡¨ç¤ºä¸€æ¬¡ä¼šè¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;emp&quot; class=&quot;com.company.bean.Emp&quot; scope=&quot;prototype&quot;&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<p>å†çœ‹å¤šä¸ªå¯¹è±¡çš„åœ°å€ï¼Œä¸ä¸€æ ·ï¼Œå¤šå®ä¾‹å¯¹è±¡ã€‚</p>
<p>ï¼ˆ3ï¼‰singletonå’ŒprototypeåŒºåˆ«</p>
<p>ç¬¬ä¸€ singletonå•å®ä¾‹  prototypeå¤šå®ä¾‹</p>
<p>ç¬¬äºŒ singletonåœ¨åŠ è½½springé…ç½®æ–‡ä»¶æ—¶å°±ä¼šåˆ›å»ºå•å®ä¾‹å¯¹è±¡ï¼Œprototypeä¸æ˜¯åœ¨åŠ è½½springé…ç½®æ–‡ä»¶æ—¶åˆ›å»ºå¯¹è±¡ï¼Œè€Œæ˜¯åœ¨è°ƒç”¨getBeanæ–¹æ³•æ—¶åˆ›å»ºå¤šå®ä¾‹å¯¹è±¡ã€‚</p>
<h3 id="IOCæ“ä½œBeanç®¡ç†ï¼ˆbeanç”Ÿå‘½å‘¨æœŸï¼‰"><a href="#IOCæ“ä½œBeanç®¡ç†ï¼ˆbeanç”Ÿå‘½å‘¨æœŸï¼‰" class="headerlink" title="IOCæ“ä½œBeanç®¡ç†ï¼ˆbeanç”Ÿå‘½å‘¨æœŸï¼‰"></a>IOCæ“ä½œBeanç®¡ç†ï¼ˆbeanç”Ÿå‘½å‘¨æœŸï¼‰</h3><p>1.ç”Ÿå‘½å‘¨æœŸï¼šä»å¯¹è±¡åˆ›å»ºåˆ°å¯¹è±¡é”€æ¯çš„è¿‡ç¨‹</p>
<p>2.beanç”Ÿå‘½å‘¨æœŸ</p>
<p>ï¼ˆ1ï¼‰é€šè¿‡æ„é€ å™¨åˆ›å»ºbeanå®ä¾‹ï¼ˆxmlè°ƒç”¨æ— å‚æ„é€ ï¼‰<br>ï¼ˆ2ï¼‰ä¸ºbeanä¸­çš„å±æ€§è®¾ç½®å€¼å’Œå¯¹å…¶ä»–beanå¼•ç”¨ï¼ˆè°ƒç”¨setæ–¹æ³•ï¼‰<br>ï¼ˆ3ï¼‰è°ƒç”¨beançš„åˆå§‹åŒ–æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®ï¼‰<br>ï¼ˆ4ï¼‰beanå¯ä»¥ä½¿ç”¨ï¼ˆå¯¹è±¡è·å–åˆ°ï¼‰<br>ï¼ˆ5ï¼‰å½“å®¹å™¨å…³é—­æ—¶ï¼Œè°ƒç”¨beançš„é”€æ¯æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®ï¼‰</p>
<p>3.æ¼”ç¤ºbeanç”Ÿå‘½å‘¨æœŸï¼šè§ç¨‹åºorderç›¸å…³</p>
<p>4.åŠ ä¸Šbeançš„åç½®å¤„ç†å™¨ï¼šbeançš„ç”Ÿå‘½å‘¨æœŸæœ‰ä¸ƒæ­¥ã€‚</p>
<p>ç¬¬ä¸‰æ­¥ä¹‹å‰ï¼šæŠŠbeanå®ä¾‹ä¼ é€’beanåç½®å¤„ç†å™¨çš„æ–¹æ³•before</p>
<p>ç¬¬ä¸‰æ­¥ä¹‹åï¼šæŠŠbeanå®ä¾‹ä¼ é€’beanåç½®å¤„ç†å™¨çš„æ–¹æ³•after</p>
<p>åˆ›å»ºç±»å®ç°BeanPostProcessoræ¥å£ï¼Œåˆ›å»ºåç½®å¤„ç†å™¨ã€‚é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ã€‚</p>
<h2 id="Day-5"><a href="#Day-5" class="headerlink" title="Day 5"></a>Day 5</h2><h3 id="IOCæ“ä½œBeanç®¡ç†ï¼ˆxmlè‡ªåŠ¨è£…é…ï¼‰"><a href="#IOCæ“ä½œBeanç®¡ç†ï¼ˆxmlè‡ªåŠ¨è£…é…ï¼‰" class="headerlink" title="IOCæ“ä½œBeanç®¡ç†ï¼ˆxmlè‡ªåŠ¨è£…é…ï¼‰"></a>IOCæ“ä½œBeanç®¡ç†ï¼ˆxmlè‡ªåŠ¨è£…é…ï¼‰</h3><p>1.ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…ï¼Ÿ<br>propertyæ³¨å…¥å±æ€§ï¼Œname-valueå€¼ï¼Œè¿™æ˜¯æ‰‹åŠ¨è£…é…ã€‚æ ¹æ®æŒ‡å®šè£…é…è§„åˆ™ï¼ˆå±æ€§åç§°æˆ–è€…å±æ€§ç±»å‹ï¼‰ï¼Œspringè‡ªåŠ¨å°†åŒ¹é…çš„å±æ€§å€¼è¿›è¡Œæ³¨å…¥ã€‚</p>
<p>2.æ¼”ç¤ºè‡ªåŠ¨è£…é…<br>å¤–éƒ¨beanæ‰‹åŠ¨è£…é…ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.autowire.Employee&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;deport&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;deport&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.autowire.Deport&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è‡ªåŠ¨è£…é…ï¼šbeanæ ‡ç­¾å±æ€§autowireï¼Œé…ç½®è‡ªåŠ¨è£…é…ï¼Œautowireå±æ€§å¸¸ç”¨ä¸¤ä¸ªå€¼ï¼šbyNameæ ¹æ®å±æ€§åç§°æ³¨å…¥ï¼ˆæ³¨å…¥å€¼beançš„idå€¼å’Œç±»å±æ€§åå­—ä¸€æ ·ï¼‰ï¼ŒbyTypeæ ¹æ®å±æ€§ç±»å‹æ³¨å…¥ï¼ˆç›¸åŒç±»å‹çš„beanä¸èƒ½å®šä¹‰å¤šä¸ªï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼‰ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.autowire.Employee&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.autowire.Deport&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="IOCæ“ä½œBeanç®¡ç†ï¼ˆå¤–éƒ¨å±æ€§æ–‡ä»¶ï¼‰"><a href="#IOCæ“ä½œBeanç®¡ç†ï¼ˆå¤–éƒ¨å±æ€§æ–‡ä»¶ï¼‰" class="headerlink" title="IOCæ“ä½œBeanç®¡ç†ï¼ˆå¤–éƒ¨å±æ€§æ–‡ä»¶ï¼‰"></a>IOCæ“ä½œBeanç®¡ç†ï¼ˆå¤–éƒ¨å±æ€§æ–‡ä»¶ï¼‰</h3><p>å¦‚æœä¸€ä¸ªç±»çš„å±æ€§å¾ˆå¤šï¼Œéœ€è¦å¾ˆå¤špropertyï¼Œå¹¶ä¸”ç±»å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦ä¿®æ”¹xmlé…ç½®æ–‡ä»¶ï¼Œæ”¹èµ·æ¥éº»çƒ¦ã€‚å°†å›ºå®šçš„å€¼æ”¾åœ¨å¤–éƒ¨æ–‡ä»¶ä¸­ã€‚åœºæ™¯åº”ç”¨åœ¨æ“ä½œæ•°æ®åº“ä¸­ï¼Œæ•°æ®åº“çš„å€¼æ”¾åœ¨propertyæ–‡ä»¶ä¸­ï¼Œå¼•ç”¨è¿›æ¥ï¼Œè¿›è¡Œè¯»å–ã€‚</p>
<p>1.ç›´æ¥é…ç½®æ•°æ®åº“ä¿¡æ¯</p>
<p>ï¼ˆ1ï¼‰é…ç½®å¾·é²ä¼Šdruidè¿æ¥æ± </p>
<p>ï¼ˆ2ï¼‰å¼•å…¥å¾·é²ä¼Šè¿æ¥æ± ä¾èµ–jaråŒ…</p>
<p><a target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/com.alibaba/druid/1.1.9%EF%BC%88%E6%89%BE%E5%88%B0durid1.9%E4%B8%8B%E8%BD%BD%EF%BC%8C%E5%AF%BC%E5%85%A5lib%EF%BC%89">https://mvnrepository.com/artifact/com.alibaba/druid/1.1.9ï¼ˆæ‰¾åˆ°durid1.9ä¸‹è½½ï¼Œå¯¼å…¥libï¼‰</a></p>
<p>ï¼ˆ3ï¼‰é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼ˆbean10ï¼‰ï¼Œå‡ ä¸ªå±æ€§ï¼šé©±åŠ¨åç§°ã€æ•°æ®åº“åœ°å€ã€ç”¨æˆ·ã€å¯†ç </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç›´æ¥é…ç½®è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/userDb&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span>  </span><br></pre></td></tr></table></figure>

<p>2.å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥æ± </p>
<p>ï¼ˆ1ï¼‰åˆ›å»ºå¤–éƒ¨å±æ€§æ–‡ä»¶ï¼Œpropertiesæ ¼å¼æ–‡ä»¶ï¼Œå†™æ•°æ®åº“ä¿¡æ¯ã€‚ç­‰å·å·¦è¾¹çš„åå­—å¯ä»¥éšä¾¿å†™ã€‚</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">prop.driverClass</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">prop.url</span>=<span class="string">jdbc:mysql://localhost:3306/userDb</span></span><br><span class="line"><span class="attr">prop.userName</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">prop.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>

<p>ï¼ˆ2ï¼‰æŠŠå¤–éƒ¨propertieså±æ€§æ–‡ä»¶å¼•å…¥åˆ°springé…ç½®æ–‡ä»¶ä¸­ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥contextåç§°ç©ºé—´</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">                   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒæ­¥ï¼šåœ¨springé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨æ ‡ç­¾å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span>   <span class="comment">&lt;!--æ–‡ä»¶åœ¨æœ¬åœ°å†™æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.driverClass&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.userName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä»¥ä¸Šæ˜¯åŸºäºxmlæ–¹å¼è¿›è¡Œbeanç®¡ç†ï¼Œæœ€é‡è¦çš„ï¼šåˆ›å»ºå¯¹è±¡ã€æ³¨å…¥å±æ€§</p>
</blockquote>
<h3 id="IOCæ“ä½œBeanç®¡ç†ï¼ˆåŸºäºæ³¨è§£æ–¹å¼ï¼‰"><a href="#IOCæ“ä½œBeanç®¡ç†ï¼ˆåŸºäºæ³¨è§£æ–¹å¼ï¼‰" class="headerlink" title="IOCæ“ä½œBeanç®¡ç†ï¼ˆåŸºäºæ³¨è§£æ–¹å¼ï¼‰"></a>IOCæ“ä½œBeanç®¡ç†ï¼ˆåŸºäºæ³¨è§£æ–¹å¼ï¼‰</h3><p>1.ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ<br>æ³¨è§£æ˜¯ä»£ç ä¸­ç‰¹æ®Šçš„æ ‡è®°ï¼Œæ ¼å¼ï¼š@æ³¨è§£åç§°(å±æ€§åç§°&#x3D;å±æ€§å€¼, å±æ€§åç§°&#x3D;å±æ€§å€¼â€¦)<br>æ³¨è§£å¯ä»¥ä½œç”¨åœ¨ç±»ä¸Šé¢ï¼Œæ–¹æ³•ä¸Šé¢ï¼Œå±æ€§ä¸Šé¢ã€‚<br>ä½¿ç”¨æ³¨è§£çš„åŸå› ï¼šä¸ºäº†ç®€åŒ–xmlé…ç½®</p>
<p>2.Springé’ˆå¯¹Beanç®¡ç†ä¸­åˆ›å»ºå¯¹è±¡æä¾›æ³¨è§£</p>
<p>ï¼ˆ1ï¼‰@Component</p>
<p>ï¼ˆ2ï¼‰@Serviceï¼šä¸šåŠ¡é€»è¾‘å±‚serviceå±‚</p>
<p>ï¼ˆ3ï¼‰@Controllerï¼šwebå±‚</p>
<p>ï¼ˆ4ï¼‰@Repositoryï¼šdaoæŒä¹…å±‚</p>
<p>*ä¸Šé¢çš„å››ä¸ªæ³¨è§£åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä»¥ç”¨æ¥åˆ›å»ºbeanå®ä¾‹ï¼Œå¯ä»¥ä¸åŒå±‚æ··ç”¨çš„ã€‚</p>
<p>3.åŸºäºæ³¨è§£æ–¹å¼å®ç°å¯¹è±¡åˆ›å»º</p>
<p>é‡æ–°æä¸€ä¸ªå·¥ç¨‹ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥ä¾èµ–ï¼Œaopã€‚</p>
<p>ç¬¬äºŒæ­¥ï¼šå¼€å¯ç»„ä»¶æ‰«æï¼Œçœ‹æœ‰æ²¡æœ‰æ³¨è§£ï¼Œæ‰«æå“ªä¸ªåŒ…ä¸­çš„å“ªä¸ªç±»ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼€å¯ç»„ä»¶æ‰«æ,æ‰«æå¤šä¸ªåŒ…ç”¨,éš”å¼€--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.company.dao,com.company.service&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºç±»ï¼Œåœ¨ç±»ä¸Šæ·»åŠ åˆ›å»ºå¯¹è±¡çš„æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(value = &quot;userService&quot;)</span>  <span class="comment">//ç±»ä¼¼äº&lt;bean id=&quot;&quot; class=&quot;&quot;/&gt;, valueå±æ€§å¯ä»¥çœç•¥ï¼Œé»˜è®¤ä¸ºç±»åé¦–å­—æ¯å°å†™ã€‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service add ......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestZhujie</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testZhujie</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">con</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> con.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class); <span class="comment">//æ‰“åé¢çš„ï¼Œç„¶å.varä¼šå‡ºç°å‰é¢çš„åŒ¹é…ç±»å‹</span></span><br><span class="line">        System.out.println(userService);</span><br><span class="line">        userService.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.ä¸Šé¢æ˜¯æ‰«æä¸€ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç±»ï¼Œä¹Ÿå¯ä»¥ä¸æ‰«ææ‰€æœ‰ç±»</p>
<p>ç¤ºä¾‹1 ï¼š<br><code>user-default-filters=&quot;false&quot; </code>è¡¨ç¤ºç°åœ¨ä¸ä½¿ç”¨é»˜è®¤filterï¼Œè‡ªå·±é…ç½®filterã€‚<br><code>context:include-filter</code>ï¼Œè®¾ç½®æ‰«æå“ªäº›å†…å®¹ï¼Œ<code>type=&quot;annotation&quot;</code>æ ¹æ®æ³¨è§£æ¥æ‰«æã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç¤ºä¾‹1 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.company.dao,com.company.service&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Component&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åªæ‰«æ<code>@component</code>æ³¨è§£çš„ç±»ã€‚</p>
<p>ç¤ºä¾‹2ï¼š<br><code>contextï¼šexclude-filter</code> è®¾ç½®å“ªäº›å†…å®¹ä¸æ‰«æã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç¤ºä¾‹2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.company.dao,com.company.service&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Component&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>5.åŸºäºæ³¨è§£æ–¹å¼å®ç°å±æ€§æ³¨å…¥</p>
<p>ï¼ˆ1ï¼‰@Autowiredï¼šæ ¹æ®å±æ€§ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…</p>
<p>ç¬¬ä¸€æ­¥ï¼šæŠŠserviceå’Œdaoå¯¹è±¡éƒ½åˆ›å»ºï¼Œä¹Ÿå°±æ˜¯åœ¨ç±»ä¸Šéƒ½æ·»åŠ æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDapImpt</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;dao add ......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒæ­¥ï¼šåœ¨serviceä¸­æ³¨å…¥daoå¯¹è±¡ï¼Œåœ¨serviceå†…çš„daoå¯¹è±¡å±æ€§ä¸Šæ·»åŠ æ³¨å…¥å±æ€§æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(value = &quot;userService&quot;)</span>  <span class="comment">//ç±»ä¼¼äº&lt;bean id=&quot;&quot; class=&quot;&quot;/, valueå±æ€§å¯ä»¥çœç•¥ï¼Œé»˜è®¤ä¸ºç±»åé¦–å­—æ¯å°å†™ã€‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userdao;  <span class="comment">//UserDaoæ˜¯æ¥å£ä¹Ÿå¯ä»¥å•Š</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service add ......&quot;</span>);</span><br><span class="line">        userdao.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>*Autowiredæ ‡æ³¨äº†UserDaoç±»å‹çš„ï¼Œæ ¹æ®ç±»å‹è‡ªåŠ¨æ‰¾åˆ°å®ƒçš„å®ç°ç±»</p>
<p>ï¼ˆ2ï¼‰@Qualifierï¼šæ ¹æ®å±æ€§åç§°è¿›è¡Œæ³¨å…¥</p>
<p>éœ€è¦ä¸ªä¸Šé¢çš„@Autowiredä¸€èµ·è¿›è¡Œä½¿ç”¨ã€‚å’Œä¸Šé¢çš„bytypeè‡ªåŠ¨æ³¨å…¥ç±»ä¼¼ï¼Œå¦‚æœä¸€ä¸ªæ¥å£æœ‰ä¸åŒå®ç°ç±»ï¼Œå°±ä¼šæœ‰å¤šä¸ªå¯åŒ¹é…çš„ï¼Œè¿™æ—¶éœ€è¦æ ¹æ®åç§°ï¼ˆ@componentæ‹¬å·é‡Œçš„valueï¼‰è¿›è¡Œè£…é…ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(value = &quot;userService&quot;)</span>  <span class="comment">//ç±»ä¼¼äº&lt;bean id=&quot;&quot; class=&quot;&quot;/, valueå±æ€§å¯ä»¥çœç•¥ï¼Œé»˜è®¤ä¸ºç±»åé¦–å­—æ¯å°å†™ã€‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(value = &quot;hh&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userdao;  <span class="comment">//UserDaoæ˜¯æ¥å£ä¹Ÿå¯ä»¥å•Š</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service add ......&quot;</span>);</span><br><span class="line">        userdao.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ3ï¼‰@Resourceï¼šå¯ä»¥æ ¹æ®ç±»å‹æ³¨å…¥ï¼Œä¹Ÿå¯ä»¥æ ¹æ®åç§°æ³¨å…¥</p>
<p>ç›´æ¥@Resourceæ˜¯æ ¹æ®ç±»å‹ï¼Œ@Resource(name&#x3D;â€hhâ€)æ ¹æ®åç§°ã€‚</p>
<p>Resourceæ˜¯javaæ‰©å±•åŒ…javaxä¸­çš„ï¼Œä¸Šé¢ä¸¤ä¸ªæ˜¯springä¸­çš„ã€‚</p>
<p>ï¼ˆ4ï¼‰@Valueï¼šæ³¨å…¥æ™®é€šç±»å‹å±æ€§</p>
<p>ä¸Šé¢ä¸‰ä¸ªéƒ½æ˜¯æ³¨å…¥å¯¹è±¡ç±»å‹æ•°æ®ï¼Œè¿™ä¸ªæ³¨å…¥æ™®é€šç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(value = &quot;liu&quot;)</span>  <span class="comment">//liuæ³¨å…¥åˆ°snameä¸­ï¼Œç›¸å½“äºxmlçš„property</span></span><br><span class="line"><span class="keyword">private</span> String sname;</span><br></pre></td></tr></table></figure>

<p>6.å®Œå…¨æ³¨è§£å¼€å‘</p>
<p>ä½¿ç”¨æ³¨è§£æ–¹å¼ç®¡ç†Beançš„ç›®çš„æ˜¯ï¼Œç®€åŒ–xmlé…ç½®ï¼Œç›®å‰åªæœ‰ä¸€è¡Œå¼€å¯ç»„ä»¶æ‰«æï¼Œå…¶ä»–çš„éƒ½ç”¨æ³¨è§£æ¥æ›¿ä»£ã€‚</p>
<p>ï¼ˆ1ï¼‰åˆ›å»ºé…ç½®ç±»ï¼Œæ›¿ä»£xmlé…ç½®æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>   <span class="comment">//ä½œä¸ºé…ç½®ç±»ï¼Œæ›¿ä»£xmlé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.company&quot;&#125;)</span>  <span class="comment">//å¼€å¯ç»„ä»¶æ‰«æ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ2ï¼‰ç¼–å†™æµ‹è¯•æ–¹æ³•ï¼Œé™¤äº†ç¬¬ä¸€æ­¥åŠ è½½é…ç½®ç±»ä¸åŒï¼Œå…¶ä»–éƒ½ä¸€æ ·</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testZhujie2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">con</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);  <span class="comment">//åŠ è½½é…ç½®ç±»</span></span><br><span class="line">    <span class="comment">//åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> con.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class); <span class="comment">//æ‰“åé¢çš„ï¼Œç„¶å.varä¼šå‡ºç°å‰é¢çš„åŒ¹é…ç±»å‹</span></span><br><span class="line">    System.out.println(userService);</span><br><span class="line">    userService.add();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§å¼€å‘ï¼Œåœ¨å®é™…å¼€å‘ä¸­ç”¨springbootï¼Œspringbootæœ¬è´¨ä¸Šè¿˜æ˜¯springï¼Œå¯¹springåšäº†ç®€åŒ–å¼€å‘ã€‚</p>
<h2 id="Day-6"><a href="#Day-6" class="headerlink" title="Day 6"></a>Day 6</h2><h3 id="AOP-åŸºæœ¬æ¦‚å¿µ"><a href="#AOP-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="AOP åŸºæœ¬æ¦‚å¿µ"></a>AOP åŸºæœ¬æ¦‚å¿µ</h3><p>ä»€ä¹ˆæ˜¯AOPï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯OOPå»¶ç»­ï¼Œå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜å¼€å‘çš„æ•ˆç‡ã€‚</p>
<p>ä¾‹å¦‚ï¼šåœ¨ç”¨æˆ·ç™»å½•åŠŸèƒ½åŸºç¡€ä¸Šæ·»åŠ åŠŸèƒ½â€“æƒé™åˆ¤æ–­</p>
<p>åŸå§‹æ–¹å¼ï¼šä¿®æ”¹æºä»£ç å®ç° if else</p>
<p>AOPï¼šä¸é€šè¿‡ä¿®æ”¹æºä»£ç æ–¹å¼åœ¨ä¸»å¹²åŠŸèƒ½é‡Œæ·»åŠ æ–°åŠŸèƒ½ï¼Œå°†æƒé™åˆ¤æ–­æ¨¡å—é€šè¿‡é…ç½®æ–¹å¼æ·»åŠ ã€‚</p>
<h3 id="AOPåº•å±‚åŸç†"><a href="#AOPåº•å±‚åŸç†" class="headerlink" title="AOPåº•å±‚åŸç†"></a>AOPåº•å±‚åŸç†</h3><p>AOPåº•å±‚ä½¿ç”¨åŠ¨æ€ä»£ç†</p>
<p>æœ‰ä¸¤ç§æƒ…å†µçš„åŠ¨æ€ä»£ç†ï¼š</p>
<p>ç¬¬ä¸€ç§ï¼šæœ‰æ¥å£æƒ…å†µï¼Œä½¿ç”¨JDKåŠ¨æ€ä»£ç†</p>
<p>å®šä¹‰UserDaoæ¥å£ï¼Œå®šä¹‰ä¸€ä¸ªUserDaoImplå®ç°ç±»ï¼Œç±»å†…é‡å†™ç™»å½•å‡½æ•°å®ç°ç™»å½•åŠŸèƒ½ã€‚ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºUserDaoæ¥å£å®ç°ç±»ä»£ç†å¯¹è±¡ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡å¢å¼ºç±»çš„æ–¹æ³•ã€‚</p>
<p>ç¬¬äºŒç§ï¼šæ²¡æœ‰æ¥å£æƒ…å†µï¼Œä½¿ç”¨CGLIBåŠ¨æ€ä»£ç†</p>
<p>æœ‰ä¸€ä¸ªUserç±»ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªå­ç±»æ¥ç»§æ‰¿Userç±»ï¼Œé‡å†™æ–¹æ³•æ‰©å±•åŠŸèƒ½å¢å¼ºé€»è¾‘ã€‚CGLIBåŠ¨æ€ä»£ç†ï¼šåˆ›å»ºä¸€ä¸ªå½“å‰ç±»ä¹‹ç±»çš„ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³•ã€‚</p>
<h3 id="AOPï¼ˆæœ‰æ¥å£æƒ…å†µJDKåŠ¨æ€ä»£ç†å®ç°ï¼‰"><a href="#AOPï¼ˆæœ‰æ¥å£æƒ…å†µJDKåŠ¨æ€ä»£ç†å®ç°ï¼‰" class="headerlink" title="AOPï¼ˆæœ‰æ¥å£æƒ…å†µJDKåŠ¨æ€ä»£ç†å®ç°ï¼‰"></a>AOPï¼ˆæœ‰æ¥å£æƒ…å†µJDKåŠ¨æ€ä»£ç†å®ç°ï¼‰</h3><p>1.æ¦‚å¿µï¼šä½¿ç”¨JDKåŠ¨æ€ä»£ç†ï¼Œä½¿ç”¨Proxyç±»é‡Œé¢çš„æ–¹æ³•åˆ›å»ºä»£ç†å¯¹è±¡ã€‚</p>
<p>APIæ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://www.matools.com/api/java8%EF%BC%88java.lang.reflect.Proxy%EF%BC%89">https://www.matools.com/api/java8ï¼ˆjava.lang.reflect.Proxyï¼‰</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newProxyInstance(ClassLoader loader, ç±»&lt;?&gt;[] interfaces, InvocationHandler h)    //é™æ€æ–¹æ³•</span><br></pre></td></tr></table></figure>

<p>è¿”å›æŒ‡å®šæ¥å£çš„ä»£ç†ç±»çš„å®ä¾‹ï¼Œè¯¥æ¥å£å°†æ–¹æ³•è°ƒç”¨åˆ†æ´¾ç»™æŒ‡å®šçš„è°ƒç”¨å¤„ç†ç¨‹åºã€‚</p>
<p>newProxyInstanceæ–¹æ³•çš„ä¸‰ä¸ªå‚æ•°ï¼šç±»åŠ è½½å™¨ï¼›å¢å¼ºæ–¹æ³•è¦å¢å¼ºçš„æ¥å£å®ç°ç±»ï¼Œæ”¯æŒå¤šä¸ªæ¥å£ï¼›å†™ä¸ªç±»å®ç°InvocationHandleræ¥å£ï¼Œåˆ›å»ºä»£ç†å¯¹è±¡ï¼Œé‡Œé¢å†™å¢å¼ºçš„æ–¹æ³•ï¼ˆå¯ä»¥å†™åŒ¿åå†…éƒ¨ç±»ï¼Œä¹Ÿå¯ä»¥å†™ä¸ªç±»å®ç°è¿™ä¸ªæ¥å£ï¼‰ã€‚ </p>
<p>2.ç¼–å†™JDKåŠ¨æ€ä»£ç†ä»£ç </p>
<p>ï¼ˆ1ï¼‰åˆ›å»ºæ¥å£ï¼Œå®šä¹‰æ–¹æ³•</p>
<p>ä»£ç ä¸­çš„UserDaoæ¥å£</p>
<p>ï¼ˆ2ï¼‰åˆ›å»ºæ¥å£å®ç°ç±»ï¼Œå®ç°æ–¹æ³•</p>
<p>ä»£ç ä¸­çš„UserDaoImplç±»</p>
<p>ï¼ˆ3ï¼‰ä½¿ç”¨Proxyç±»åˆ›å»ºæ¥å£ä»£ç†å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@program</span>: SpringAop</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2022-01-27 21:08</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDKProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†å¯¹è±¡</span></span><br><span class="line">        Class[] interfaces = &#123;UserDao.class&#125;;</span><br><span class="line">        <span class="comment">//1.å‡½æ•°å¼æ¥å£æ–¹æ³•</span></span><br><span class="line"><span class="comment">//        Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces, new InvocationHandler() &#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;</span></span><br><span class="line"><span class="comment">//                return null;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;);</span></span><br><span class="line">        <span class="comment">//2.å¤–é¢å†™ä¸ªç±»æ–¹æ³•</span></span><br><span class="line">        <span class="type">UserDaoImpl</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">        <span class="comment">//åšä¸€ä¸ªå¼ºè½¬ï¼Œåˆ›å»ºæ¥å£å®ç°ç±»çš„ä»£ç†å¯¹è±¡</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">dao</span> <span class="operator">=</span> (UserDao) Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces, <span class="keyword">new</span> <span class="title class_">UserDaoProxy</span>(userDao));</span><br><span class="line">        <span class="comment">//int res = dao.add(1,2);</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> dao.update(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;result:&quot;</span>+res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserDaoProxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span>&#123;</span><br><span class="line">    <span class="comment">//æŠŠåˆ›å»ºçš„æ˜¯è°çš„ä»£ç†å¯¹è±¡ï¼ŒæŠŠè°ä¼ é€’è¿‡æ¥</span></span><br><span class="line">    <span class="comment">//æœ‰å‚æ„é€ ä¼ é€’</span></span><br><span class="line">    <span class="keyword">private</span> Object obj;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserDaoProxy</span><span class="params">(Object obj)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¢å¼ºçš„é€»è¾‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//å¯ä»¥å¯¹è¦å¢å¼ºçš„æ–¹æ³•ä½œå‡ºåˆ¤æ–­ï¼Œå¢å¼ºå“ªä¸ªï¼Œç”¨getName()æ–¹æ³•</span></span><br><span class="line">        <span class="comment">//æ–¹æ³•ä¹‹å‰</span></span><br><span class="line">        System.out.println(<span class="string">&quot;å“ªä¸ªæ–¹æ³•ä¹‹å‰æ‰§è¡Œï¼š&quot;</span>+method.getName()+<span class="string">&quot;ï¼›ä¼ é€’çš„å‚æ•°ï¼š&quot;</span>+ Arrays.toString(args));</span><br><span class="line">        <span class="comment">//è¢«å¢å¼ºçš„æ–¹æ³•</span></span><br><span class="line">        Object res= method.invoke(obj, args);</span><br><span class="line">        <span class="comment">//æ–¹æ³•ä¹‹å</span></span><br><span class="line">        System.out.println(<span class="string">&quot;å“ªä¸ªæ–¹æ³•ä¹‹åæ‰§è¡Œï¼š&quot;</span>+method.getName()+<span class="string">&quot;ï¼›ä¼ é€’çš„å‚æ•°ï¼š&quot;</span>+ Arrays.toString(args));</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="AOP-æ“ä½œæœ¯è¯­"><a href="#AOP-æ“ä½œæœ¯è¯­" class="headerlink" title="AOP-æ“ä½œæœ¯è¯­"></a>AOP-æ“ä½œæœ¯è¯­</h3><p>1.è¿æ¥ç‚¹</p>
<p>ç±»ä¸­æœ‰è‹¥å¹²æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•éƒ½å¯ä»¥è¢«å¢å¼ºï¼Œåœ¨ä¸€ä¸ªç±»ä¸­å“ªäº›æ–¹æ³•å¯ä»¥è¢«å¢å¼ºï¼Œè¿™äº›æ–¹æ³•å°±å«åšè¿æ¥ç‚¹ã€‚</p>
<p>2.åˆ‡å…¥ç‚¹</p>
<p>å®é™…è¢«çœŸæ­£å¢å¼ºçš„æ–¹æ³•ï¼Œå«åšåˆ‡å…¥ç‚¹ã€‚</p>
<p>3.é€šçŸ¥ï¼ˆå¢å¼ºï¼‰</p>
<p>ï¼ˆ1ï¼‰å®é™…å¢å¼ºçš„é€»è¾‘éƒ¨åˆ†ç§°ä¸ºé€šçŸ¥æˆ–æ˜¯å¢å¼ºã€‚</p>
<p>ï¼ˆ2ï¼‰é€šçŸ¥æœ‰å¤šç§ç±»å‹<br>*å‰ç½®é€šçŸ¥ï¼šæ–¹æ³•ä¹‹å‰ä¼šæ‰§è¡Œ<br>*åç½®é€šçŸ¥ï¼šæ–¹æ³•ä¹‹åä¼šæ‰§è¡Œ<br>*ç¯ç»•é€šçŸ¥ï¼šæ–¹æ³•çš„å‰åéƒ½æ‰§è¡Œ<br>*å¼‚å¸¸é€šçŸ¥ï¼šæ–¹æ³•å‡ºç°å¼‚å¸¸æ‰§è¡Œ<br>*æœ€ç»ˆé€šçŸ¥ï¼šç±»ä¼¼try-catch-finallyï¼Œä¸ç®¡æœ‰æ²¡æœ‰å¼‚å¸¸éƒ½æ‰§è¡Œ</p>
<p>4.åˆ‡é¢</p>
<p>æ˜¯åŠ¨ä½œï¼ŒæŠŠé€šçŸ¥åº”ç”¨åˆ°åˆ‡å…¥ç‚¹çš„è¿‡ç¨‹å«åšåˆ‡é¢ã€‚</p>
<h3 id="AOPæ“ä½œ-å‡†å¤‡å·¥ä½œ"><a href="#AOPæ“ä½œ-å‡†å¤‡å·¥ä½œ" class="headerlink" title="AOPæ“ä½œ-å‡†å¤‡å·¥ä½œ"></a>AOPæ“ä½œ-å‡†å¤‡å·¥ä½œ</h3><p>1.Springæ¡†æ¶ä¸­ä¸€èˆ¬åŸºäºAspectJå®ç°AOPæ“ä½œã€‚</p>
<p>ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯AspectJï¼Ÿ</p>
<p>*AspectJæ˜¯ç‹¬ç«‹çš„æ¡†æ¶ï¼Œä¸æ˜¯Springç»„æˆéƒ¨åˆ†ï¼Œç‹¬ç«‹AOPæ¡†æ¶ï¼Œä¸€èˆ¬æŠŠAspectJå’ŒSpringæ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼Œè¿›è¡ŒAOPæ“ä½œã€‚</p>
<p>2.åŸºäºAspectJå®ç°AOPæ“ä½œ</p>
<p>ï¼ˆ1ï¼‰åŸºäºxmlé…ç½®æ–‡ä»¶å®ç°</p>
<p>ï¼ˆ2ï¼‰åŸºäºæ³¨è§£æ–¹å¼å®ç°ï¼ˆä¸€èˆ¬ç”¨è¿™ä¸ªï¼‰</p>
<p>3.åœ¨é¡¹ç›®å·¥ç¨‹ä¸­å¼•å…¥AOPç›¸å…³ä¾èµ–ã€‚</p>
<p>éœ€è¦æ·»åŠ ä¸€ä¸ªaspectçš„ä¾èµ–åŒ…ã€‚åœ¨<a target="_blank" rel="noopener" href="https://mvnrepository.comä¸­æœç´¢aspectjã€cglibã€aopallianceä¾èµ–åŒ…./">https://mvnrepository.comä¸­æœç´¢aspectjã€cglibã€aopallianceä¾èµ–åŒ…ã€‚</a></p>
<p>4.åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</p>
<p>ï¼ˆ1ï¼‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„ä½œç”¨ï¼šçŸ¥é“å¯¹å“ªä¸ªç±»é‡Œé¢çš„å“ªä¸ªæ–¹æ³•è¿›è¡Œå¢å¼ºã€‚</p>
<p>ï¼ˆ2ï¼‰è¯­æ³•ç»“æ„ï¼š<code>execution([æƒé™ä¿®é¥°ç¬¦][è¿”å›ç±»å‹][ç±»å…¨è·¯å¾„][æ–¹æ³•åç§°][å‚æ•°åˆ—è¡¨])</code></p>
<p>ä¸¾ä¾‹1ï¼šå¯¹com.company.dao.BookDaoç±»é‡Œé¢çš„addè¿›è¡Œå¢å¼º<br><code>execution(* com.company.dao.BookDao.add(...))</code></p>
<p>ä¸¾ä¾‹2ï¼šå¯¹com.company.dao.BookDaoç±»é‡Œé¢çš„æ‰€æœ‰è¿›è¡Œå¢å¼º<br><code>execution(* com.company.dao.BookDao.*(...))</code></p>
<p>ä¸¾ä¾‹3ï¼šå¯¹com.company.daoåŒ…é‡Œé¢æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•è¿›è¡Œå¢å¼º<br><code>execution(* com.company.dao.*.*(...))</code></p>
<h3 id="AOP-AspectJæ³¨è§£æ“ä½œ"><a href="#AOP-AspectJæ³¨è§£æ“ä½œ" class="headerlink" title="AOP-AspectJæ³¨è§£æ“ä½œ"></a>AOP-AspectJæ³¨è§£æ“ä½œ</h3><p>1.åˆ›å»ºç±»ï¼Œåœ¨ç±»ä¸­å®šä¹‰æ–¹æ³•</p>
<p>åˆ›å»ºUserç±»</p>
<p>2.åˆ›å»ºå¢å¼ºç±»ï¼ˆç¼–å†™å¢å¼ºé€»è¾‘ï¼‰</p>
<p>åœ¨å¢å¼ºç±»UserProxyä¸­ï¼Œåˆ›å»ºæ–¹æ³•ï¼Œè®©ä¸åŒæ–¹æ³•ä»£è¡¨ä¸åŒé€šçŸ¥ç±»å‹ã€‚</p>
<p>3.è¿›è¡Œé€šçŸ¥çš„é…ç½®</p>
<p>ï¼ˆ1ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å¯æ³¨è§£æ‰«æï¼ˆå¯ä»¥å†™é…ç½®ç±»ï¼Œä¹Ÿå¯ä»¥å†™é…ç½®æ–‡ä»¶ï¼‰é¦–å…ˆæ˜¯åç§°ç©ºé—´ï¼Œå†å¼€å¯ç»„ä»¶æ‰«æ</p>
<p>ï¼ˆ2ï¼‰ä½¿ç”¨æ³¨è§£åˆ›å»ºUserå’ŒUserProxyå¯¹è±¡ï¼Œç”¨@Component</p>
<p>ï¼ˆ3ï¼‰åœ¨å¢å¼ºç±»ä¸Šé¢æ·»åŠ æ³¨è§£@Aspect</p>
<p>ï¼ˆ4ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­å¼€å¯ç”Ÿæˆä»£ç†å¯¹è±¡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼€å¯ç»„ä»¶æ‰«æ,æ‰«æå¤šä¸ªåŒ…ç”¨,éš”å¼€--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.company.aopdemo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼€å¯Aspectç”Ÿæˆä»£ç†å¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4.é…ç½®ä¸åŒç±»å‹çš„é€šçŸ¥</p>
<p>åœ¨å¢å¼ºç±»çš„é‡Œé¢ï¼Œåœ¨ä½œä¸ºé€šçŸ¥æ–¹æ³•ä¸Šé¢æ·»åŠ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.aopdemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@program</span>: SpringAop</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: liuxuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2022-01-29 21:48</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="comment">//Beforeæ³¨è§£è¡¨ç¤ºä½œä¸ºå‰ç½®é€šçŸ¥ï¼Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¡¨ç¤ºå¢å¼ºå“ªä¸ªæ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Before(value=&quot;execution(* com.company.aopdemo.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@After(value=&quot;execution(* com.company.aopdemo.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@AfterReturning(value=&quot;execution(* com.company.aopdemo.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@AfterThrowing(value=&quot;execution(* com.company.aopdemo.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç¯ç»•é€šçŸ¥ï¼Œæ–¹æ³•ä¹‹å‰å’Œæ–¹æ³•ä¹‹åéƒ½æ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@Around(value=&quot;execution(* com.company.aopdemo.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before around......&quot;</span>);</span><br><span class="line">        proceedingJoinPoint.proceed();  <span class="comment">//è¡¨ç¤ºæ‰§è¡Œè¢«å¢å¼ºçš„æ–¹æ³•ï¼Œæœ‰å¼‚å¸¸å¤„ç†</span></span><br><span class="line">        System.out.println(<span class="string">&quot;after around......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>&#x2F;&#x2F;afterè¡¨ç¤ºæ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œ</strong>ï¼Œæœ€ç»ˆé€šçŸ¥ï¼Œä¸ç®¡æœ‰æ²¡æœ‰å¼‚å¸¸</p>
<p><strong>&#x2F;&#x2F;afterreturningè¡¨ç¤ºåœ¨æ–¹æ³•è¿”å›å€¼ä¹‹åæ‰§è¡Œ</strong>ï¼Œåç½®é€šçŸ¥ï¼Œè¿”å›é€šçŸ¥ï¼Œæœ‰å¼‚å¸¸ä¸æ‰§è¡Œ</p>
<p><strong>&#x2F;&#x2F;å¦‚æœå¼‚å¸¸äº†ï¼ŒafterReturningå’Œç¯ç»•ä¹‹åä¸æ‰§è¡Œ</strong></p>
<p>5.ç›¸åŒåˆ‡å…¥ç‚¹æŠ½å–ï¼Œ@Pointcutæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›¸åŒåˆ‡å…¥ç‚¹æŠ½å–</span></span><br><span class="line"><span class="meta">@Pointcut(value=&quot;execution(* com.company.aopdemo.User.add(..))&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointdemo</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Beforeæ³¨è§£è¡¨ç¤ºä½œä¸ºå‰ç½®é€šçŸ¥ï¼Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¡¨ç¤ºå¢å¼ºå“ªä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="comment">//@Before(value=&quot;execution(* com.company.aopdemo.User.add(..))&quot;)</span></span><br><span class="line"><span class="meta">@Before(value = &quot;pointdemo()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;before......&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6.æœ‰å¤šä¸ªå¢å¼ºç±»å¯¹åŒä¸€ä¸ªæ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œå¯ä»¥è®¾ç½®å¢å¼ºç±»ä¼˜å…ˆçº§</p>
<p>åœ¨å¢å¼ºç±»ä¸Šé¢æ·»åŠ æ³¨è§£@Order(æ•°å­—ç±»å‹å€¼)ï¼Œå€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonProxy</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç›¸åŒåˆ‡å…¥ç‚¹æŠ½å–</span></span><br><span class="line">    <span class="meta">@Pointcut(value = &quot;execution(* com.company.aopdemo.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointdemo</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Beforeæ³¨è§£è¡¨ç¤ºä½œä¸ºå‰ç½®é€šçŸ¥ï¼Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¡¨ç¤ºå¢å¼ºå“ªä¸ªæ–¹æ³•</span></span><br><span class="line">    <span class="comment">//@Before(value=&quot;execution(* com.company.aopdemo.User.add(..))&quot;)</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;pointdemo()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;person before,order1,é«˜ä¼˜å…ˆçº§......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Day-7"><a href="#Day-7" class="headerlink" title="Day 7"></a>Day 7</h2><h3 id="AOPæ“ä½œ-åŸºäºAspectJé…ç½®æ–‡ä»¶"><a href="#AOPæ“ä½œ-åŸºäºAspectJé…ç½®æ–‡ä»¶" class="headerlink" title="AOPæ“ä½œ-åŸºäºAspectJé…ç½®æ–‡ä»¶"></a>AOPæ“ä½œ-åŸºäºAspectJé…ç½®æ–‡ä»¶</h3><p>åˆ›å»ºä¸€ä¸ªåŸºæœ¬ç±»ï¼Œå†åˆ›å»ºä¸€ä¸ªå¢å¼ºç±»ï¼Œç„¶åé…ç½®æ–‡ä»¶ä¸­ç”¨<code>&lt;bean&gt;</code>åˆ›å»ºä¸¤ä¸ªå¯¹è±¡ï¼Œå†åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ‡å…¥ç‚¹ï¼Œä½¿ç”¨<code>&lt;aop:config&gt;</code>æ³¨è§£ï¼Œä½¿ç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼<code>&lt;aop:pointcut ...</code>ï¼Œå†é…ç½®åˆ‡é¢ï¼Œé…ç½®å¢å¼ºä½œç”¨åœ¨å“ªä¸ªåœ°æ–¹ã€‚</p>
<p><img src="/images/%E5%88%87%E9%9D%A2%E6%B3%A8%E8%A7%A3.png"></p>
<h3 id="å®Œå…¨æ³¨è§£å¼€å‘"><a href="#å®Œå…¨æ³¨è§£å¼€å‘" class="headerlink" title="å®Œå…¨æ³¨è§£å¼€å‘"></a>å®Œå…¨æ³¨è§£å¼€å‘</h3><p>åˆ›å»ºé…ç½®ç±»ï¼Œä¸éœ€è¦å†™xmlé…ç½®æ–‡ä»¶ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>   <span class="comment">//ä½œä¸ºé…ç½®ç±»ï¼Œæ›¿ä»£xmlé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.company&quot;&#125;)</span>  <span class="comment">//å¼€å¯ç»„ä»¶æ‰«æ</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy(proxyTargetClass=true)</span>  <span class="comment">//ä»£æ›¿é…ç½®åˆ‡å…¥ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JDBCTemplate-æ¦‚è¿°å’Œå‡†å¤‡å·¥ä½œ"><a href="#JDBCTemplate-æ¦‚è¿°å’Œå‡†å¤‡å·¥ä½œ" class="headerlink" title="JDBCTemplate-æ¦‚è¿°å’Œå‡†å¤‡å·¥ä½œ"></a>JDBCTemplate-æ¦‚è¿°å’Œå‡†å¤‡å·¥ä½œ</h3><p>1.ä»€ä¹ˆæ˜¯JDBCTemplateï¼Ÿ</p>
<p>Springæ¡†æ¶å¯¹JDBCè¿›è¡Œå°è£…ï¼Œä½¿ç”¨JDBCTemplateå¯ä»¥æ–¹ä¾¿å®ç°å¯¹æ•°æ®åº“çš„æ“ä½œã€‚</p>
<p>2.å‡†å¤‡å·¥ä½œ</p>
<p>ï¼ˆ1ï¼‰å¼•å…¥ç›¸å…³çš„jaråŒ…</p>
<p>éœ€è¦mysqlåŒ…ã€druidå¾·é²ä¼ŠåŒ…ã€springä¸­çš„jdbcåŒ…ã€springä¸­çš„txçš„äº‹åŠ¡ç›¸å…³ã€springä¸­çš„ormåŒ…ç”¨æ¥æ•´åˆå…¶ä»–æ¡†æ¶ã€‚</p>
<p>ï¼ˆ2ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®æ•°æ®åº“çš„è¿æ¥æ± </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç›´æ¥é…ç½®è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/userDb&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span>  </span><br></pre></td></tr></table></figure>

<p>ï¼ˆ3ï¼‰é…ç½®JDBCTemplateå¯¹è±¡ï¼Œæ³¨å…¥DataSourceï¼Œç”¨çš„setæ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;jdbcTemplate&quot;</span> class=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span><br><span class="line">    &lt;!-- æ³¨å…¥DataSource --&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;dataSource&quot;</span> ref=<span class="string">&quot;dataSource&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ4ï¼‰åˆ›å»ºserviceç±»ï¼Œåˆ›å»ºdaoç±»ï¼Œå®Œæˆæ³¨å…¥ï¼Œåœ¨daoæ³¨å…¥jdbcTemplateå¯¹è±¡ã€‚</p>
<p>å¼€å¯ç»„ä»¶æ‰«æï¼Œç”¨æ³¨è§£åˆ›å»ºå¯¹è±¡ï¼Œserviceä¸­æ³¨å…¥daoï¼Œdaoä¸­æ³¨å…¥jdbcTemplateå¯¹è±¡ã€‚</p>
<h3 id="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ·»åŠ ï¼‰"><a href="#JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ·»åŠ ï¼‰" class="headerlink" title="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ·»åŠ ï¼‰"></a>JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ·»åŠ ï¼‰</h3><p>1.macå®‰è£…æ•°æ®åº“å¯è§†åŒ–å·¥å…·ï¼Œæœ€ç»ˆè£…äº†DataGripï¼Œè§å¸–å­ã€ŠMacå®‰è£…mysqlã€‹</p>
<p>2.å»ºåº“å»ºè¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">mysql -uliuxuan -p</span><br><span class="line">create database b_jdbc;</span><br><span class="line">show databases;</span><br><span class="line">use b_jdbc;</span><br><span class="line"></span><br><span class="line">CREATE TABLE IF NOT EXISTS `user_db`(</span><br><span class="line">   `user_id` bigint unsigned NOT NULL,</span><br><span class="line">   `username` varchar(100) NOT NULL,</span><br><span class="line">   `ustate` varchar(50) NOT NULL,</span><br><span class="line">   PRIMARY KEY(`user_id`)</span><br><span class="line">)ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT=&#x27;biao&#x27;;</span><br><span class="line"></span><br><span class="line"> CREATE TABLE `kiss_share_idproducer` (</span><br><span class="line">  `id` bigint unsigned NOT NULL AUTO_INCREMENT COMMENT &#x27;è‡ªå¢&#x27;,</span><br><span class="line">  `app_id` bigint NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;äº§å“çº¿id&#x27;,</span><br><span class="line">  `init_id` bigint NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;åˆå§‹åŒ–id&#x27;,</span><br><span class="line">  `max_id` bigint NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;å½“å‰id&#x27;,</span><br><span class="line">  `setp` bigint NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;æ¯æ¬¡åˆ†é…æ•°&#x27;,</span><br><span class="line">  `mix_id` smallint NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;å¯ç”¨ä¸ªä½æ··æ·†å› å­&#x27;,</span><br><span class="line">  `desc` varchar(16) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;desc&#x27;,</span><br><span class="line">  `mtime` int NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;æ›´æ–°æ—¶é—´&#x27;,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  UNIQUE KEY `idx_app` (`app_id`) USING BTREE</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT=&#x27;å‘å·å™¨&#x27;;</span><br></pre></td></tr></table></figure>

<p>3.entityåŒ…é‡Œå¯¹åº”æ•°æ®åº“åˆ›å»ºå®ä½“ç±»</p>
<p>4.ç¼–å†™serveicå’Œdao</p>
<p>ï¼ˆ1ï¼‰åœ¨daoä¸­æ“ä½œæ•°æ®åº“æ·»åŠ æ–¹æ³•</p>
<p>ï¼ˆ2ï¼‰è°ƒç”¨JdbcTemplateå¯¹è±¡é‡Œé¢updateæ–¹æ³•å®ç°æ·»åŠ æ“ä½œï¼šä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯sqlè¯­å¥ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯å˜å‚æ•°ï¼Œè®¾ç½®sqlè¯­å¥å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span>  <span class="comment">//åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="comment">//æ³¨å…¥Dao</span></span><br><span class="line">    <span class="meta">@Autowired</span>  <span class="comment">//ä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°æ³¨å…¥</span></span><br><span class="line">    <span class="keyword">private</span> BookDao userDao;  <span class="comment">//ä½¿ç”¨daoä¸­çš„æ–¹æ³•å¾—åˆ›å»ºBookDaoï¼ˆæ¥å£ï¼Ÿï¼‰çš„å¯¹è±¡ï¼Œç–‘æƒ‘ï¼šä¸ºä»€ä¹ˆæ˜¯æ¥å£ï¼Ÿï¼Ÿï¼Ÿ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·»åŠ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        userDao.add(user);  <span class="comment">//ç”¨daoé‡Œçš„æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span>  <span class="comment">//åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="comment">//æ³¨å…¥JDBCTemplate</span></span><br><span class="line">    <span class="meta">@Autowired</span>  <span class="comment">//æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„JdbcTemplate</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ•°æ®åº“æ·»åŠ æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºsqlè¯­å¥</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into user_db values(?,?,?)&quot;</span>;</span><br><span class="line">        <span class="comment">//2.è°ƒç”¨æ–¹æ³•å®ç°</span></span><br><span class="line">        <span class="comment">//å¯å˜å‚æ•°å°±æ˜¯ä¸€ä¸ªæ•°ç»„å‹ï¼Œå¯ä»¥ç”¨Object</span></span><br><span class="line">        Object[] args = &#123;user.getUserId(), user.getUserName(), user.getUstate()&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, args);  <span class="comment">//updateè¡¨ç¤ºå½±å“è¡Œæ•°</span></span><br><span class="line">        System.out.println(update);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5.ç¼–å†™æµ‹è¯•æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestJDBC</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testJDBC</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1.åŠ è½½springé…ç½®æ–‡ä»¶</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//2.è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">BookService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">        <span class="comment">//getBeançš„ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºbeançš„åç§°ï¼Œxmlé…ç½®æ–‡ä»¶ä¸­çš„idï¼Œå¦‚æœæ˜¯æ³¨è§£åˆ›å»ºï¼Œåˆ™å°å†™ç¬¬ä¸€ä½</span></span><br><span class="line">        <span class="comment">//æ–°å»ºä¸€ä¸ªUserå¯¹è±¡</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        u.setUserId(<span class="number">2</span>);</span><br><span class="line">        u.setUserName(<span class="string">&quot;lucky&quot;</span>);</span><br><span class="line">        u.setUstate(<span class="string">&quot;online&quot;</span>);</span><br><span class="line">        <span class="comment">//è°ƒç”¨serviceä¸­çš„æ–¹æ³•</span></span><br><span class="line">        service.addUser(u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6.å‘ç”Ÿé”™è¯¯ï¼š</p>
<p><code>ä¸¥é‡: create connection SQLException, url: jdbc:mysql://localhost:3306/b_jdbc, errorCode 1251, state 08004</code></p>
<p>mysql-connectorçš„jaråŒ…ç‰ˆæœ¬å¤ªä½ï¼ŒåŸæ¥æ˜¯5.å‡ ï¼Œæ”¹ä¸º8.å‡ ï¼Œæ”¹è¿‡ä¹‹åï¼Œéœ€è¦åŠ jcï¼Œ<code>value=&quot;com.mysql.cj.jdbc.Driver</code>ï¼Œä»¥åŠï¼Œurlåé¢è¦åŠ æ—¶åŒºï¼Œ<code>value=&quot;jdbc:mysql://localhost:3306/b_jdbc?serverTimezone=UTC&quot;</code></p>
<p>åæ¥åˆå‘ç”Ÿé”™è¯¯ï¼š<code> create connection SQLException, url: jdbc:mysql://localhost:3306/b_jdbc?serverTimezone=UTC, errorCode 1045, state 28000</code> è¿™ä¸ªæ˜¯å› ä¸ºç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯rootï¼Œè¿æ¥ä¸ä¸Šã€‚rootçš„å¯†ç ä¸ºç©ºï¼Œæ˜¯å¯ä»¥çš„è¿æ¥æˆåŠŸçš„ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç›´æ¥é…ç½®è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/b_jdbc?serverTimezone=UTC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™ä¸ªjdbcè¿æ¥æ•°æ®åº“çš„æ–¹æ³•ï¼ˆé€šè¿‡é…ç½®æ–‡ä»¶ï¼‰ï¼Œå’Œã€Šjavaå¼€å‘å…¥é—¨jdbcã€‹é‡Œé¢çš„è¿æ¥æ•°æ®åº“æ–¹æ³•ä¸åŒã€‚</p>
</blockquote>
<h2 id="Day-8"><a href="#Day-8" class="headerlink" title="Day 8"></a>Day 8</h2><h3 id="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆä¿®æ”¹ã€åˆ é™¤ï¼‰"><a href="#JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆä¿®æ”¹ã€åˆ é™¤ï¼‰" class="headerlink" title="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆä¿®æ”¹ã€åˆ é™¤ï¼‰"></a>JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆä¿®æ”¹ã€åˆ é™¤ï¼‰</h3><p>1.é¦–å…ˆdaoæ¥å£åˆ›å»ºä¸¤ä¸ªæ–¹æ³•ï¼Œdaoå®ç°ç±»é‡Œé‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
<p>2.serviceå±‚é‡Œåˆ›å»ºdaoå®ç°ç±»å¯¹è±¡ï¼Œåˆ›å»ºæ–¹æ³•ï¼Œé‡Œé¢è°ƒç”¨å¯¹è±¡çš„daoå±‚æ–¹æ³•ã€‚serviceå’Œdaoçš„æ–¹æ³•ä¼ å…¥å¿…è¦å‚æ•°ï¼Œuserå¯¹è±¡æˆ–æ˜¯idä¹‹ç±»çš„ã€‚</p>
<p>3.é‡ç‚¹å†™daoå±‚å†…æ“ä½œæ•°æ®åº“çš„æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update user_db set username=?, ustate=? where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, user.getUserName(), user.getUstate(), user.getUserId());</span><br><span class="line">    System.out.println(update);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from user_db where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, id);</span><br><span class="line">    System.out.println(update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.æµ‹è¯•æ–¹æ³•</p>
<h3 id="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›æŸä¸ªå€¼ï¼‰"><a href="#JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›æŸä¸ªå€¼ï¼‰" class="headerlink" title="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›æŸä¸ªå€¼ï¼‰"></a>JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›æŸä¸ªå€¼ï¼‰</h3><p>ä¾‹å¦‚è¿”å›å¤šå°‘è¡Œæ•°æ®ã€‚<code>select count(*) from user_db;</code></p>
<p>ä¾‹å¦‚ï¼šæŸ¥è¯¢è¡¨é‡Œæœ‰å¤šå°‘æ¡è®°å½•ã€‚</p>
<p>é¦–å…ˆå†™ä¸€ä¸ªserviceæ–¹æ³•findCountï¼Œè°ƒç”¨daoé‡Œçš„æ–¹æ³•ï¼Œå†™daoæ–¹æ³•ã€‚daoæ–¹æ³•é‡Œå†™selectè¯­å¥ï¼Œå¹¶è¿”å›ã€‚ä½¿ç”¨jdbcæ–¹æ³•queryForObject(sqlè¯­å¥, è¿”å›ç±»å‹çš„classä¾‹å¦‚Integer.class)ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">select</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select count(*) from user_db&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">nums</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, Integer.class);</span><br><span class="line">    <span class="keyword">return</span> nums;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›å¯¹è±¡ï¼‰"><a href="#JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›å¯¹è±¡ï¼‰" class="headerlink" title="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›å¯¹è±¡ï¼‰"></a>JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›å¯¹è±¡ï¼‰</h3><p>ä¾‹å¦‚ï¼šæŸ¥è¯¢ç”¨æˆ·çš„è¯¦æƒ…é¡µé¢ã€‚</p>
<p>æ ¹æ®idè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œserviceå†™ä¸€ä¸ªfindUseræ–¹æ³•ï¼Œdaoå†™ä¸€ä¸ªfindæ–¹æ³•ã€‚daoå†…é‡‡ç”¨jdbcæ¨¡ç‰ˆä¸­çš„queryForObjectæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼šsqlè¯­å¥ï¼›ç¬¬äºŒä¸ªå‚æ•°ï¼šRowMapperæ¥å£ï¼Œspringæä¾›ï¼Œåšåˆ°ä¸€äº›å°è£…ï¼Œä½¿ç”¨è¿™ä¸ªæ¥å£é‡Œé¢çš„å®ç°ç±»å¯ä»¥å®Œæˆæ•°æ®çš„å°è£…ï¼›ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šsqlè¯­å¥?å€¼ã€‚</p>
<p>ç¬¬äºŒä¸ªå‚æ•°ï¼š<code>new BeanPropertyRowMapper&lt;è¿”å›ç±»å‹çš„åå­—&gt;(è¿”å›ç±»å‹çš„class)</code> ã€‚æä¾›å¥½çš„å®ç°ç±»ï¼Œç›´æ¥ç”¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">find</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">    String sql= <span class="string">&quot;select * from user_db where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;User&gt;(User.class), id);</span><br><span class="line">    <span class="keyword">return</span> u;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†æ˜¾ç¤ºUserå¯¹è±¡ï¼Œé‡å†™é‡Œé¢çš„tostringæ–¹æ³•ã€‚</p>
<h3 id="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›é›†åˆï¼‰"><a href="#JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›é›†åˆï¼‰" class="headerlink" title="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›é›†åˆï¼‰"></a>JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæŸ¥è¯¢è¿”å›é›†åˆï¼‰</h3><p>åœºæ™¯ï¼šæŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼Œè¿”å›ä¸€ä¸ªé›†åˆã€‚è¿”å›<code>List&lt;User&gt;</code></p>
<p> é¦–å…ˆserviceè°ƒç”¨daoçš„æ–¹æ³•ï¼Œç¼–å†™daoæ–¹æ³•ã€‚daoå†…ç”¨queryæ–¹æ³•æ“ä½œæ•°æ®åº“ã€‚queryä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°sqlè¯­å¥ï¼›ç¬¬äºŒä¸ªå‚æ•°å’Œä¸Šé¢ä¸€æ ·ï¼›ç¬¬ä¸‰ä¸ªå¯æœ‰å¯æ— ï¼Ÿå‚æ•°å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user_db&quot;</span>;</span><br><span class="line">    List&lt;User&gt;res = jdbcTemplate.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;User&gt;(User.class));</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ·»åŠ æ“ä½œï¼‰"><a href="#JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ·»åŠ æ“ä½œï¼‰" class="headerlink" title="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ·»åŠ æ“ä½œï¼‰"></a>JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡æ·»åŠ æ“ä½œï¼‰</h3><p>æ‰¹é‡æ“ä½œæŒ‡æ“ä½œè¡¨é‡Œçš„å¤šæ¡è®°å½•</p>
<p>æ‰¹é‡æ·»åŠ ï¼Œä½¿ç”¨ jdbcçš„<code>batchUpdate(sqlè¯­å¥, List&lt;Object[]&gt;batchArgs)</code>æ–¹æ³•ã€‚è¿”å›çš„æ˜¯int[]ç±»å‹ã€‚åº•å±‚æ˜¯å¯¹é›†åˆè¿›è¡Œéå†ï¼ŒæŒ¨ä¸ªæ·»åŠ ã€‚æ•°ç»„è¾“å‡ºè¦ç”¨Arrays.toString(æ•°ç»„å)ã€‚</p>
<p>serviceå±‚å»ºä¸€ä¸ªbatchAddæ–¹æ³•ï¼Œä¼ å…¥List&lt;Object[]&gt;batchArgsã€‚daoä¸­åˆ›å»ºæ–¹æ³•ï¼Œå®ç°æ“ä½œæ•°æ®åº“ï¼Œ<code>insert into user_db values(?,?,?)</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchAdd</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into user_db values(?,?,?)&quot;</span>;</span><br><span class="line">    <span class="type">int</span>[] update = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line">    System.out.println(<span class="string">&quot;å½±å“è¡Œæ•°ï¼š&quot;</span>+ Arrays.toString(update));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡ä¿®æ”¹æ“ä½œï¼‰"><a href="#JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡ä¿®æ”¹æ“ä½œï¼‰" class="headerlink" title="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡ä¿®æ”¹æ“ä½œï¼‰"></a>JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡ä¿®æ”¹æ“ä½œï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchUpdate</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update user_db set username=?,ustate=? where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">int</span>[] update = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line">    System.out.println(<span class="string">&quot;æ‰¹é‡æ›´æ–°å½±å“è¡Œæ•°ï¼š&quot;</span>+ Arrays.toString(update));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è‡ªå»ºList</span></span><br><span class="line">List&lt;Object[]&gt; batchArgs2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Object[] o3 = &#123;<span class="string">&quot;java&quot;</span>, <span class="string">&quot;on&quot;</span>, <span class="number">1</span>&#125;;</span><br><span class="line">Object[] o4 = &#123;<span class="string">&quot;c++&quot;</span>, <span class="string">&quot;off&quot;</span>, <span class="number">2</span>&#125;;</span><br><span class="line">batchArgs2.add(o3);</span><br><span class="line">batchArgs2.add(o4);</span><br><span class="line">service.batchUpdate(batchArgs2);</span><br></pre></td></tr></table></figure>

<h3 id="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡åˆ é™¤æ“ä½œï¼‰"><a href="#JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡åˆ é™¤æ“ä½œï¼‰" class="headerlink" title="JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡åˆ é™¤æ“ä½œï¼‰"></a>JDBCTemplateæ“ä½œæ•°æ®åº“ï¼ˆæ‰¹é‡åˆ é™¤æ“ä½œï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchDelete</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from user_db where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">int</span>[] update = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line">    System.out.println(<span class="string">&quot;æ‰¹é‡åˆ é™¤å½±å“è¡Œæ•°ï¼š&quot;</span>+ Arrays.toString(update));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è‡ªå»ºList</span></span><br><span class="line">List&lt;Object[]&gt; batchArgs3 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Object[] o5= &#123;<span class="number">17</span>&#125;;</span><br><span class="line">Object[] o6 = &#123;<span class="number">18</span>&#125;;</span><br><span class="line">batchArgs3.add(o5);</span><br><span class="line">batchArgs3.add(o6);</span><br><span class="line">service.batchDelete(batchArgs3);</span><br></pre></td></tr></table></figure>

<h2 id="Day-9"><a href="#Day-9" class="headerlink" title="Day 9"></a>Day 9</h2><h3 id="äº‹åŠ¡æ“ä½œ-äº‹åŠ¡æ¦‚å¿µ"><a href="#äº‹åŠ¡æ“ä½œ-äº‹åŠ¡æ¦‚å¿µ" class="headerlink" title="äº‹åŠ¡æ“ä½œ-äº‹åŠ¡æ¦‚å¿µ"></a>äº‹åŠ¡æ“ä½œ-äº‹åŠ¡æ¦‚å¿µ</h3><p>1ã€ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ</p>
<p>äº‹åŠ¡æ˜¯æ•°æ®åº“æ“ä½œçš„æœ€åŸºæœ¬å•å…ƒï¼Œé€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚</p>
<p>2ã€äº‹åŠ¡çš„å››ä¸ªç‰¹æ€§ï¼šACIDï¼šåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ã€‚</p>
<h3 id="äº‹åŠ¡æ“ä½œ-æ­å»ºäº‹åŠ¡æ“ä½œç¯å¢ƒ"><a href="#äº‹åŠ¡æ“ä½œ-æ­å»ºäº‹åŠ¡æ“ä½œç¯å¢ƒ" class="headerlink" title="äº‹åŠ¡æ“ä½œ-æ­å»ºäº‹åŠ¡æ“ä½œç¯å¢ƒ"></a>äº‹åŠ¡æ“ä½œ-æ­å»ºäº‹åŠ¡æ“ä½œç¯å¢ƒ</h3><p>åœºæ™¯ï¼šè½¬è´¦ç¯å¢ƒ</p>
<p>javaeeæœ‰ä¸‰å±‚ï¼šwebå±‚ã€serviceä¸šåŠ¡é€»è¾‘å±‚ã€daoå¯¹æ•°æ®åº“æ“ä½œå±‚ä¸å†™ä¸šåŠ¡æ“ä½œã€‚</p>
<p>daoå±‚åˆ›å»ºä¸¤ä¸ªæ–¹æ³•ï¼šï¼ˆ1ï¼‰å°‘é’±çš„æ–¹æ³•ï¼ˆ2ï¼‰å¤šé’±çš„æ–¹æ³•ã€‚</p>
<p>serviceå±‚åˆ›å»ºæ–¹æ³•ï¼šè½¬è´¦æ–¹æ³•ä¸­è°ƒç”¨daoçš„ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
<p>1.åˆ›å»ºæ•°æ®åº“è¡¨ï¼Œæ·»åŠ è®°å½•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS `acount`(</span><br><span class="line">   `id` int unsigned NOT NULL,</span><br><span class="line">   `username` varchar(100) NOT NULL,</span><br><span class="line">   `money` bigint NOT NULL,</span><br><span class="line">   PRIMARY KEY(`id`)</span><br><span class="line">)ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT=&#x27;acount&#x27;;</span><br><span class="line"></span><br><span class="line">insert into acount values(1, &quot;liu&quot;, 1000);</span><br><span class="line">insert into acount values(2, &quot;hao&quot;, 1000);</span><br></pre></td></tr></table></figure>

<p>2.åˆ›å»ºserviceï¼Œæ­å»ºdaoï¼Œå®Œæˆå¯¹è±¡åˆ›å»ºå’Œæ³¨å…¥å…³ç³»ã€‚</p>
<p>serviceæ³¨å…¥daoï¼Œåœ¨daoæ³¨å…¥JdbcTemplateï¼Œåœ¨JdbcTemplateæ³¨å…¥DataSourceã€‚</p>
<p>serviceç±»ï¼Œä½¿ç”¨æ³¨è§£@Serviceæ–¹å¼åˆ›å»ºå¯¹è±¡ï¼Œ@Autowiredæ³¨å…¥daoã€‚åŒæ ·åœ¨daoç”¨@Autowiredæ³¨å…¥jdbcã€‚</p>
<p>3.åœ¨daoä¸­åˆ›å»ºä¸¤ä¸ªæ–¹æ³•ï¼Œå¤šé’±addMoneyå’Œå°‘é’±reduceMoneyçš„æ–¹æ³•ï¼Œåœ¨serviceä¸­åˆ›å»ºæ–¹æ³•ï¼Œè½¬è´¦çš„æ–¹æ³•ã€‚daoä¸­ç”¨updateæ–¹æ³•ã€‚</p>
<p>4.æµ‹è¯•</p>
<p>5.å‘ç°é—®é¢˜ï¼Œå¦‚æœå…ˆæ‰§è¡Œå®Œdaoä¸­çš„ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œå‘ç”Ÿå¼‚å¸¸ï¼Œç¬¬äºŒä¸ªæ–¹æ³•å°†ä¸æ‰§è¡Œï¼Œäº§ç”Ÿæ•°æ®å¼‚å¸¸ã€‚å¦‚ä½•è§£å†³ï¼Ÿä½¿ç”¨äº‹åŠ¡ã€‚</p>
<p>åœ¨serviceçš„æ–¹æ³•ä¸­ï¼Œtry catchæ•è·å¼‚å¸¸ã€‚é¦–å…ˆå¼€å¯äº‹åŠ¡ï¼Œç„¶åè¿›è¡Œäº‹åŠ¡æ“ä½œï¼Œæ²¡æœ‰å‘ç°å¼‚å¸¸åˆ™æäº¤äº‹åŠ¡ï¼Œå‡ºç°å¼‚å¸¸åˆ™äº‹åŠ¡å›æ»šã€‚</p>
<h3 id="äº‹åŠ¡æ“ä½œ-Springäº‹åŠ¡ç®¡ç†ä»‹ç»"><a href="#äº‹åŠ¡æ“ä½œ-Springäº‹åŠ¡ç®¡ç†ä»‹ç»" class="headerlink" title="äº‹åŠ¡æ“ä½œ-Springäº‹åŠ¡ç®¡ç†ä»‹ç»"></a>äº‹åŠ¡æ“ä½œ-Springäº‹åŠ¡ç®¡ç†ä»‹ç»</h3><p>1.äº‹åŠ¡ç®¡ç†åŠ åˆ°å“ªä¸ªå±‚ï¼Ÿå»ºè®®åŠ åˆ°ä¸šåŠ¡é€»è¾‘å±‚serviceã€‚</p>
<p>2.åœ¨Springè¿›è¡Œäº‹åŠ¡ç®¡ç†æ“ä½œ</p>
<p>ï¼ˆ1ï¼‰æœ‰ä¸¤ç§æ–¹å¼ï¼šç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†å’Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼ˆä¸€èˆ¬ä½¿ç”¨å£°æ˜å¼ï¼‰</p>
<p>ç¼–ç¨‹å¼æŒ‡çš„æ˜¯ç”¨ä»£ç å®ç°ç¬¬ä¸€æ­¥ç¬¬äºŒæ­¥ç¬¬ä¸‰æ­¥ã€‚ã€‚ã€‚try catchæ•è·å¼‚å¸¸ä¹‹ç±»çš„ã€‚</p>
<p>3.å£°æ˜å¼äº‹åŠ¡ç®¡ç†ä¸¤ç§æ–¹å¼</p>
<p>ï¼ˆ1ï¼‰åŸºäºæ³¨è§£æ–¹å¼ï¼ˆä½¿ç”¨ï¼‰</p>
<p>ï¼ˆ2ï¼‰åŸºäºxmlé…ç½®æ–‡ä»¶æ–¹å¼</p>
<p>4.åœ¨Springè¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œåº•å±‚ä½¿ç”¨AOPã€‚</p>
<p>5.Springäº‹åŠ¡ç®¡ç†API</p>
<p>æä¾›ä¸€ä¸ªæ¥å£ï¼Œä»£è¡¨äº‹åŠ¡ç®¡ç†å™¨ï¼Œè¿™ä¸ªæ¥å£é’ˆå¯¹ä¸åŒçš„æ¡†æ¶æä¾›ä¸åŒçš„å®ç°ç±»ã€‚</p>
<p>PlatformTransactionManageræ¥å£ã€‚DatasourceTransactionManagerå®ç°ç±»é’ˆå¯¹jdbcã€‚</p>
<h3 id="äº‹åŠ¡æ“ä½œ-æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†"><a href="#äº‹åŠ¡æ“ä½œ-æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†" class="headerlink" title="äº‹åŠ¡æ“ä½œ-æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†"></a>äº‹åŠ¡æ“ä½œ-æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†</h3><p>1.åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®äº‹åŠ¡ç®¡ç†å™¨ã€‚æœ¬è´¨ä¸Šå°±æ˜¯åˆ›å»ºPlatformTransactionManageræ¥å£å®ç°ç±»çš„å¯¹è±¡ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ³¨å…¥DataSourceæ•°æ®æº --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.åœ¨springé…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å¯äº‹åŠ¡æ³¨è§£</p>
<p>ï¼ˆ1ï¼‰åœ¨Springé…ç½®æ–‡ä»¶ä¸­å¼•å…¥åç§°ç©ºé—´tx. <code>xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</code></p>
<p>ï¼ˆ2ï¼‰å¼€å¯äº‹åŠ¡æ³¨è§£</p>
<p><code>&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;&gt;&lt;/tx:annotation-driven&gt;</code></p>
<p>3.åœ¨serviceç±»ä¸Šé¢ï¼ˆæˆ–è€…serviceç±»é‡Œé¢çš„æ–¹æ³•ä¸Šé¢ï¼‰æ·»åŠ æ³¨è§£ @Transactional</p>
<p>å¦‚æœæ·»åŠ åˆ°ç±»ä¸Šé¢ï¼Œè¡¨ç¤ºè¿™ä¸ªç±»é‡Œçš„æ‰€æœ‰æ–¹æ³•éƒ½æ·»åŠ äº‹åŠ¡ã€‚</p>
<h3 id="äº‹åŠ¡æ“ä½œ-å£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®"><a href="#äº‹åŠ¡æ“ä½œ-å£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®" class="headerlink" title="äº‹åŠ¡æ“ä½œ-å£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®-"></a>äº‹åŠ¡æ“ä½œ-å£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®-</h3><p>1.åœ¨serviceç±»ä¸Šé¢æ·»åŠ æ³¨è§£@Transactionalï¼Œåœ¨è¿™ä¸ªæ³¨è§£é‡Œé¢å¯ä»¥é…ç½®äº‹åŠ¡ç›¸å…³å‚æ•°ã€‚</p>
<p><strong>ç¬¬ä¸€ä¸ªå‚æ•°</strong>ï¼špropagation è¡¨ç¤ºäº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼Œå¤šäº‹åŠ¡æ–¹æ³•ç›´æ¥è¿›è¡Œè°ƒç”¨ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­äº‹åŠ¡æ˜¯å¦‚ä½•è¿›è¡Œç®¡ç†çš„ã€‚</p>
<p>äº‹åŠ¡æ–¹æ³•ï¼šå¯¹æ•°æ®åº“è¡¨æ•°æ®è¿›è¡Œå˜åŒ–çš„æ“ä½œã€‚</p>
<p>Springæ¡†æ¶äº‹åŠ¡ä¼ æ’­è¡Œä¸ºæœ‰ä¸ƒç§ï¼Œåˆ—å‡ºæœ€å¸¸è§çš„ä¸¤ç§ï¼š<br>ï¼ˆ1ï¼‰requiredï¼šaddæ–¹æ³•ä¸­æœ‰äº‹åŠ¡ï¼Œupdateæ²¡æœ‰ï¼Œaddæ–¹æ³•å†…è°ƒç”¨updateæ–¹æ³•ï¼Œåˆ™updateæ–¹æ³•ä½¿ç”¨addæ–¹æ³•å†…çš„äº‹åŠ¡ã€‚å¦‚æœaddæ–¹æ³•æ²¡æœ‰äº‹åŠ¡ï¼Œè°ƒç”¨updateæ–¹æ³•ä¹‹åï¼Œaddåˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå¹¶åœ¨äº‹åŠ¡å†…è¿è¡Œã€‚ä¹Ÿæ˜¯é»˜è®¤çš„ä¼ æ’­è¡Œä¸ºã€‚</p>
<p>ï¼ˆ2ï¼‰required_newï¼šä½¿ç”¨addæ–¹æ³•è°ƒç”¨updateæ–¹æ³•ï¼Œæ— è®ºaddæ–¹æ³•æ˜¯å¦æœ‰äº‹åŠ¡ï¼Œaddæ–¹æ³•éƒ½ä¼šæ–°å»ºä¸€ä¸ªäº‹åŠ¡ã€‚</p>
<p><strong>ç¬¬äºŒä¸ªå‚æ•°</strong>ï¼šioslation è¡¨ç¤ºäº‹åŠ¡éš”ç¦»çº§åˆ«</p>
<p>äº‹åŠ¡çš„éš”ç¦»æ€§ï¼šå¤šäº‹åŠ¡æ“ä½œä¹‹é—´ä¸ä¼šäº§ç”Ÿå½±å“ã€‚æœ‰ä¸‰ä¸ªè¯»çš„é—®é¢˜ï¼šè„è¯»ã€ä¸å¯é‡å¤è¯»ã€è™šï¼ˆå¹»ï¼‰è¯»ã€‚</p>
<p>è„è¯»ï¼šå¤šä¸ªäº‹ç‰©ä¹‹é—´ï¼Œä¸€ä¸ªæœªæäº¤çš„äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæœªæäº¤çš„äº‹åŠ¡ã€‚ä¾‹å¦‚ä¸¤ä¸ªäººéƒ½è¦æ“ä½œä¸€æ¡è®°å½•ï¼ŒåŸæ¥1000ï¼Œäº‹åŠ¡aæ”¹äº†è¿™æ¡è®°å½•ï¼Œå˜ä¸º2000ï¼Œäº‹åŠ¡bè¯»å–åˆ°äº‹åŠ¡aä¿®æ”¹çš„2000ï¼Œä½†æ˜¯äº‹åŠ¡aå›æ»šäº†ã€‚ç®—æ˜¯ä¸€ä¸ªè‡´å‘½é—®é¢˜ï¼Œä¸èƒ½å‡ºç°ã€‚</p>
<p>ä¸å¯é‡å¤è¯»ï¼šä¸€ä¸ªæœªæäº¤çš„äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæäº¤äº‹åŠ¡ä¿®æ”¹çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œäº‹åŠ¡aè¯»å–åˆ°åŸæ•°æ®100ï¼Œäº‹åŠ¡bè¯»å–åˆ°åŸæ•°æ®100ï¼Œå¹¶å°†å…¶ä¿®æ”¹ä¸º200ï¼Œäº‹åŠ¡bæäº¤ï¼Œäº‹åŠ¡aè¯»å–åˆ°æ•°æ®200ï¼Œè¿™æ ·äº‹åŠ¡bå¯¹äº‹åŠ¡aäº§ç”Ÿäº†å½±å“ã€‚æ˜¯ä¸€ç§ç°è±¡ï¼Œä¸èƒ½ç®—ä½œé—®é¢˜ã€‚</p>
<p>å¹»è¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæäº¤äº‹åŠ¡æ·»åŠ æ•°æ®ã€‚</p>
<p>é€šè¿‡è®¾ç½®éš”ç¦»çº§åˆ«å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚read uncommitted è¯»æœªæäº¤ï¼›read committed è¯»å·²æäº¤ï¼›repeatable read å¯é‡å¤è¯»ï¼ˆé»˜è®¤çš„ï¼‰ï¼›serializable ä¸²è¡ŒåŒ–ã€‚</p>
<p><strong>ç¬¬ä¸‰ä¸ªå‚æ•°</strong>ï¼štimeout è¡¨ç¤ºäº‹åŠ¡è¶…æ—¶æ—¶é—´ï¼Œäº‹åŠ¡éœ€è¦åœ¨ä¸€å®šæ—¶é—´å†…æäº¤ï¼Œè¶…æ—¶ä¸æäº¤åˆ™è¿›è¡Œå›æ»šã€‚é»˜è®¤å€¼æ˜¯ -1ï¼Œä¸è¶…æ—¶ã€‚è®¾ç½®æ—¶é—´æ˜¯ä»¥ç§’ä¸ºå•ä½ã€‚</p>
<p><strong>ç¬¬å››ä¸ªå‚æ•°</strong>ï¼šreadOnly æ˜¯å¦åªè¯»ï¼Œè¯»æ˜¯æŸ¥è¯¢æ“ä½œï¼ŒreadOnlyé»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºå¯ä»¥æŸ¥è¯¢å¯ä»¥æ·»åŠ ä¿®æ”¹åˆ é™¤ï¼Œè®¾ç½®ä¸ºtrueï¼Œåˆ™åªèƒ½æŸ¥è¯¢ã€‚</p>
<p><strong>ç¬¬äº”ä¸ªå‚æ•°</strong>ï¼šrollbackFor å›æ»šï¼Œè®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸è¿›è¡Œäº‹åŠ¡å›æ»šã€‚</p>
<p><strong>ç¬¬å…­ä¸ªå‚æ•°</strong>ï¼šnoRollbackFor ä¸å›æ»šï¼Œè®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸ä¸è¿›è¡Œäº‹åŠ¡å›æ»šã€‚</p>
<h3 id="äº‹åŠ¡æ“ä½œ-xmlå£°æ˜å¼äº‹åŠ¡ç®¡ç†"><a href="#äº‹åŠ¡æ“ä½œ-xmlå£°æ˜å¼äº‹åŠ¡ç®¡ç†" class="headerlink" title="äº‹åŠ¡æ“ä½œ-xmlå£°æ˜å¼äº‹åŠ¡ç®¡ç†"></a>äº‹åŠ¡æ“ä½œ-xmlå£°æ˜å¼äº‹åŠ¡ç®¡ç†</h3><p>1.åœ¨Springé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ã€‚</p>
<p>ç¬¬ä¸€æ­¥ é…ç½®äº‹åŠ¡ç®¡ç†å™¨</p>
<p>ç¬¬äºŒæ­¥ é…ç½®é€šçŸ¥ï¼Œaopä¸­å¢å¼ºçš„é‚£éƒ¨åˆ†ï¼Œè¿™é‡Œå°±æ˜¯äº‹åŠ¡ã€‚</p>
<p>ç¬¬ä¸‰æ­¥ é…ç½®åˆ‡å…¥ç‚¹å’Œåˆ‡é¢ï¼Œè¦å°†äº‹åŠ¡åŠ åˆ°å“ªä¸ªç±»çš„å“ªä¸ªæ–¹æ³•ä¸­ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1.åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ³¨å…¥DataSourceæ•°æ®æº --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼€å¯äº‹åŠ¡æ³¨è§£ï¼Œ xmlæ–¹å¼ä¸­ ä¸éœ€è¦äº†</span></span><br><span class="line"><span class="comment">&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;&gt;&lt;/tx:annotation-driven&gt;  --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 2.é…ç½®é€šçŸ¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txadvice&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡çš„ä¸€äº›ç›¸å…³å‚æ•° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŒ‡å®šå“ªç§è§„åˆ™çš„æ–¹æ³•ä¸Šé¢æ·»åŠ äº‹åŠ¡ï¼Œä¾‹å¦‚ add* è¡¨ç¤ºaddå¼€å¤´çš„æ·»åŠ äº‹åŠ¡ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;jiaoyi&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;REPEATABLE_READ&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 3.é…ç½®åˆ‡å…¥ç‚¹å’Œåˆ‡é¢ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®åˆ‡å…¥ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;qierudiansname&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.company.service.UserService.*(..))&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®åˆ‡å…¥ç‚¹, å°†äº‹åŠ¡çš„é€šçŸ¥è®¾ç½®åˆ°ä¸Šé¢çš„åˆ‡å…¥ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txadvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;qierudiansname&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹å‡ºï¼Œäº‹åŠ¡çš„åº•å±‚ä½¿ç”¨aopå®ç°ã€‚</p>
<p>æµ‹è¯•æ—¶ï¼ŒæŠŠæ³¨è§£æ³¨é‡Šæ‰ã€‚</p>
<h3 id="äº‹åŠ¡æ“ä½œ-å®Œå…¨æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†"><a href="#äº‹åŠ¡æ“ä½œ-å®Œå…¨æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†" class="headerlink" title="äº‹åŠ¡æ“ä½œ-å®Œå…¨æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†"></a>äº‹åŠ¡æ“ä½œ-å®Œå…¨æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†</h3><p>1.åˆ›å»ºé…ç½®ç±»ï¼Œä½¿ç”¨é…ç½®ç±»æ›¿ä»£xmlé…ç½®æ–‡ä»¶ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">//é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.company&quot;)</span>  <span class="comment">//å¼€å¯ç»„ä»¶æ‰«æ</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span>  <span class="comment">//å¼€å¯äº‹åŠ¡æ³¨è§£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TxConfig</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºæ•°æ®åº“è¿æ¥æ± </span></span><br><span class="line">    <span class="meta">@Bean</span>  <span class="comment">//é…ç½®æ–‡ä»¶ä¸­å°±æ˜¯åœ¨iocå®¹å™¨ä¸­åˆ›å»ºä¸€ä¸ªbeanå®ä¾‹ å†™æ–¹æ³•è¿”å›ä¸€ä¸ªDataSourceå¾·é²ä¼Šè¿æ¥æ± å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">getDuridDataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        dataSource.setDriverClassName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        dataSource.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/b_jdbc?serverTimezone=UTC&quot;</span>);</span><br><span class="line">        dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//åˆ›å»ºjdbcæ¨¡ç‰ˆå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> JdbcTemplate <span class="title function_">getJdbcTemplate</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbcTemplate</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>();</span><br><span class="line">        <span class="comment">//éœ€è¦æ³¨å…¥datasSurce, xmlä¸­æ˜¯ä½¿ç”¨setæ–¹æ³•è¿›è¡Œé…ç½®æ³¨å…¥çš„</span></span><br><span class="line">        <span class="comment">//setæ–¹æ³•é‡Œé¢å¦‚æœç”¨ä¸Šé¢çš„getDuridDataSourceæ–¹æ³•ï¼Œå°±ä¼šåˆ›å»ºä¸¤ä¸ªå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//ä½¿ç”¨å‚æ•°æ–¹æ³•ï¼Œå¯ä»¥åœ¨iocå®¹å™¨ä¸­æ ¹æ®ç±»å‹æ‰¾åˆ°å¯¹è±¡è¿›è¡Œæ³¨å…¥ï¼Œå°±åƒ@autowiredæ ¹æ®ç±»å‹è‡ªåŠ¨è£…é…</span></span><br><span class="line">        jdbcTemplate.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSourceTransactionManager <span class="title function_">getDataSourceTransactionManager</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">DataSourceTransactionManager</span> <span class="variable">dataSourceTransactionManager</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">DataSourceTransactionManager</span>();</span><br><span class="line">        dataSourceTransactionManager.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> dataSourceTransactionManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.æµ‹è¯•æ—¶ï¼Œå¼€å¯æ³¨è§£ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">wanquanzhujietrans</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//1.åŠ è½½é…ç½®ç±»</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(TxConfig.class);</span><br><span class="line">    <span class="comment">//2.è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡</span></span><br><span class="line">    <span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class);</span><br><span class="line">    <span class="comment">//getBeançš„ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºbeançš„åç§°ï¼Œxmlé…ç½®æ–‡ä»¶ä¸­çš„idï¼Œå¦‚æœæ˜¯æ³¨è§£åˆ›å»ºï¼Œåˆ™å°å†™ç¬¬ä¸€ä½</span></span><br><span class="line">    service.jiaoyi();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œç”¨springbootè¿›è¡Œå¼€å‘ï¼Œæ›¿ä»£springåŸºç¡€ä¸Šçš„å®Œå…¨æ³¨è§£å¼€å‘ï¼Œspringbootæ˜¯å¯¹springåšçš„å°è£…ã€‚</p>
<h2 id="æ€»ç»“-æœªå®Œ"><a href="#æ€»ç»“-æœªå®Œ" class="headerlink" title="æ€»ç»“&amp;&amp;æœªå®Œ"></a>æ€»ç»“&amp;&amp;æœªå®Œ</h2><p>1.Springæ¡†æ¶æ¦‚è¿°</p>
<p>ï¼ˆ1ï¼‰è½»é‡çº§å¼€æºJavaEEæ¡†æ¶ï¼Œä¸ºäº†è§£å†³ä¼ä¸šå¤æ‚æ€§ã€‚ä¸¤ä¸ªæ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼šiocã€aopã€‚</p>
<p>ï¼ˆ2ï¼‰Spring5.2.6ç‰ˆæœ¬</p>
<p>2.IOCå®¹å™¨</p>
<p>ï¼ˆ1ï¼‰IOCåº•å±‚åŸç†ï¼šxmlé…ç½®æ–‡ä»¶ã€å·¥å‚ã€åå°„ç­‰</p>
<p>ï¼ˆ2ï¼‰IOCæ¥å£ï¼ˆBeanFactoryï¼‰</p>
<p>ï¼ˆ3ï¼‰beanç®¡ç†æ“ä½œï¼šåŸºäºxmlè¿›è¡Œå¯¹è±¡åˆ›å»ºæ³¨å…¥å±æ€§ï¼›åŸºäºæ³¨è§£è¿›è¡Œå¯¹è±¡åˆ›å»ºæ³¨å…¥å±æ€§</p>
<p>3.AOP</p>
<p>ï¼ˆ1ï¼‰AOPåº•å±‚åŸç†ï¼šåŠ¨æ€ä»£ç†ï¼Œæœ‰æ¥å£ï¼ˆJDKåŠ¨æ€ä»£ç†ï¼‰ï¼Œæ²¡æœ‰æ¥å£ï¼ˆCGLIBåŠ¨æ€ä»£ç†ï¼‰</p>
<p>ï¼ˆ2ï¼‰æœ¯è¯­ï¼šåˆ‡å…¥ç‚¹ã€å¢å¼ºï¼ˆé€šçŸ¥ï¼‰ã€åˆ‡é¢</p>
<p>ï¼ˆ3ï¼‰åŸºäºAspectJå®ç°AOPæ“ä½œï¼šåŸºäºæ³¨è§£æ–¹å¼ï¼›åŸºäºé…ç½®æ–‡ä»¶</p>
<p>4.JdbcTemplate</p>
<p>ï¼ˆ1ï¼‰ä½¿ç”¨JdbcTemplateå¯¹æ•°æ®åº“çš„curdæ“ä½œ</p>
<p>ï¼ˆ2ï¼‰ä½¿ç”¨JdbcTemplateå®ç°æ•°æ®åº“æ‰¹é‡æ“ä½œ</p>
<p>5.äº‹åŠ¡æ“ä½œ</p>
<p>ï¼ˆ1ï¼‰äº‹åŠ¡æ¦‚å¿µ</p>
<p>ï¼ˆ2ï¼‰é‡è¦æ¦‚å¿µï¼ˆä¼ æ’­è¡Œä¸ºå’Œéš”ç¦»çº§åˆ«ï¼‰</p>
<p>ï¼ˆ3ï¼‰åŸºäºæ³¨è§£å®ç°å£°æ˜å¼äº‹åŠ¡ç®¡ç†</p>
<p>ï¼ˆ4ï¼‰åŸºäºxmlé…ç½®æ–‡ä»¶å®ç°äº‹åŠ¡ç®¡ç†</p>
<p>ï¼ˆ5ï¼‰å®Œå…¨æ³¨è§£æ–¹å¼å®ç°äº‹åŠ¡ç®¡ç†</p>
<p>6.Spring5æ–°ç‰¹æ€§ï¼š</p>
<p>ï¼ˆ1ï¼‰æ•´åˆæ—¥å¿—æ¡†æ¶</p>
<p>ï¼ˆ2ï¼‰@Nullableæ³¨è§£</p>
<p>ï¼ˆ3ï¼‰å‡½æ•°å¼æ³¨å†Œå¯¹è±¡</p>
<p>ï¼ˆ4ï¼‰æ•´åˆJUnit5å•å…ƒæµ‹è¯•æ¡†æ¶</p>
<p>ï¼ˆ5ï¼‰SpringWebfluxä½¿ç”¨</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Vf4y127N5?p=49&spm_id_from=pageDriver">https://www.bilibili.com/video/BV1Vf4y127N5?p=49&amp;spm_id_from=pageDriver</a></p>
<h2 id="æ–‡ä»¶è¯´æ˜"><a href="#æ–‡ä»¶è¯´æ˜" class="headerlink" title="æ–‡ä»¶è¯´æ˜"></a>æ–‡ä»¶è¯´æ˜</h2><p>b_studyä¸­ã€‚</p>
<p>xmlï¼šåŸºäºxmlé…ç½®æ–‡ä»¶å®ç°æ§åˆ¶åè½¬ï¼Œç®¡ç†beanå¯¹è±¡ï¼Œåˆ›å»ºå¯¹è±¡ï¼Œä¾èµ–æ³¨å…¥ï¼ˆæ³¨å…¥å±æ€§ï¼‰ã€‚</p>
<p>zhujieï¼šåŸºäºæ³¨è§£çš„beanç®¡ç†ã€‚</p>
<p>aopï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹</p>
<p>jdbcï¼šæ“ä½œæ•°æ®åº“</p>
<p>transactionï¼šäº‹åŠ¡ç›¸å…³</p>
<hr>
<p><em><strong>å­¦ä¹ ç¬”è®°ï¼Œä¾µæƒè¯·è”ç³»ï¼Œä¸€å®šç«‹åˆ»åˆ é™¤ã€‚</strong></em></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/09/myblog/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.gif">
      <meta itemprop="name" content="Sweetwater">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sweetwater's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/09/myblog/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ å…¥é—¨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-01-09 11:26:33" itemprop="dateCreated datePublished" datetime="2022-01-09T11:26:33+08:00">2022-01-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-20 15:56:42" itemprop="dateModified" datetime="2023-08-20T15:56:42+08:00">2023-08-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">æ·±åº¦å­¦ä¹ </span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ çš„åŒºåˆ«"><a href="#æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ çš„åŒºåˆ«" class="headerlink" title="æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ çš„åŒºåˆ«"></a>æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ çš„åŒºåˆ«</h2><p>æœºå™¨å­¦ä¹ â€”æ‹¥æœ‰æ‰¾ä¸€ä¸ªå‡½æ•°çš„èƒ½åŠ›ï¼Œæ ¹æ®è¾“å‡ºçš„ä¸åŒï¼Œåˆ†ä¸ºregressionå›å½’ã€åˆ†ç±»classificationï¼Œä»¥åŠå¾ˆå°‘æåŠçš„ç»“æ„åŒ–å­¦ä¹ structured learningï¼ˆè¾“å‡ºå›¾åƒï¼Œæ–‡æœ¬ï¼‰ã€‚</p>
<p>1.æ‰¾ä¸€ä¸ªå¸¦æœ‰æœªçŸ¥å‚æ•°çš„å‡½æ•°ï¼šy&#x3D;b+wxï¼Œbåç½®ï¼Œwæƒé‡ï¼Œæœºå™¨å­¦ä¹ ä¸­ï¼ŒæœªçŸ¥çš„å‚æ•°æ˜¯é€šè¿‡æ•°æ®æ¥å­¦ä¹ çš„ã€‚å¸¦æœ‰æœªçŸ¥å‚æ•°çš„å‡½æ•°ç§°ä¸ºmodelæ¨¡å‹ã€‚</p>
<p>2.ä»è®­ç»ƒæ•°æ®ä¸­å®šä¹‰Lossï¼ˆæŸå¤±ï¼‰ï¼ŒLossæ˜¯å…³äºå‚æ•°bã€wçš„å‡½æ•°ï¼Œç”¨æ¥åˆ¤æ–­ä¸€ç»„å‚æ•°å€¼å¥½è¿˜æ˜¯ä¸å¥½ã€‚<br>ç”¨è®­ç»ƒé›†è®¡ç®—è¯¯å·®ï¼Œå¯ä»¥æ˜¯ç»å¯¹å€¼è¯¯å·®MAEï¼Œä¹Ÿå¯ä»¥æ˜¯å‡æ–¹è¯¯å·®MSEã€‚<br>å¦‚æœyå€¼æ˜¯åŸºäºæ¦‚ç‡åˆ†å¸ƒçš„ï¼Œä¸€èˆ¬é‡‡å–cross-entropyäº¤å‰ç†µï¼Œå¯ä»¥ç»˜åˆ¶è¯¯å·®ç­‰é«˜çº¿å›¾error surfaceã€‚</p>
<p>3.ä¼˜åŒ–ï¼Œæ‰¾ä¸€ç»„æœ€å¥½çš„å‚æ•°wï¼Œbä½¿å¾—è¯¯å·®æœ€å°ã€‚<br>Gradient Descent æ¢¯åº¦ä¸‹é™ã€‚ä¸¾ä¾‹å…ˆåªæœ‰ä¸€ä¸ªå‚æ•°wï¼Œç»˜åˆ¶æ¨ªåæ ‡ä¸ºwå¯¹åº”çš„æŸå¤±å‡½æ•°æ›²çº¿ï¼Œåˆå§‹æ—¶å–ä¸€ä¸ªç‚¹ï¼Œéšæœºå–çš„ï¼Œä¹Ÿå¯ä»¥ç”¨é—ä¼ ç®—æ³•ç»™å‡ºä¸€ä¸ªè¾ƒä¼˜çš„æ¨¡å‹åˆå§‹å‚æ•°ã€‚é€‰å®šä¸€ä¸ªéšæœºåˆå§‹å€¼ï¼Œæ±‚è¯¥ç‚¹çš„åå¯¼å€¼ï¼Œå³è¯¥ç‚¹æ›²çº¿åˆ‡çº¿çš„æ–œç‡ã€‚ç„¶åè¿›è¡Œç§»åŠ¨ç‚¹ï¼Œè·¨åº¦å¤šå°‘å–å†³äºæ–œç‡å¤§å°ï¼Œæ–œç‡è¶Šå¤§ï¼Œè·¨åº¦è¶Šå¤§ï¼Œæ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªÎ·ï¼Œç§°ä¸ºlearning rate å­¦ä¹ ç‡ï¼Œè‡ªå·±è®¾å®šï¼ŒÎ·è¶Šå¤§è·¨åº¦è¶Šå¤§ï¼Œè®­ç»ƒè¶Šå¿«ã€‚æœºå™¨å­¦ä¹ ä¸­éœ€è¦è‡ªå·±è®¾å®šçš„å€¼ç§°ä¸ºè¶…å‚æ•°hyperparametersã€‚ä»¥æ­¤ç±»æ¨ï¼Œæ±‚ä¸‹ä¸€ä¸ªç‚¹ä¸‹ä¸‹ä¸ªç‚¹ã€‚åœæ­¢çš„æ—¶æœºï¼šçœ‹é¢„è®¾çš„è¿­ä»£æ¬¡æ•°ï¼Œæˆ–è€…æŸä¸€ç»„å‚æ•°è®¡ç®—å‡ºçš„å¾®åˆ†å€¼åˆšå¥½æ˜¯0ï¼Œåˆ™åœæ­¢è®­ç»ƒï¼Œæ˜¯ä¸ªå±€éƒ¨æœ€ä¼˜ï¼Œä¸ä¿è¯å…¨éƒ¨æœ€ä¼˜è§£ã€‚</p>
<p>å¯¹æ¨¡å‹çš„ä¿®æ”¹éœ€è¦å¯¹é—®é¢˜çš„å…·ä½“ç†è§£ï¼Œè€ƒè™‘å‰ä¸ƒå¤©æ¯”åªè€ƒè™‘å‰ä¸€å¤©çš„è¯¯å·®è¦å°ã€‚xæ˜¯å‰ä¸€å¤©çš„ï¼Œyæ˜¯é¢„æµ‹çš„åä¸€å¤©çš„ã€‚è€ƒè™‘å‰ä¸ƒå¤©çš„è¯ï¼Œå°±æœ‰ä¸ƒä¸ªwã€‚è®­ç»ƒæ•°æ®é›†æ˜¯å·²çŸ¥çš„ï¼Œæµ‹è¯•æ•°æ®é›†æ˜¯æœ¬æ¥å‡è£…ä¸çŸ¥é“çš„ï¼Œä¹Ÿå°±æ˜¯è¦é¢„æµ‹çš„yã€‚</p>
<p>è¾“å…¥xä¹˜æƒé‡ï¼Œå†åŠ ä¸Šä¸€ä¸ªåç½®çš„æ¨¡å‹ï¼Œç§°ä¸ºçº¿æ€§æ¨¡å‹ã€‚</p>
<p>çº¿æ€§æ¨¡å‹å…·æœ‰å±€é™æ€§ï¼Œæ¨¡å‹åå·®ã€‚</p>
<p>æœ‰æ—¶æ˜¯åˆ†æ®µçº¿æ€§æŠ˜çº¿å‡½æ•°&#x3D;å¸¸æ•°+ä¸€äº›åˆ—çš„åˆ†æ®µæ–œçº¿ã€‚</p>
<p>æœ‰æ—¶æ˜¯æ›²çº¿ï¼šå¯ä»¥ç”¨åˆ†æ®µçº¿æ€§æŠ˜çº¿é€¼è¿‘è¿ç»­æ›²çº¿ï¼Œéœ€è¦è¶³å¤Ÿçš„åˆ‡åˆ†ã€‚ï¼ˆä¹Ÿå¯ä»¥ç”¨max(0,æ–œçº¿)å åŠ è¡¨ç¤ºï¼‰</p>
<p>åˆ†æ®µæ–œçº¿å¯ä»¥ç”¨sigmoidå‡½æ•°æ¥é€¼è¿‘ã€‚</p>
<p><img src="/images/sigmoid.png"></p>
<p>æ”¹å˜wï¼Œå¯ä»¥æ”¹å˜å¡åº¦ã€‚æ”¹å˜bå¯ä»¥å·¦å³ç§»åŠ¨ã€‚æ”¹å˜cå¯ä»¥æ”¹å˜é«˜åº¦ã€‚</p>
<p><img src="/images/sigmoid2.png"></p>
<p>æ¥æºï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1qP4y147PJ/?spm_id_from=333.788.recommend_more_video.-1">https://www.bilibili.com/video/BV1qP4y147PJ/?spm_id_from=333.788.recommend_more_video.-1</a></p>
<p>æ€»ç»“æ¥è®²ï¼šé¦–å…ˆé€‰æ‹©æ¨¡å‹ï¼Œçº¿æ€§æ¨¡å‹æˆ–è€…å¤æ‚é€¼è¿‘æ›²çº¿ï¼Œæœ€å°åŒ–æŸå¤±å‡½æ•°ï¼Œç”¨æ¢¯åº¦ä¸‹é™æ³•ï¼Œé€‰æ‹©åˆå§‹å€¼è¿­ä»£è®¡ç®—è¿›è¡Œé€¼è¿‘ã€‚</p>
<p>Sigmoldå‡½æ•°å’ŒReLUåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œç§°ä¸ºæ¿€æ´»å‡½æ•°ã€‚å¯ä»¥å°†æ¿€æ´»å‡½æ•°è¿‡ç¨‹é‡å¤å‡ æ¬¡ï¼Œæ¥ä¼˜åŒ–æ¨¡å‹ã€‚æ¿€æ´»å‡½æ•°çš„éƒ¨åˆ†å«åšç¥ç»å…ƒï¼Œå¾ˆå¤šç¥ç»å…ƒç»„æˆç¥ç»ç½‘ç»œã€‚æ¯ä¸€åˆ—ç¥ç»å…ƒç§°ä¸ºéšè—å±‚ï¼Œå¾ˆå¤šå±‚å½±è—å±‚å½¢æˆæ·±åº¦å­¦ä¹ ã€‚</p>
<p>AlexNet16å±‚ã€‚VGG19å±‚ã€‚GoogleNet22å±‚ã€‚ResidualNet152å±‚ã€‚å¹¶ä¸æ˜¯å±‚æ•°è¶Šå¤šç½‘ç»œè¶Šæ·±é¢„æµ‹çš„æ•ˆæœå°±æ›´å¥½ï¼Œä¼šå‘ç”Ÿè¿‡æ‹ŸåˆOverfittingã€‚</p>
<h2 id="æœºå™¨å­¦ä¹ å…¥é—¨"><a href="#æœºå™¨å­¦ä¹ å…¥é—¨" class="headerlink" title="æœºå™¨å­¦ä¹ å…¥é—¨"></a>æœºå™¨å­¦ä¹ å…¥é—¨</h2><h3 id="1-æœºå™¨å­¦ä¹ æ¦‚è¿°"><a href="#1-æœºå™¨å­¦ä¹ æ¦‚è¿°" class="headerlink" title="1.æœºå™¨å­¦ä¹ æ¦‚è¿°"></a>1.æœºå™¨å­¦ä¹ æ¦‚è¿°</h3><h4 id="1-1-äººå·¥æ™ºèƒ½æ¦‚è¿°"><a href="#1-1-äººå·¥æ™ºèƒ½æ¦‚è¿°" class="headerlink" title="1.1.äººå·¥æ™ºèƒ½æ¦‚è¿°"></a>1.1.äººå·¥æ™ºèƒ½æ¦‚è¿°</h4><p>1956å¹´è¾¾ç‰¹èŒ…æ–¯ä¼šè®®ï¼Œäººå·¥æ™ºèƒ½å…ƒå¹´ã€‚æœ€åˆæ˜¯ç”¨æ¥æç»Ÿè®¡çš„ã€‚</p>
<p>äººå·¥æ™ºèƒ½åŒ…æ‹¬æœºå™¨å­¦ä¹ ï¼Œæœºå™¨å­¦ä¹ åŒ…æ‹¬æ·±åº¦å­¦ä¹ ã€‚<br>æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„å®ç°é€”å¾„ï¼ˆ1980så¼€å§‹ï¼‰<br>æ·±åº¦å­¦ä¹ ï¼ˆäººå·¥ç¥ç»ç½‘ç»œï¼‰æ˜¯æœºå™¨å­¦ä¹ çš„æ–¹æ³•ï¼ˆ2020å¼€å§‹ï¼‰</p>
<h4 id="1-2-äººå·¥æ™ºèƒ½çš„å‡ ä¸ªæ–¹å‘ï¼š"><a href="#1-2-äººå·¥æ™ºèƒ½çš„å‡ ä¸ªæ–¹å‘ï¼š" class="headerlink" title="1.2.äººå·¥æ™ºèƒ½çš„å‡ ä¸ªæ–¹å‘ï¼š"></a>1.2.äººå·¥æ™ºèƒ½çš„å‡ ä¸ªæ–¹å‘ï¼š</h4><p>ä¼ ç»Ÿé¢„æµ‹ï¼ˆé‡åŒ–æŠ•èµ„ã€å¹¿å‘Šæ¨èç­‰ï¼‰<br>å›¾åƒcvï¼ˆäººè„¸è¯†åˆ«ã€å›¾åƒæ£€æµ‹ï¼‰<br>è‡ªç„¶è¯­è¨€å¤„ç†nlpï¼ˆç¿»è¯‘ã€æ™ºèƒ½å®¢æœï¼‰</p>
<h4 id="1-3-æœºå™¨å­¦ä¹ æ¦‚è¿°"><a href="#1-3-æœºå™¨å­¦ä¹ æ¦‚è¿°" class="headerlink" title="1.3.æœºå™¨å­¦ä¹ æ¦‚è¿°"></a>1.3.æœºå™¨å­¦ä¹ æ¦‚è¿°</h4><p>æœºå™¨å­¦ä¹ æ˜¯ä»æ•°æ®ä¸­è‡ªåŠ¨åˆ†æè·å¾—æ¨¡å‹ï¼Œå¹¶åˆ©ç”¨æ¨¡å‹å¯¹æœªçŸ¥æ•°æ®è¿›è¡Œé¢„æµ‹ã€‚</p>
<p>æœºå™¨å­¦ä¹ ï¼šæ•°æ® -ï¼ˆè®­ç»ƒï¼‰- æ¨¡å‹ - é¢„æµ‹<br>äººï¼šç»éªŒ - ï¼ˆå½’çº³ï¼‰- è§„å¾‹ - é¢„æµ‹</p>
<h4 id="1-4-æ•°æ®é›†æ„æˆ"><a href="#1-4-æ•°æ®é›†æ„æˆ" class="headerlink" title="1.4.æ•°æ®é›†æ„æˆ"></a>1.4.æ•°æ®é›†æ„æˆ</h4><p>ç‰¹å¾å€¼ï¼ˆæˆ¿å­é¢ç§¯ã€ä½ç½®ã€æ¥¼å±‚ï¼‰ + ç›®æ ‡å€¼ï¼ˆæˆ¿ä»·ï¼‰</p>
<p>æ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªæ ·æœ¬ã€‚<br>æ•°æ®é›†å¯ä»¥æ²¡æœ‰ç›®æ ‡å€¼ã€‚</p>
<h4 id="1-5-æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ç±»"><a href="#1-5-æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ç±»" class="headerlink" title="1.5.æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ç±»"></a>1.5.æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ç±»</h4><p>ç›®æ ‡å€¼ï¼šç±»åˆ« - åˆ†ç±»é—®é¢˜ï¼ˆäººè„¸è¯†åˆ«ï¼‰<br>ç›®æ ‡å€¼ï¼šè¿ç»­å‹æ•°æ® - å›å½’é—®é¢˜<br>ç›®æ ‡å€¼ï¼šæ—  - æ— ç›‘ç£å­¦ä¹ </p>
<ul>
<li>ç›‘ç£å­¦ä¹ (supervised learning)ï¼ˆé¢„æµ‹ï¼‰<br>å®šä¹‰ï¼šè¾“å…¥æ•°æ®æ˜¯ç”±è¾“å…¥ç‰¹å¾å€¼å’Œç›®æ ‡å€¼æ‰€ç»„æˆã€‚å‡½æ•°çš„è¾“å‡ºå¯ä»¥æ˜¯ä¸€ä¸ªè¿ç»­çš„å€¼(ç§°ä¸ºå›å½’ï¼‰ï¼Œæˆ–æ˜¯è¾“å‡ºæ˜¯æœ‰é™ä¸ªç¦»æ•£å€¼ï¼ˆç§°ä½œåˆ†ç±»ï¼‰ã€‚<br>åˆ†ç±»ï¼š k-è¿‘é‚»ç®—æ³•ã€è´å¶æ–¯åˆ†ç±»ã€å†³ç­–æ ‘ä¸éšæœºæ£®æ—ã€é€»è¾‘å›å½’ã€ç¥ç»ç½‘ç»œ<br>å›å½’ï¼š çº¿æ€§å›å½’ã€å²­å›å½’</li>
<li>æ— ç›‘ç£å­¦ä¹ (unsupervised learning)<br>å®šä¹‰ï¼šè¾“å…¥æ•°æ®æ˜¯ç”±è¾“å…¥ç‰¹å¾å€¼æ‰€ç»„æˆã€‚<br>èšç±»ï¼š k-means</li>
</ul>
<p>è¿˜æœ‰åŠç›‘ç£å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ã€‚</p>
<h4 id="1-6-æœºå™¨å­¦ä¹ å¼€å‘æµç¨‹"><a href="#1-6-æœºå™¨å­¦ä¹ å¼€å‘æµç¨‹" class="headerlink" title="1.6.æœºå™¨å­¦ä¹ å¼€å‘æµç¨‹"></a>1.6.æœºå™¨å­¦ä¹ å¼€å‘æµç¨‹</h4><p>è·å–æ•°æ® -&gt; æ•°æ®é¢„å¤„ç† -&gt; ç‰¹å¾å·¥ç¨‹ -&gt; æœºå™¨å­¦ä¹ ç®—æ³•ä¸è®­ç»ƒ -&gt; æ¨¡å‹è¯„ä¼° -&gt; åº”ç”¨</p>
<p>ç®—æ³•æ˜¯æ ¸å¿ƒï¼Œæ•°æ®ã€è®¡ç®—æ˜¯åŸºç¡€ã€‚</p>
<p>ä»å…¥é—¨åˆ°å®é™…ï¼Œå†åˆ°ç†è®ºã€‚</p>
<p>åº“å’Œæ¡†æ¶ï¼šScikit-learnã€Tensflowï¼ˆæ·±åº¦å­¦ä¹ æ¡†æ¶ï¼‰</p>
<h3 id="2-ç‰¹å¾å·¥ç¨‹"><a href="#2-ç‰¹å¾å·¥ç¨‹" class="headerlink" title="2.ç‰¹å¾å·¥ç¨‹"></a>2.ç‰¹å¾å·¥ç¨‹</h3><h4 id="2-1-æ•°æ®é›†"><a href="#2-1-æ•°æ®é›†" class="headerlink" title="2.1.æ•°æ®é›†"></a>2.1.æ•°æ®é›†</h4><p>âœ…å¯ç”¨æ•°æ®é›†ï¼š<br>scikitlearnç‰¹ç‚¹ï¼š1ã€æ•°æ®é‡è¾ƒå°  2ã€æ–¹ä¾¿å­¦ä¹ <br>scikit-learnç½‘å€ï¼š<a target="_blank" rel="noopener" href="http://scikit-learn.org/stable/datasets/index.html#datasets">http://scikit-learn.org/stable/datasets/index.html#datasets</a></p>
<p>Kaggleç‰¹ç‚¹ï¼š1ã€å¤§æ•°æ®ç«èµ›å¹³åˆ   2ã€80ä¸‡ç§‘å­¦å®¶   3ã€çœŸå®æ•°æ®     4ã€æ•°æ®é‡å·¨å¤§<br>Kaggleç½‘å€ï¼š<a target="_blank" rel="noopener" href="https://www.kaggle.com/datasets">https://www.kaggle.com/datasets</a></p>
<p>Ucç‰¹ç‚¹ï¼š1ã€æ”¶å½•äº†360ä¸ªæ•°æ®é›†    2ã€è¦†ç›–ç§‘å­¦ã€ç”Ÿæ´»ã€ç»æµç­‰é¢†åŸŸ   3ã€æ•°æ®é‡å‡ åä¸‡<br>UCIæ•°æ®é›†ç½‘å€ï¼š <a target="_blank" rel="noopener" href="http://archive.ics.uci.edu/ml/">http://archive.ics.uci.edu/ml/</a></p>
<p>âœ…Scikit-learnï¼š<br>Pythonè¯­è¨€çš„æœºå™¨å­¦ä¹ å·¥å…·<br>Scikit-learnåŒ…æ‹¬è®¸å¤šçŸ¥åçš„æœºå™¨å­¦ä¹ ç®—æ³•çš„å®ç°<br>Scikit-learnæ–‡æ¡£å®Œå–„ï¼Œå®¹æ˜“ä¸Šæ‰‹ï¼Œä¸°å¯Œçš„API</p>
<p>âœ…å®‰è£…ï¼š<br><code>pip3 install sklearn</code>  å®‰è£…<br><code>pip3 list</code>   æŸ¥çœ‹ä¸€ä¸‹<br><code>python3</code>  è¿›å…¥python<br><code>import sklearn</code>  éªŒè¯ä¸€ä¸‹</p>
<p>âœ…è·å–æ•°æ®é›†apiï¼š<br>sklearn.datasets åŠ è½½è·å–æµè¡Œæ•°æ®é›†<br>1ã€datasets.load_*()<br>è·å–å°è§„æ¨¡æ•°æ®é›†ï¼Œæ•°æ®åŒ…å«åœ¨datasetsé‡Œ<br>2ã€datasets.fetch_*(data_home&#x3D;None)<br>è·å–å¤§è§„æ¨¡æ•°æ®é›†ï¼Œéœ€è¦ä»ç½‘ç»œä¸Šä¸‹è½½ï¼Œå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯data_homeï¼Œè¡¨ç¤ºæ•°æ®é›†ä¸‹è½½çš„ç›®å½•,é»˜è®¤æ˜¯ ~&#x2F;scikit_learn_data&#x2F;<br>datasets.fetch_20newsgroups(data_home&#x3D;None,subset&#x3D;â€˜trainâ€™)<br>subsetï¼šâ€™trainâ€™æˆ–è€…â€™testâ€™ï¼Œâ€™allâ€™ï¼Œå¯é€‰ï¼Œé€‰æ‹©è¦åŠ è½½çš„æ•°æ®é›†ã€‚<br>è®­ç»ƒé›†çš„â€œè®­ç»ƒâ€ï¼Œæµ‹è¯•é›†çš„â€œæµ‹è¯•â€ï¼Œä¸¤è€…çš„â€œå…¨éƒ¨â€</p>
<blockquote>
<p>loadå’Œfetchè¿”å›çš„æ•°æ®ç±»å‹datasets.base.Bunch(å­—å…¸æ ¼å¼)<br>dataï¼šç‰¹å¾æ•°æ®æ•°ç»„ï¼Œæ˜¯ [n_samples * n_features] çš„äºŒç»´ numpy.ndarray æ•°ç»„<br>targetï¼šæ ‡ç­¾æ•°ç»„ï¼Œæ˜¯ n_samples çš„ä¸€ç»´ numpy.ndarray æ•°ç»„<br>DESCRï¼šæ•°æ®æè¿°<br>feature_namesï¼šç‰¹å¾å,æ–°é—»æ•°æ®ï¼Œæ‰‹å†™æ•°å­—ã€å›å½’æ•°æ®é›†æ²¡æœ‰<br>target_namesï¼šæ ‡ç­¾å</p>
</blockquote>
<p><strong>Bunch(å­—å…¸æ ¼å¼)</strong>ï¼Œç»§æ‰¿è‡ªå­—å…¸çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥é”®å€¼å¯¹ï¼Œä¹Ÿå¯ä»¥ç‚¹å±æ€§ã€‚</p>
<p>âœ…æ•°æ®é›†çš„åˆ’åˆ†apiï¼šåˆ’åˆ†ä¸ºè®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®</p>
<p>è®­ç»ƒæ•°æ®ï¼šç”¨äºè®­ç»ƒï¼Œæ„å»ºæ¨¡å‹    70% 80% 75%<br>æµ‹è¯•æ•°æ®ï¼šåœ¨æ¨¡å‹æ£€éªŒæ—¶ä½¿ç”¨ï¼Œç”¨äºè¯„ä¼°æ¨¡å‹æ˜¯å¦æœ‰æ•ˆ    30% 20% 30%</p>
<p>sklearn.model_selection.train_test_split(arrays, *options)</p>
<blockquote>
<p>x æ•°æ®é›†çš„ç‰¹å¾å€¼<br>y æ•°æ®é›†çš„æ ‡ç­¾å€¼<br>test_size æµ‹è¯•é›†çš„å¤§å°ï¼Œä¸€èˆ¬ä¸ºfloat<br>random_state éšæœºæ•°ç§å­,ä¸åŒçš„ç§å­ä¼šé€ æˆä¸åŒçš„éšæœºé‡‡æ ·ç»“æœã€‚ç›¸åŒçš„ç§å­é‡‡æ ·ç»“æœç›¸åŒã€‚<br>return æµ‹è¯•é›†ç‰¹å¾è®­ç»ƒé›†ç‰¹å¾å€¼å€¼ï¼Œè®­ç»ƒæ ‡ç­¾ï¼Œæµ‹è¯•æ ‡ç­¾(é»˜è®¤éšæœºå–)</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">from sklearn .datasets import load_iris</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line"></span><br><span class="line">def datasets_demo():</span><br><span class="line">    # è·å–æ•°æ®é›†</span><br><span class="line">    iris = load_iris()</span><br><span class="line">    print(&quot;é¸¢å°¾èŠ±æ•°æ®é›†ï¼š\n&quot;, iris)</span><br><span class="line">    print(&quot;æŸ¥çœ‹æ•°æ®é›†æè¿°ï¼š\n&quot;, iris[&quot;DESCR&quot;])</span><br><span class="line">    print(&quot;æŸ¥çœ‹ç‰¹å¾å€¼åå­—ï¼š\n&quot;, iris.feature_names)</span><br><span class="line">    print(&quot;æŸ¥çœ‹æ ·æœ¬æ•°ï¼š\n&quot;, iris.data.shape)</span><br><span class="line"></span><br><span class="line">    # æ•°æ®é›†åˆ’åˆ†</span><br><span class="line">    # è®­ç»ƒé›†çš„ç‰¹å¾å€¼x_train æµ‹è¯•é›†çš„ç‰¹å¾å€¼x_test è®­ç»ƒé›†çš„ç›®æ ‡å€¼y_train æµ‹è¯•é›†çš„ç›®æ ‡å€¼y_test</span><br><span class="line">    x_train, x_test, y_train, y_test = train_test_split(iris.data, iris.target, test_size=0.2, random_state=22)</span><br><span class="line">    print(&quot;x_train:\n&quot;, x_train.shape)</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # sklearnæ•°æ®é›†ä½¿ç”¨</span><br><span class="line">    datasets_demo()</span><br></pre></td></tr></table></figure>

<h4 id="2-2-ç‰¹å¾å·¥ç¨‹"><a href="#2-2-ç‰¹å¾å·¥ç¨‹" class="headerlink" title="2.2.ç‰¹å¾å·¥ç¨‹"></a>2.2.ç‰¹å¾å·¥ç¨‹</h4><p>ä»€ä¹ˆæ˜¯ç‰¹å¾å·¥ç¨‹ï¼š<br>ç‰¹å¾å·¥ç¨‹æ˜¯ä½¿ç”¨ä¸“ä¸šèƒŒæ™¯çŸ¥è¯†å’ŒæŠ€å·§å¤„ç†æ•°æ®ï¼Œä½¿å¾—ç‰¹å¾èƒ½åœ¨æœºå™¨å­¦ä¹ ç®—æ³•ä¸Šå‘æŒ¥æ›´å¥½çš„ä½œç”¨çš„è¿‡ç¨‹ã€‚<br>æ„ä¹‰ï¼šä¼šç›´æ¥å½±å“æœºå™¨å­¦ä¹ çš„æ•ˆæœ</p>
<p>é‡è¦æ€§ï¼š<br>æ•°æ®å’Œç‰¹å¾å†³å®šäº†æœºå™¨å­¦ä¹ çš„ä¸Šé™ï¼Œè€Œæ¨¡å‹å’Œç®—æ³•åªæ˜¯é€¼è¿‘è¿™ä¸ªä¸Šé™è€Œå·²ã€‚</p>
<p>pandas:ä¸€ä¸ªæ•°æ®è¯»å–éå¸¸æ–¹ä¾¿ä»¥åŠåŸºæœ¬çš„å¤„ç†æ ¼å¼çš„å·¥å…·ï¼ˆæ•°æ®æ¸…æ´—ã€æ•°æ®å¤„ç†ï¼‰<br>sklearn:å¯¹äºç‰¹å¾çš„å¤„ç†æä¾›äº†å¼ºå¤§çš„æ¥å£</p>
<p>ç‰¹å¾å·¥ç¨‹åŒ…æ‹¬ï¼š<br>ç‰¹å¾æŠ½å–ã€ç‰¹å¾é¢„å¤„ç†ã€ç‰¹å¾é™ç»´</p>
<h5 id="âœ…ç‰¹å¾æŠ½å–"><a href="#âœ…ç‰¹å¾æŠ½å–" class="headerlink" title="âœ…ç‰¹å¾æŠ½å–"></a>âœ…ç‰¹å¾æŠ½å–</h5><p>å°†ä»»æ„æ•°æ®ï¼ˆå¦‚æ–‡æœ¬æˆ–å›¾åƒï¼‰è½¬æ¢ä¸ºå¯ç”¨äºæœºå™¨å­¦ä¹ çš„æ•°å­—ç‰¹å¾<br>ä¹Ÿå«ç‰¹å¾å€¼åŒ–ï¼Œæ˜¯ä¸ºäº†è®¡ç®—æœºæ›´å¥½çš„å»ç†è§£æ•°æ®<br>åˆ†ä¸ºï¼š<br>1.å­—å…¸ç‰¹å¾æå–(ç‰¹å¾ç¦»æ•£åŒ–)<br>2.æ–‡æœ¬ç‰¹å¾æå–<br>3.å›¾åƒç‰¹å¾æå–ï¼ˆæ·±åº¦å­¦ä¹ å°†ä»‹ç»ï¼‰</p>
<p>ç‰¹å¾æå–çš„APIï¼š<br><code>sklearn.feature_extraction</code></p>
<p><strong>å­—å…¸ç‰¹å¾æå–</strong>ï¼šå¯¹å­—å…¸æ•°æ®è¿›è¡Œç‰¹å¾å€¼åŒ–<br><code>sklearn.feature_extraction.DictVectorizer(sparse=True,â€¦)</code><br><code>DictVectorizer.fit_transform(X)</code> X:å­—å…¸æˆ–è€…åŒ…å«å­—å…¸çš„è¿­ä»£å™¨è¿”å›å€¼ï¼šè¿”å›sparseçŸ©é˜µ<br><code>CountVectorizer.get_feature_names()</code> è¿”å›å€¼:å•è¯åˆ—è¡¨<br>å­—å…¸ -&gt; çŸ©é˜µï¼ˆäºŒç»´æ•°ç»„ï¼‰ï¼ˆå…¶ä¸­å­—å…¸æ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªçŸ¢é‡ï¼Œä¹Ÿå°±æ˜¯ä¸€ç»´æ•°ç»„ï¼‰<br>å…¶ä¸­å±äºç±»åˆ«çš„ï¼Œä¼šç”¨onehotç¼–ç ï¼Œæ¯”å¦‚æœ‰ä¸‰ç±»ï¼Œä¼šå˜æˆä¸‰åˆ—ã€‚<br>å¯¹äºç‰¹å¾å½“ä¸­å­˜åœ¨ç±»åˆ«ä¿¡æ¯çš„æˆ‘ä»¬éƒ½ä¼šåšone-hotç¼–ç å¤„ç†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.feature_extraction import DictVectorizer</span><br><span class="line"></span><br><span class="line">def dict_demo():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    å¯¹å­—å…¸ç±»å‹çš„æ•°æ®è¿›è¡Œç‰¹å¾æŠ½å–</span><br><span class="line">    :return: None</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    data = [&#123;&#x27;city&#x27;: &#x27;åŒ—äº¬&#x27;,&#x27;temperature&#x27;:100&#125;, &#123;&#x27;city&#x27;: &#x27;ä¸Šæµ·&#x27;,&#x27;temperature&#x27;:60&#125;, &#123;&#x27;city&#x27;: &#x27;æ·±åœ³&#x27;,&#x27;temperature&#x27;:30&#125;]</span><br><span class="line">    # 1ã€å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span><br><span class="line">    transfer = DictVectorizer(sparse=False)</span><br><span class="line">    # 2ã€è°ƒç”¨fit_transform</span><br><span class="line">    data = transfer.fit_transform(data)</span><br><span class="line">    print(&quot;è¿”å›çš„ç»“æœ:\n&quot;, data)</span><br><span class="line">    # æ‰“å°ç‰¹å¾åå­—</span><br><span class="line">    print(&quot;ç‰¹å¾åå­—ï¼š\n&quot;, transfer.get_feature_names())</span><br><span class="line"></span><br><span class="line">    return None</span><br><span class="line"></span><br><span class="line">è¿”å›çš„ç»“æœ:</span><br><span class="line"> [[  0.   1.   0. 100.]</span><br><span class="line"> [  1.   0.   0.  60.]</span><br><span class="line"> [  0.   0.   1.  30.]]</span><br></pre></td></tr></table></figure>
<p>æ²¡æœ‰åŠ ä¸Šsparse&#x3D;Falseå‚æ•°çš„ç»“æœæ˜¯çŸ©é˜µ1çš„ä½ç½®ï¼Œ<strong>ç¨€ç–çŸ©é˜µ</strong>ï¼Œä¼˜ç‚¹ï¼šèŠ‚çœå†…å­˜ï¼Œæé«˜åŠ è½½é€Ÿåº¦ã€‚</p>
<p>å­—å…¸ç‰¹å¾æå–çš„ä½¿ç”¨åœºæ™¯ï¼š<br>1ã€æ•°æ®é›†ä¸­ç±»åˆ«ç‰¹å¾æ¯”è¾ƒå¤š<br>2ã€æœ¬èº«æ‹¿åˆ°çš„å°±æ˜¯å­—å…¸ç±»å‹</p>
<p><strong>æ–‡æœ¬ç‰¹å¾æå–</strong>ï¼šå¯¹æ–‡æœ¬æ•°æ®è¿›è¡Œç‰¹å¾å€¼åŒ–<br>å•è¯ä½œä¸ºç‰¹å¾æœ€åˆé€‚ã€‚</p>
<p><strong>1.countVectorizeræ–‡æœ¬ç‰¹å¾æå– - å‡ºç°ä¸ªæ•°</strong></p>
<p>apiï¼š<br><code>sklearn.feature_extraction.text.CountVectorizer(stop_words=[])</code>      è¿”å›è¯é¢‘çŸ©é˜µï¼ˆç»Ÿè®¡æ¯ä¸ªæ ·æœ¬ç‰¹å¾è¯å‡ºç°çš„ä¸ªæ•°ï¼‰ï¼Œstop_wordsæ˜¯åœç”¨è¯ï¼Œæ²¡æœ‰ç”¨çš„è¯ï¼Œæ¯”å¦‚toï¼Œä»¥åˆ—è¡¨å½¢å¼ä¼ å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CountVectorizer.fit_transform(X)    X:æ–‡æœ¬æˆ–è€…åŒ…å«æ–‡æœ¬å­—ç¬¦ä¸²çš„å¯è¿­ä»£å¯¹è±¡ è¿”å›å€¼ï¼šè¿”å›sparseçŸ©é˜µ</span><br><span class="line">CountVectorizer.inverse_transform(X)    X:arrayæ•°ç»„æˆ–è€…sparseçŸ©é˜µ è¿”å›å€¼:è½¬æ¢ä¹‹å‰æ•°æ®æ ¼</span><br><span class="line">CountVectorizer.get_feature_names()     è¿”å›å€¼:å•è¯åˆ—è¡¨</span><br></pre></td></tr></table></figure>
<p>æ ‡ç‚¹å’Œå­—æ¯ä¸ä½œä¸ºç‰¹å¾è¯åˆ—è¡¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">def text_count_demo():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    å¯¹æ–‡æœ¬è¿›è¡Œç‰¹å¾æŠ½å–ï¼Œcountvetorizer</span><br><span class="line">    :return: None</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    data = [&quot;life is short,i like like python&quot;, &quot;life is too long,i dislike python&quot;]</span><br><span class="line">    # 1ã€å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span><br><span class="line">    # transfer = CountVectorizer(sparse=False)</span><br><span class="line">    transfer = CountVectorizer()</span><br><span class="line">    # 2ã€è°ƒç”¨fit_transform ï¼ˆï¼ˆæ³¨æ„è¿”å›æ ¼å¼ï¼Œåˆ©ç”¨toarray()æ–¹æ³•è¿›è¡ŒsparseçŸ©é˜µè½¬æ¢arrayæ•°ç»„ï¼‰ï¼‰</span><br><span class="line">    data = transfer.fit_transform(data)</span><br><span class="line">    print(&quot;æ–‡æœ¬ç‰¹å¾æŠ½å–çš„ç»“æœï¼š\n&quot;, data.toarray())</span><br><span class="line">    print(&quot;è¿”å›ç‰¹å¾åå­—ï¼š\n&quot;, transfer.get_feature_names())</span><br><span class="line"></span><br><span class="line">    return None</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # 3ã€æ–‡æœ¬ç‰¹å¾æå–</span><br><span class="line">    text_count_demo()</span><br></pre></td></tr></table></figure>

<p>[â€œlife is short,i like like pythonâ€, â€œlife is too long,i dislike pythonâ€]<br>ç»“æœæ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¿”å›ç‰¹å¾åå­—ï¼š</span><br><span class="line"> [&#x27;dislike&#x27;, &#x27;is&#x27;, &#x27;life&#x27;, &#x27;like&#x27;, &#x27;long&#x27;, &#x27;python&#x27;, &#x27;short&#x27;, &#x27;too&#x27;]</span><br><span class="line">æ–‡æœ¬ç‰¹å¾æŠ½å–çš„ç»“æœï¼š</span><br><span class="line"> [[0 1 1 2 0 1 1 0]</span><br><span class="line"> [1 1 1 0 1 1 0 1]]</span><br></pre></td></tr></table></figure>

<p><strong>jiebaåˆ†è¯</strong><br>å¦‚æœæ ·æœ¬æ˜¯ä¸­æ–‡ï¼Œæ•´ä¸ªçŸ­è¯­å˜æˆç‰¹å¾è¯äº†ï¼Œå¾—ç”¨ç©ºæ ¼éš”å¼€ã€‚ç”¨jiebaåˆ†è¯å¯ä»¥åˆ†å¼€ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.feature_extraction.text import CountVectorizer</span><br><span class="line">import jieba</span><br><span class="line"></span><br><span class="line">def cut_word(text):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    å¯¹ä¸­æ–‡è¿›è¡Œåˆ†è¯</span><br><span class="line">    &quot;æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨&quot;â€”â€”â€”â€”&gt;&quot;æˆ‘ çˆ± åŒ—äº¬ å¤©å®‰é—¨&quot;</span><br><span class="line">    :param text:</span><br><span class="line">    :return: text</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # ç”¨ç»“å·´å¯¹ä¸­æ–‡å­—ç¬¦ä¸²è¿›è¡Œåˆ†è¯ï¼Œæƒ³è¦å­—ç¬¦ä¸²</span><br><span class="line">    text = &quot; &quot;.join(list(jieba.cut(text)))</span><br><span class="line"></span><br><span class="line">    return text</span><br><span class="line"></span><br><span class="line">def text_chinese_count_demo2():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    å¯¹ä¸­æ–‡è¿›è¡Œç‰¹å¾æŠ½å–</span><br><span class="line">    :return: None</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    data = [&quot;ä»Šå¤©å¾ˆæ®‹é…·ï¼Œæ˜å¤©æ›´æ®‹é…·ï¼Œåå¤©å¾ˆç¾å¥½ï¼Œä½†ç»å¯¹å¤§éƒ¨åˆ†æ˜¯æ­»åœ¨æ˜å¤©æ™šä¸Šï¼Œæ‰€ä»¥æ¯ä¸ªäººä¸è¦æ”¾å¼ƒä»Šå¤©ã€‚&quot;,</span><br><span class="line">            &quot;æˆ‘ä»¬çœ‹åˆ°çš„ä»å¾ˆè¿œæ˜Ÿç³»æ¥çš„å…‰æ˜¯åœ¨å‡ ç™¾ä¸‡å¹´ä¹‹å‰å‘å‡ºçš„ï¼Œè¿™æ ·å½“æˆ‘ä»¬çœ‹åˆ°å®‡å®™æ—¶ï¼Œæˆ‘ä»¬æ˜¯åœ¨çœ‹å®ƒçš„è¿‡å»ã€‚&quot;,</span><br><span class="line">            &quot;å¦‚æœåªç”¨ä¸€ç§æ–¹å¼äº†è§£æŸæ ·äº‹ç‰©ï¼Œä½ å°±ä¸ä¼šçœŸæ­£äº†è§£å®ƒã€‚äº†è§£äº‹ç‰©çœŸæ­£å«ä¹‰çš„ç§˜å¯†å–å†³äºå¦‚ä½•å°†å…¶ä¸æˆ‘ä»¬æ‰€äº†è§£çš„äº‹ç‰©ç›¸è”ç³»ã€‚&quot;]</span><br><span class="line">    # å°†åŸå§‹æ•°æ®è½¬æ¢æˆåˆ†å¥½è¯çš„å½¢å¼</span><br><span class="line">    text_list = []</span><br><span class="line">    for sent in data:</span><br><span class="line">        text_list.append(cut_word(sent))</span><br><span class="line">    print(text_list)</span><br><span class="line"></span><br><span class="line">    # 1ã€å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span><br><span class="line">    # transfer = CountVectorizer(sparse=False)</span><br><span class="line">    transfer = CountVectorizer(stop_words=[&quot;ä¸€ç§&quot;])</span><br><span class="line">    # 2ã€è°ƒç”¨fit_transform</span><br><span class="line">    data = transfer.fit_transform(text_list)</span><br><span class="line">    print(&quot;æ–‡æœ¬ç‰¹å¾æŠ½å–çš„ç»“æœï¼š\n&quot;, data.toarray())</span><br><span class="line">    print(&quot;è¿”å›ç‰¹å¾åå­—ï¼š\n&quot;, transfer.get_feature_names())</span><br><span class="line"></span><br><span class="line">    return None</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # 4ã€ä¸­æ–‡æ–‡æœ¬ç‰¹å¾æå–</span><br><span class="line">    text_chinese_count_demo2()</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯è¿™æ ·æœ‰ä¸ªé—®é¢˜ï¼šæƒ³æ‰¾çš„å…³é”®è¯å…¶å®æ˜¯åœ¨æŸä¸€ä¸ªç±»åˆ«çš„æ–‡ç« ä¸­å‡ºç°çš„æ¬¡æ•°å¾ˆå¤šï¼Œä½†æ˜¯åœ¨å…¶ä»–ç±»åˆ«çš„æ–‡ç« ä¸­å‡ºç°æ¬¡æ•°å¾ˆå°‘ï¼Œä¸è¦æˆ‘ä»¬è¿™äº›è¯ã€‚</p>
<p><strong>2.Tf-idfæ–‡æœ¬ç‰¹å¾æå– - é‡è¦ç¨‹åº¦</strong></p>
<p>TF-IDFçš„ä¸»è¦æ€æƒ³æ˜¯ï¼šå¦‚æœæŸä¸ªè¯æˆ–çŸ­è¯­åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°çš„æ¦‚ç‡é«˜ï¼Œå¹¶ä¸”åœ¨å…¶ä»–æ–‡ç« ä¸­å¾ˆå°‘å‡ºç°ï¼Œåˆ™è®¤ä¸ºæ­¤è¯æˆ–è€…çŸ­è¯­å…·æœ‰å¾ˆå¥½çš„ç±»åˆ«åŒºåˆ†èƒ½åŠ›ï¼Œé€‚åˆç”¨æ¥åˆ†ç±»ã€‚<br>TF-IDFä½œç”¨ï¼šç”¨ä»¥è¯„ä¼°ä¸€å­—è¯å¯¹äºä¸€ä¸ªæ–‡ä»¶é›†æˆ–ä¸€ä¸ªè¯­æ–™åº“ä¸­çš„å…¶ä¸­ä¸€ä»½æ–‡ä»¶çš„é‡è¦ç¨‹åº¦ã€‚<br>åˆ†ç±»æœºå™¨å­¦ä¹ ç®—æ³•è¿›è¡Œæ–‡ç« åˆ†ç±»ä¸­å‰æœŸæ•°æ®å¤„ç†æ–¹å¼</p>
<p>å…¬å¼ï¼š<br>è¯é¢‘ï¼ˆterm frequencyï¼Œtfï¼‰æŒ‡çš„æ˜¯æŸä¸€ä¸ªç»™å®šçš„è¯è¯­åœ¨è¯¥æ–‡ä»¶ä¸­å‡ºç°çš„é¢‘ç‡<br>é€†å‘æ–‡æ¡£é¢‘ç‡ï¼ˆinverse document frequencyï¼Œidfï¼‰æ˜¯ä¸€ä¸ªè¯è¯­æ™®éé‡è¦æ€§çš„åº¦é‡ã€‚æŸä¸€ç‰¹å®šè¯è¯­çš„idfï¼Œå¯ä»¥ç”±æ€»æ–‡ä»¶æ•°ç›®é™¤ä»¥åŒ…å«è¯¥è¯è¯­ä¹‹æ–‡ä»¶çš„æ•°ç›®ï¼Œå†å°†å¾—åˆ°çš„å•†å–ä»¥10ä¸ºåº•çš„å¯¹æ•°å¾—åˆ°</p>
<p>ä¾‹å­ï¼š<br>æ³¨ï¼šå‡å¦‚ä¸€ç¯‡æ–‡ä»¶çš„æ€»è¯è¯­æ•°æ˜¯100ä¸ªï¼Œè€Œè¯è¯­â€éå¸¸â€å‡ºç°äº†5æ¬¡ï¼Œé‚£ä¹ˆâ€éå¸¸â€ä¸€è¯åœ¨è¯¥æ–‡ä»¶ä¸­çš„è¯é¢‘å°±æ˜¯5&#x2F;100&#x3D;0.05ã€‚è€Œè®¡ç®—æ–‡ä»¶é¢‘ç‡ï¼ˆIDFï¼‰çš„æ–¹æ³•æ˜¯ä»¥æ–‡ä»¶é›†çš„æ–‡ä»¶æ€»æ•°ï¼Œé™¤ä»¥å‡ºç°â€éå¸¸â€ä¸€è¯çš„æ–‡ä»¶æ•°ã€‚æ‰€ä»¥ï¼Œå¦‚æœâ€éå¸¸â€ä¸€è¯åœ¨1,000ä»½æ–‡ä»¶å‡ºç°è¿‡ï¼Œè€Œæ–‡ä»¶æ€»æ•°æ˜¯10,000,000ä»½çš„è¯ï¼Œå…¶é€†å‘æ–‡ä»¶é¢‘ç‡å°±æ˜¯lgï¼ˆ10,000,000 &#x2F; 1,0000ï¼‰&#x3D;3ã€‚æœ€åâ€éå¸¸â€å¯¹äºè¿™ç¯‡æ–‡æ¡£çš„tf-idfçš„åˆ†æ•°ä¸º0.05 * 3&#x3D;0.15ã€‚</p>
<p>APIï¼š<br><code>transfer = TfidfVectorizer(stop_words=[&#39;ä¸€ç§&#39;, &#39;ä¸ä¼š&#39;, &#39;ä¸è¦&#39;])</code><br><code>data = transfer.fit_transform(text_list)</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">def text_chinese_tfidf_demo():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    å¯¹ä¸­æ–‡è¿›è¡Œç‰¹å¾æŠ½å–</span><br><span class="line">    :return: None</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    data = [&quot;ä¸€ç§è¿˜æ˜¯ä¸€ç§ä»Šå¤©å¾ˆæ®‹é…·ï¼Œæ˜å¤©æ›´æ®‹é…·ï¼Œåå¤©å¾ˆç¾å¥½ï¼Œä½†ç»å¯¹å¤§éƒ¨åˆ†æ˜¯æ­»åœ¨æ˜å¤©æ™šä¸Šï¼Œæ‰€ä»¥æ¯ä¸ªäººä¸è¦æ”¾å¼ƒä»Šå¤©ã€‚&quot;,</span><br><span class="line">            &quot;æˆ‘ä»¬çœ‹åˆ°çš„ä»å¾ˆè¿œæ˜Ÿç³»æ¥çš„å…‰æ˜¯åœ¨å‡ ç™¾ä¸‡å¹´ä¹‹å‰å‘å‡ºçš„ï¼Œè¿™æ ·å½“æˆ‘ä»¬çœ‹åˆ°å®‡å®™æ—¶ï¼Œæˆ‘ä»¬æ˜¯åœ¨çœ‹å®ƒçš„è¿‡å»ã€‚&quot;,</span><br><span class="line">            &quot;å¦‚æœåªç”¨ä¸€ç§æ–¹å¼äº†è§£æŸæ ·äº‹ç‰©ï¼Œä½ å°±ä¸ä¼šçœŸæ­£äº†è§£å®ƒã€‚äº†è§£äº‹ç‰©çœŸæ­£å«ä¹‰çš„ç§˜å¯†å–å†³äºå¦‚ä½•å°†å…¶ä¸æˆ‘ä»¬æ‰€äº†è§£çš„äº‹ç‰©ç›¸è”ç³»ã€‚&quot;]</span><br><span class="line">    # å°†åŸå§‹æ•°æ®è½¬æ¢æˆåˆ†å¥½è¯çš„å½¢å¼</span><br><span class="line">    text_list = []</span><br><span class="line">    for sent in data:</span><br><span class="line">        text_list.append(cut_word(sent))</span><br><span class="line">    print(text_list)</span><br><span class="line"></span><br><span class="line">    # 1ã€å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span><br><span class="line">    # transfer = CountVectorizer(sparse=False)</span><br><span class="line">    transfer = TfidfVectorizer(stop_words=[&#x27;ä¸€ç§&#x27;, &#x27;ä¸ä¼š&#x27;, &#x27;ä¸è¦&#x27;])</span><br><span class="line">    # 2ã€è°ƒç”¨fit_transform</span><br><span class="line">    data = transfer.fit_transform(text_list)</span><br><span class="line">    print(&quot;æ–‡æœ¬ç‰¹å¾æŠ½å–çš„ç»“æœï¼š\n&quot;, data.toarray())</span><br><span class="line">    print(&quot;è¿”å›ç‰¹å¾åå­—ï¼š\n&quot;, transfer.get_feature_names())</span><br><span class="line"></span><br><span class="line">    return None</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # 5ã€tfidfæ–‡æœ¬æå–</span><br><span class="line">    text_chinese_tfidf_demo()</span><br></pre></td></tr></table></figure>


<h5 id="âœ…ç‰¹å¾é¢„å¤„ç†"><a href="#âœ…ç‰¹å¾é¢„å¤„ç†" class="headerlink" title="âœ…ç‰¹å¾é¢„å¤„ç†"></a>âœ…ç‰¹å¾é¢„å¤„ç†</h5><p>scikit-learnçš„è§£é‡Šï¼š<br><code>provides several common utility functions and transformer classes to change raw feature vectors into a representation that is more suitable for the downstream estimators.</code><br>ç¿»è¯‘è¿‡æ¥ï¼šé€šè¿‡ä¸€äº›è½¬æ¢å‡½æ•°å°†ç‰¹å¾æ•°æ®è½¬æ¢æˆæ›´åŠ é€‚åˆç®—æ³•æ¨¡å‹çš„ç‰¹å¾æ•°æ®çš„è¿‡ç¨‹</p>
<p>æ•°å€¼å‹æ•°æ®çš„<strong>æ— é‡çº²åŒ–</strong>ï¼š<br>å½’ä¸€åŒ–<br>æ ‡å‡†åŒ–</p>
<p>apiï¼š<br><code>sklearn.preprocessing</code></p>
<p>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦è¿›è¡Œå½’ä¸€åŒ–&#x2F;æ ‡å‡†åŒ–(æ— é‡çº²åŒ–)ï¼Ÿ<br>ç‰¹å¾çš„å•ä½æˆ–è€…å¤§å°ç›¸å·®è¾ƒå¤§ï¼Œæˆ–è€…æŸç‰¹å¾çš„æ–¹å·®ç›¸æ¯”å…¶ä»–çš„ç‰¹å¾è¦å¤§å‡ºå‡ ä¸ªæ•°é‡çº§ï¼Œå®¹æ˜“å½±å“ï¼ˆæ”¯é…ï¼‰ç›®æ ‡ç»“æœï¼Œä½¿å¾—ä¸€äº›ç®—æ³•æ— æ³•å­¦ä¹ åˆ°å…¶å®ƒçš„ç‰¹å¾ã€‚<br>é‡çº²ä¸ç»Ÿä¸€<br>æ‰€ä»¥ï¼Œéœ€è¦ç”¨åˆ°ä¸€äº›æ–¹æ³•è¿›è¡Œæ— é‡çº²åŒ–ï¼Œä½¿ä¸åŒè§„æ ¼çš„æ•°æ®è½¬æ¢åˆ°åŒä¸€è§„æ ¼ã€‚</p>
<p><strong>å½’ä¸€åŒ–</strong><br>é€šè¿‡å¯¹åŸå§‹æ•°æ®è¿›è¡Œå˜æ¢æŠŠæ•°æ®æ˜ å°„åˆ°(é»˜è®¤ä¸º[0,1])ä¹‹é—´<br>apiï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sklearn.preprocessing.MinMaxScaler (feature_range=(0,1)â€¦ )</span><br><span class="line">MinMaxScalar.fit_transform(X)</span><br><span class="line">X:numpy arrayæ ¼å¼çš„æ•°æ®[n_samples,n_features]</span><br><span class="line">è¿”å›å€¼ï¼šè½¬æ¢åçš„å½¢çŠ¶ç›¸åŒçš„array</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">from sklearn.preprocessing import MinMaxScaler</span><br><span class="line"></span><br><span class="line">def minmax_demo():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    å½’ä¸€åŒ–æ¼”ç¤º</span><br><span class="line">    :return: None</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 0ã€pandasè¯»å–æ–‡æœ¬</span><br><span class="line">    data = pd.read_csv(&quot;dating.txt&quot;)</span><br><span class="line">    # ä¸è¦ç›®æ ‡å€¼æ¯ä¸€è¡Œéƒ½è¦ï¼Œè¦å‰ä¸‰åˆ—</span><br><span class="line">    data = data.iloc[:, :3]</span><br><span class="line">    print(data)</span><br><span class="line">    # 1ã€å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span><br><span class="line">    transfer = MinMaxScaler(feature_range=(2, 3))</span><br><span class="line">    # 2ã€è°ƒç”¨fit_transform</span><br><span class="line">    data = transfer.fit_transform(data[[&#x27;milage&#x27;,&#x27;Liters&#x27;,&#x27;Consumtime&#x27;]])</span><br><span class="line">    print(&quot;æœ€å°å€¼æœ€å¤§å€¼å½’ä¸€åŒ–å¤„ç†çš„ç»“æœï¼š\n&quot;, data)</span><br><span class="line"></span><br><span class="line">    return None</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # 6ã€ç‰¹å¾é¢„å¤„ç†-å½’ä¸€åŒ–</span><br><span class="line">    minmax_demo()</span><br></pre></td></tr></table></figure>

<p>å½’ä¸€åŒ–ç¼ºç‚¹ï¼šæœ€å¤§å€¼æœ€å°å€¼æ˜¯å˜åŒ–çš„ï¼Œå¦å¤–ï¼Œæœ€å¤§å€¼ä¸æœ€å°å€¼ï¼ˆå¯èƒ½æ˜¯å¼‚å¸¸å€¼ï¼‰éå¸¸å®¹æ˜“å—å¼‚å¸¸ç‚¹å½±å“ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•é²æ£’æ€§è¾ƒå·®ï¼Œåªé€‚åˆä¼ ç»Ÿç²¾ç¡®å°æ•°æ®åœºæ™¯ã€‚</p>
<p><strong>æ ‡å‡†åŒ–</strong><br>é€šè¿‡å¯¹åŸå§‹æ•°æ®è¿›è¡Œå˜æ¢æŠŠæ•°æ®å˜æ¢åˆ°å‡å€¼ä¸º0,æ ‡å‡†å·®ä¸º1èŒƒå›´å†…<br>å…¬å¼ï¼š<br>(åŸå€¼ - å¹³å‡å€¼) &#x2F; æ ‡å‡†å·®<br>ä¼˜ç‚¹ï¼š<br>å¯¹äºå½’ä¸€åŒ–æ¥è¯´ï¼šå¦‚æœå‡ºç°å¼‚å¸¸ç‚¹ï¼Œå½±å“äº†æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œé‚£ä¹ˆç»“æœæ˜¾ç„¶ä¼šå‘ç”Ÿæ”¹å˜<br>å¯¹äºæ ‡å‡†åŒ–æ¥è¯´ï¼šå¦‚æœå‡ºç°å¼‚å¸¸ç‚¹ï¼Œç”±äºå…·æœ‰ä¸€å®šæ•°æ®é‡ï¼Œå°‘é‡çš„å¼‚å¸¸ç‚¹å¯¹äºå¹³å‡å€¼çš„å½±å“å¹¶ä¸å¤§ï¼Œä»è€Œæ–¹å·®æ”¹å˜è¾ƒå°ã€‚<br>apiï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sklearn.preprocessing.StandardScaler( )</span><br><span class="line">å¤„ç†ä¹‹åæ¯åˆ—æ¥è¯´æ‰€æœ‰æ•°æ®éƒ½èšé›†åœ¨å‡å€¼0é™„è¿‘æ ‡å‡†å·®å·®ä¸º1</span><br><span class="line">StandardScaler.fit_transform(X)</span><br><span class="line">X:numpy arrayæ ¼å¼çš„æ•°æ®[n_samples,n_features]</span><br><span class="line">è¿”å›å€¼ï¼šè½¬æ¢åçš„å½¢çŠ¶ç›¸åŒçš„array</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line"></span><br><span class="line">def stand_demo():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    æ ‡å‡†åŒ–æ¼”ç¤º</span><br><span class="line">    :return: None</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    data = pd.read_csv(&quot;dating.txt&quot;)</span><br><span class="line">    print(data)</span><br><span class="line">    # 1ã€å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span><br><span class="line">    transfer = StandardScaler()</span><br><span class="line">    # 2ã€è°ƒç”¨fit_transform</span><br><span class="line">    data = transfer.fit_transform(data[[&#x27;milage&#x27;,&#x27;Liters&#x27;,&#x27;Consumtime&#x27;]])</span><br><span class="line">    print(&quot;æ ‡å‡†åŒ–çš„ç»“æœ:\n&quot;, data)</span><br><span class="line">    print(&quot;æ¯ä¸€åˆ—ç‰¹å¾çš„å¹³å‡å€¼ï¼š\n&quot;, transfer.mean_)</span><br><span class="line">    print(&quot;æ¯ä¸€åˆ—ç‰¹å¾çš„æ–¹å·®ï¼š\n&quot;, transfer.var_)</span><br><span class="line"></span><br><span class="line">    return None</span><br></pre></td></tr></table></figure>
<p>åœ¨å·²æœ‰æ ·æœ¬è¶³å¤Ÿå¤šçš„æƒ…å†µä¸‹æ¯”è¾ƒç¨³å®šï¼Œé€‚åˆç°ä»£å˜ˆæ‚å¤§æ•°æ®åœºæ™¯ã€‚</p>
<h5 id="âœ…ç‰¹å¾é™ç»´"><a href="#âœ…ç‰¹å¾é™ç»´" class="headerlink" title="âœ…ç‰¹å¾é™ç»´"></a>âœ…ç‰¹å¾é™ç»´</h5><p>ndarray<br>ç»´æ•°ï¼šåµŒå¥—çš„å±‚æ•°<br>0ç»´ï¼šæ ‡é‡<br>1ç»´ï¼šå‘é‡<br>2ç»´ï¼šçŸ©é˜µ<br>3ç»´ï¼š</p>
<p>æ­¤å¤„çš„é™ç»´çš„å¯¹è±¡æ˜¯äºŒç»´æ•°ç»„ï¼ˆå‡ è¡Œè¡¨ç¤ºå‡ ä¸ªæ ·æœ¬ï¼Œå‡ åˆ—è¡¨ç¤ºå‡ ä¸ªç‰¹å¾ï¼‰ï¼Œç›®æ ‡æ˜¯<strong>é™ä½ç‰¹å¾çš„ä¸ªæ•°</strong>ã€‚</p>
<p>é™ç»´æ˜¯æŒ‡åœ¨æŸäº›é™å®šæ¡ä»¶ä¸‹ï¼Œé™ä½éšæœºå˜é‡(ç‰¹å¾)ä¸ªæ•°ï¼Œå¾—åˆ°ä¸€ç»„â€œä¸ç›¸å…³â€ä¸»å˜é‡çš„è¿‡ç¨‹ã€‚</p>
<p>ç›¸å…³çš„ç‰¹å¾ï¼šæ¯”å¦‚æ¹¿åº¦ä¸é™é›¨é‡</p>
<p>ä¸ºä»€ä¹ˆè¦ç‰¹å¾é™ç»´ï¼Ÿ<br>æ­£æ˜¯å› ä¸ºåœ¨è¿›è¡Œè®­ç»ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨ç‰¹å¾è¿›è¡Œå­¦ä¹ ã€‚å¦‚æœç‰¹å¾æœ¬èº«å­˜åœ¨é—®é¢˜æˆ–è€…ç‰¹å¾ä¹‹é—´ç›¸å…³æ€§è¾ƒå¼ºï¼Œå¯¹äºç®—æ³•å­¦ä¹ é¢„æµ‹ä¼šå½±å“è¾ƒå¤§ã€‚</p>
<p><strong>ç¬¬ä¸€éƒ¨åˆ†ï¼šç‰¹å¾é€‰æ‹©</strong><br>æ•°æ®ä¸­åŒ…å«å†—ä½™æˆ–æ— å…³å˜é‡ï¼ˆæˆ–ç§°ç‰¹å¾ã€å±æ€§ã€æŒ‡æ ‡ç­‰ï¼‰ï¼Œæ—¨åœ¨ä»åŸæœ‰ç‰¹å¾ä¸­æ‰¾å‡ºä¸»è¦ç‰¹å¾ã€‚ï¼ˆä¾‹å¦‚é¸Ÿæ˜¯å¦æœ‰çˆªå­å°±æ˜¯å†—ä½™ç‰¹å¾ï¼‰<br><strong>Filter(è¿‡æ»¤å¼)</strong>ï¼šä¸»è¦æ¢ç©¶ç‰¹å¾æœ¬èº«ç‰¹ç‚¹ã€ç‰¹å¾ä¸ç‰¹å¾å’Œç›®æ ‡å€¼ä¹‹é—´å…³è”<br>æ–¹å·®é€‰æ‹©æ³•ï¼šä½æ–¹å·®ç‰¹å¾è¿‡æ»¤<br>ç›¸å…³ç³»æ•°ï¼šè¡¡é‡æŸä¸¤ä¸ªç‰¹å¾ä¹‹é—´çš„ç›¸å…³ç¨‹åº¦<br><strong>Embedded (åµŒå…¥å¼)</strong>ï¼šç®—æ³•è‡ªåŠ¨é€‰æ‹©ç‰¹å¾ï¼ˆç‰¹å¾ä¸ç›®æ ‡å€¼ä¹‹é—´çš„å…³è”ï¼‰<br>å†³ç­–æ ‘:ä¿¡æ¯ç†µã€ä¿¡æ¯å¢ç›Š<br>æ­£åˆ™åŒ–ï¼šL1ã€L2<br>æ·±åº¦å­¦ä¹ ï¼šå·ç§¯ç­‰</p>
<p>æ¨¡å—ï¼š<br><code>sklearn.feature_selection</code></p>
<p>è¿‡æ»¤å¼ï¼š<br><strong>ä½æ–¹å·®ç‰¹å¾è¿‡æ»¤</strong>ï¼šåˆ é™¤ä½æ–¹å·®çš„ä¸€äº›ç‰¹å¾<br>ç‰¹å¾æ–¹å·®å°ï¼šæŸä¸ªç‰¹å¾å¤§å¤šæ ·æœ¬çš„å€¼æ¯”è¾ƒç›¸è¿‘ï¼Œæ¯”å¦‚éƒ½æ˜¯æœ‰çˆªå­ï¼Œå°±æ˜¯0<br>ç‰¹å¾æ–¹å·®å¤§ï¼šæŸä¸ªç‰¹å¾å¾ˆå¤šæ ·æœ¬çš„å€¼éƒ½æœ‰å·®åˆ«<br>apiï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sklearn.feature_selection.VarianceThreshold(threshold = 0.0)</span><br><span class="line">åˆ é™¤æ‰€æœ‰ä½æ–¹å·®ç‰¹å¾</span><br><span class="line">Variance.fit_transform(X)</span><br><span class="line">X:numpy arrayæ ¼å¼çš„æ•°æ®[n_samples,n_features]</span><br><span class="line">è¿”å›å€¼ï¼šè®­ç»ƒé›†å·®å¼‚ä½äºthresholdçš„ç‰¹å¾å°†è¢«åˆ é™¤ã€‚é»˜è®¤å€¼æ˜¯ä¿ç•™æ‰€æœ‰éé›¶æ–¹å·®ç‰¹å¾ï¼Œå³åˆ é™¤æ‰€æœ‰æ ·æœ¬ä¸­å…·æœ‰ç›¸åŒå€¼çš„ç‰¹å¾ã€‚</span><br></pre></td></tr></table></figure>

<p>ä½æ–¹å·®ç‰¹å¾è¿‡æ»¤ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">def variance_demo():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    åˆ é™¤ä½æ–¹å·®ç‰¹å¾â€”â€”ç‰¹å¾é€‰æ‹©</span><br><span class="line">    :return: None</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    data = pd.read_csv(&quot;factor_returns.csv&quot;)</span><br><span class="line">    print(data)</span><br><span class="line">    # 1ã€å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span><br><span class="line">    transfer = VarianceThreshold(threshold=1)</span><br><span class="line">    # 2ã€è°ƒç”¨fit_transformï¼Œilocå»æ‰ä¸€äº›æ— ç”¨çš„åˆ—</span><br><span class="line">    data = transfer.fit_transform(data.iloc[:, 1:10])</span><br><span class="line">    print(&quot;åˆ é™¤ä½æ–¹å·®ç‰¹å¾çš„ç»“æœï¼š\n&quot;, data)</span><br><span class="line">    print(&quot;å½¢çŠ¶ï¼š\n&quot;, data.shape)</span><br><span class="line"></span><br><span class="line">    return None</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœï¼šå»æ‰äº†ä¸€äº›æ²¡ç”¨çš„å†—ä½™çš„ç‰¹å¾</p>
<p><strong>ç›¸å…³ç³»æ•°</strong>ï¼š<br>çš®å°”é€Šç›¸å…³ç³»æ•°(Pearson Correlation Coefficient)<br>åæ˜ å˜é‡ä¹‹é—´ç›¸å…³å…³ç³»å¯†åˆ‡ç¨‹åº¦çš„ç»Ÿè®¡æŒ‡æ ‡ï¼Œå…¬å¼ç•¥ã€‚<br>ç›¸å…³ç³»æ•°è§£è¯»ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ç›¸å…³ç³»æ•°çš„å€¼ä»‹äºâ€“1ä¸+1ä¹‹é—´ï¼Œå³â€“1â‰¤ r â‰¤+1ã€‚å…¶æ€§è´¨å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">å½“r&gt;0æ—¶ï¼Œè¡¨ç¤ºä¸¤å˜é‡æ­£ç›¸å…³ï¼Œr&lt;0æ—¶ï¼Œä¸¤å˜é‡ä¸ºè´Ÿç›¸å…³</span><br><span class="line">å½“|r|=1æ—¶ï¼Œè¡¨ç¤ºä¸¤å˜é‡ä¸ºå®Œå…¨ç›¸å…³ï¼Œå½“r=0æ—¶ï¼Œè¡¨ç¤ºä¸¤å˜é‡é—´æ— ç›¸å…³å…³ç³»</span><br><span class="line">å½“0&lt;|r|&lt;1æ—¶ï¼Œè¡¨ç¤ºä¸¤å˜é‡å­˜åœ¨ä¸€å®šç¨‹åº¦çš„ç›¸å…³ã€‚ä¸”|r|è¶Šæ¥è¿‘1ï¼Œä¸¤å˜é‡é—´çº¿æ€§å…³ç³»è¶Šå¯†åˆ‡ï¼›|r|è¶Šæ¥è¿‘äº0ï¼Œè¡¨ç¤ºä¸¤å˜é‡çš„çº¿æ€§ç›¸å…³è¶Šå¼±</span><br><span class="line">ä¸€èˆ¬å¯æŒ‰ä¸‰çº§åˆ’åˆ†ï¼š|r|&lt;0.4ä¸ºä½åº¦ç›¸å…³ï¼›0.4â‰¤|r|&lt;0.7ä¸ºæ˜¾è‘—æ€§ç›¸å…³ï¼›0.7â‰¤|r|&lt;1ä¸ºé«˜åº¦çº¿æ€§ç›¸å…³</span><br></pre></td></tr></table></figure>
<p>api:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from scipy.stats import pearsonr</span><br><span class="line">x : (N,) array_like</span><br><span class="line">y : (N,) array_like Returns: (Pearsonâ€™s correlation coefficient, p-value)</span><br></pre></td></tr></table></figure>

<p>ç›¸å…³ç³»æ•°çš„ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">from scipy.stats import pearsonr</span><br><span class="line"></span><br><span class="line">def pearsonr_demo():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    ç›¸å…³ç³»æ•°è®¡ç®—</span><br><span class="line">    :return: None</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    data = pd.read_csv(&quot;factor_returns.csv&quot;)</span><br><span class="line"></span><br><span class="line">    factor = [&#x27;pe_ratio&#x27;, &#x27;pb_ratio&#x27;, &#x27;market_cap&#x27;, &#x27;return_on_asset_net_profit&#x27;, &#x27;du_return_on_equity&#x27;, &#x27;ev&#x27;,</span><br><span class="line">              &#x27;earnings_per_share&#x27;, &#x27;revenue&#x27;, &#x27;total_expense&#x27;]</span><br><span class="line"></span><br><span class="line">    for i in range(len(factor)):</span><br><span class="line">        for j in range(i, len(factor) - 1):</span><br><span class="line">            print(</span><br><span class="line">                &quot;æŒ‡æ ‡%sä¸æŒ‡æ ‡%sä¹‹é—´çš„ç›¸å…³æ€§å¤§å°ä¸º%f&quot; % (factor[i], factor[j + 1], pearsonr(data[factor[i]], data[factor[j + 1]])[0]))</span><br><span class="line"></span><br><span class="line">    return None</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥é€šè¿‡ç”»å›¾æ¥è§‚å¯Ÿç»“æœï¼Œæ•£ç‚¹å›¾ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">plt.figure(figsize=(20, 8), dpi=100)</span><br><span class="line">plt.scatter(data[&#x27;revenue&#x27;], data[&#x27;total_expense&#x27;])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸¤ä¸ªç‰¹å¾ç›¸å…³æ€§å¾ˆé«˜ï¼š<br>1.å¯ä»¥é€‰å–å…¶ä¸­ä¸€ä¸ª<br>2.å¯ä»¥æŒ‰ä¸€å®šæƒé‡åŠ æƒä¸¤ä¸ªç‰¹å¾<br>3.ä¸»æˆåˆ†åˆ†æï¼Œè‡ªåŠ¨å°†ç›¸å…³æ€§å¾ˆå¼ºçš„ç‰¹å¾åˆæˆ</p>
<p><strong>ç¬¬äºŒéƒ¨åˆ†ï¼šä¸»æˆåˆ†åˆ†æ</strong><br>å®šä¹‰ï¼šé«˜ç»´æ•°æ®è½¬åŒ–ä¸ºä½ç»´æ•°æ®çš„è¿‡ç¨‹ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­å¯èƒ½ä¼šèˆå¼ƒåŸæœ‰æ•°æ®ã€åˆ›é€ æ–°çš„å˜é‡ã€‚PCAï¼šä¸»æˆåˆ†åˆ†æ<br>ä½œç”¨ï¼šæ˜¯æ•°æ®ç»´æ•°å‹ç¼©ï¼Œå°½å¯èƒ½é™ä½åŸæ•°æ®çš„ç»´æ•°ï¼ˆå¤æ‚åº¦ï¼‰ï¼ŒæŸå¤±å°‘é‡ä¿¡æ¯ã€‚<br>åº”ç”¨ï¼šå›å½’åˆ†ææˆ–è€…èšç±»åˆ†æå½“ä¸­<br>æŠ½è±¡ç†è§£ï¼šå°†ä¸€ä¸ªä¸‰ç»´çš„ä¸œè¥¿æ‹æˆä¸€ä¸ªäºŒç»´çš„ç…§ç‰‡ï¼Œå°½å¯èƒ½ä¿ç•™æ›´å¤šçš„ä¿¡æ¯ï¼Œä¿æŒåŸæœ‰çš„ç‰¹å¾ã€‚<br>å†æ¯”å¦‚ï¼šäºŒç»´çš„å‡ ä¸ªç‚¹é™åˆ°ä¸€ç»´ï¼ˆä¸€æ¡çº¿ï¼‰ï¼Œæƒ³æŠ•å½±åˆ°ä¸€æ¡çº¿ä¹‹åï¼Œäº”ä¸ªç‚¹ä¹Ÿè¿˜åœ¨ï¼Œä¸”è·ç¦»ç›´æ¥ä¹‹å’Œæ›´å°‘ã€‚æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„ç›´çº¿ï¼Œé€šè¿‡ä¸€ä¸ªçŸ©é˜µè¿ç®—å¾—å‡ºä¸»æˆåˆ†åˆ†æçš„ç»“æœã€‚</p>
<p>apiï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sklearn.decomposition.PCA(n_components=None)</span><br><span class="line">å°†æ•°æ®åˆ†è§£ä¸ºè¾ƒä½ç»´æ•°ç©ºé—´</span><br><span class="line">n_components:</span><br><span class="line">å°æ•°ï¼šè¡¨ç¤ºä¿ç•™ç™¾åˆ†ä¹‹å¤šå°‘çš„ä¿¡æ¯</span><br><span class="line">æ•´æ•°ï¼šå‡å°‘åˆ°å¤šå°‘ç‰¹å¾</span><br><span class="line">PCA.fit_transform(X) X:numpy arrayæ ¼å¼çš„æ•°æ®[n_samples,n_features]</span><br><span class="line">è¿”å›å€¼ï¼šè½¬æ¢åæŒ‡å®šç»´åº¦çš„array</span><br></pre></td></tr></table></figure>

<p>ä¸‰ä¸ªç‰¹å¾é™ç»´çš„ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.decomposition import PCA</span><br><span class="line"></span><br><span class="line">def pca_demo():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    å¯¹æ•°æ®è¿›è¡ŒPCAé™ç»´</span><br><span class="line">    :return: None</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    data = [[2,8,4,5], [6,3,0,8], [5,4,9,1]]</span><br><span class="line"></span><br><span class="line">    # 1ã€å®ä¾‹åŒ–PCA, å°æ•°â€”â€”ä¿ç•™å¤šå°‘ä¿¡æ¯</span><br><span class="line">    transfer = PCA(n_components=0.9)</span><br><span class="line">    # 2ã€è°ƒç”¨fit_transform</span><br><span class="line">    data1 = transfer.fit_transform(data)</span><br><span class="line"></span><br><span class="line">    print(&quot;ä¿ç•™90%çš„ä¿¡æ¯ï¼Œé™ç»´ç»“æœä¸ºï¼š\n&quot;, data1)</span><br><span class="line"></span><br><span class="line">    # 1ã€å®ä¾‹åŒ–PCA, æ•´æ•°â€”â€”æŒ‡å®šé™ç»´åˆ°çš„ç»´æ•°</span><br><span class="line">    transfer2 = PCA(n_components=3)</span><br><span class="line">    # 2ã€è°ƒç”¨fit_transform</span><br><span class="line">    data2 = transfer2.fit_transform(data)</span><br><span class="line">    print(&quot;é™ç»´åˆ°3ç»´çš„ç»“æœï¼š\n&quot;, data2)</span><br><span class="line"></span><br><span class="line">    return None</span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ä¿ç•™90%çš„ä¿¡æ¯ï¼Œé™ç»´ç»“æœä¸ºï¼š</span><br><span class="line"> [[ -3.13587302e-16   3.82970843e+00]</span><br><span class="line"> [ -5.74456265e+00  -1.91485422e+00]</span><br><span class="line"> [  5.74456265e+00  -1.91485422e+00]]</span><br><span class="line">é™ç»´åˆ°3ç»´çš„ç»“æœï¼š</span><br><span class="line"> [[ -3.13587302e-16   3.82970843e+00   4.59544715e-16]</span><br><span class="line"> [ -5.74456265e+00  -1.91485422e+00   4.59544715e-16]</span><br><span class="line"> [  5.74456265e+00  -1.91485422e+00   4.59544715e-16]]</span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ¡ˆä¾‹ï¼šæ¢ç©¶ç”¨æˆ·å¯¹ç‰©å“ç±»åˆ«çš„å–œå¥½ç»†åˆ†é™ç»´</strong></p>
<p>1ï¼‰åˆå¹¶è¡¨ï¼Œä½¿å¾—user_idä¸aisleåœ¨ä¸€å¼ è¡¨å½“ä¸­<br>2ï¼‰è¿›è¡Œäº¤å‰è¡¨å˜æ¢-äº¤å‰è¡¨é€è§†è¡¨<br>3ï¼‰ç‰¹å¾å†—ä½™è¿‡å¤š-PCAé™ç»´</p>
<p>pandaså¯ä»¥è¯»å–csvæ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">data = pd.read_csv(â€œ./routeâ€)</span><br><span class="line">table3 = pd.merge(table1, table2, on=[â€œuidâ€, â€œuidâ€]) //ç”¨æ¥åˆå¹¶è¡¨ï¼Œé»˜è®¤å†…è¿æ¥</span><br><span class="line"></span><br><span class="line">3ã€äº¤å‰è¡¨å¤„ç†ï¼ŒæŠŠuser_idå’Œaisleè¿›è¡Œåˆ†ç»„</span><br><span class="line">table = pd.crosstab(tab3[&quot;user_id&quot;], tab3[&quot;aisle&quot;])</span><br><span class="line"></span><br><span class="line">4ã€ä¸»æˆåˆ†åˆ†æçš„æ–¹æ³•è¿›è¡Œé™ç»´</span><br><span class="line"> 1ï¼‰å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»PCA</span><br><span class="line">transfer = PCA(n_components=0.95)</span><br><span class="line"> 2ï¼‰fit_transform</span><br><span class="line">data = transfer.fit_transform(table)</span><br><span class="line"></span><br><span class="line">data.shape</span><br></pre></td></tr></table></figure>
<p>Jupiter å¤„ç†æ•°æ®çš„å·¥å…·ï¼Œå¯è§†åŒ–æ•°æ®ã€‚</p>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p><img src="/images/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AD%A6%E4%B9%A0.png"></p>
<h3 id="3-åˆ†ç±»ç®—æ³•"><a href="#3-åˆ†ç±»ç®—æ³•" class="headerlink" title="3.åˆ†ç±»ç®—æ³•"></a>3.åˆ†ç±»ç®—æ³•</h3><p>ç›®æ ‡å€¼ï¼šç±»åˆ«</p>
<h4 id="3-1-sklearnè½¬æ¢å™¨å’Œé¢„ä¼°å™¨-estimator"><a href="#3-1-sklearnè½¬æ¢å™¨å’Œé¢„ä¼°å™¨-estimator" class="headerlink" title="3.1 sklearnè½¬æ¢å™¨å’Œé¢„ä¼°å™¨(estimator)"></a>3.1 sklearnè½¬æ¢å™¨å’Œé¢„ä¼°å™¨(estimator)</h4><p>  3.1.1 è½¬æ¢å™¨-ç‰¹å¾å·¥ç¨‹çš„çˆ¶ç±»<br>    1 å®ä¾‹åŒ–ï¼ˆå®ä¾‹åŒ–çš„æ˜¯ä¸€ä¸ªè½¬æ¢å™¨ç±»ï¼ˆTransformerï¼‰ï¼‰<br>    2 è°ƒç”¨fit_transform æ ‡å‡†åŒ–ï¼Œæ˜¯fitè®¡ç®—æ¯ä¸€åˆ—å¹³å‡å€¼å’Œæ ‡å‡†å·® transformè¿›è¡Œè®¡ç®—è½¬æ¢</p>
<p>  3.1.2 ä¼°è®¡å™¨-sklearnæœºå™¨å­¦ä¹ ç®—æ³•çš„å®ç°<br>    1 å®ä¾‹åŒ–ä¸€ä¸ªeatimator<br>    2 estimator.fit(x_train, y_train) è®¡ç®— â€” è°ƒç”¨å®Œæ¯•ï¼Œæ¨¡å‹ç”Ÿæˆ<br>    3 æ¨¡å‹è¯„ä¼°<br>      1ï¼‰ç›´æ¥å¯¹æ¯”çœŸå®å€¼å’Œé¢„æµ‹å€¼<br>        y_predict &#x3D; estimator.predictor(x_test)<br>        y_test &#x3D; y_predict<br>      2ï¼‰è®¡ç®—å‡†ç¡®ç‡<br>	  accuracy &#x3D; estimator.score(x_test, y_test)</p>
<h4 id="3-2-K-è¿‘é‚»ç®—æ³•-KNNç®—æ³•"><a href="#3-2-K-è¿‘é‚»ç®—æ³•-KNNç®—æ³•" class="headerlink" title="3.2 K-è¿‘é‚»ç®—æ³•(KNNç®—æ³•)"></a>3.2 K-è¿‘é‚»ç®—æ³•(KNNç®—æ³•)</h4><p>  æ ¸å¿ƒæ€æƒ³ï¼šæ ¹æ®é‚»å±…æ¥æ¨æ–­å‡ºç±»åˆ«<br>  3.2.1 KNNç®—æ³•åŸç†<br>     å¦‚æœä¸€ä¸ªæ ·æœ¬åœ¨ç‰¹å¾ç©ºé—´ä¸­çš„kä¸ªæœ€ç›¸ä¼¼(å³ç‰¹å¾ç©ºé—´ä¸­æœ€é‚»è¿‘)çš„æ ·æœ¬ä¸­çš„å¤§å¤šæ•°å±äºæŸä¸€ä¸ªç±»åˆ«ï¼Œåˆ™è¯¥æ ·æœ¬ä¹Ÿå±äºè¿™ä¸ªç±»åˆ«ã€‚<br>    k&#x3D;1 å®¹æ˜“æ”¶åˆ°å¼‚å¸¸ç‚¹çš„å½±å“<br>    å¦‚ä½•ç¡®å®šè°æ˜¯é‚»å±…ï¼Œè®¡ç®—è·ç¦» egï¼šæ¬§æ°è·ç¦»ï¼ˆé»˜è®¤ï¼‰ï¼Œæ›¼å“ˆé¡¿è·ç¦»ï¼ˆç»å¯¹å€¼è·ç¦»ï¼‰ï¼Œæ˜å¯å¤«æ–¯åŸºè·ç¦»<br>    ä¾‹å­ï¼šç”µå½±åˆ†ç±»ï¼šå…ˆæ±‚è·ç¦»ï¼Œå†å–kã€‚<br>    Kå€¼å–å¾—è¿‡å¤§ï¼šå®¹æ˜“æ”¶åˆ°æ ·æœ¬ä¸å‡è¡¡çš„å½±å“ã€‚</p>
<p>  3.2.2 k-è¿‘é‚»ç®—æ³•api</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sklearn.neighbors.KNeighborsClassifier(n_neighbors=5,algorithm=&#x27;auto&#x27;)</span><br><span class="line">	â—¦	n_neighborsï¼škå€¼ï¼Œint,å¯é€‰ï¼ˆé»˜è®¤= 5ï¼‰ï¼Œk_neighborsæŸ¥è¯¢é»˜è®¤ä½¿ç”¨çš„é‚»å±…æ•°</span><br><span class="line">	â—¦	algorithmï¼š&#123;â€˜autoâ€™ï¼Œâ€˜ball_treeâ€™ï¼Œâ€˜kd_treeâ€™ï¼Œâ€˜bruteâ€™&#125;ï¼Œå¯é€‰ç”¨äºè®¡ç®—æœ€è¿‘é‚»å±…çš„ç®—æ³•ï¼šâ€˜ball_treeâ€™å°†ä¼šä½¿ç”¨ BallTreeï¼Œâ€˜kd_treeâ€™å°†ä½¿ç”¨ KDTreeã€‚â€˜autoâ€™å°†å°è¯•æ ¹æ®ä¼ é€’ç»™fitæ–¹æ³•çš„å€¼æ¥å†³å®šæœ€åˆé€‚çš„ç®—æ³•ã€‚ (ä¸åŒå®ç°æ–¹å¼å½±å“æ•ˆç‡)</span><br></pre></td></tr></table></figure>

<p>  3.2.3 æ¡ˆä¾‹ï¼šé¸¢å°¾èŠ±ç§ç±»é¢„æµ‹<br>    1ï¼‰è·å–æ•°æ®ï¼Œå››ä¸ªç‰¹å¾<br>    2ï¼‰æ•°æ®é›†åˆ’åˆ†<br>    3ï¼‰ç‰¹å¾å·¥ç¨‹ï¼šæ ‡å‡†åŒ–<br>    4ï¼‰KNNé¢„ä¼°å™¨æµç¨‹<br>    5ï¼‰æ¨¡å‹è¯„ä¼°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.datasets import load_iris</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">from sklearn.neighbors import KNeighborsClassifier</span><br><span class="line"></span><br><span class="line">def knn_iris():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    æ¡ˆä¾‹ï¼šé¸¢å°¾èŠ±ç§ç±»é¢„æµ‹</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 1ï¼‰è·å–æ•°æ®ï¼Œå››ä¸ªç‰¹å¾</span><br><span class="line">    iris = load_iris()</span><br><span class="line">    # 2ï¼‰æ•°æ®é›†åˆ’åˆ†</span><br><span class="line">    x_train, x_test, y_train, y_test = train_test_split(iris.data, iris.target, random_state=6)</span><br><span class="line">    # 3ï¼‰ç‰¹å¾å·¥ç¨‹ï¼šæ ‡å‡†åŒ– 1.å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±» 2.å¯¹è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ ‡å‡†åŒ–ï¼ˆæµ‹è¯•é›†ç”¨è®­ç»ƒé›†fitçš„ç»“æœï¼‰</span><br><span class="line">    transform = StandardScaler()</span><br><span class="line">    x_train = transform.fit_transform(x_train)</span><br><span class="line">    x_test = transform.transform(x_test)</span><br><span class="line">    # 4ï¼‰KNNé¢„ä¼°å™¨æµç¨‹ï¼š1.å®ä¾‹åŒ–ä¸€ä¸ªé¢„ä¼°å™¨å¯¹è±¡ 2.å°†è®­ç»ƒé›†çš„ç‰¹å¾å€¼å’Œç›®æ ‡å€¼ä¼ å…¥è¿›è¡Œè®­ç»ƒ</span><br><span class="line">    estimator = KNeighborsClassifier(n_neighbors=3)</span><br><span class="line">    estimator.fit(x_train, y_train)</span><br><span class="line">    # 5ï¼‰æ¨¡å‹è¯„ä¼°  1.ç›´æ¥æ¯”å¯¹çœŸå®å€¼å’Œé¢„ä¼°å€¼ 2.è®¡ç®—å‡†ç¡®ç‡</span><br><span class="line">    y_predict = estimator.predict(x_test)</span><br><span class="line">    print(&quot;y_predict:\n&quot;, y_predict)</span><br><span class="line">    print(&quot;é¢„æµ‹å€¼å’ŒçœŸå®å€¼:\n&quot;, y_predict == y_test)</span><br><span class="line">    score = estimator.score(x_test, y_test)</span><br><span class="line">    print(&quot;score:\n&quot;, score)</span><br><span class="line">    return None</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # ä»£ç 1.knnç®—æ³•å¯¹irisè¿›è¡Œåˆ†ç±»</span><br><span class="line">    knn_iris()</span><br></pre></td></tr></table></figure>

<p>  3.2.4 knnä¼˜ç¼ºç‚¹<br>	â€¢	ä¼˜ç‚¹ï¼š<br>	â—¦	ç®€å•ï¼Œæ˜“äºç†è§£ï¼Œæ˜“äºå®ç°ï¼Œæ— éœ€è®­ç»ƒ<br>	â€¢	ç¼ºç‚¹ï¼š<br>	â—¦	æ‡’æƒ°ç®—æ³•ï¼Œå¯¹æµ‹è¯•æ ·æœ¬åˆ†ç±»æ—¶çš„è®¡ç®—é‡å¤§ï¼Œå†…å­˜å¼€é”€å¤§<br>	â—¦	å¿…é¡»æŒ‡å®šKå€¼ï¼ŒKå€¼é€‰æ‹©ä¸å½“åˆ™åˆ†ç±»ç²¾åº¦ä¸èƒ½ä¿è¯<br>	â€¢	ä½¿ç”¨åœºæ™¯ï¼šå°æ•°æ®åœºæ™¯ï¼Œå‡ åƒï½å‡ ä¸‡æ ·æœ¬ï¼Œå…·ä½“åœºæ™¯å…·ä½“ä¸šåŠ¡å»æµ‹è¯•</p>
<h4 id="3-3-æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜"><a href="#3-3-æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜" class="headerlink" title="3.3 æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜"></a>3.3 æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜</h4><p>  3.3.1 ä»€ä¹ˆæ˜¯äº¤å‰éªŒè¯<br>äº¤å‰éªŒè¯ï¼šå°†æ‹¿åˆ°çš„è®­ç»ƒæ•°æ®ï¼Œåˆ†ä¸ºè®­ç»ƒå’ŒéªŒè¯é›†ã€‚ä¾‹å¦‚ï¼šå°†æ•°æ®åˆ†æˆ5ä»½ï¼Œå…¶ä¸­ä¸€ä»½ä½œä¸ºéªŒè¯é›†ã€‚ç„¶åç»è¿‡5æ¬¡(ç»„)çš„æµ‹è¯•ï¼Œæ¯æ¬¡éƒ½æ›´æ¢ä¸åŒçš„éªŒè¯é›†ã€‚å³å¾—åˆ°5ç»„æ¨¡å‹çš„ç»“æœï¼Œå–å¹³å‡å€¼ä½œä¸ºæœ€ç»ˆç»“æœã€‚åˆç§°5æŠ˜äº¤å‰éªŒè¯ã€‚ç›®çš„ï¼šè®©è¢«è¯„ä¼°çš„æ¨¡å‹æ›´åŠ å‡†ç¡®å¯ä¿¡<br>  â€¢	è®­ç»ƒé›†ï¼šè®­ç»ƒé›†+éªŒè¯é›†<br>	â€¢	æµ‹è¯•é›†ï¼šæµ‹è¯•é›†</p>
<p>  3.3.2 è¶…å‚æ•°æœç´¢-ç½‘æ ¼æœç´¢<br>  é€šå¸¸æƒ…å†µä¸‹ï¼Œæœ‰å¾ˆå¤šå‚æ•°æ˜¯éœ€è¦æ‰‹åŠ¨æŒ‡å®šçš„ï¼ˆå¦‚k-è¿‘é‚»ç®—æ³•ä¸­çš„Kå€¼ï¼‰ï¼Œè¿™ç§å«è¶…å‚æ•°ã€‚ä½†æ˜¯æ‰‹åŠ¨è¿‡ç¨‹ç¹æ‚ï¼Œæ‰€ä»¥éœ€è¦å¯¹æ¨¡å‹é¢„è®¾å‡ ç§è¶…å‚æ•°ç»„åˆã€‚æ¯ç»„è¶…å‚æ•°éƒ½é‡‡ç”¨äº¤å‰éªŒè¯æ¥è¿›è¡Œè¯„ä¼°ã€‚æœ€åé€‰å‡ºæœ€ä¼˜å‚æ•°ç»„åˆå»ºç«‹æ¨¡å‹</p>
<p>  3.3.3 æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜api</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sklearn.model_selection.GridSearchCV(estimator, param_grid=None,cv=None)</span><br><span class="line">â—¦	å¯¹ä¼°è®¡å™¨çš„æŒ‡å®šå‚æ•°å€¼è¿›è¡Œè¯¦å°½æœç´¢</span><br><span class="line">â—¦	estimatorï¼šä¼°è®¡å™¨å¯¹è±¡</span><br><span class="line">â—¦	param_gridï¼šä¼°è®¡å™¨å‚æ•°(dict)&#123;â€œn_neighborsâ€:[1,3,5]&#125;ï¼Œå°†æƒ³è¦ç”¨çš„å‚æ•°å€¼ä»¥å­—å…¸æ ¼å¼ä¼ å…¥</span><br><span class="line">â—¦	cvï¼šæŒ‡å®šå‡ æŠ˜äº¤å‰éªŒè¯ï¼Œå¸¸ç”¨10æŠ˜</span><br><span class="line">â—¦	fitï¼šè¾“å…¥è®­ç»ƒæ•°æ®</span><br><span class="line">â—¦	scoreï¼šå‡†ç¡®ç‡</span><br><span class="line">â—¦	ç»“æœåˆ†æï¼š</span><br><span class="line">â–ª	best_paramï¼šæœ€ä½³å‚æ•°</span><br><span class="line">â–ª	bestscoreï¼šæœ€ä½³ç»“æœ</span><br><span class="line">â–ª	best_estimatorï¼šæœ€ä½³ä¼°è®¡å™¨</span><br><span class="line">â–ª	cv_resultsï¼šäº¤å‰éªŒè¯ç»“æœ-æ¯æ¬¡äº¤å‰éªŒè¯åçš„éªŒè¯é›†å‡†ç¡®ç‡ç»“æœå’Œè®­ç»ƒé›†å‡†ç¡®ç‡ç»“æœ</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">def knn_iris_gscv():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    æ¡ˆä¾‹ï¼šé¸¢å°¾èŠ±ç§ç±»é¢„æµ‹knn,æ·»åŠ ç½‘æ ¼æœç´¢å’Œäº¤å‰éªŒè¯</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 1ï¼‰è·å–æ•°æ®ï¼Œå››ä¸ªç‰¹å¾</span><br><span class="line">    iris = load_iris()</span><br><span class="line">    # 2ï¼‰æ•°æ®é›†åˆ’åˆ†</span><br><span class="line">    x_train, x_test, y_train, y_test = train_test_split(iris.data, iris.target, random_state=6)</span><br><span class="line">    # 3ï¼‰ç‰¹å¾å·¥ç¨‹ï¼šæ ‡å‡†åŒ– 1.å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±» 2.å¯¹è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ ‡å‡†åŒ–ï¼ˆæµ‹è¯•é›†ç”¨è®­ç»ƒé›†fitçš„ç»“æœï¼‰</span><br><span class="line">    transform = StandardScaler()</span><br><span class="line">    x_train = transform.fit_transform(x_train)</span><br><span class="line">    x_test = transform.transform(x_test)</span><br><span class="line">    # 4ï¼‰KNNé¢„ä¼°å™¨æµç¨‹ï¼š1.å®ä¾‹åŒ–ä¸€ä¸ªé¢„ä¼°å™¨å¯¹è±¡ 2.å°†è®­ç»ƒé›†çš„ç‰¹å¾å€¼å’Œç›®æ ‡å€¼ä¼ å…¥è¿›è¡Œè®­ç»ƒ</span><br><span class="line">    estimator = KNeighborsClassifier()</span><br><span class="line">    # åŠ å…¥ç½‘æ ¼æœç´¢å’Œäº¤å‰éªŒè¯</span><br><span class="line">    # å‚æ•°å‡†å¤‡</span><br><span class="line">    param_dict = &#123;&quot;n_neighbors&quot;: [3, 5, 10]&#125;</span><br><span class="line">    estimator = GridSearchCV(estimator, param_grid=param_dict, cv=10)</span><br><span class="line">    estimator.fit(x_train, y_train)</span><br><span class="line">    # 5ï¼‰æ¨¡å‹è¯„ä¼°  1.ç›´æ¥æ¯”å¯¹çœŸå®å€¼å’Œé¢„ä¼°å€¼ 2.è®¡ç®—å‡†ç¡®ç‡</span><br><span class="line">    y_predict = estimator.predict(x_test)</span><br><span class="line">    print(&quot;y_predict:\n&quot;, y_predict)</span><br><span class="line">    print(&quot;é¢„æµ‹å€¼å’ŒçœŸå®å€¼:\n&quot;, y_predict == y_test)</span><br><span class="line">    score = estimator.score(x_test, y_test)</span><br><span class="line">    print(&quot;score:\n&quot;, score)  # æµ‹è¯•é›†çš„ç»“æœ</span><br><span class="line">    print(&quot;æœ€ä½³å‚æ•°:\n&quot;, estimator.best_params_)</span><br><span class="line">    print(&quot;æœ€ä½³ç»“æœ:\n&quot;, estimator.best_score_)  # éªŒè¯é›†çš„ç»“æœ</span><br><span class="line">    print(&quot;æœ€ä½³ä¼°è®¡å™¨:\n&quot;, estimator.best_estimator_)</span><br><span class="line">    print(&quot;äº¤å‰éªŒè¯ç»“æœ:\n&quot;, estimator.cv_results_)</span><br><span class="line">    return None</span><br></pre></td></tr></table></figure>


<p>  3.3.4 æ¡ˆä¾‹-Facebookç­¾åˆ°ä½ç½®é¢„æµ‹Kå€¼è°ƒä¼˜</p>
<pre><code>å¤„ç†æ•°æ®ï¼Œåå¤è°ƒè¯•ï¼Œå¦‚æœç”¨pycharmï¼Œæ¯æ¬¡è°ƒè¯•éƒ½è¦åŠ è½½ä¸€æ¬¡ã€‚æ‰€ä»¥ç”¨jupyterã€‚

æµç¨‹ï¼š
  1ï¼‰è·å–æ•°æ®
  2ï¼‰æ•°æ®å¤„ç†ï¼šè¿‡æ»¤æ— ç”¨æ•°æ®ï¼Œç­›é€‰ç‰¹å¾å€¼xå’Œç›®æ ‡å€¼yï¼Œæ•°æ®é›†åˆ’åˆ†
</code></pre>
<p><code>data.head() data=data.query(â€œx&lt;2 &amp; x&gt;1â€)</code><br><code>å¤„ç†æ—¶é—´æ•°æ®ï¼štime_value = pd.to_data_time(data[â€œtimeâ€], unit=â€œsâ€)  date = pd.DateTimeIndex(time_value)</code><br><code>å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼š data.groupby(â€œplaceâ€).count()</code><br>      3ï¼‰ç‰¹å¾å·¥ç¨‹ï¼šæ ‡å‡†åŒ–<br>      4ï¼‰KNNç®—æ³•é¢„ä¼°æµç¨‹<br>      5ï¼‰æ¨¡å‹é€‰æ‹©ä¸è°ƒä¼˜<br>      6ï¼‰æ¨¡å‹è¯„ä¼°</p>
<h4 id="3-4-æœ´ç´ è´å¶æ–¯ç®—æ³•"><a href="#3-4-æœ´ç´ è´å¶æ–¯ç®—æ³•" class="headerlink" title="3.4 æœ´ç´ è´å¶æ–¯ç®—æ³•"></a>3.4 æœ´ç´ è´å¶æ–¯ç®—æ³•</h4><p>3.4.1 ä»€ä¹ˆæ˜¯æœ´ç´ è´å¶æ–¯ç®—æ³•ï¼š<br>ç»™å‡ºåˆ†ç±»äº‹ä»¶æ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚</p>
<p>â€¢	è”åˆæ¦‚ç‡ï¼šåŒ…å«å¤šä¸ªæ¡ä»¶ï¼Œä¸”æ‰€æœ‰æ¡ä»¶åŒæ—¶æˆç«‹çš„æ¦‚ç‡<br>â—¦	è®°ä½œï¼šP(A,B)<br>â—¦	ç‰¹æ€§ï¼šP(A, B) &#x3D; P(A)P(B) &lt;&#x3D;&gt; äº‹ä»¶ABç›¸äº’ç‹¬ç«‹<br>â€¢	æ¡ä»¶æ¦‚ç‡ï¼šå°±æ˜¯äº‹ä»¶Aåœ¨å¦å¤–ä¸€ä¸ªäº‹ä»¶Bå·²ç»å‘ç”Ÿæ¡ä»¶ä¸‹çš„å‘ç”Ÿæ¦‚ç‡<br>â—¦	è®°ä½œï¼šP(A|B)</p>
<p>è´å¶æ–¯å…¬å¼ï¼š<code>p(c|w) = [p(w|c)p(c)]/p(w)</code>ã€‚wä¸ºç‰¹å¾å€¼ï¼Œcä¸ºç›®æ ‡å€¼ã€‚</p>
<p>æœ´ç´ æ˜¯ä»€ä¹ˆï¼šå‡å®šç‰¹å¾ä¸ç‰¹å¾ä¹‹é—´ç›¸äº’ç‹¬ç«‹ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šæ–‡æœ¬åˆ†ç±»(å•è¯ä½œä¸ºç‰¹å¾ï¼Œå‡è®¾ç›¸äº’ç‹¬ç«‹) </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">P(C)ï¼šæ¯ä¸ªæ–‡æ¡£ç±»åˆ«çš„æ¦‚ç‡(æŸæ–‡æ¡£ç±»åˆ«æ•°ï¼æ€»æ–‡æ¡£æ•°é‡)</span><br><span class="line">P(Wâ”‚C)ï¼šç»™å®šç±»åˆ«ä¸‹ç‰¹å¾ï¼ˆè¢«é¢„æµ‹æ–‡æ¡£ä¸­å‡ºç°çš„è¯ï¼‰çš„æ¦‚ç‡ï¼ˆæŸç±»åˆ«è¯1æ•°é‡/æŸç±»åˆ«æ‰€æœ‰æ¬¡æ•°é‡ï¼‰</span><br><span class="line">è®¡ç®—æ–¹æ³•ï¼šP(F1â”‚C)=Ni/N ï¼ˆè®­ç»ƒæ–‡æ¡£ä¸­å»è®¡ç®—ï¼‰</span><br><span class="line">Niä¸ºè¯¥F1è¯åœ¨Cç±»åˆ«æ‰€æœ‰æ–‡æ¡£ä¸­å‡ºç°çš„æ¬¡æ•°</span><br><span class="line">Nä¸ºæ‰€å±ç±»åˆ«Cä¸‹çš„æ–‡æ¡£æ‰€æœ‰è¯å‡ºç°çš„æ¬¡æ•°å’Œ</span><br><span class="line">P(F1,F2,â€¦) é¢„æµ‹æ–‡æ¡£ä¸­æ¯ä¸ªè¯çš„æ¦‚ç‡</span><br></pre></td></tr></table></figure>

<p>è®¡ç®—å‡ºæ¥æŸä¸ªæ¦‚ç‡ä¸º0ï¼Œæ€ä¹ˆåŠï¼Ÿ<br>æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ç³»:  <code>p(w|c) = (ni+a)/(n+am)</code><br>ç›®çš„ï¼šé˜²æ­¢è®¡ç®—å‡ºçš„åˆ†ç±»æ¦‚ç‡ä¸º0<br>aä¸ºæŒ‡å®šçš„ç³»æ•°ä¸€èˆ¬ä¸º1ï¼Œmä¸ºè®­ç»ƒæ–‡æ¡£ä¸­ç»Ÿè®¡å‡ºçš„ç‰¹å¾è¯æœ‰å¤šå°‘ç§</p>
<p>3.4.2 æœ´ç´ è´å¶æ–¯api</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sklearn.naive_bayes.MultinomialNB(alpha = 1.0)</span><br><span class="line">æœ´ç´ è´å¶æ–¯åˆ†ç±»</span><br><span class="line">alphaï¼šæ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ç³»æ•°</span><br></pre></td></tr></table></figure>

<p>3.4.3 æ¡ˆä¾‹ï¼š20ç±»æ–°é—»åˆ†ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">def nbcls():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    æœ´ç´ è´å¶æ–¯å¯¹æ–°é—»æ•°æ®é›†è¿›è¡Œé¢„æµ‹</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # è·å–æ–°é—»çš„æ•°æ®ï¼Œ20ä¸ªç±»åˆ«</span><br><span class="line">    news = fetch_20newsgroups(data_home=&#x27;/Users/liuxuan/MyProject/pypro/python-learn&#x27;, subset=&#x27;all&#x27;)</span><br><span class="line">    # åˆ’åˆ†æ•°æ®é›†</span><br><span class="line">    x_train, x_test, y_train, y_test = train_test_split(news.data, news.target, test_size=0.3)</span><br><span class="line">    # å¯¹äºæ–‡æœ¬æ•°æ®ï¼Œè¿›è¡Œç‰¹å¾æŠ½å– 1.è·å–å®ä¾‹åŒ–å¯¹è±¡ 2.è½¬æ¢</span><br><span class="line">    tf = TfidfVectorizer()</span><br><span class="line">    x_train = tf.fit_transform(x_train)</span><br><span class="line">    # è¿™é‡Œæ‰“å°å‡ºæ¥çš„åˆ—è¡¨æ˜¯ï¼šè®­ç»ƒé›†å½“ä¸­çš„æ‰€æœ‰ä¸åŒè¯çš„ç»„æˆçš„ä¸€ä¸ªåˆ—è¡¨</span><br><span class="line">    print(tf.get_feature_names())</span><br><span class="line">    # print(x_train.toarray())</span><br><span class="line">    # ä¸èƒ½è°ƒç”¨fit_transform</span><br><span class="line">    x_test = tf.transform(x_test)</span><br><span class="line">    # estimatorä¼°è®¡å™¨æµç¨‹,å¹¶è®­ç»ƒ</span><br><span class="line">    mlb = MultinomialNB(alpha=1.0)</span><br><span class="line">    mlb.fit(x_train, y_train)</span><br><span class="line">    # è¿›è¡Œé¢„æµ‹ï¼ŒéªŒè¯</span><br><span class="line">    y_predict = mlb.predict(x_test)</span><br><span class="line">    print(&quot;é¢„æµ‹æ¯ç¯‡æ–‡ç« çš„ç±»åˆ«ï¼š&quot;, y_predict[:100])</span><br><span class="line">    print(&quot;çœŸå®ç±»åˆ«ä¸ºï¼š&quot;, y_test[:100])</span><br><span class="line">    print(&quot;é¢„æµ‹å‡†ç¡®ç‡ä¸ºï¼š&quot;, mlb.score(x_test, y_test))</span><br><span class="line">    return None</span><br></pre></td></tr></table></figure>

<p>3.4.4 ä¼˜ç¼ºç‚¹<br>ä¼˜ç‚¹ï¼š<br>æœ´ç´ è´å¶æ–¯æ¨¡å‹å‘æºäºå¤å…¸æ•°å­¦ç†è®ºï¼Œæœ‰ç¨³å®šçš„åˆ†ç±»æ•ˆç‡ã€‚<br>å¯¹ç¼ºå¤±æ•°æ®ä¸å¤ªæ•æ„Ÿï¼Œç®—æ³•ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå¸¸ç”¨äºæ–‡æœ¬åˆ†ç±»ã€‚<br>åˆ†ç±»å‡†ç¡®åº¦é«˜ï¼Œé€Ÿåº¦å¿«<br>ç¼ºç‚¹ï¼š<br>ç”±äºä½¿ç”¨äº†æ ·æœ¬å±æ€§ç‹¬ç«‹æ€§çš„å‡è®¾ï¼Œæ‰€ä»¥å¦‚æœç‰¹å¾å±æ€§æœ‰å…³è”æ—¶å…¶æ•ˆæœä¸å¥½</p>
<h4 id="3-5-å†³ç­–æ ‘"><a href="#3-5-å†³ç­–æ ‘" class="headerlink" title="3.5 å†³ç­–æ ‘"></a>3.5 å†³ç­–æ ‘</h4><p>å†³ç­–æ ‘æ€æƒ³çš„æ¥æºéå¸¸æœ´ç´ ï¼Œç¨‹åºè®¾è®¡ä¸­çš„æ¡ä»¶åˆ†æ”¯ç»“æ„å°±æ˜¯if-thenç»“æ„ï¼Œæœ€æ—©çš„å†³ç­–æ ‘å°±æ˜¯åˆ©ç”¨è¿™ç±»ç»“æ„åˆ†å‰²æ•°æ®çš„ä¸€ç§åˆ†ç±»å­¦ä¹ æ–¹æ³•<br>æ€æƒ³ï¼šå¦‚ä½•é«˜æ•ˆåœ°è¿›è¡Œå†³ç­–ï¼Œå…ˆçœ‹å“ªä¸ªå†çœ‹å“ªä¸ªï¼Œå†³å®šç‰¹å¾çš„å…ˆåé¡ºåºã€‚</p>
<p>3.5.1 å†³ç­–æ ‘åˆ†ç±»åŸç†<br>ç”¨æ•°å­¦çš„æ–¹æ³•æ¥å¾—åˆ°ï¼Œåº”è¯¥å…ˆçœ‹å“ªä¸ªç‰¹å¾å†çœ‹å“ªä¸ªç‰¹å¾ã€‚<br>ä¿¡æ¯è®ºåŸºç¡€<br>ä¿¡æ¯ï¼šæ¶ˆé™¤éšæœºä¸å®šæ€§çš„ä¸œè¥¿<br>ä¿¡æ¯çš„è¡¡é‡ - ä¿¡æ¯é‡ - ä¿¡æ¯å¢’<br>pä¸ºæ¯ä¸ªçƒé˜Ÿè·èƒœçš„æ¦‚ç‡ï¼ˆå‡è®¾æ¦‚ç‡ç›¸ç­‰ï¼Œéƒ½ä¸º1&#x2F;32ï¼‰<br>ä¿¡æ¯å¢’ H &#x3D; -(p1logp1 + p2logp2 + â€¦ + p32logp32)&#x3D;5bit<br>å†³ç­–æ ‘çš„åˆ’åˆ†ä¾æ®ä¹‹ä¸€â€”â€”ä¿¡æ¯å¢ç›Š<br>ä¿¡æ¯å¢ç›Šï¼šç‰¹å¾Aå¯¹è®­ç»ƒæ•°æ®é›†Dçš„ä¿¡æ¯å¢ç›Šg(D,A),å®šä¹‰ä¸ºé›†åˆDçš„ä¿¡æ¯ç†µH(D)ä¸ç‰¹å¾Aç»™å®šæ¡ä»¶ä¸‹Dçš„ä¿¡æ¯æ¡ä»¶ç†µH(D|A)ä¹‹å·®<br>ï¼ˆçŸ¥é“å“ªä¸ªç‰¹å¾ä¹‹åï¼Œä¸ç¡®å®šæ€§å‡å°‘çš„é‡ï¼‰<br><code>g(D,A)= H(D) - æ¡ä»¶å¢’H(D|A)</code><br>æ¡ä»¶å¢’æ€ä¹ˆç®—ï¼šç‰¹å¾Aæœ‰å¤šå°‘ç§ï¼Œæ¯ç§åˆ†åˆ«è®¡ç®—ä¿¡æ¯å¢’ï¼Œç„¶åæ ¹æ®æ ·æœ¬ç‰¹å¾ç±»ç§ç±»æ¯”ä¾‹ç´¯åŠ ã€‚</p>
<p>3.5.2 å†³ç­–æ ‘api</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â€¢	class sklearn.tree.DecisionTreeClassifier(criterion=â€™giniâ€™, max_depth=None,random_state=None)</span><br><span class="line">â—¦	å†³ç­–æ ‘åˆ†ç±»å™¨</span><br><span class="line">â—¦	criterion:é»˜è®¤æ˜¯â€™giniâ€™ç³»æ•°ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¿¡æ¯å¢ç›Šçš„ç†µâ€™entropyâ€™</span><br><span class="line">â—¦	max_depth:æ ‘çš„æ·±åº¦å¤§å°ï¼Œå¤ªæ·±å®¹æ˜“è¿‡æ‹Ÿåˆ</span><br><span class="line">â—¦	random_state:éšæœºæ•°ç§å­</span><br><span class="line">â€¢	å…¶ä¸­ä¼šæœ‰äº›è¶…å‚æ•°ï¼šmax_depth:æ ‘çš„æ·±åº¦å¤§å°</span><br><span class="line">â—¦	å…¶å®ƒè¶…å‚æ•°æˆ‘ä»¬ä¼šç»“åˆéšæœºæ£®æ—è®²è§£</span><br></pre></td></tr></table></figure>
<p>æ­¥éª¤ï¼š<br>1ï¼‰è·å–æ•°æ®é›†<br>2ï¼‰åˆ’åˆ†æ•°æ®é›†ï¼Œå†³ç­–æ ‘ä¸ç”¨åšæ ‡å‡†åŒ–<br>3ï¼‰å†³ç­–æ ‘é¢„ä¼°å™¨è¿›è¡Œåˆ†ç±»<br>4ï¼‰æ¨¡å‹è¯„ä¼°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">def decision_iris():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    ç”¨å†³ç­–æ ‘å¯¹é¸¢å°¾èŠ±è¿›è¡Œåˆ†ç±»</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 1ï¼‰è·å–æ•°æ®é›†</span><br><span class="line">    iris = load_iris()</span><br><span class="line">    # 2ï¼‰åˆ’åˆ†æ•°æ®é›†ï¼Œå†³ç­–æ ‘ä¸ç”¨åšæ ‡å‡†åŒ–</span><br><span class="line">    x_train, x_test, y_train, y_test = train_test_split(iris.data, iris.target, random_state=6)</span><br><span class="line">    # 3ï¼‰å†³ç­–æ ‘é¢„ä¼°å™¨è¿›è¡Œåˆ†ç±»</span><br><span class="line">    estimator = DecisionTreeClassifier(criterion=&#x27;entropy&#x27;)</span><br><span class="line">    estimator.fit(x_train,y_train)</span><br><span class="line">    # 4ï¼‰æ¨¡å‹è¯„ä¼°</span><br><span class="line">    y_predict = estimator.predict(x_test)</span><br><span class="line">    print(&quot;y_predict:\n&quot;, y_predict)</span><br><span class="line">    print(&quot;é¢„æµ‹å€¼å’ŒçœŸå®å€¼:\n&quot;, y_predict == y_test)</span><br><span class="line">    score = estimator.score(x_test, y_test)</span><br><span class="line">    print(&quot;score:\n&quot;, score)</span><br></pre></td></tr></table></figure>

<p>3.5.3 å†³ç­–æ ‘å¯è§†åŒ–</p>
<p>1.ä¿å­˜æ ‘çš„ç»“æ„åˆ°dotæ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1ã€sklearn.tree.export_graphviz() è¯¥å‡½æ•°èƒ½å¤Ÿå¯¼å‡ºDOTæ ¼å¼</span><br><span class="line">	â—¦tree.export_graphviz(estimator,out_file=&#x27;tree.dotâ€™,feature_names=[â€˜â€™,â€™â€™])</span><br><span class="line">2ã€å¤åˆ¶æ–‡ä»¶å†…å®¹åˆ°ç½‘ç«™ï¼šhttp://www.webgraphviz.com</span><br><span class="line"></span><br><span class="line"> å¯è§†åŒ–å†³ç­–æ ‘</span><br><span class="line">export_graphviz(estimator, out_file=&#x27;iris_tree.dot&#x27;)</span><br></pre></td></tr></table></figure>

<p>3.5.4 å†³ç­–æ ‘ä¼˜ç¼ºç‚¹<br>	â€¢	ä¼˜ç‚¹ï¼š<br>	â—¦	ç®€å•çš„ç†è§£å’Œè§£é‡Šï¼Œæ ‘æœ¨å¯è§†åŒ–ã€‚å¯ç†è§£æ€§å¼ºï¼Œåè§‚ç¥ç»ç½‘ç»œæ˜¯ä¸ªé»‘ç›’ã€‚<br>	â€¢	ç¼ºç‚¹ï¼š<br>	â—¦	å®¹æ˜“äº§ç”Ÿè¿‡æ‹Ÿåˆã€‚<br>	â€¢	æ”¹è¿›ï¼š<br>	â—¦	å‡æcartç®—æ³•(å†³ç­–æ ‘APIå½“ä¸­å·²ç»å®ç°ï¼Œéšæœºæ£®æ—å‚æ•°è°ƒä¼˜æœ‰ç›¸å…³ä»‹ç»)<br>	â—¦	éšæœºæ£®æ—<br>æ³¨ï¼šä¼ä¸šé‡è¦å†³ç­–ï¼Œç”±äºå†³ç­–æ ‘å¾ˆå¥½çš„åˆ†æèƒ½åŠ›ï¼Œåœ¨å†³ç­–è¿‡ç¨‹åº”ç”¨è¾ƒå¤šï¼Œ å¯ä»¥é€‰æ‹©ç‰¹å¾</p>
<p>âš ï¸ï¼šç‰¹å¾è½¬æ¢ä¸ºå­—å…¸ï¼Œè¿›è¡Œå­—å…¸ç‰¹å¾æŠ½å–ï¼Œå› ä¸ºone-hotç¼–ç ç‰¹å¾å˜å¤šï¼Œç”¨get_feature_namesï¼Œè·å–ç‰¹å¾ã€‚</p>
<h4 id="3-6-éšæœºæ£®æ—"><a href="#3-6-éšæœºæ£®æ—" class="headerlink" title="3.6 éšæœºæ£®æ—"></a>3.6 éšæœºæ£®æ—</h4><p>ä»€ä¹ˆæ˜¯é›†æˆå­¦ä¹ æ–¹æ³•ï¼š<br>é›†æˆå­¦ä¹ é€šè¿‡å»ºç«‹å‡ ä¸ªæ¨¡å‹ç»„åˆçš„æ¥è§£å†³å•ä¸€é¢„æµ‹é—®é¢˜ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯ç”Ÿæˆå¤šä¸ªåˆ†ç±»å™¨&#x2F;æ¨¡å‹ï¼Œå„è‡ªç‹¬ç«‹åœ°å­¦ä¹ å’Œä½œå‡ºé¢„æµ‹ã€‚è¿™äº›é¢„æµ‹æœ€åç»“åˆæˆç»„åˆé¢„æµ‹ï¼Œå› æ­¤ä¼˜äºä»»ä½•ä¸€ä¸ªå•åˆ†ç±»çš„åšå‡ºé¢„æµ‹ã€‚ä¸‰ä¸ªè‡­çš®åŒ ï¼Œé¡¶ä¸€ä¸ªè¯¸è‘›äº®ã€‚ç”±åˆ†ç±»ç»“æœçš„ä¼—æ•°æ¥å†³å®šç›®æ ‡å€¼ã€‚</p>
<p>ä»€ä¹ˆæ˜¯éšæœºæ£®æ—ï¼š<br>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œéšæœºæ£®æ—æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªå†³ç­–æ ‘çš„åˆ†ç±»å™¨ï¼Œå¹¶ä¸”å…¶è¾“å‡ºçš„ç±»åˆ«æ˜¯ç”±ä¸ªåˆ«æ ‘è¾“å‡ºçš„ç±»åˆ«çš„ä¼—æ•°è€Œå®šã€‚<br>3.6.1 éšæœºæ£®æ—åŸç†è¿‡ç¨‹<br>å¦‚ä½•å»ºé€ æ¯æ£µæ ‘ï¼šä¸¤ä¸ªéšæœºï¼š<br>Nä¸ªæ ·æœ¬ï¼ŒMä¸ªç‰¹å¾<br>1ï¼‰è®­ç»ƒé›†éšæœº<br>é‡‡å–bootstrapæŠ½æ ·ï¼ˆéšæœºæœ‰æ”¾å›æŠ½æ ·ï¼‰<br>ç”¨Næ¥è¡¨ç¤ºè®­ç»ƒç”¨ä¾‹ï¼ˆæ ·æœ¬ï¼‰çš„ä¸ªæ•°ï¼ŒMè¡¨ç¤ºç‰¹å¾æ•°ç›®ã€‚<br>	â—¦	1ã€ä¸€æ¬¡éšæœºé€‰å‡ºä¸€ä¸ªæ ·æœ¬ï¼Œé‡å¤Næ¬¡ï¼Œ ï¼ˆæœ‰å¯èƒ½å‡ºç°é‡å¤çš„æ ·æœ¬ï¼‰<br>	â—¦	2ã€éšæœºå»é€‰å‡ºmä¸ªç‰¹å¾, m &lt;&lt;Mï¼Œå»ºç«‹å†³ç­–æ ‘ï¼Œèµ·åˆ°é™ç»´çš„æ•ˆæœï¼Œè¿ç®—å¿«ã€‚å¯ä»¥è®©æ­£ç¡®çš„ç»“æœè„±é¢–è€Œå‡ºï¼ˆçœŸç†æŒæ¡åœ¨å°‘æ•°äººæ‰‹é‡Œï¼‰</p>
<p>2ï¼‰ç‰¹å¾éšæœºã€‚</p>
<p>ä¸ºä»€ä¹ˆé‡‡ç”¨BootStrapæŠ½æ ·<br>	â€¢	ä¸ºä»€ä¹ˆè¦éšæœºæŠ½æ ·è®­ç»ƒé›†ï¼Ÿã€€ã€€<br>	â—¦	å¦‚æœä¸è¿›è¡ŒéšæœºæŠ½æ ·ï¼Œæ¯æ£µæ ‘çš„è®­ç»ƒé›†éƒ½ä¸€æ ·ï¼Œé‚£ä¹ˆæœ€ç»ˆè®­ç»ƒå‡ºçš„æ ‘åˆ†ç±»ç»“æœä¹Ÿæ˜¯å®Œå…¨ä¸€æ ·çš„<br>	â€¢	ä¸ºä»€ä¹ˆè¦æœ‰æ”¾å›åœ°æŠ½æ ·ï¼Ÿ<br>	â—¦	å¦‚æœä¸æ˜¯æœ‰æ”¾å›çš„æŠ½æ ·ï¼Œé‚£ä¹ˆæ¯æ£µæ ‘çš„è®­ç»ƒæ ·æœ¬éƒ½æ˜¯ä¸åŒçš„ï¼Œéƒ½æ˜¯æ²¡æœ‰äº¤é›†çš„ï¼Œè¿™æ ·æ¯æ£µæ ‘éƒ½æ˜¯â€œæœ‰åçš„â€ï¼Œéƒ½æ˜¯ç»å¯¹â€œç‰‡é¢çš„â€ï¼ˆå½“ç„¶è¿™æ ·è¯´å¯èƒ½ä¸å¯¹ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ£µæ ‘è®­ç»ƒå‡ºæ¥éƒ½æ˜¯æœ‰å¾ˆå¤§çš„å·®å¼‚çš„ï¼›è€Œéšæœºæ£®æ—æœ€ååˆ†ç±»å–å†³äºå¤šæ£µæ ‘ï¼ˆå¼±åˆ†ç±»å™¨ï¼‰çš„æŠ•ç¥¨è¡¨å†³ã€‚</p>
<p>3.6.2 éšæœºæ£®æ—api</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">â€¢	class sklearn.ensemble.RandomForestClassifier(n_estimators=10, criterion=â€™giniâ€™, max_depth=None, bootstrap=True, random_state=None, min_samples_split=2)</span><br><span class="line">â—¦	éšæœºæ£®æ—åˆ†ç±»å™¨</span><br><span class="line">â—¦	n_estimatorsï¼šintegerï¼Œoptionalï¼ˆdefault = 10ï¼‰æ£®æ—é‡Œçš„æ ‘æœ¨æ•°é‡</span><br><span class="line">â—¦	criterionï¼šstringï¼Œå¯é€‰ï¼ˆdefault =â€œginiâ€ï¼‰åˆ†å‰²ç‰¹å¾çš„æµ‹é‡æ–¹æ³•</span><br><span class="line">â—¦	max_depthï¼šintegeræˆ–Noneï¼Œå¯é€‰ï¼ˆé»˜è®¤=æ— ï¼‰æ ‘çš„æœ€å¤§æ·±åº¦ 5,8,15,25,30</span><br><span class="line">â—¦	max_features=&quot;autoâ€,æ¯ä¸ªå†³ç­–æ ‘çš„æœ€å¤§ç‰¹å¾æ•°é‡(mæ€ä¹ˆé€‰)</span><br><span class="line">â–ª	If &quot;auto&quot;, then max_features=sqrt(n_features).</span><br><span class="line">â–ª	If &quot;sqrt&quot;, then max_features=sqrt(n_features) (same as &quot;auto&quot;).</span><br><span class="line">â–ª	If &quot;log2&quot;, then max_features=log2(n_features).</span><br><span class="line">â–ª	If None, then max_features=n_features.</span><br><span class="line">â—¦	bootstrapï¼šbooleanï¼Œoptionalï¼ˆdefault = Trueï¼‰æ˜¯å¦åœ¨æ„å»ºæ ‘æ—¶ä½¿ç”¨æ”¾å›æŠ½æ ·</span><br><span class="line">â—¦	min_samples_split:èŠ‚ç‚¹åˆ’åˆ†æœ€å°‘æ ·æœ¬æ•°</span><br><span class="line">â—¦	min_samples_leaf:å¶å­èŠ‚ç‚¹çš„æœ€å°æ ·æœ¬æ•°</span><br><span class="line">â€¢	è¶…å‚æ•°ï¼šn_estimator, max_depth, min_samples_split,min_samples_leaf</span><br></pre></td></tr></table></figure>

<p>3.6.3 é¸¢å°¾èŠ±å®ä¾‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">def random_decision_iris():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    ç”¨å†³ç­–æ ‘å¯¹é¸¢å°¾èŠ±è¿›è¡Œåˆ†ç±»</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 1ï¼‰è·å–æ•°æ®é›†</span><br><span class="line">    iris = load_iris()</span><br><span class="line">    # 2ï¼‰åˆ’åˆ†æ•°æ®é›†ï¼Œå†³ç­–æ ‘ä¸ç”¨åšæ ‡å‡†åŒ–</span><br><span class="line">    x_train, x_test, y_train, y_test = train_test_split(iris.data, iris.target, random_state=6)</span><br><span class="line">    # 3ï¼‰éšæœºæ£®æ—é¢„ä¼°å™¨è¿›è¡Œåˆ†ç±»</span><br><span class="line">    estimator = RandomForestClassifier(criterion=&#x27;entropy&#x27;)</span><br><span class="line">    # åŠ å…¥ç½‘æ ¼æœç´¢å’Œäº¤å‰éªŒè¯</span><br><span class="line">    # å‚æ•°å‡†å¤‡</span><br><span class="line">    param_dict = &#123;&quot;n_estimators&quot;: [120, 200, 300, 500, 800, 1200], &quot;max_depth&quot;: [5, 8, 15, 25, 30]&#125;</span><br><span class="line">    # è¶…å‚æ•°è°ƒä¼˜</span><br><span class="line">    estimator = GridSearchCV(estimator, param_grid=param_dict, cv=2)</span><br><span class="line">    estimator.fit(x_train,y_train)</span><br><span class="line">    # 4ï¼‰æ¨¡å‹è¯„ä¼°</span><br><span class="line">    y_predict = estimator.predict(x_test)</span><br><span class="line">    print(&quot;y_predict:\n&quot;, y_predict)</span><br><span class="line">    print(&quot;é¢„æµ‹å€¼å’ŒçœŸå®å€¼:\n&quot;, y_predict == y_test)</span><br><span class="line">    score = estimator.score(x_test, y_test)</span><br><span class="line">    print(&quot;score:\n&quot;, score)</span><br><span class="line">    # å¯è§†åŒ–å†³ç­–æ ‘</span><br><span class="line">    # export_graphviz(estimator, out_file=&#x27;iris_tree.dot&#x27;)</span><br><span class="line">    print(&quot;score:\n&quot;, score)  # æµ‹è¯•é›†çš„ç»“æœ</span><br><span class="line">    print(&quot;æœ€ä½³å‚æ•°:\n&quot;, estimator.best_params_)</span><br><span class="line">    print(&quot;æœ€ä½³ç»“æœ:\n&quot;, estimator.best_score_)  # éªŒè¯é›†çš„ç»“æœ</span><br><span class="line">    print(&quot;æœ€ä½³ä¼°è®¡å™¨:\n&quot;, estimator.best_estimator_)</span><br><span class="line">    print(&quot;äº¤å‰éªŒè¯ç»“æœ:\n&quot;, estimator.cv_results_)</span><br><span class="line">    return None</span><br></pre></td></tr></table></figure>

<p>3.6.4 ä¼˜ç¼ºç‚¹<br>	â€¢	åœ¨å½“å‰æ‰€æœ‰ç®—æ³•ä¸­ï¼Œå…·æœ‰æå¥½çš„å‡†ç¡®ç‡ï¼ˆæ²¡æœ‰å…è´¹çš„åˆé¤ï¼‰<br>	â€¢	èƒ½å¤Ÿæœ‰æ•ˆåœ°è¿è¡Œåœ¨å¤§æ•°æ®é›†ä¸Šï¼Œå¤„ç†å…·æœ‰é«˜ç»´ç‰¹å¾çš„è¾“å…¥æ ·æœ¬ï¼Œè€Œä¸”ä¸éœ€è¦é™ç»´ï¼ˆM&gt;&gt;mç›¸å½“äºæ˜¯é™ç»´äº†ï¼‰<br>	â€¢	èƒ½å¤Ÿè¯„ä¼°å„ä¸ªç‰¹å¾åœ¨åˆ†ç±»é—®é¢˜ä¸Šçš„é‡è¦æ€§</p>
<h4 id="3-7-æ€»ç»“"><a href="#3-7-æ€»ç»“" class="headerlink" title="3.7 æ€»ç»“"></a>3.7 æ€»ç»“</h4><p>1.è½¬æ¢å™¨å’Œé¢„ä¼°å™¨ï¼šè½¬æ¢å™¨åœ¨ç‰¹å¾å·¥ç¨‹é‡Œç”¨ï¼Œé¢„ä¼°å™¨åœ¨æœºå™¨å­¦ä¹ ç®—æ³•è®­ç»ƒæ¨¡å‹é‡Œç”¨ã€‚å°è£…åœ¨åŒä¸€çˆ¶ç±»é‡Œé¢ï¼Œè°ƒåŒä¸€ä¸ªæ–¹æ³•ï¼ˆfit_transformã€fitï¼‰</p>
<p>2.KNNç®—æ³•ï¼šæ ¸å¿ƒæ€æƒ³æ˜¯æ ¹æ®é‚»å±…ç¡®å®šç±»åˆ«ï¼Œè°æ˜¯é‚»å±…ï¼šè·ç¦»å…¬å¼ï¼Œkçš„å–å€¼ï¼šæ‰¾å‡ ä¸ªé‚»å±…ï¼Œå¤ªå°å®¹æ˜“å—å¼‚å¸¸å€¼å½±å“ï¼Œè¿‡å¤§å®¹æ˜“å—æ ·æœ¬ä¸å‡è¡¡å½±å“ã€‚ç¼ºé™·æ˜¯æ—¶é—´å¤æ‚åº¦é«˜ï¼Œåº”ç”¨åœºæ™¯æ˜¯å°‘é‡æ•°æ®ã€‚</p>
<p>3.æœ´ç´ è´å¶æ–¯ç®—æ³•ï¼šæœ´ç´ ï¼šå‡å®šç‰¹å¾ä¸ç‰¹å¾ä¹‹é—´ç‹¬ç«‹ã€‚æ ·æœ¬é‡ä¸å¤Ÿå¯¼è‡´å‡ºç°0çš„æƒ…å†µï¼šå¼•å…¥æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ç³»æ•°ã€‚ä¼˜ç‚¹ï¼šå¯¹ç¼ºå¤±æ•°æ®ä¸æ•æ„Ÿï¼Œè®¡ç®—å¿«ã€‚ç¼ºç‚¹ï¼šç‰¹å¾ä¹‹é—´å…³è”å½±å“æ•ˆæœã€‚åº”ç”¨åœºæ™¯ï¼šæ–‡æœ¬åˆ†ç±»ã€‚</p>
<p>4.å†³ç­–æ ‘ï¼šä»¥ä½•ç§é¡ºåºå†³ç­–æ˜¯æœ€é«˜æ•ˆçš„ï¼Œç”¨ä¿¡æ¯å¢ç›Šæ¥å†³å®šå†³ç­–é¡ºåºã€‚ä¿¡æ¯å¢ç›Š&#x3D;ä¿¡æ¯å¢’-æ¡ä»¶å¢’ã€‚ä¼˜ç‚¹æ˜¯å¯ä»¥å¯è§†åŒ–ï¼Œå¯è§£é‡Šèƒ½åŠ›å¼ºã€‚ç¼ºç‚¹å®¹æ˜“è¿‡æ‹Ÿåˆã€‚</p>
<p>5.éšæœºæ£®æ—ï¼šéšæœºï¼šè®­ç»ƒé›†éšæœºå’Œç‰¹å¾éšæœºï¼Œæ£®æ—ï¼šå¤šä¸ªå†³ç­–æ ‘ã€‚ä¼˜ç‚¹å®¹æ˜“å–å¾—æ¯”è¾ƒå¥½çš„æ•ˆæœï¼Œæœ‰é™ç»´çš„æ•ˆæœï¼Œé™ä½æ¨¡å‹å¤æ‚åº¦ã€‚åº”ç”¨åœºæ™¯ï¼šé«˜ç»´åº¦ç‰¹å¾å¤§æ•°æ®åœºæ™¯ã€‚</p>
<h3 id="4-å›å½’ä¸èšç±»ç®—æ³•"><a href="#4-å›å½’ä¸èšç±»ç®—æ³•" class="headerlink" title="4.å›å½’ä¸èšç±»ç®—æ³•"></a>4.å›å½’ä¸èšç±»ç®—æ³•</h3><h4 id="4-1-çº¿æ€§å›å½’"><a href="#4-1-çº¿æ€§å›å½’" class="headerlink" title="4.1 çº¿æ€§å›å½’"></a>4.1 çº¿æ€§å›å½’</h4><p>4.1.1 çº¿æ€§å›å½’åŸç†<br>å›å½’é—®é¢˜ - ç›®æ ‡å€¼æ˜¯è¿ç»­æ€§çš„ã€‚<br>çº¿æ€§å›å½’(Linear regression)æ˜¯åˆ©ç”¨å›å½’æ–¹ç¨‹(å‡½æ•°)å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªè‡ªå˜é‡(ç‰¹å¾å€¼)å’Œå› å˜é‡(ç›®æ ‡å€¼)ä¹‹é—´å…³ç³»è¿›è¡Œå»ºæ¨¡çš„ä¸€ç§åˆ†ææ–¹å¼ã€‚<br>é€šä¿—ï¼šæ‰¾åˆ°ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°å…³ç³»ï¼Œæè¿°ç‰¹å¾å€¼å’Œç›®æ ‡å€¼çš„å…³ç³»ã€‚<br>æ»¡è¶³çº¿æ€§å…³ç³»çš„ï¼š<br>h(w) &#x3D; w1x1+w2x2+â€¦+b &#x3D; wTx+b<br>Wæ˜¯æƒé‡å€¼&#x2F;å›å½’ç³»æ•°ã€‚bæ˜¯åç½®ã€‚<br>è¿™ä¸ªå‡½æ•°å…³ç³»å°±å«åšçº¿æ€§æ¨¡å‹ã€‚<br>å¹¿ä¹‰çš„çº¿æ€§æ¨¡å‹ï¼Œå¯ä»¥æ˜¯éçº¿æ€§å…³ç³»ã€‚<br>çº¿æ€§æ¨¡å‹ï¼Œå½“å‡½æ•°å…³ç³»å½“ä¸­ï¼Œæ»¡è¶³è‡ªå˜é‡ä¸€æ¬¡&#x2F;å‚æ•°ä¸€æ¬¡çš„ï¼Œéƒ½å«çº¿æ€§æ¨¡å‹ã€‚<br>è‡ªå˜é‡ä¸€æ¬¡ï¼šh(w) &#x3D; w1x1+w2x2+â€¦+b &#x3D; wTx+b<br>å‚æ•°ä¸€æ¬¡ï¼šy&#x3D;w1x1 + w2x1^2 + w3x1^3 + w4x2^3 +â€¦+b ï¼ˆæ²¡æœ‰log&#x2F;eï¼‰<br>çº¿æ€§å…³ç³»ä¸€å®šæ˜¯çº¿æ€§æ¨¡å‹ï¼Œä½†æ˜¯çº¿æ€§æ¨¡å‹ä¸ä¸€å®šæ˜¯çº¿æ€§å…³ç³»ã€‚</p>
<p>4.1.2 çº¿æ€§å›å½’çš„æŸå¤±å’Œä¼˜åŒ–åŸç†<br>æƒé‡å’Œåç½®ï¼ˆæ¨¡å‹å‚æ•°ï¼‰æ˜¯æœªçŸ¥çš„ï¼Œæ±‚è§£ï¼Œä½¿å¾—é¢„æµ‹å‡†ç¡®ã€‚<br>é¦–å…ˆï¼Œéšæ„å‡å®šä¸€ç»„æ¨¡å‹å‚æ•°ï¼Œå¸¦å…¥ä¸€ç»„ç‰¹å¾å€¼ã€‚<br>é¢„æµ‹å€¼å’ŒçœŸå®å€¼çš„å·®å€¼åœ¨è¿­ä»£ä¸­ç¼©å°ã€‚<br>è¡¡é‡é¢„æµ‹å€¼å’ŒçœŸå®å€¼çš„è¯¯å·®ï¼šæŸå¤±å‡½æ•°&#x2F;cost&#x2F;æˆæœ¬å‡½æ•°&#x2F;ç›®æ ‡å‡½æ•°<br>æŸå¤±å‡½æ•°&#x3D;ç´¯åŠ (é¢„æµ‹å€¼-çœŸå®å€¼)^2<br>å‡å°‘è¿™ä¸ªæŸå¤±ï¼Œä½¿å¾—é¢„æµ‹æ›´å‡†ç¡®ï¼Œåˆç§°æœ€å°äºŒä¹˜æ³•ã€‚</p>
<p>ä¼˜åŒ–æŸå¤±çš„æ–¹æ³•ï¼š<br>1.æ­£è§„æ–¹ç¨‹ï¼ˆå¤©æ‰ï¼‰-ç”¨æ­£è§„æ–¹ç¨‹ç›´æ¥æ±‚è§£w<br>å½“ç‰¹å¾è¿‡å¤šè¿‡å¤æ‚æ—¶ï¼Œæ±‚è§£é€Ÿåº¦å¤ªæ…¢å¹¶ä¸”å¾—ä¸åˆ°ç»“æœï¼ˆç‰¹åˆ«æ˜¯æ±‚é€†ï¼‰ï¼Œåªèƒ½åœ¨çº¿æ€§å›å½’ä¸­ä½¿ç”¨ã€‚</p>
<p>2.æ¢¯åº¦ä¸‹é™ï¼ˆå‹¤å¥‹åŠªåŠ›çš„æ™®é€šäººï¼‰-ä¸æ–­åœ°è¯•é”™ã€æ”¹è¿›<br>æ•°æ®é‡å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œæ¢¯åº¦ä¸‹é™å¯ä»¥å–å¾—æ›´å¥½çš„ç»“æœã€‚<br>å…ˆç»™åˆä½¿çš„æƒé‡ï¼Œè¿­ä»£æ¥è·å–æ–°çš„æƒé‡ï¼Œæ²¿ç€åˆ‡çº¿çš„æ–¹å‘ç§»åŠ¨<br>Î±ä¸ºå­¦ä¹ é€Ÿç‡ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šï¼ˆè¶…å‚æ•°ï¼‰ï¼Œè¡¨ç¤ºæ­¥é•¿ï¼ŒÎ±æ—è¾¹çš„æ•´ä½“è¡¨ç¤ºæ–¹å‘<br>æ²¿ç€è¿™ä¸ªå‡½æ•°ä¸‹é™çš„æ–¹å‘æ‰¾ï¼Œæœ€åå°±èƒ½æ‰¾åˆ°å±±è°·çš„æœ€ä½ç‚¹ï¼Œç„¶åæ›´æ–°Wå€¼<br>ä½¿ç”¨ï¼šé¢å¯¹è®­ç»ƒæ•°æ®è§„æ¨¡ååˆ†åºå¤§çš„ä»»åŠ¡ ï¼Œèƒ½å¤Ÿæ‰¾åˆ°è¾ƒå¥½çš„ç»“æœã€‚<br>çº¿æ€§å›å½’çš„æŸå¤±å‡½æ•°å›¾åƒæœ‰ä¸€ä¸ªå”¯ä¸€çš„æœ€å°å€¼ç‚¹ã€‚<br>ä½†ä¸æ˜¯çº¿æ€§å›å½’çš„æŸå¤±å‡½æ•°ï¼Œå¯èƒ½åˆ°ä¸€ä¸ªå±€éƒ¨æœ€å°ç‚¹ã€‚<br>æœºå™¨å­¦ä¹ ä¸­çš„å­¦ä¹ è¿‡ç¨‹å°±å¯ä»¥ç†è§£ä¸ºæ¢¯åº¦ä¸‹é™çš„è¯•é”™æ”¹è¿›ã€‚</p>
<p>4.1.3 çº¿æ€§å›å½’API<br>sklearnæä¾›ç»™æˆ‘ä»¬ä¸¤ç§å®ç°çš„APIï¼Œ å¯ä»¥æ ¹æ®é€‰æ‹©ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">sklearn.linear_model.LinearRegression(fit_intercept=True)</span><br><span class="line">  é€šè¿‡æ­£è§„æ–¹ç¨‹ä¼˜åŒ–</span><br><span class="line">  fit_interceptï¼šæ˜¯å¦è®¡ç®—åç½®ï¼Œä¸€èˆ¬trueï¼Œä¸ç„¶åªèƒ½æ˜¯è¿‡åŸç‚¹çš„ï¼Œå±€é™æ€§</span><br><span class="line">  LinearRegression.coef_ï¼šçœ‹å›å½’ç³»æ•°</span><br><span class="line">  LinearRegression.intercept_ï¼šçœ‹åç½®</span><br><span class="line">sklearn.linear_model.SGDRegressor(loss=&quot;squared_loss&quot;, fit_intercept=True, learning_rate =&#x27;invscaling&#x27;, eta0=0.01)</span><br><span class="line">  SGDRegressorç±»å®ç°äº†éšæœºæ¢¯åº¦ä¸‹é™å­¦ä¹ ï¼Œå®ƒæ”¯æŒä¸åŒçš„losså‡½æ•°å’Œæ­£åˆ™åŒ–æƒ©ç½šé¡¹æ¥æ‹Ÿåˆçº¿æ€§å›å½’æ¨¡å‹ã€‚</span><br><span class="line">  loss:æŸå¤±å‡½æ•°ç±»å‹</span><br><span class="line">  loss=â€squared_lossâ€: æ™®é€šæœ€å°äºŒä¹˜æ³•</span><br><span class="line">  fit_interceptï¼šæ˜¯å¦è®¡ç®—åç½®</span><br><span class="line">  learning_rate : string, optional</span><br><span class="line">    å­¦ä¹ ç‡ç®—æ³•</span><br><span class="line">    &#x27;constant&#x27;: eta = eta0 ï¼ˆé»˜è®¤0.01ï¼‰</span><br><span class="line">    &#x27;optimal&#x27;: eta = 1.0 / (alpha * (t + t0)) [default]éšç€è¿­ä»£æ¬¡æ•°å˜å¤šå­¦ä¹ ç‡å˜å°</span><br><span class="line">    &#x27;invscaling&#x27;: eta = eta0 / pow(t, power_t)  power_t=0.25:å­˜åœ¨çˆ¶ç±»å½“ä¸­</span><br><span class="line">    å¯¹äºä¸€ä¸ªå¸¸æ•°å€¼çš„å­¦ä¹ ç‡æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨learning_rate=â€™constantâ€™ ï¼Œå¹¶ä½¿ç”¨eta0æ¥æŒ‡å®šå­¦ä¹ ç‡ã€‚</span><br><span class="line">  SGDRegressor.coef_ï¼šå›å½’ç³»æ•°</span><br><span class="line">  SGDRegressor.intercept_ï¼šåç½®</span><br></pre></td></tr></table></figure>


<p>4.1.4 æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹<br>æµç¨‹ï¼š<br>1ï¼‰è·å–æ•°æ®é›†<br>2ï¼‰åˆ’åˆ†æ•°æ®é›†<br>3ï¼‰ç‰¹å¾å·¥ç¨‹ï¼šæ— é‡çº²åŒ–-æ ‡å‡†åŒ–<br>4ï¼‰é¢„ä¼°å™¨æµç¨‹ fit() -&gt; æ¨¡å‹ coef_ intercept_<br>5ï¼‰æ¨¡å‹è¯„ä¼° </p>
<p>å›å½’æ€§èƒ½è¯„ä¼°: å‡æ–¹è¯¯å·®MSEï¼ˆä¸Šé¢çš„æŸå¤±å‡½æ•°+å¹³å‡ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sklearn.metrics.mean_squared_error(y_true, y_pred)</span><br><span class="line">å‡æ–¹è¯¯å·®å›å½’æŸå¤±</span><br><span class="line">y_true:çœŸå®ç›®æ ‡å€¼</span><br><span class="line">y_pred:é¢„æµ‹ç›®æ ‡å€¼</span><br><span class="line">return:æµ®ç‚¹æ•°ç»“æœ</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.datasets import load_boston</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">from sklearn.linear_model import LinearRegression,SGDRegressor</span><br><span class="line">from sklearn.metrics import mean_squared_error</span><br><span class="line"></span><br><span class="line">def linear1():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    çº¿æ€§å›å½’æ­£è§„æ–¹ç¨‹ä¼˜åŒ–æ–¹æ³•é¢„æµ‹æˆ¿å­ä»·æ ¼</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 1ï¼‰è·å–æ•°æ®é›†</span><br><span class="line">    lb = load_boston()</span><br><span class="line">    # print(lb.data)</span><br><span class="line">    # print(lb.target)</span><br><span class="line">    print(&quot;ç‰¹å¾æ•°é‡&quot;, lb.data.shape)</span><br><span class="line"></span><br><span class="line">    # 2)å¯¹æ•°æ®é›†è¿›è¡Œåˆ’åˆ†</span><br><span class="line">    x_train, x_test, y_train, y_test = train_test_split(lb.data, lb.target, test_size=0.3, random_state=24)</span><br><span class="line"></span><br><span class="line">    # 3ï¼‰ç‰¹å¾å·¥ç¨‹ï¼šæ— é‡çº²åŒ– - æ ‡å‡†åŒ–</span><br><span class="line">    transfer = StandardScaler()</span><br><span class="line">    x_train = transfer.fit_transform(x_train)</span><br><span class="line">    x_test = transfer.fit_transform(x_test)</span><br><span class="line">    # print(x_train)</span><br><span class="line"></span><br><span class="line">    # 4ï¼‰é¢„ä¼°å™¨æµç¨‹ fit() -&gt; æ¨¡å‹</span><br><span class="line">    # ä½¿ç”¨æ­£è§„æ–¹ç¨‹æ±‚è§£</span><br><span class="line">    lr = LinearRegression()</span><br><span class="line">    lr.fit(x_train, y_train)</span><br><span class="line"></span><br><span class="line">    # 5ï¼‰å¾—å‡ºæ¨¡å‹</span><br><span class="line">    print(&quot;æƒé‡ç³»æ•°ï¼š&quot;, lr.coef_)</span><br><span class="line">    print(&quot;åç½®ï¼š&quot;, lr.intercept_)</span><br><span class="line"></span><br><span class="line">    # 6ï¼‰æ¨¡å‹è¯„ä¼°</span><br><span class="line">    y_predict = lr.predict(x_test)</span><br><span class="line">    print(&quot;é¢„æµ‹æˆ¿ä»·ï¼š&quot;, y_predict)</span><br><span class="line">    print(&quot;æ­£è§„æ–¹ç¨‹çš„å‡æ–¹è¯¯å·®ä¸ºï¼š&quot;, mean_squared_error(y_test, y_predict))</span><br><span class="line">    return None</span><br><span class="line"></span><br><span class="line">def linear2():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    çº¿æ€§å›å½’æ¢¯åº¦ä¸‹é™ä¼˜åŒ–æ–¹æ³•é¢„æµ‹æˆ¿å­ä»·æ ¼</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 1ï¼‰è·å–æ•°æ®é›†</span><br><span class="line">    lb = load_boston()</span><br><span class="line">    # print(lb.data)</span><br><span class="line">    # print(lb.target)</span><br><span class="line"></span><br><span class="line">    # 2)å¯¹æ•°æ®é›†è¿›è¡Œåˆ’åˆ†</span><br><span class="line">    x_train, x_test, y_train, y_test = train_test_split(lb.data, lb.target, test_size=0.3, random_state=24)</span><br><span class="line"></span><br><span class="line">    # 3ï¼‰ç‰¹å¾å·¥ç¨‹ï¼šæ— é‡çº²åŒ– - æ ‡å‡†åŒ–</span><br><span class="line">    transfer = StandardScaler()</span><br><span class="line">    x_train = transfer.fit_transform(x_train)</span><br><span class="line">    x_test = transfer.fit_transform(x_test)</span><br><span class="line">    # print(x_train)</span><br><span class="line"></span><br><span class="line">    # 4ï¼‰æ¢¯åº¦ä¸‹é™è¿›è¡Œé¢„æµ‹ï¼Œè°ƒå‚</span><br><span class="line">    sgd = SGDRegressor(max_iter=10000, eta0=0.0001, learning_rate=&quot;constant&quot;)</span><br><span class="line">    sgd.fit(x_train, y_train)</span><br><span class="line">    print(&quot;SGDçš„æƒé‡å‚æ•°ä¸ºï¼š&quot;, sgd.coef_)</span><br><span class="line">    print(&quot;åç½®ï¼š&quot;, sgd.intercept_)</span><br><span class="line"></span><br><span class="line">    # 6ï¼‰æ¨¡å‹è¯„ä¼°</span><br><span class="line">    y_predict = sgd.predict(x_test)</span><br><span class="line">    print(&quot;é¢„æµ‹æˆ¿ä»·ï¼š&quot;, y_predict)</span><br><span class="line">    print(&quot;æ¢¯åº¦ä¸‹é™çš„å‡æ–¹è¯¯å·®ä¸ºï¼š&quot;, mean_squared_error(y_test, y_predict))</span><br><span class="line">    return None</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    linear1()</span><br><span class="line">    linear2()</span><br></pre></td></tr></table></figure>

<p>4.1.5 æ­£è§„æ–¹ç¨‹å’Œæ¢¯åº¦ä¸‹é™çš„å¯¹æ¯”</p>
<p>æ¢¯åº¦ä¸‹é™	        æ­£è§„æ–¹ç¨‹<br>éœ€è¦é€‰æ‹©å­¦ä¹ ç‡	ä¸éœ€è¦<br>éœ€è¦è¿­ä»£æ±‚è§£	 ä¸€æ¬¡è¿ç®—å¾—å‡º<br>ç‰¹å¾æ•°é‡è¾ƒå¤§å¯ä»¥ä½¿ç”¨  éœ€è¦è®¡ç®—æ–¹ç¨‹ï¼Œæ—¶é—´å¤æ‚åº¦é«˜O(n3)</p>
<p>é€‰æ‹©ï¼š<br>å°è§„æ¨¡æ•°æ®ï¼šLinearRegression(ä¸èƒ½è§£å†³æ‹Ÿåˆé—®é¢˜)ã€å²­å›å½’<br>å¤§è§„æ¨¡æ•°æ®ï¼šSGDRegressor</p>
<p>4.1.6 æ¢¯åº¦ä¸‹é™ä¼˜åŒ–æ–¹æ³•GDã€SGDã€SAG</p>
<p>GD<br>æ¢¯åº¦ä¸‹é™(Gradient Descent)ï¼ŒåŸå§‹çš„æ¢¯åº¦ä¸‹é™æ³•éœ€è¦è®¡ç®—æ‰€æœ‰æ ·æœ¬çš„å€¼æ‰èƒ½å¤Ÿå¾—å‡ºæ¢¯åº¦ï¼Œè®¡ç®—é‡å¤§ï¼Œæ‰€ä»¥åé¢æ‰æœ‰ä¼šä¸€ç³»åˆ—çš„æ”¹è¿›ã€‚</p>
<p>SGD<br>éšæœºæ¢¯åº¦ä¸‹é™(Stochastic gradient descent)æ˜¯ä¸€ä¸ªä¼˜åŒ–æ–¹æ³•ã€‚å®ƒåœ¨ä¸€æ¬¡è¿­ä»£æ—¶åªè€ƒè™‘ä¸€ä¸ªè®­ç»ƒæ ·æœ¬ã€‚<br>SGDçš„ä¼˜ç‚¹æ˜¯ï¼šé«˜æ•ˆå®¹æ˜“å®ç°<br>SGDçš„ç¼ºç‚¹æ˜¯ï¼šSGDéœ€è¦è®¸å¤šè¶…å‚æ•°ï¼šæ¯”å¦‚æ­£åˆ™é¡¹å‚æ•°ã€è¿­ä»£æ•°ã€‚SGDå¯¹äºç‰¹å¾æ ‡å‡†åŒ–æ˜¯æ•æ„Ÿçš„ã€‚</p>
<p>SAG<br>éšæœºå¹³å‡æ¢¯åº¦æ³•(Stochasitc Average Gradient)ï¼Œç”±äºæ”¶æ•›çš„é€Ÿåº¦å¤ªæ…¢ï¼Œæœ‰äººæå‡ºSAGç­‰åŸºäºæ¢¯åº¦ä¸‹é™çš„ç®—æ³•<br>Scikit-learnï¼šSGDRegressorã€å²­å›å½’ã€é€»è¾‘å›å½’ç­‰å½“ä¸­éƒ½ä¼šæœ‰SAGä¼˜åŒ–</p>
<h4 id="4-2-è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ"><a href="#4-2-è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ" class="headerlink" title="4.2 è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ"></a>4.2 è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ</h4><p>è®­ç»ƒé›†ä¸Šè¡¨ç°å¾—å¥½ï¼Œæµ‹è¯•é›†ä¸Šè¡¨ç°ä¸å¥½ - è¿‡æ‹Ÿåˆã€‚<br>å­¦ä¹ åˆ°çš„ç‰¹å¾å¤ªå°ï¼Œå¯¼è‡´åŒºåˆ†æ ‡å‡†å¤ªç²—ç³™ï¼Œä¸èƒ½å‡†ç¡®è¯†åˆ«ã€‚-æ¬ æ‹Ÿåˆ<br>å­¦çš„ç‰¹å¾å¤ªå¤šäº† - è¿‡æ‹Ÿåˆã€‚</p>
<p>è¿‡æ‹Ÿåˆï¼šä¸€ä¸ªå‡è®¾åœ¨è®­ç»ƒæ•°æ®ä¸Šèƒ½å¤Ÿè·å¾—æ¯”å…¶ä»–å‡è®¾æ›´å¥½çš„æ‹Ÿåˆï¼Œ ä½†æ˜¯åœ¨æµ‹è¯•æ•°æ®é›†ä¸Šå´ä¸èƒ½å¾ˆå¥½åœ°æ‹Ÿåˆæ•°æ®ï¼Œæ­¤æ—¶è®¤ä¸ºè¿™ä¸ªå‡è®¾å‡ºç°äº†è¿‡æ‹Ÿåˆçš„ç°è±¡ã€‚(æ¨¡å‹è¿‡äºå¤æ‚)<br>æ¬ æ‹Ÿåˆï¼šä¸€ä¸ªå‡è®¾åœ¨è®­ç»ƒæ•°æ®ä¸Šä¸èƒ½è·å¾—æ›´å¥½çš„æ‹Ÿåˆï¼Œå¹¶ä¸”åœ¨æµ‹è¯•æ•°æ®é›†ä¸Šä¹Ÿä¸èƒ½å¾ˆå¥½åœ°æ‹Ÿåˆæ•°æ®ï¼Œæ­¤æ—¶è®¤ä¸ºè¿™ä¸ªå‡è®¾å‡ºç°äº†æ¬ æ‹Ÿåˆçš„ç°è±¡ã€‚(æ¨¡å‹è¿‡äºç®€å•)</p>
<p>ç”¨ä¸€ä¸ªæ›²çº¿æ¥è¡¨ç¤ºï¼šéšç€æ¨¡å‹å¤æ‚åº¦çš„å¢å¤§ï¼Œè®­ç»ƒé›†çš„æŸå¤±å€¼è¶Šæ¥è¶Šå°‘ï¼Œä½†æ˜¯æµ‹è¯•é›†çš„æŸå¤±å€¼å…ˆå˜å°å†å˜å¤§ã€‚ä¸´ç•Œå€¼å·¦è¾¹æ˜¯æ¬ æ‹Ÿåˆï¼Œå³è¾¹æ˜¯è¿‡æ‹Ÿåˆã€‚</p>
<p>æ¬ æ‹ŸåˆåŸå› ä»¥åŠè§£å†³åŠæ³•<br>åŸå› ï¼šå­¦ä¹ åˆ°æ•°æ®çš„ç‰¹å¾è¿‡å°‘<br>è§£å†³åŠæ³•ï¼šå¢åŠ æ•°æ®çš„ç‰¹å¾æ•°é‡</p>
<p>è¿‡æ‹ŸåˆåŸå› ä»¥åŠè§£å†³åŠæ³•<br>åŸå› ï¼šåŸå§‹ç‰¹å¾è¿‡å¤šï¼Œå­˜åœ¨ä¸€äº›å˜ˆæ‚ç‰¹å¾ï¼Œ æ¨¡å‹è¿‡äºå¤æ‚æ˜¯å› ä¸ºæ¨¡å‹å°è¯•å»å…¼é¡¾å„ä¸ªæµ‹è¯•æ•°æ®ç‚¹ï¼Œæ³›åŒ–èƒ½åŠ›æ¯”è¾ƒå·®ã€‚<br>è§£å†³åŠæ³•ï¼š<br>æ­£åˆ™åŒ–ï¼Œå°½é‡å‡å°é«˜æ¬¡é¡¹ç‰¹å¾çš„å½±å“<br>ï¼ˆè¿™é‡Œé’ˆå¯¹å›å½’ï¼Œæˆ‘ä»¬é€‰æ‹©äº†æ­£åˆ™åŒ–ã€‚ä½†æ˜¯å¯¹äºå…¶ä»–æœºå™¨å­¦ä¹ ç®—æ³•å¦‚åˆ†ç±»ç®—æ³•æ¥è¯´ä¹Ÿä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œé™¤äº†ä¸€äº›ç®—æ³•æœ¬èº«ä½œç”¨ä¹‹å¤–ï¼ˆå†³ç­–æ ‘ã€ç¥ç»ç½‘ç»œï¼‰ï¼Œæˆ‘ä»¬æ›´å¤šçš„ä¹Ÿæ˜¯å»è‡ªå·±åšç‰¹å¾é€‰æ‹©ï¼ŒåŒ…æ‹¬ä¹‹å‰è¯´çš„åˆ é™¤ã€åˆå¹¶ä¸€äº›ç‰¹å¾ï¼‰</p>
<p>åœ¨å­¦ä¹ çš„æ—¶å€™ï¼Œæ•°æ®æä¾›çš„ç‰¹å¾æœ‰äº›å½±å“æ¨¡å‹å¤æ‚åº¦æˆ–è€…è¿™ä¸ªç‰¹å¾çš„æ•°æ®ç‚¹å¼‚å¸¸è¾ƒå¤šï¼Œæ‰€ä»¥ç®—æ³•åœ¨å­¦ä¹ çš„æ—¶å€™å°½é‡å‡å°‘è¿™ä¸ªç‰¹å¾çš„å½±å“ï¼ˆç”šè‡³åˆ é™¤æŸä¸ªç‰¹å¾çš„å½±å“ï¼‰ï¼Œè¿™å°±æ˜¯æ­£åˆ™åŒ–</p>
<p>æ³¨ï¼šè°ƒæ•´æ—¶å€™ï¼Œç®—æ³•å¹¶ä¸çŸ¥é“æŸä¸ªç‰¹å¾å½±å“ï¼Œè€Œæ˜¯å»è°ƒæ•´å‚æ•°å¾—å‡ºä¼˜åŒ–çš„ç»“æœ</p>
<p>æ­£åˆ™åŒ–ç±»åˆ«ï¼š<br>L2æ­£åˆ™åŒ–<br>ä½œç”¨ï¼šå¯ä»¥ä½¿å¾—æ¨¡å‹å…¶ä¸­ä¸€äº›Wæƒé‡ç³»æ•°éƒ½å¾ˆå°ï¼Œéƒ½æ¥è¿‘äº0ï¼Œå‰Šå¼±æŸä¸ªç‰¹å¾çš„å½±å“<br>ä¼˜ç‚¹ï¼šè¶Šå°çš„å‚æ•°è¯´æ˜æ¨¡å‹è¶Šç®€å•ï¼Œè¶Šç®€å•çš„æ¨¡å‹åˆ™è¶Šä¸å®¹æ˜“äº§ç”Ÿè¿‡æ‹Ÿåˆç°è±¡<br>Ridgeå›å½’ï¼ˆå²­å›å½’ï¼‰<br>åŠ å…¥L2æ­£åˆ™åŒ–åçš„æŸå¤±å‡½æ•°ï¼š<br>æŸå¤±å‡½æ•°&#x3D;(ç´¯åŠ (é¢„æµ‹å€¼-çœŸå®å€¼)^2)*(1&#x2F;2m) + æƒ©ç½šç³»æ•°(è¶…å‚ï¼Œæƒ©ç½šçš„è¡¥å¿) * æƒ©ç½šé¡¹(æƒé‡ç³»æ•°çš„å¹³æ–¹å’Œ)<br>ç›®çš„æ˜¯ï¼šä¸ä»…ä½¿å¾—æŸå¤±å˜å°ï¼Œè¿˜è®©æƒé‡ç³»æ•°å˜å°ã€‚è¾¾åˆ°ä¸ä»…è®©æ¨¡å‹æ›´åŠ å‡†ç¡®ï¼Œè¿˜æ¶ˆé™¤é«˜æ¬¡é¡¹çš„å½±å“ã€‚</p>
<p>L1æ­£åˆ™åŒ–<br>ä½œç”¨ï¼šå¯ä»¥ä½¿å¾—å…¶ä¸­ä¸€äº›Wçš„å€¼ç›´æ¥ä¸º0ï¼Œåˆ é™¤è¿™ä¸ªç‰¹å¾çš„å½±å“<br>LASSOå›å½’<br>æƒ©ç½šé¡¹æ˜¯wçš„ç»å¯¹å€¼ã€‚</p>
<p>çº¿æ€§å›å½’çš„æŸå¤±å‡½æ•°ç”¨æœ€å°äºŒä¹˜æ³•ï¼Œç­‰ä»·äºå½“é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„è¯¯å·®æ»¡è¶³æ­£æ€åˆ†å¸ƒæ—¶çš„æå¤§ä¼¼ç„¶ä¼°è®¡ï¼›å²­å›å½’çš„æŸå¤±å‡½æ•°ï¼Œæ˜¯æœ€å°äºŒä¹˜æ³•+L2èŒƒæ•°ï¼Œç­‰ä»·äºå½“é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„è¯¯å·®æ»¡è¶³æ­£æ€åˆ†å¸ƒï¼Œä¸”æƒé‡å€¼ä¹Ÿæ»¡è¶³æ­£æ€åˆ†å¸ƒï¼ˆå…ˆéªŒåˆ†å¸ƒï¼‰æ—¶çš„æœ€å¤§åéªŒä¼°è®¡ï¼›LASSOçš„æŸå¤±å‡½æ•°ï¼Œæ˜¯æœ€å°äºŒä¹˜æ³•+L1èŒƒæ•°ï¼Œç­‰ä»·äºç­‰ä»·äºå½“é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„è¯¯å·®æ»¡è¶³æ­£æ€åˆ†å¸ƒï¼Œä¸”ä¸”æƒé‡å€¼æ»¡è¶³æ‹‰æ™®æ‹‰æ–¯åˆ†å¸ƒï¼ˆå…ˆéªŒåˆ†å¸ƒï¼‰æ—¶çš„æœ€å¤§åéªŒä¼°è®¡ã€‚</p>
<h4 id="4-3-çº¿æ€§å›å½’çš„æ”¹è¿›-å²­å›å½’"><a href="#4-3-çº¿æ€§å›å½’çš„æ”¹è¿›-å²­å›å½’" class="headerlink" title="4.3 çº¿æ€§å›å½’çš„æ”¹è¿› - å²­å›å½’"></a>4.3 çº¿æ€§å›å½’çš„æ”¹è¿› - å²­å›å½’</h4><p>å²­å›å½’ï¼Œå…¶å®ä¹Ÿæ˜¯ä¸€ç§çº¿æ€§å›å½’ã€‚åªä¸è¿‡åœ¨ç®—æ³•å»ºç«‹å›å½’æ–¹ç¨‹æ—¶å€™ï¼ŒåŠ ä¸ŠL2æ­£åˆ™åŒ–çš„é™åˆ¶ï¼Œä»è€Œè¾¾åˆ°è§£å†³è¿‡æ‹Ÿåˆçš„æ•ˆæœ</p>
<p>apiï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sklearn.linear_model.Ridge(alpha=1.0, fit_intercept=True,solver=&quot;auto&quot;, normalize=False)</span><br><span class="line">å…·æœ‰l2æ­£åˆ™åŒ–çš„çº¿æ€§å›å½’</span><br><span class="line">alpha:æ­£åˆ™åŒ–åŠ›åº¦=æƒ©ç½šé¡¹ç³»æ•°ï¼Œä¹Ÿå« Î»</span><br><span class="line">Î»å–å€¼ï¼š0~1 1~10</span><br><span class="line">-fit_interceptï¼šæ˜¯å¦æ·»åŠ åç½®</span><br><span class="line">solver:ä¼šæ ¹æ®æ•°æ®è‡ªåŠ¨é€‰æ‹©ä¼˜åŒ–æ–¹æ³•</span><br><span class="line">-sag:å¦‚æœæ•°æ®é›†ã€ç‰¹å¾éƒ½æ¯”è¾ƒå¤§ï¼Œé€‰æ‹©è¯¥éšæœºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–</span><br><span class="line">normalize:æ•°æ®æ˜¯å¦è¿›è¡Œæ ‡å‡†åŒ–</span><br><span class="line">-normalize=False:å¯ä»¥åœ¨fitä¹‹å‰è°ƒç”¨preprocessing.StandardScaleræ ‡å‡†åŒ–æ•°æ®</span><br><span class="line"></span><br><span class="line">æ¨¡å‹å‚æ•°ï¼š</span><br><span class="line">Ridge.coef_:å›å½’æƒé‡</span><br><span class="line">Ridge.intercept_:å›å½’åç½®</span><br></pre></td></tr></table></figure>

<p>Ridgeæ–¹æ³•ç›¸å½“äºSGDRegressor(penalty&#x3D;â€™l2â€™, loss&#x3D;â€squared_lossâ€),é»˜è®¤l2,åªä¸è¿‡SGDRegressorå®ç°äº†ä¸€ä¸ªæ™®é€šçš„éšæœºæ¢¯åº¦ä¸‹é™å­¦ä¹ ï¼Œæ¨èä½¿ç”¨Ridge(å®ç°äº†SAG)</p>
<p>æ­£åˆ™åŒ–åŠ›åº¦è¶Šå¤§ï¼Œæƒé‡ç³»æ•°ä¼šè¶Šå°<br>æ­£åˆ™åŒ–åŠ›åº¦è¶Šå°ï¼Œæƒé‡ç³»æ•°ä¼šè¶Šå¤§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">rd = Ridge(alpha=1.0)</span><br><span class="line"></span><br><span class="line">rd.fit(x_train, y_train)</span><br><span class="line">print(&quot;å²­å›å½’çš„æƒé‡å‚æ•°ä¸ºï¼š&quot;, rd.coef_)</span><br><span class="line"></span><br><span class="line">y_rd_predict = std_y.inverse_transform(rd.predict(x_test))</span><br><span class="line"></span><br><span class="line">print(&quot;å²­å›å½’çš„é¢„æµ‹çš„ç»“æœä¸ºï¼š&quot;, y_rd_predict)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&quot;å²­å›å½’çš„å‡æ–¹è¯¯å·®ä¸ºï¼š&quot;, mean_squared_error(y_test, y_rd_predict))</span><br></pre></td></tr></table></figure>

<h4 id="4-4-åˆ†ç±»ï¼›åˆ†ç±»ç®—æ³•-é€»è¾‘å›å½’ä¸äºŒåˆ†ç±»"><a href="#4-4-åˆ†ç±»ï¼›åˆ†ç±»ç®—æ³•-é€»è¾‘å›å½’ä¸äºŒåˆ†ç±»" class="headerlink" title="4.4 åˆ†ç±»ï¼›åˆ†ç±»ç®—æ³•-é€»è¾‘å›å½’ä¸äºŒåˆ†ç±»"></a>4.4 åˆ†ç±»ï¼›åˆ†ç±»ç®—æ³•-é€»è¾‘å›å½’ä¸äºŒåˆ†ç±»</h4><p>é€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰æ˜¯æœºå™¨å­¦ä¹ ä¸­çš„ä¸€ç§åˆ†ç±»æ¨¡å‹ï¼Œé€»è¾‘å›å½’æ˜¯ä¸€ç§åˆ†ç±»ç®—æ³•ï¼Œè™½ç„¶åå­—ä¸­å¸¦æœ‰å›å½’ï¼Œä½†æ˜¯å®ƒä¸å›å½’ä¹‹é—´æœ‰ä¸€å®šçš„è”ç³»ã€‚ç”±äºç®—æ³•çš„ç®€å•å’Œé«˜æ•ˆï¼Œåœ¨å®é™…ä¸­åº”ç”¨éå¸¸å¹¿æ³›ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼š<br>å¹¿å‘Šç‚¹å‡»ç‡<br>æ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶<br>æ˜¯å¦æ‚£ç—…<br>é‡‘èè¯ˆéª—<br>è™šå‡è´¦å·<br>éƒ½å±äºä¸¤ä¸ªç±»åˆ«ä¹‹é—´çš„åˆ¤æ–­ã€‚é€»è¾‘å›å½’å°±æ˜¯è§£å†³äºŒåˆ†ç±»é—®é¢˜çš„åˆ©å™¨</p>
<p>çº¿æ€§å›å½’çš„è¾“å‡º å°±æ˜¯ é€»è¾‘å›å½’ï¼ˆæ¿€æ´»å‡½æ•°ï¼‰çš„è¾“å…¥ã€‚</p>
<p>æ¿€æ´»å‡½æ•°sigmoidå‡½æ•°ï¼š<code>1/(1 + e^(-x))</code><br>å°†æŸä¸ªå‡½æ•°æ˜ å°„åˆ°0-1åŒºé—´ã€‚<br>å›å½’çš„ç»“æœè¾“å…¥åˆ°sigmoidå‡½æ•°å½“ä¸­<br>è¾“å‡ºç»“æœï¼š[0, 1]åŒºé—´ä¸­çš„ä¸€ä¸ªæ¦‚ç‡å€¼ï¼Œé»˜è®¤ä¸º0.5ä¸ºé˜ˆå€¼.</p>
<p>é€»è¾‘å›å½’æœ€ç»ˆçš„åˆ†ç±»æ˜¯é€šè¿‡å±äºæŸä¸ªç±»åˆ«çš„æ¦‚ç‡å€¼æ¥åˆ¤æ–­æ˜¯å¦å±äºæŸä¸ªç±»åˆ«ï¼Œå¹¶ä¸”è¿™ä¸ªç±»åˆ«é»˜è®¤æ ‡è®°ä¸º1(æ­£ä¾‹),å¦å¤–çš„ä¸€ä¸ªç±»åˆ«ä¼šæ ‡è®°ä¸º0(åä¾‹)ã€‚</p>
<p>éœ€è¦æ„å»ºæŸå¤±å‡½æ•°ï¼šï¼ˆå…ˆçº¿æ€§å›å½’ï¼Œå†sigmiodæ˜ å°„ä¸ºé€»è¾‘å›å½’ç»“æœï¼Œå†è®¡ç®—æŸå¤±å‡½æ•°ï¼‰<br>çº¿æ€§å›å½’çš„æŸå¤±å‡½æ•°ï¼š (y_predict - y_true)å¹³æ–¹å’Œ&#x2F;æ€»æ•°<br>é€»è¾‘å›å½’çš„çœŸå®å€¼&#x2F;é¢„æµ‹å€¼ï¼šæ˜¯å¦å±äºæŸä¸ªç±»åˆ«<br>æ‰€ä»¥ç”¨ï¼š<strong>å¯¹æ•°ä¼¼ç„¶æŸå¤±</strong>ï¼Œå®šä¹‰ä¸ºä¸€ä¸ªåˆ†æ®µå‡½æ•°ï¼ˆæ ¹æ®çœŸå®å€¼ï¼‰ï¼ŒçœŸå®å€¼ä¸º1æ—¶ï¼Œé¢„æµ‹è¶Šæ¥è¿‘1æŸå¤±è¶Šå°ã€‚</p>
<p>ä¼˜åŒ–ï¼š<br>åŒæ ·ä½¿ç”¨æ¢¯åº¦ä¸‹é™ä¼˜åŒ–ç®—æ³•ï¼Œå»å‡å°‘æŸå¤±å‡½æ•°çš„å€¼ã€‚è¿™æ ·å»æ›´æ–°é€»è¾‘å›å½’å‰é¢å¯¹åº”ç®—æ³•çš„æƒé‡å‚æ•°ï¼Œæå‡åŸæœ¬å±äº1ç±»åˆ«çš„æ¦‚ç‡ï¼Œé™ä½åŸæœ¬æ˜¯0ç±»åˆ«çš„æ¦‚ç‡ã€‚</p>
<p>apiï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sklearn.linear_model.LogisticRegression(solver=&#x27;liblinear&#x27;, penalty=â€˜l2â€™, C = 1.0)</span><br><span class="line">solver:ä¼˜åŒ–æ±‚è§£æ–¹å¼ï¼ˆé»˜è®¤å¼€æºçš„liblinearåº“å®ç°ï¼Œå†…éƒ¨ä½¿ç”¨äº†åæ ‡è½´ä¸‹é™æ³•æ¥è¿­ä»£ä¼˜åŒ–æŸå¤±å‡½æ•°ï¼‰</span><br><span class="line">-sagï¼šæ ¹æ®æ•°æ®é›†è‡ªåŠ¨é€‰æ‹©ï¼Œéšæœºå¹³å‡æ¢¯åº¦ä¸‹é™</span><br><span class="line">penaltyï¼šæ­£åˆ™åŒ–çš„ç§ç±»(l2)</span><br><span class="line">Cï¼šæ­£åˆ™åŒ–åŠ›åº¦</span><br></pre></td></tr></table></figure>

<p>LogisticRegressionæ–¹æ³•ç›¸å½“äº SGDClassifier(loss&#x3D;â€logâ€, penalty&#x3D;â€ â€œ),SGDClassifierå®ç°äº†ä¸€ä¸ªæ™®é€šçš„éšæœºæ¢¯åº¦ä¸‹é™å­¦ä¹ ï¼Œä¹Ÿæ”¯æŒå¹³å‡éšæœºæ¢¯åº¦ä¸‹é™æ³•ï¼ˆASGDï¼‰ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®average&#x3D;Trueã€‚è€Œä½¿ç”¨LogisticRegression(å®ç°äº†SAG)</p>
<p>æ¡ˆä¾‹ï¼š<br>æµç¨‹ï¼š<br>1ï¼‰è·å–æ•°æ®<br>2ï¼‰æ•°æ®å¤„ç†-å¤„ç†ç¼ºå¤±å€¼<br>3ï¼‰æ•°æ®é›†åˆ’åˆ†<br>4ï¼‰ç‰¹å¾å·¥ç¨‹ï¼šæ— é‡çº²åŒ–å¤„ç†-æ ‡å‡†åŒ–<br>5ï¼‰é€»è¾‘å›å½’é¢„ä¼°å™¨<br>6ï¼‰æ¨¡å‹è¯„ä¼°</p>
<p>ç”¨jupyterå¯è§†åŒ–ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">def logisticregression():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    é€»è¾‘å›å½’è¿›è¡Œç™Œç—‡é¢„æµ‹</span><br><span class="line">    :return: None</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 1ã€è¯»å–æ•°æ®ï¼Œå¤„ç†ç¼ºå¤±å€¼ä»¥åŠæ ‡å‡†åŒ–</span><br><span class="line">    column_name = [&#x27;Sample code number&#x27;, &#x27;Clump Thickness&#x27;, &#x27;Uniformity of Cell Size&#x27;, &#x27;Uniformity of Cell Shape&#x27;,</span><br><span class="line">                   &#x27;Marginal Adhesion&#x27;, &#x27;Single Epithelial Cell Size&#x27;, &#x27;Bare Nuclei&#x27;, &#x27;Bland Chromatin&#x27;,</span><br><span class="line">                   &#x27;Normal Nucleoli&#x27;, &#x27;Mitoses&#x27;, &#x27;Class&#x27;]</span><br><span class="line"></span><br><span class="line">    data = pd.read_csv(&quot;https://archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/breast-cancer-wisconsin.data&quot;,</span><br><span class="line">                       names=column_name)</span><br><span class="line"></span><br><span class="line">    # åˆ é™¤ç¼ºå¤±å€¼</span><br><span class="line">    data = data.replace(to_replace=&#x27;?&#x27;, value=np.nan)</span><br><span class="line"></span><br><span class="line">    data = data.dropna()</span><br><span class="line"></span><br><span class="line">    # å–å‡ºç‰¹å¾å€¼</span><br><span class="line">    x = data[column_name[1:10]]</span><br><span class="line"></span><br><span class="line">    y = data[column_name[10]]</span><br><span class="line"></span><br><span class="line">    # åˆ†å‰²æ•°æ®é›†</span><br><span class="line">    x_train, x_test, y_train, y_test = train_test_split(x, y, test_size=0.3)</span><br><span class="line"></span><br><span class="line">    # è¿›è¡Œæ ‡å‡†åŒ–</span><br><span class="line">    std = StandardScaler()</span><br><span class="line"></span><br><span class="line">    x_train = std.fit_transform(x_train)</span><br><span class="line"></span><br><span class="line">    x_test = std.transform(x_test)</span><br><span class="line"></span><br><span class="line">    # ä½¿ç”¨é€»è¾‘å›å½’</span><br><span class="line">    lr = LogisticRegression()</span><br><span class="line"></span><br><span class="line">    lr.fit(x_train, y_train)</span><br><span class="line"></span><br><span class="line">    print(&quot;å¾—å‡ºæ¥çš„æƒé‡,å‡ ä¸ªç‰¹å¾æœ‰å‡ ä¸ªï¼š&quot;, lr.coef_)</span><br><span class="line"></span><br><span class="line">    # é¢„æµ‹ç±»åˆ«</span><br><span class="line">    print(&quot;é¢„æµ‹çš„ç±»åˆ«ï¼š&quot;, lr.predict(x_test))</span><br><span class="line"></span><br><span class="line">    # å¾—å‡ºå‡†ç¡®ç‡</span><br><span class="line">    print(&quot;é¢„æµ‹çš„å‡†ç¡®ç‡:&quot;, lr.score(x_test, y_test))</span><br><span class="line">    return None</span><br></pre></td></tr></table></figure>

<p>åœ¨å¾ˆå¤šåˆ†ç±»åœºæ™¯å½“ä¸­æˆ‘ä»¬ä¸ä¸€å®šåªå…³æ³¨é¢„æµ‹çš„å‡†ç¡®ç‡ï¼Œæ¯”å¦‚ä»¥è¿™ä¸ªç™Œç—‡ä¸¾ä¾‹å­ï¼ï¼ï¼æˆ‘ä»¬å¹¶ä¸å…³æ³¨é¢„æµ‹çš„å‡†ç¡®ç‡ï¼Œè€Œæ˜¯å…³æ³¨åœ¨æ‰€æœ‰çš„æ ·æœ¬å½“ä¸­ï¼Œç™Œç—‡æ‚£è€…æœ‰æ²¡æœ‰è¢«å…¨éƒ¨é¢„æµ‹ï¼ˆæ£€æµ‹ï¼‰å‡ºæ¥ã€‚</p>
<p>æƒ³è¦å…³æ³¨çš„ï¼šçœŸçš„æ‚£ç™Œç—‡çš„ï¼Œèƒ½å¤Ÿè¢«æ£€æµ‹å‡ºæ¥ã€‚</p>
<p>âœ…ç²¾ç¡®ç‡å’Œå¬å›ç‡ï¼š<br>æ··æ·†çŸ©é˜µï¼š<br>åœ¨åˆ†ç±»ä»»åŠ¡ä¸‹ï¼Œé¢„æµ‹ç»“æœ(Predicted Condition)ä¸æ­£ç¡®æ ‡è®°(True Condition)ä¹‹é—´å­˜åœ¨å››ç§ä¸åŒçš„ç»„åˆï¼Œæ„æˆæ··æ·†çŸ©é˜µ(é€‚ç”¨äºå¤šåˆ†ç±»)<br>çœŸå®ç»“æœæ˜¯æ­£ä¾‹ï¼Œé¢„æµ‹ç»“æœæ˜¯æ­£ä¾‹ï¼šçœŸæ­£ä¾‹TP<br>çœŸå®ç»“æœæ˜¯æ­£ä¾‹ï¼Œé¢„æµ‹ç»“æœæ˜¯å‡ä¾‹ï¼šä¼ªåä¾‹FN<br>çœŸå®ç»“æœæ˜¯å‡ä¾‹ï¼Œé¢„æµ‹ç»“æœæ˜¯æ­£ä¾‹ï¼šä¼ªæ­£ä¾‹FP<br>çœŸå®ç»“æœæ˜¯å‡ä¾‹ï¼Œé¢„æµ‹ç»“æœæ˜¯å‡ä¾‹ï¼šçœŸåä¾‹TN</p>
<p>ç²¾ç¡®ç‡ï¼šé¢„æµ‹ç»“æœä¸ºæ­£ä¾‹æ ·æœ¬ä¸­çœŸå®ä¸ºæ­£ä¾‹çš„æ¯”ä¾‹ ï¼ˆTP&#x2F;TP+FPï¼‰<br>å¬å›ç‡ï¼šçœŸå®ä¸ºæ­£ä¾‹çš„æ ·æœ¬ä¸­é¢„æµ‹ç»“æœä¸ºæ­£ä¾‹çš„æ¯”ä¾‹ï¼ˆæŸ¥çš„å…¨ï¼Œå¯¹æ­£æ ·æœ¬çš„åŒºåˆ†èƒ½åŠ›ï¼‰ï¼ˆTP&#x2F;TP+FNï¼‰</p>
<hr>
<p>æ€»ç»“ï¼š<br>1.å‡†ç¡®ç‡ï¼ˆAccuracyï¼‰ã€‚é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ‰€æœ‰é¢„æµ‹æ­£ç¡®çš„ï¼ˆåŒ…æ‹¬æ­£ç±»å’Œè´Ÿç±»ï¼‰å æ€»çš„çš„æ¯”ä¾‹ã€‚</p>
<p>2.ç²¾ç¡®ç‡ï¼ˆPrecisionï¼‰ï¼ŒæŸ¥å‡†ç‡ã€‚å³æ­£ç¡®é¢„æµ‹ä¸ºæ­£ç±»çš„å å…¨éƒ¨é¢„æµ‹ä¸ºæ­£ç±»çš„çš„æ¯”ä¾‹ã€‚ä¸ªäººç†è§£ï¼šåœ¨æ‰€æœ‰é¢„æµ‹ä¸ºæ­£ç±»ä¸­çœŸæ­£ä¸ºæ­£ç±»çš„å æ‰€æœ‰é¢„æµ‹ä¸ºæ­£ç±»çš„çš„æ¯”ä¾‹ã€‚</p>
<p>3.å¬å›ç‡ï¼ˆRecallï¼‰ï¼ŒæŸ¥å…¨ç‡ã€‚å³æ­£ç¡®é¢„æµ‹ä¸ºæ­£ç±»çš„å å…¨éƒ¨å®é™…ä¸ºæ­£ç±»çš„çš„æ¯”ä¾‹ã€‚ä¸ªäººç†è§£ï¼šåœ¨æ‰€æœ‰é¢„æµ‹ä¸ºæ­£ç±»ä¸­çœŸæ­£ä¸ºæ­£ç±»çš„å æ€»ä½“å®é™…ä¸ºæ­£ç±»çš„çš„æ¯”ä¾‹ã€‚</p>
<p>å¯¹äºç²¾ç¡®ç‡å’Œå¬å”¤ç‡ï¼Œå…¶å®å°±æ˜¯åˆ†æ¯ä¸åŒï¼Œä¸€ä¸ªåˆ†æ¯æ˜¯é¢„æµ‹ä¸ºæ­£ç±»çš„æ ·æœ¬æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯åŸå§‹æ ·æœ¬ä¸­æ‰€æœ‰çš„æ­£ç±»æ ·æœ¬æ•°ã€‚</p>
<p>å¬å›ç‡ (Recall)ï¼šè¯¥ç±»æ ·æœ¬æœ‰å¤šå°‘è¢«æ‰¾å‡ºæ¥äº†ï¼ˆå¬å›äº†å¤šå°‘ï¼‰ã€‚</p>
<p>ç²¾ç¡®ç‡ (Precision)ï¼šä½ è®¤ä¸ºçš„è¯¥ç±»æ ·æœ¬ï¼Œæœ‰å¤šå°‘çŒœå¯¹äº†ï¼ˆçŒœçš„ç²¾ç¡®æ€§å¦‚ä½•ï¼‰ã€‚</p>
<p>å¬å›ç‡ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/PingBryant/article/details/115561777">https://blog.csdn.net/PingBryant/article/details/115561777</a></p>
<hr>
<p>è¿˜æœ‰å…¶ä»–çš„è¯„ä¼°æ ‡å‡†ï¼ŒF1-scoreï¼Œåæ˜ äº†æ¨¡å‹çš„ç¨³å¥å‹<br>F1 &#x3D; 2TP&#x2F;(2TP + FN + FP) &#x3D; ï¼ˆ2<em>å‡†ç¡®ç‡</em>å¬å›ç‡ï¼‰&#x2F;ï¼ˆå‡†ç¡®ç‡+å¬å›ç‡ï¼‰</p>
<p>åˆ†ç±»è¯„ä¼°æŠ¥å‘Šapiï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sklearn.metrics.classification_report(y_true, y_pred, labels=[], target_names=None )</span><br><span class="line">y_trueï¼šçœŸå®ç›®æ ‡å€¼</span><br><span class="line">y_predï¼šä¼°è®¡å™¨é¢„æµ‹ç›®æ ‡å€¼</span><br><span class="line">labels:æŒ‡å®šç±»åˆ«å¯¹åº”çš„æ•°å­—</span><br><span class="line">target_namesï¼šç›®æ ‡ç±»åˆ«åç§°</span><br><span class="line">returnï¼šæ¯ä¸ªç±»åˆ«ç²¾ç¡®ç‡ä¸å¬å›ç‡</span><br><span class="line"></span><br><span class="line">print(&quot;æ¯ä¸ªç‰¹å¾çš„ç²¾ç¡®ç‡å’Œå¬å›ç‡ä¸ºï¼š&quot;, classification_report(y_test, lr.predict(x_test), labels=[2, 4], target_names=[&#x27;è‰¯æ€§&#x27;, &#x27;æ¶æ€§&#x27;]))</span><br></pre></td></tr></table></figure>

<p>å‡è®¾è¿™æ ·ä¸€ä¸ªæƒ…å†µï¼Œå¦‚æœ99ä¸ªæ ·æœ¬ç™Œç—‡ï¼Œ1ä¸ªæ ·æœ¬éç™Œç—‡ï¼Œä¸ç®¡æ€æ ·æˆ‘å…¨éƒ½é¢„æµ‹æ­£ä¾‹(é»˜è®¤ç™Œç—‡ä¸ºæ­£ä¾‹),å‡†ç¡®ç‡å°±ä¸º99%ï¼Œå¬å›ç‡100%ä½†æ˜¯è¿™æ ·æ•ˆæœå¹¶ä¸å¥½ï¼Œè¿™å°±æ˜¯æ ·æœ¬ä¸å‡è¡¡ä¸‹çš„è¯„ä¼°é—®é¢˜ã€‚</p>
<p>ROCæ›²çº¿ä¸AUCæŒ‡æ ‡ï¼š</p>
<p>TPR &#x3D; TP &#x2F; (TP + FN)<br>æ‰€æœ‰çœŸå®ç±»åˆ«ä¸º1çš„æ ·æœ¬ä¸­ï¼Œé¢„æµ‹ç±»åˆ«ä¸º1çš„æ¯”ä¾‹ - å¬å›ç‡<br>FPR &#x3D; FP &#x2F; (FP + FN)<br>æ‰€æœ‰çœŸå®ç±»åˆ«ä¸º0çš„æ ·æœ¬ä¸­ï¼Œé¢„æµ‹ç±»åˆ«ä¸º1çš„æ¯”ä¾‹</p>
<p>ROCæ›²çº¿çš„æ¨ªè½´å°±æ˜¯FPRateï¼Œçºµè½´å°±æ˜¯TPRateï¼Œå½“äºŒè€…ç›¸ç­‰æ—¶ï¼Œè¡¨ç¤ºçš„æ„ä¹‰åˆ™æ˜¯ï¼šå¯¹äºä¸è®ºçœŸå®ç±»åˆ«æ˜¯1è¿˜æ˜¯0çš„æ ·æœ¬ï¼Œåˆ†ç±»å™¨é¢„æµ‹ä¸º1çš„æ¦‚ç‡æ˜¯ç›¸ç­‰çš„ï¼Œæ­¤æ—¶AUCä¸º0.5ã€‚</p>
<p>AUCå¦‚ä½•è®¡ç®—ï¼šROCæ›²çº¿å’Œåæ ‡è½´åŒ…å›´çš„é¢ç§¯ï¼Œå¦‚æœæ˜¯0ï¼Œ1ï¼Œé‚£å°±æ˜¯1.</p>
<p>AUCçš„æ¦‚ç‡æ„ä¹‰æ˜¯éšæœºå–ä¸€å¯¹æ­£è´Ÿæ ·æœ¬ï¼Œæ­£æ ·æœ¬å¾—åˆ†å¤§äºè´Ÿæ ·æœ¬çš„æ¦‚ç‡<br>AUCçš„æœ€å°å€¼ä¸º0.5ï¼Œæœ€å¤§å€¼ä¸º1ï¼Œå–å€¼è¶Šé«˜è¶Šå¥½<br>AUC&#x3D;1ï¼Œå®Œç¾åˆ†ç±»å™¨ï¼Œé‡‡ç”¨è¿™ä¸ªé¢„æµ‹æ¨¡å‹æ—¶ï¼Œä¸ç®¡è®¾å®šä»€ä¹ˆé˜ˆå€¼éƒ½èƒ½å¾—å‡ºå®Œç¾é¢„æµ‹ã€‚ç»å¤§å¤šæ•°é¢„æµ‹çš„åœºåˆï¼Œä¸å­˜åœ¨å®Œç¾åˆ†ç±»å™¨ã€‚<br>0.5&lt;AUC&lt;1ï¼Œä¼˜äºéšæœºçŒœæµ‹ã€‚è¿™ä¸ªåˆ†ç±»å™¨ï¼ˆæ¨¡å‹ï¼‰å¦¥å–„è®¾å®šé˜ˆå€¼çš„è¯ï¼Œèƒ½æœ‰é¢„æµ‹ä»·å€¼ã€‚<br>æœ€ç»ˆAUCçš„èŒƒå›´åœ¨[0.5, 1]ä¹‹é—´ï¼Œå¹¶ä¸”è¶Šæ¥è¿‘1è¶Šå¥½</p>
<p>AUCè®¡ç®—apiï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.metrics import roc_auc_score</span><br><span class="line">sklearn.metrics.roc_auc_score(y_true, y_score)</span><br><span class="line">è®¡ç®—ROCæ›²çº¿é¢ç§¯ï¼Œå³AUCå€¼</span><br><span class="line">y_true:æ¯ä¸ªæ ·æœ¬çš„çœŸå®ç±»åˆ«ï¼Œå¿…é¡»ä¸º0(åä¾‹),1(æ­£ä¾‹)æ ‡è®°</span><br><span class="line">y_score:æ¯ä¸ªæ ·æœ¬é¢„æµ‹çš„æ¦‚ç‡å€¼</span><br><span class="line"></span><br><span class="line">0.5~1ä¹‹é—´ï¼Œè¶Šæ¥è¿‘äº1çº¦å¥½</span><br><span class="line">y_test = np.where(y_test &gt; 2.5, 1, 0)</span><br><span class="line"></span><br><span class="line">print(&quot;AUCæŒ‡æ ‡ï¼š&quot;, roc_auc_score(y_test, lr.predict(x_test)))</span><br></pre></td></tr></table></figure>

<p>AUCåªèƒ½ç”¨æ¥è¯„ä»·äºŒåˆ†ç±»<br>AUCéå¸¸é€‚åˆè¯„ä»·æ ·æœ¬ä¸å¹³è¡¡ä¸­çš„åˆ†ç±»å™¨æ€§èƒ½.</p>
<h4 id="4-5-æ¨¡å‹ä¿å­˜å’ŒåŠ è½½"><a href="#4-5-æ¨¡å‹ä¿å­˜å’ŒåŠ è½½" class="headerlink" title="4.5 æ¨¡å‹ä¿å­˜å’ŒåŠ è½½"></a>4.5 æ¨¡å‹ä¿å­˜å’ŒåŠ è½½</h4><p>å½“è®­ç»ƒæˆ–è€…è®¡ç®—å¥½ä¸€ä¸ªæ¨¡å‹ä¹‹åï¼Œé‚£ä¹ˆå¦‚æœåˆ«äººéœ€è¦æˆ‘ä»¬æä¾›ç»“æœé¢„æµ‹ï¼Œå°±éœ€è¦ä¿å­˜æ¨¡å‹ï¼ˆä¸»è¦æ˜¯ä¿å­˜ç®—æ³•çš„å‚æ•°ï¼‰</p>
<p>sklearnæ¨¡å‹çš„ä¿å­˜å’ŒåŠ è½½API:(æ¨¡å‹åºåˆ—åŒ–åˆ°æœ¬åœ°)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.externals import joblib</span><br><span class="line">ä¿å­˜ï¼šjoblib.dump(rf, &#x27;test.pkl&#x27;)</span><br><span class="line">åŠ è½½ï¼šestimator = joblib.load(&#x27;test.pkl&#x27;)</span><br></pre></td></tr></table></figure>

<p>ä¿å­˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> ä½¿ç”¨çº¿æ€§æ¨¡å‹è¿›è¡Œé¢„æµ‹</span><br><span class="line"> ä½¿ç”¨æ­£è§„æ–¹ç¨‹æ±‚è§£</span><br><span class="line">lr = LinearRegression()</span><br><span class="line">lr.fit(x_train, y_train)</span><br><span class="line">ä¿å­˜è®­ç»ƒå®Œç»“æŸçš„æ¨¡å‹</span><br><span class="line">joblib.dump(lr, &quot;test.pkl&quot;)</span><br></pre></td></tr></table></figure>

<p>åŠ è½½ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">é€šè¿‡å·²æœ‰çš„æ¨¡å‹å»é¢„æµ‹æˆ¿ä»·</span><br><span class="line">model = joblib.load(&quot;test.pkl&quot;)</span><br><span class="line">print(&quot;ä»æ–‡ä»¶åŠ è½½è¿›æ¥çš„æ¨¡å‹é¢„æµ‹æˆ¿ä»·çš„ç»“æœï¼š&quot;, std_y.inverse_transform(model.predict(x_test)))</span><br></pre></td></tr></table></figure>


<h4 id="4-6-æ— ç›‘ç£å­¦ä¹ -K-means"><a href="#4-6-æ— ç›‘ç£å­¦ä¹ -K-means" class="headerlink" title="4.6 æ— ç›‘ç£å­¦ä¹  K-means"></a>4.6 æ— ç›‘ç£å­¦ä¹  K-means</h4><p>æ²¡æœ‰ç›®æ ‡å€¼ - æ— ç›‘ç£å­¦ä¹ </p>
<p>èšç±»ï¼šK-means(Kå‡å€¼èšç±»)<br>é™ç»´ï¼šPCA</p>
<p>K-meansèšç±»æ­¥éª¤ï¼š<br>1ã€éšæœºè®¾ç½®Kä¸ªç‰¹å¾ç©ºé—´å†…çš„ç‚¹ä½œä¸ºåˆå§‹çš„èšç±»ä¸­å¿ƒ<br>2ã€å¯¹äºå…¶ä»–æ¯ä¸ªç‚¹è®¡ç®—åˆ°Kä¸ªä¸­å¿ƒçš„è·ç¦»ï¼ŒæœªçŸ¥çš„ç‚¹é€‰æ‹©æœ€è¿‘çš„ä¸€ä¸ªèšç±»ä¸­å¿ƒç‚¹ä½œä¸ºæ ‡è®°ç±»åˆ«<br>3ã€æ¥ç€å¯¹ç€æ ‡è®°çš„èšç±»ä¸­å¿ƒä¹‹åï¼Œé‡æ–°è®¡ç®—å‡ºæ¯ä¸ªèšç±»çš„æ–°ä¸­å¿ƒç‚¹ï¼ˆå¹³å‡å€¼ï¼‰<br>4ã€å¦‚æœè®¡ç®—å¾—å‡ºçš„æ–°ä¸­å¿ƒç‚¹ä¸åŸä¸­å¿ƒç‚¹ä¸€æ ·ï¼Œé‚£ä¹ˆç»“æŸï¼Œå¦åˆ™é‡æ–°è¿›è¡Œç¬¬äºŒæ­¥è¿‡ç¨‹</p>
<p>K-è¶…å‚æ•°<br>1ï¼‰çœ‹éœ€æ±‚ï¼Œè¦åˆ†ä¸ºå¤šå°‘å †<br>2ï¼‰è°ƒèŠ‚è¶…å‚æ•°</p>
<p>apiï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sklearn.cluster.KMeans(n_clusters=8,init=â€˜k-means++â€™)</span><br><span class="line">k-meansèšç±»</span><br><span class="line">n_clusters:å¼€å§‹çš„èšç±»ä¸­å¿ƒæ•°é‡ï¼Œkå€¼</span><br><span class="line">init:åˆå§‹åŒ–æ–¹æ³•ï¼Œé»˜è®¤ä¸º&#x27;k-means ++â€™</span><br><span class="line">labels_:é»˜è®¤æ ‡è®°çš„ç±»å‹ï¼Œå¯ä»¥å’ŒçœŸå®å€¼æ¯”è¾ƒï¼ˆä¸æ˜¯å€¼æ¯”è¾ƒï¼‰</span><br><span class="line"></span><br><span class="line">cust = data[:500]</span><br><span class="line">km = KMeans(n_clusters=4)</span><br><span class="line">km.fit(cust)</span><br><span class="line">pre = km.predict(cust)</span><br></pre></td></tr></table></figure>

<p>Kmeansæ€§èƒ½è¯„ä¼°æŒ‡æ ‡ï¼š<br>è½®å»“ç³»æ•°ï¼Œç±»ä¼¼è®¾è®¡æ¨¡å¼ä¸­çš„é«˜å†…èšä½è€¦åˆã€‚<br>å†…éƒ¨è·ç¦»æœ€å°åŒ–ï¼Œå¤–éƒ¨è·ç¦»æœ€å¤§åŒ–ã€‚<br><code>SCi = (bi - ai)/max(bi,ai)</code><br>å¯¹äºæ¯ä¸ªç‚¹i ä¸ºå·²èšç±»æ•°æ®ä¸­çš„æ ·æœ¬ ï¼Œb_i ä¸ºi åˆ°å…¶å®ƒæ—ç¾¤çš„æ‰€æœ‰æ ·æœ¬çš„è·ç¦»æœ€å°å€¼ï¼Œa_i ä¸ºi åˆ°æœ¬èº«ç°‡çš„è·ç¦»å¹³å‡å€¼ã€‚æœ€ç»ˆè®¡ç®—å‡ºæ‰€æœ‰çš„æ ·æœ¬ç‚¹çš„è½®å»“ç³»æ•°å¹³å‡å€¼</p>
<p>å¦‚æœb_i&gt;&gt;a_i:è¶‹è¿‘äº1æ•ˆæœè¶Šå¥½ï¼Œ b_i&lt;&lt;a_i:è¶‹è¿‘äº-1ï¼Œæ•ˆæœä¸å¥½ã€‚è½®å»“ç³»æ•°çš„å€¼æ˜¯ä»‹äº [-1,1] ï¼Œè¶Šè¶‹è¿‘äº1ä»£è¡¨å†…èšåº¦å’Œåˆ†ç¦»åº¦éƒ½ç›¸å¯¹è¾ƒä¼˜ã€‚</p>
<p>è½®å»“ç³»æ•°apiï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sklearn.metrics.silhouette_score(X, labels)</span><br><span class="line">è®¡ç®—æ‰€æœ‰æ ·æœ¬çš„å¹³å‡è½®å»“ç³»æ•°</span><br><span class="line">Xï¼šç‰¹å¾å€¼</span><br><span class="line">labelsï¼šè¢«èšç±»æ ‡è®°çš„ç›®æ ‡å€¼</span><br></pre></td></tr></table></figure>

<p>K-meansä¼˜ç¼ºç‚¹ï¼š<br>ç‰¹ç‚¹åˆ†æï¼šé‡‡ç”¨è¿­ä»£å¼ç®—æ³•ï¼Œç›´è§‚æ˜“æ‡‚å¹¶ä¸”éå¸¸å®ç”¨<br>ç¼ºç‚¹ï¼šå®¹æ˜“æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜è§£(å¤šæ¬¡èšç±»)<br>åº”ç”¨åœºæ™¯ï¼šæ²¡æœ‰ç›®æ ‡å€¼çš„åˆ†ç±»ï¼Œåšåœ¨åˆ†ç±»ä¹‹å‰ã€‚</p>
<h4 id="4-7-æ€»ç»“"><a href="#4-7-æ€»ç»“" class="headerlink" title="4.7 æ€»ç»“"></a>4.7 æ€»ç»“</h4><p>1.çº¿æ€§å›å½’ - çº¿æ€§æ¨¡å‹ - çº¿æ€§å…³ç³»ï¼šy&#x3D;w1x1+w2x2+â€¦+wnxn+bã€‚æ„å»ºæŸå¤±å‡½æ•°-æœ€å°äºŒä¹˜æ³•&#x2F;å‡æ–¹è¯¯å·®ã€‚ä¼˜åŒ–æŸå¤±ï¼šæ­£è§„æ–¹ç¨‹ï¼ˆçŸ©é˜µç›¸ä¹˜ç›´æ¥æ±‚è§£ï¼‰ï¼Œæ¢¯åº¦ä¸‹é™ï¼ˆä¸æ–­è¯•é”™ï¼Œä¸æ–­è¿­ä»£ï¼‰ã€‚æ¨¡å‹è¯„ä¼°ï¼šå‡æ–¹è¯¯å·®ã€‚<br>2.è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆï¼Œè¿‡æ‹Ÿåˆï¼šæ¨¡å‹è¿‡äºå¤æ‚ - æ­£åˆ™åŒ–ï¼ˆç”¨L2ï¼‰ã€‚æ¬ æ‹Ÿåˆï¼šæ¨¡å‹è¿‡äºç®€å• - å¢åŠ æ•°æ®ã€ç‰¹å¾ã€‚<br>3.å²­å›å½’ï¼Œæ­£åˆ™åŒ–åŠ›åº¦å¯¹æ¨¡å‹å‚æ•°çš„å½±å“ã€‚<br>4.é€»è¾‘å›å½’ï¼Œç”¨äºåˆ†ç±»ï¼Œè¾“å…¥æ˜¯çº¿æ€§å›å½’çš„è¾“å‡ºï¼Œæ”¾å…¥æ¿€æ´»å‡½æ•°sigmoidä¸­ã€‚æŸå¤±å‡½æ•°ï¼šå¯¹æ•°ä¼¼ç„¶å‡½æ•°ã€‚ä¼˜åŒ–æŸå¤±ï¼šæ¢¯åº¦ä¸‹é™ã€‚äºŒåˆ†ç±»çš„æ¨¡å‹è¯„ä¼°ï¼šå¬å›ç‡ï¼Œæ ·æœ¬ä¸å‡è¡¡æ—¶ä½¿ç”¨AUCæŒ‡æ ‡ï¼Œæ¥è¿‘0.5å°±ä¸å¥½ã€‚<br>5.ä¿å­˜å’ŒåŠ è½½æ¨¡å‹<br>6.K-Meansï¼Œèšç±»çš„æ­¥éª¤ï¼Œæ¨¡å‹è¯„ä¼°ï¼šç”¨è½®å»“ç³»æ•°[-1,1]</p>
<h2 id="çœ‹å›¾è¯´è¯"><a href="#çœ‹å›¾è¯´è¯" class="headerlink" title="çœ‹å›¾è¯´è¯"></a>çœ‹å›¾è¯´è¯</h2><p>ä»€ä¹ˆæ˜¯ç‰¹å¾ï¼šå›¾åƒçš„åƒç´ ã€åŒºåŸŸã€‚å•è¯çš„ç‰¹æ€§ï¼Œç­‰å¯ä»¥è¢«åŒºåˆ«äºå…¶ä»–å›¾åƒçš„åœ°æ–¹ï¼Œå¹¶ä¸”å¯ä»¥ç»è¿‡å‘é‡åŒ–çš„è®¡ç®—è¢«æ¨¡å‹æ‰€è·å–ã€‚</p>
<p>CNNæ ¸å‡½æ•° - å¾—åˆ°å‘é‡ä¸€ç‰‡åŒºåŸŸçš„ç›¸å…³ç‰¹æ€§<br>ç¼–ç å™¨ï¼šä¾‹å¦‚Faster-RCNNï¼Œyoloï¼ŒæŠŠæ–‡æœ¬æˆ–å›¾åƒçš„ç‰¹å¾åšå‘é‡åŒ–çš„å¤„ç†<br>è§£ç å™¨ï¼šCNN-LSTMã€‚Transformerï¼ŒæŠŠå‘é‡åŒ–å¤„ç†åçš„ç‰¹å¾åšè¯­ä¹‰è¯†åˆ«ã€åˆ†å‰²ç­‰æ“ä½œï¼Œå¹¶è¾“å‡ºã€‚</p>
<p>å›¾ç‰‡å‘é‡åŒ–ã€ç¼–ç å™¨ï¼ˆç”Ÿæˆè®¡ç®—æœºå¯ä»¥ç†è§£çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼‰ã€è§£ç å™¨ã€æ–‡æœ¬å‘é‡åŒ–</p>
<p>çœ‹å›¾è¯´è¯ï¼šç”¨ç¼–ç å™¨Faster-RCNNä»å›¾åƒä¸­æå–å¯¹è±¡ï¼Œç”¨è§£ç å™¨ç”Ÿæˆä¸€å¥è¯å›¾åƒè¡¨è¾¾</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Sweetwater"
      src="/images/head.gif">
  <p class="site-author-name" itemprop="name">Sweetwater</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">42</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sweetwater</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
